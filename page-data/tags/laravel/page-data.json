{"componentChunkName":"component---src-templates-tag-js","path":"/tags/laravel/","result":{"data":{"site":{"siteMetadata":{"title":"TOMOSIA VIETNAM","author":"「共に」「幸せ」「灯す」","labels":[{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"rails","tech":"Ruby on Rails","name":"M20.8848485 15.8107143v1.1635714h1.9818182c.4060606 0 1.1030303-.315 1.1272727-1.19571427v-.45c0-.75214286-.5818182-1.1957143-1.1272727-1.1957143h-.9878788v-.54h1.9575757v-1.17h-1.8787878c-.4848485 0-1.1333334.42428573-1.1333334 1.215v.405c0 .7907143.6424243 1.1957143 1.1333334 1.1957143 1.3636363.00642857-.3272728 0 .9333333 0v.56571428l-2.0060606.0064286zm-10.6181818-.28285716s1.060606-.09642857 1.060606-1.5492857c0-1.45285715-1.2848485-1.58785715-1.2848485-1.58785715H7.72727273v4.5835714H8.8909091v-1.1057143l1.0060606 1.1057142h1.7212121l-1.3515151-1.4464286zm-.44848488-.93857143H8.8909091v-1.0478571h.93333332s.26060608.1028572.26060608.5207143c0 .4178572-.26666668.5271429-.26666668.5271429zM14.2 12.4228572h-1.1818182c-.8424242 0-1.1272727.81-1.1272727 1.1957143v3.35571427h1.1818182v-.8035714h1.1090909v.8035714h1.1454545V13.6185715c0-.97714286-.8363636-1.1957143-1.1272727-1.1957143zm-.0181818 2.44928572h-1.1151515V13.76s0-.2507143.3696969-.2507143h.4060606c.3272728 0 .3333334.2507143.3333334.2507143v1.11214286h.0060606zm1.6848485-2.44928573h1.230303v4.5514285h-1.230303v-4.5514285zm2.9575757 3.375v-3.375H17.6v4.5514285h2.8787879v-1.1764285h-1.6545455zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76969696.16714284-3.93939393 1.87071427-5.2121212 4.12071427C.6 15.0714285.4242424 16.9742857.4242424 16.9742857zM10.4 9.0607143L10.4242424 8.63c-.0545454-.03214286-.2060606-.1092857-.58787876-.225l-.02424243.4242857c.2.0707143.3939394.14785716.5878788.2314286zM9.82424242 10.42357143l-.02424242.405c.2.00642857.4.03214286.6.07714286l.0242424-.3985715c-.2060606-.045-.4060606-.0707143-.59999998-.0835715zm-2.24242424-2.0057143h.06060606l-.12121212-.39214284c-.1878788 0-.38181818.0128571-.58181818.0385714l.1151515.3792857c.1757576-.0192857.35151517-.0257143.52727274-.0257143zm.2909091 2.3657143l.13939393.44357143c.1757576-.09.3515152-.16714286.5272728-.225l-.1333333-.42428572c-.2060606.06428572-.3818182.135-.5333333.2057143zM5.1212121 9.09285713l-.27272727-.44357142c-.15151515.0835715-.3090909.1735715-.47272727.2764286l.27878787.45c.15757576-.1028571.3090909-.1992857.46666667-.2828571zm1.24242424 2.89285716l.2909091.4628571c.1030303-.1607143.22424242-.3085715.35757575-.4564286L6.7393939 11.555c-.13939394.135-.26666667.28285714-.37575758.4307143zm-.87878788 2.07l.4909091.4114285C6 14.2164285 6.04242424 13.9657143 6.1030303 13.715l-.43636363-.36642857c-.07878788.23785714-.13333334.47571428-.1818182.70714286zM2.830303 11.0021428L2.4 10.60357142c-.15757576.1607143-.3090909.32142858-.44848485.48214287L2.41818182 11.51c.12727273-.17357143.26666666-.34714286.4121212-.50785714zM1 13.8757143l-.6969697-.27c-.1151515.27642856-.24242424.59785713-.3030303.77142856l.6969697.27C.77575758 14.42857143.9030303 14.11357143 1 13.8757143zm4.3939394 1.81285713c.0121212.34071428.04242424.61714286.07272727.81L6.1939394 16.775c-.05454546-.2507143-.10909092-.53357143-.14545455-.8357143l-.65454546-.25071427z","size":20,"color":"#CC0000"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"#777BB4"},{"tag":"laravel","tech":"Laravel","name":"M23.644 5.43c.009.032.014.065.014.099v5.15c0 .135-.073.26-.189.326l-4.323 2.49v4.934c0 .135-.072.258-.188.326L9.931 23.95c-.021.012-.043.02-.066.027-.008.002-.016.008-.024.01-.063.018-.13.018-.192 0-.011-.002-.02-.008-.029-.012-.021-.008-.043-.014-.063-.025L.534 18.755c-.117-.068-.189-.191-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.021.014-.032.006-.02.014-.04.023-.058.004-.013.015-.022.023-.033.012-.016.021-.031.033-.045.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034h.001L5.044.05c.115-.067.259-.067.375 0l4.512 2.597h.002c.015.01.027.021.041.033.012.009.025.018.037.027.013.014.021.029.033.045.008.011.02.021.025.033.011.019.017.038.024.058.003.011.011.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.005-.066.014-.098.003-.011.009-.021.013-.032.007-.02.014-.039.024-.059.007-.012.018-.021.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.028.014-.011.026-.023.041-.032h.001l4.513-2.598c.116-.067.259-.067.375 0l4.513 2.598c.016.01.027.021.042.031.012.01.025.018.036.028.013.014.022.029.034.044.008.012.019.021.024.033.011.02.018.039.024.059.006.011.012.022.015.033zm-.74 5.032V6.179l-1.578.908-2.182 1.256v4.283l3.76-2.164zm-4.511 7.75v-4.287l-2.146 1.225-6.127 3.498v4.326l8.273-4.762zM1.095 3.624v14.588l8.273 4.762v-4.326l-4.322-2.445-.002-.003h-.002c-.014-.01-.025-.021-.04-.031-.011-.01-.024-.018-.035-.027l-.001-.002c-.013-.012-.021-.025-.031-.039-.01-.012-.021-.023-.028-.037h-.002c-.008-.014-.013-.031-.02-.047-.006-.016-.014-.027-.018-.043-.004-.018-.006-.037-.008-.057-.002-.014-.006-.027-.006-.041V5.789l-2.18-1.257-1.578-.908zM5.231.81l-3.76 2.164 3.76 2.164 3.758-2.164L5.231.81zm1.956 13.505l2.182-1.256V3.624l-1.58.909-2.182 1.256v9.435l1.58-.909zM18.769 3.364l-3.76 2.164 3.76 2.163 3.759-2.164-3.759-2.163zm-.376 4.979l-2.182-1.256-1.579-.908v4.283l2.182 1.256 1.579.908V8.343zm-8.65 9.654l5.514-3.148 2.756-1.572-3.757-2.163-4.324 2.489-3.941 2.27 3.752 2.124z","size":20,"color":"#FF2D20"},{"tag":"cakephp","tech":"CakePHP","name":"M0 13.875v3.745c0 2.067 5.37 3.743 12 3.743V17.62c-6.63 0-12-1.68-12-3.743v-.002zm21.384 2.333L12 13.875v3.745l9.384 2.333C23.02 19.313 24 18.503 24 17.62v-3.745c0 .882-.98 1.692-2.616 2.333zM12 10.133v3.742c-6.627 0-12-1.677-12-3.744V6.38c0-2.064 5.37-3.743 12-3.743 6.625 0 12 1.68 12 3.744v3.75c0 .883-.98 1.69-2.616 2.334L12 10.13v.003z","size":20,"color":"#D33C43"},{"tag":"swift","tech":"Swift","name":"M21.984 16.348c.056-.112.056-.224.112-.336 1.346-5.272-1.851-11.44-7.347-14.693 2.412 3.253 3.365 7.122 2.524 10.599-.056.28-.168.617-.28.897a5.173 5.173 0 0 1-.45-.28S11.104 9.17 5.273 3.282c-.169-.168 3.14 4.71 6.841 8.58-1.738-1.01-6.673-4.542-9.758-7.403.337.617.842 1.234 1.346 1.851 2.58 3.309 5.945 7.346 9.983 10.43-2.86 1.74-6.842 1.851-10.88 0-1.01-.448-1.85-1.009-2.804-1.682 1.682 2.636 4.318 5.048 7.459 6.337 3.757 1.627 7.57 1.515 10.318 0h.057c.112-.056.224-.112.336-.224 1.346-.673 3.982-1.402 5.44 1.402.392.785 1.121-2.86-1.626-6.225z","size":20,"color":"#FA7343"},{"tag":"ios","tech":"iOS","name":"M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z","size":20,"color":"#403f3f"},{"tag":"kotlin","tech":"Kotlin","name":"M1.3 24l11.3-11.5L24 24zM0 0h12L0 12.5zM13.4 0L0 14v10l12-12L24 0z","size":20,"color":"#0095D5"},{"tag":"android","tech":"Android","name":"M24 19H0a13.6 13.6 0 0 1 2.21-6.07A11.2 11.2 0 0 1 5.87 9.4l.41-.23-2.02-3.41a.51.51 0 0 1 .17-.7.5.5 0 0 1 .69.18l2.08 3.5a12.62 12.62 0 0 1 4.84-.9 12.2 12.2 0 0 1 4.75.9l2.07-3.5a.5.5 0 0 1 .7-.17.51.51 0 0 1 .16.7L17.7 9.19l.5.28a11.38 11.38 0 0 1 3.63 3.62A14.48 14.48 0 0 1 24 19zm-7.5-4.48a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1zm-11 0a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1z","size":20,"color":"#3DDC84"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"#403f3f"},{"tag":"aws","tech":"AWS","name":"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z","size":20,"color":"#232F3E"},{"tag":"instagram","tech":"Instagram","name":"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z","size":20,"color":"#E4405F"},{"tag":"facebook","tech":"Facebook","name":"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z","size":20,"color":"#1877F2"},{"tag":"gitlab ci","tech":"Gitlab CI","name":"M4.844.904a1.007 1.007 0 00-.955.692l-2.53 7.783c0 .007-.005.012-.007.02L.07 13.335a1.437 1.437 0 00.522 1.607l11.072 8.045a.566.566 0 00.67-.004l11.074-8.04a1.436 1.436 0 00.522-1.61l-1.26-3.867a.547.547 0 00-.031-.104l-2.526-7.775a1.004 1.004 0 00-.957-.684.987.987 0 00-.949.69l-2.406 7.408H8.203l-2.41-7.408a.987.987 0 00-.943-.69h-.006zm-.006 1.42l2.174 6.678H2.674l2.164-6.678zm14.328 0l2.168 6.678h-4.342l2.174-6.678zm-10.594 7.81h6.862l-2.15 6.618L12 20.693 8.572 10.135zm-5.515.005h4.322l3.086 9.5-7.408-9.5zm13.568 0h4.326l-6.703 8.588-.709.914 2.959-9.108.127-.394zM2.1 10.762l6.978 8.947-7.818-5.682a.305.305 0 01-.112-.341l.952-2.924zm19.8 0l.952 2.922a.305.305 0 01-.11.341v.002l-7.82 5.68.025-.035 6.953-8.91Z","size":20,"color":"#FCA121"}]}},"allMarkdownRemark":{"totalCount":13,"edges":[{"node":{"excerpt":"Laravel http client allowing you to quickly make outgoing HTTP requests to communicate with other web applications. Bài viết này mình sẽ giới thiệu về http client phiên bản laravel 8, dùng để tạo HTTP…","snippet":"<div class=\"custom-block-body\"><p>Laravel http client allowing you to quickly make outgoing HTTP requests to communicate with other web applications.</p></div>","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Laravel http client allowing you to quickly make outgoing HTTP requests to communicate with other web applications.</p></div></div>\n<p>Bài viết này mình sẽ giới thiệu về http client phiên bản laravel 8, dùng để tạo HTTP request giúp các web application giao tiếp với nhau.</p>\n<h2>1. Http là gì?</h2>\n<p>HTTP (Hyper Text Transfer Protocol) là một giao thức truyền siêu văn bản (text, image, sound bar, video…) nằm ở tầng ứng dụng (Application layer) của tập giao thức TCP/IP, sử dụng để truyền nhận dữ liệu giữa các hệ thống phân tán thông qua internet, cụ thể giao thức hoạt động theo mô hình Client-Server bằng cách thực hiện các quá trình request-response giữa các hệ thống máy tính khác nhau. Giao thức HTTP quy định cấu trúc của các gói tin và cách thức truyền nhận dữ liệu giữa client và server thông qua môi trường internet. HTTP hiện là nền tảng truyền dẫn dữ liệu của ứng dụng duyệt web hiện nay.</p>\n<h2>2. Http client là gì</h2>\n<p>Khi ta truy cập một website và tương tác với các thành phần của website để gửi thông tin thì bản chất của việc đó là browser thay ta gửi đi các HTTP requests. Khi đó browser mà chúng ta đang dùng đóng vai trò một HTTP client.Bất kỳ phần mềm nào có thể gửi HTTP request và nhận được response từ HTTP server thì đều là HTTP client cả.</p>\n<h2>3. Create http client với PHP</h2>\n<p>Guzzle là một PHP HTTP client giúp gửi các HTTP request giao tiếp với các web application khác trở lên đơn giản.</p>\n<h2>4. Laravel HTTP client</h2>\n<p>Laravel http client sử dụng Guzzle http client giúp việc gửi http request để giao tiếp với các ứng dụng web khác đơn giản dễ dàng. Trước khi sử dụng cần chắc chắn rằng bạn đã cài Guzzle package như để 1 dependency của ứng dụng. Ở các phiên bản laravel mới mặc định package này đã được cài sẵn.</p>\n<h2>5. Tạo Http request với Laravel http client</h2>\n<p>Để tạo http request có thể sử dụng các phương thức, get, post, put, patch, delete được cung cấp sẵn bởi http facade</p>\n<h3>1. Http get request</h3>\n<p>Tạo get request đến trang <a href=\"http://example.com\">http://example.com</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Http</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Tạo get request kèm theo query string, giống như truy cập đến trang <a href=\"http://example.com/users?name=huunv&#x26;page=1\">http://example.com/users?name=huunv&#x26;page=1</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Huunv'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'page'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>2. Http post request</h3>\n<p>Sử dụng method post của facade http, dữ liệu gửi lên là một mảng truyền vào ở đối số thứ 2 của hàm, mặc định dữ liệu sẽ gửi theo application/json content type.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Http</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Steve'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Network Administrator'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo Form URL Encoded Requests, gửi dữ liệu application/x-www-form-urlencoded content type.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">asForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Sara'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Privacy Consultant'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>3. Http put, patch request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users/1'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Steve'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Network Administrator'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users/1'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Steve'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Network Administrator'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4. Http delete request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users/1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>5. Add header to http request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'X-First'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'foo'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'X-Second'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'bar'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Taylor'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>6. Create http request với authentication</h3>\n<p>Basic authentication...</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withBasicAuth</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'taylor@laravel.com'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'secret'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Digest authentication...</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withDigestAuth</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'taylor@laravel.com'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'secret'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Authentication with beaer token</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withToken</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'token'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>7. Set timeout http request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>8. Guzzle Options</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'debug'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>9. Dumping Requests</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">return</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">dd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>10. Http response</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// Convert response from http request to string</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Convert response from http request to array</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span><span class=\"token operator\">|</span>mixed<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Convert response from http request to collection</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> Illuminate\\<span class=\"token package\">Support<span class=\"token punctuation\">\\</span>Collection</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> int<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response = 200</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=200 and &lt; 300</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">successful</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=400</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">failed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=500</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">serverError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=400 and &lt; 500</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">clientError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The header from the response</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$header</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The headers from the response</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Lời kết</h2>\n<p>Cảm ơn mọi người đã dành thời gian đọc bài viết của mình. Hi vọng bài viết giúp ích được cho mọi người khi làm các tính năng liên quan đến việc giao tiếp giữa các web application với nhau.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Huunv </div><div class=\"custom-block-body\"></div></div>","id":"902458ab-2e3d-56e5-931f-4d0689135c42","frontmatter":{"title":"Laravel Http Client","date":"07-04-2021","tags":["php","laravel"]},"fields":{"slug":"/laravel-http-client/","readingTime":{"text":"4 min read"}}}},{"node":{"excerpt":"Laravel Mix là một công cụ để biên dịch và tối ưu hóa nội dung trong dự án Laravel. Nó tương tự như một công cụ xây dựng như gulp, Grunt,... Với những dự án nhỏ thì có vẻ bạn cảm thấy không có gì khác…","snippet":"<div class=\"custom-block-body\"><p>Laravel Mix l&#xE0; m&#x1ED9;t c&#xF4;ng c&#x1EE5; &#x111;&#x1EC3; bi&#xEA;n d&#x1ECB;ch v&#xE0; t&#x1ED1;i &#x1B0;u h&#xF3;a n&#x1ED9;i dung trong d&#x1EF1; &#xE1;n Laravel. N&#xF3; t&#x1B0;&#x1A1;ng t&#x1EF1; nh&#x1B0; m&#x1ED9;t c&#xF4;ng c&#x1EE5; x&#xE2;y d&#x1EF1;ng nh&#x1B0; gulp, Grunt,... V&#x1EDB;i nh&#x1EEF;ng d&#x1EF1; &#xE1;n nh&#x1ECF; th&#xEC; c&#xF3; v&#x1EBB; b&#x1EA1;n c&#x1EA3;m th&#x1EA5;y kh&#xF4;ng c&#xF3; g&#xEC; kh&#xE1;c bi&#x1EC7;t l&#x1EAF;m, nh&#x1B0;ng v&#x1EDB;i nh&#x1EEF;ng d&#x1EF1; &#xE1;n l&#x1EDB;n th&#xEC; &#x111;i&#x1EC1;u n&#xE0;y th&#x1EF1;c s&#x1EF1; c&#x1EA7;n thi&#x1EBF;t, b&#x1EA1;n s&#x1EBD; th&#x1EA5;y r&#xF5; &#x111;&#x1B0;&#x1EE3;c s&#x1EF1; kh&#xE1;c bi&#x1EC7;t khi ch&#xFA;ng ta t&#x1ED1;i &#x1B0;u n&#xF3;. Vi&#x1EC7;c t&#x1ED1;i &#x1B0;u n&#xE0;y s&#x1EBD; gi&#xFA;p ch&#xFA;ng ta gi&#x1EA3;m k&#xED;ch th&#x1B0;&#x1EDB;c l&#x1B0;u tr&#x1EEF; v&#xE0; t&#x1ED1;i &#x1B0;u b&#x103;ng th&#xF4;ng. Vi&#x1EC7;c l&#xE0;m n&#xE0;y s&#x1EBD; gi&#xFA;p trang web c&#x1EE7;a ch&#xFA;ng ta t&#x1EA3;i nhanh h&#x1A1;n, mang t&#x1EDB;i ng&#x1B0;&#x1EDD;i d&#xF9;ng c&#xF3; tr&#x1EA3;i nghi&#x1EC7;m t&#x1ED1;t h&#x1A1;n. Laravel Mix &#x111;&#x1B0;&#x1EE3;c x&#xE2;y d&#x1EF1;ng d&#xE0;nh ri&#xEA;ng cho Laravel nh&#x1B0;ng c&#x169;ng c&#xF3; th&#x1EC3; &#x111;&#x1B0;&#x1EE3;c s&#x1EED; d&#x1EE5;ng b&#xEA;n ngo&#xE0;i nh&#x1B0; m&#x1ED9;t g&#xF3;i npm.</p></div>","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Laravel Mix là một công cụ để biên dịch và tối ưu hóa nội dung trong dự án Laravel. Nó tương tự như một công cụ xây dựng như gulp, Grunt,... Với những dự án nhỏ thì có vẻ bạn cảm thấy không có gì khác biệt lắm, nhưng với những dự án lớn thì điều này thực sự cần thiết, bạn sẽ thấy rõ được sự khác biệt khi chúng ta tối ưu nó. Việc tối ưu này sẽ giúp chúng ta giảm kích thước lưu trữ và tối ưu băng thông. Việc làm này sẽ giúp trang web của chúng ta tải nhanh hơn, mang tới người dùng có trải nghiệm tốt hơn. Laravel Mix được xây dựng dành riêng cho Laravel nhưng cũng có thể được sử dụng bên ngoài như một gói npm.</p></div></div>\n<p>Nói ngắn gọn: Laravel Mix quản lý tất cả tài nguyên (assets) như img, css, js trong dự án của bạn, đồng thời nó dựa trên base là webpack build tất cả các file css, js pre-processors như SCSS, SASS thành css, chuyển ES6 thành ES5 (trình duyệt không hiểu cú pháp ES6).</p>\n<h2>I. Cài đặt Laravel Mix</h2>\n<h3>Với Laravel</h3>\n<p>Nếu bạn đang sử dụng Laravel 5.4 trở về sau, thì mix đã được cài đặt. Tất cả những gì bạn phải làm là chạy <code class=\"language-text\">npm install</code>.</p>\n<h3>Với các dự án độc lập</h3>\n<p>Từ gốc ứng dụng của bạn, hãy chạy các commands sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init -y\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> laravel-mix --save-dev\n<span class=\"token function\">cp</span> node_modules/laravel-mix/setup/webpack.mix.js ./</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Trong file <code class=\"language-text\">package.json</code> hãy thêm đoạn sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run development\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"development\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=development node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run development -- --watch\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"hot\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=development node_modules/webpack-dev-server/bin/webpack-dev-server.js --inline --hot --config=node_modules/laravel-mix/setup/webpack.config.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run production\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"production\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=production node_modules/webpack/bin/webpack.js --no-progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>II. Configure Laravel Mix</h2>\n<p>Chúng ta có thể cấu hình và gọi các phương thức khác nhau để biên dịch các tệp CSS, JS và đưa vào một thư mục public. Các file được tạo ra bao gồm các file đã cấu hình bên trong tệp <code class=\"language-text\">webpack.mix.js</code>. Tệp tin <code class=\"language-text\">webpack.mix.js</code> sẽ nằm trong thư mục gốc của dự án Laravel. Hãy coi tệp này là cơ sở chính của bạn cho tất cả cấu hình front-end.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'laravel-mix'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">js</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/js/app.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/sass/app.scss'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nó đã được preconfigured để compile 1 file ở resources/js/app.js vào file public/js và resources/sass/app.scss vào public/css.<br>\nCó rất nhiều phương thức Mix khác và bạn có thể thấy tất cả các methods đó trong file default webpack.mix.js.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// Full API</span>\n<span class=\"token comment\">// mix.js(src, output);</span>\n<span class=\"token comment\">// mix.react(src, output); &lt;-- Identical to mix.js(), but registers React Babel compilation.</span>\n<span class=\"token comment\">// mix.preact(src, output); &lt;-- Identical to mix.js(), but registers Preact compilation.</span>\n<span class=\"token comment\">// mix.coffee(src, output); &lt;-- Identical to mix.js(), but registers CoffeeScript compilation.</span>\n<span class=\"token comment\">// mix.ts(src, output); &lt;-- TypeScript support. Requires tsconfig.json to exist in the same folder as webpack.mix.js</span>\n<span class=\"token comment\">// mix.extract(vendorLibs);</span>\n<span class=\"token comment\">// mix.sass(src, output);</span>\n<span class=\"token comment\">// mix.less(src, output);</span>\n<span class=\"token comment\">// mix.stylus(src, output);</span>\n<span class=\"token comment\">// mix.postCss(src, output, [require('postcss-some-plugin')()]);</span>\n<span class=\"token comment\">// mix.browserSync('my-site.test');</span>\n<span class=\"token comment\">// mix.combine(files, destination);</span>\n<span class=\"token comment\">// mix.babel(files, destination); &lt;-- Identical to mix.combine(), but also includes Babel compilation.</span>\n<span class=\"token comment\">// mix.copy(from, to);</span>\n<span class=\"token comment\">// mix.copyDirectory(fromDir, toDir);</span>\n<span class=\"token comment\">// mix.minify(file);</span>\n<span class=\"token comment\">// mix.sourceMaps(); // Enable sourcemaps</span>\n<span class=\"token comment\">// mix.version(); // Enable versioning.</span>\n<span class=\"token comment\">// mix.disableNotifications();</span>\n<span class=\"token comment\">// mix.setPublicPath('path/to/public');</span>\n<span class=\"token comment\">// mix.setResourceRoot('prefix/for/resource/locators');</span>\n<span class=\"token comment\">// mix.autoload({}); &lt;-- Will be passed to Webpack's ProvidePlugin.</span>\n<span class=\"token comment\">// mix.webpackConfig({}); &lt;-- Override webpack.config.js, without editing the file directly.</span>\n<span class=\"token comment\">// mix.babelConfig({}); &lt;-- Merge extra Babel configuration (plugins, etc.) with Mix's default.</span>\n<span class=\"token comment\">// mix.then(function () {}) &lt;-- Will be triggered each time Webpack finishes building.</span>\n<span class=\"token comment\">// mix.override(function (webpackConfig) {}) &lt;-- Will be triggered once the webpack config object has been fully generated by Mix.</span>\n<span class=\"token comment\">// mix.dump(); &lt;-- Dump the generated webpack config object to the console.</span>\n<span class=\"token comment\">// mix.extend(name, handler) &lt;-- Extend Mix's API with your own components.</span>\n<span class=\"token comment\">// mix.options({</span>\n<span class=\"token comment\">//   extractVueStyles: false, // Extract .vue component styling to file, rather than inline.</span>\n<span class=\"token comment\">//   globalVueStyles: file, // Variables file to be imported in every component.</span>\n<span class=\"token comment\">//   processCssUrls: true, // Process/optimize relative stylesheet url()'s. Set to false, if you don't want them touched.</span>\n<span class=\"token comment\">//   purifyCss: false, // Remove unused CSS selectors.</span>\n<span class=\"token comment\">//   terser: {}, // Terser-specific options. https://github.com/webpack-contrib/terser-webpack-plugin#options</span>\n<span class=\"token comment\">//   postCss: [] // Post-CSS options: https://github.com/postcss/postcss/blob/master/docs/plugins.md</span>\n<span class=\"token comment\">// });</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với các phương thức này, bạn có thể gói gọn nhiều nhất có thể và không cần phải lo lắng về webpack build căn bản.</p>\n<h3>Một số phương thức hay được sử dụng</h3>\n<p>Laravel có các phương thức như <code class=\"language-text\">less()</code>, <code class=\"language-text\">sass()</code>, <code class=\"language-text\">stylus()</code> để hỗ trợ compile các css pre-prosessor ra các file css mà trình duyệt có thể hiểu được. Cú pháp thực hiện như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">less</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/style.less'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">sass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/style.less'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">stylus</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/style.less'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để compile các file css thông thường thành 1 file ta dùng phương thức <code class=\"language-text\">styles()</code>, và tương tự với js ta dùng <code class=\"language-text\">scripts()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">styles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'resources/assets/css/bootstrap-datepicker.css'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'resources/assets/css/jquery.timepicker.min.css'</span>\n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/css/datetimepicker.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">scripts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n     <span class=\"token string\">'resources/assets/js/bootstrap-datepicker.js'</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">'resources/assets/js/jquery.timepicker.min.js'</span>\n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js/datetimepicker.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc chỉ đơn giản là <code class=\"language-text\">copyDirectory()</code> (copy thư mục) hay <code class=\"language-text\">copy()</code> (copy file):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">copyDirectory</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/admin'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets/admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">copy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/admin.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets/admin.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Đánh dấu phiên bản đầu ra:<br>\nTính năng này khá hay. Thông thường các trình duyệt sẽ cache các file css, js trong một khoảng thời gian. Để khắc phục điều này ta sẽ dùng phương thức <code class=\"language-text\">version()</code>. Phương thức này sẽ ép trình duyệt xóa cache và tải các file với phiên bản mới nhất. Phương thức này sẽ thêm một mã hash tại thời điểm chạy.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">js</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/js/app.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">version</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Để biết kết quả sau khi sử dụng phương thức <code class=\"language-text\">version()</code> bạn hãy tìm đến file <code class=\"language-text\">mix-manifest.json</code> trong thư mục public. Nó sẽ trông như thế này.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token string\">\"/static/js/app.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/static/js/app.js?id=8b71863dc9a7570ebc77\"</span><span class=\"token punctuation\">,</span> \n<span class=\"token string\">\"/static/css/app.css\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/static/css/app.css?id=b8a621a46db684d19bc4\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Khi sử dụng phương thức <code class=\"language-text\">version()</code> bạn cần lấy được version của laravel mix hiện tại. Laravel hỗ trợ việc này, đơn giản bạn chỉ cần gọi phương thức <code class=\"language-text\">mix()</code> trong view của mình.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{{ mix('/css/app.css') }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>III. Compiling</h2>\n<p>Sau khi configure những file cần mix trong ứng dụng của bạn, có rất nhiều commands mà chúng ta có thể chạy để có thể build file này.\nCũng giống như composer sử dụng file composer.json để quản lý các package, npm sử dụng file package để quản lý các các thư viện được sử dụng trong dự án. Một số commands cơ bản để compiling bạn có thể thấy chúng trong file package.json đã được đề cập trong phần cài đặt laravel mix.</p>\n<ul>\n<li><code class=\"language-text\">npm run dev</code> Câu lệnh này sẽ thực thi mix các file một lần.</li>\n<li><code class=\"language-text\">npm run watch</code> Câu lệnh này sẽ thực thi mix các file hiện tại và theo dõi các file cần mix (là những file trong thư mục webpack.mix.js) khi có sự thay đổi thì nó sẽ mix cho chúng ta luôn. Cái này chúng ta rất hay sử dụng trong dự án.</li>\n<li><code class=\"language-text\">npm run hot</code> Câu lệnh này thực thi tất cả các tác vụ mix nhưng vẫn active và theo dõi sự thay đổi các tài nguyên, nếu có sự thay đổi, nó thực hiện cập nhật chỉ các module có sự thay đổi, sau đó nó báo cáo với ứng dụng về sự thay đổi và cập nhật mã trong trình duyệt mà không có tải lại tài nguyên.</li>\n<li><code class=\"language-text\">npm run prod</code> Thực thi tất cả các tác vụ Mix và tối ưu (minify) các file kết quả đầu ra, khi đó bạn có thể sử dụng các kết quả để triển khai ứng dụng trên máy chủ.</li>\n</ul>\n<p>Đây là kết quả sau khi sử dung <code class=\"language-text\">npm run prod</code> trong dự án của mình.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 695px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49ac074436f05eeb4a740d86c2db28c1/83b75/laravel-mix.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABB0lEQVQY00WQWXLEIAxEfZqUAbPaCONlMl+5/406jTyVfHQ1CJBeM9WfL/jsKIslUsk8TrlodG+MgbXuI/vnoz7Ps7pzT21aPB8v/2pNkFLk2kFkw7qurDU+sB859RCC1vd91zuj2TibUrKo1bJoIXQRj5wWbGtAbwnej31GYIooVpMUUufk2axrw967DlBCqQbnbdAP+mWwHzNKcTj2iOuIeimGhCQO67dB5NC2GazF47peOM8T7/dbKUf0yS8P2aBs8qwj/69uJCDtiBdjQuCQ1Bi18KwYTSHSKFHKUor+5zSm7d3gIN1xck1lPhpx7zNrwxTzQ/h6CGX9EN4vUl646SN2rRW/45+71GGLaLoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"laravel-mix.png\"\n        title=\"laravel-mix.png\"\n        src=\"/static/49ac074436f05eeb4a740d86c2db28c1/83b75/laravel-mix.png\"\n        srcset=\"/static/49ac074436f05eeb4a740d86c2db28c1/4edbd/laravel-mix.png 175w,\n/static/49ac074436f05eeb4a740d86c2db28c1/13ae7/laravel-mix.png 350w,\n/static/49ac074436f05eeb4a740d86c2db28c1/83b75/laravel-mix.png 695w\"\n        sizes=\"(max-width: 695px) 100vw, 695px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>IV. Kết luận</h2>\n<p>Trong bài viết này, chúng ta đã tìm hiểu cách làm việc với Laravel Mix trong các ứng dụng để giúp cho việc biên dịch css, js,.. trở nên dễ dàng. Bài viết này chỉ là phần giới thiệu cơ bản, để tìm hiểu thêm về Laravel Mix bạn hãy truy cập <a href=\"https://laravel.com/docs/8.x/mix\">trang tài liệu</a> chính thức của Laravel hoặc truy cập <a href=\"https://laravel-mix.com/docs/3.0/installation\">trang web</a> Laravel Mix.<br>\nHy vọng sau bài viết này, mọi người có thể áp dụng được Laravel Mix vào các dự án của mình. Mong nhận được nhiều đóng góp từ mọi người để các bài viết sau có thể hoàn thiện hơn ạ.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Phu Thai </div><div class=\"custom-block-body\"></div></div>","id":"ff25fe25-6507-5327-a939-18a5115d054d","frontmatter":{"title":"How to use Laravel Mix for compiling assets","date":"21-03-2021","tags":["php","laravel"]},"fields":{"slug":"/how-to-use-laravel-mix-for-compiling-assets/","readingTime":{"text":"7 min read"}}}},{"node":{"excerpt":"I. Mở đầu Laravel được biết đến là một framework PHP an toàn để tạo các trang web và ứng dụng. Những dự án có nhu cầu bảo mật cao thường chọn Laravel. Chúng ta sẽ xem xét các tính năng bảo mật chính…","snippet":"<html><head></head><body><h1>I. M&#x1EDF; &#x111;&#x1EA7;u</h1> <p>Laravel &#x111;&#x1B0;&#x1EE3;c bi&#x1EBF;t &#x111;&#x1EBF;n l&#xE0; m&#x1ED9;t framework PHP an to&#xE0;n &#x111;&#x1EC3; t&#x1EA1;o c&#xE1;c trang web v&#xE0; &#x1EE9;ng d&#x1EE5;ng. Nh&#x1EEF;ng d&#x1EF1; &#xE1;n c&#xF3; nhu c&#x1EA7;u b&#x1EA3;o m&#x1EAD;t cao th&#x1B0;&#x1EDD;ng ch&#x1ECD;n Laravel. Ch&#xFA;ng ta s&#x1EBD; xem x&#xE9;t c&#xE1;c t&#xED;nh n&#x103;ng b&#x1EA3;o m&#x1EAD;t ch&#xED;nh m&#xE0; Laravel s&#x1EBD; h&#x1ED5; tr&#x1EE3; &#x111;&#x1EC3;&#x2026;</p></body></html>","html":"<h1>I. Mở đầu</h1>\n<p>Laravel được biết đến là một framework PHP an toàn để tạo các trang web và ứng dụng. Những dự án có nhu cầu bảo mật cao thường chọn Laravel. Chúng ta sẽ xem xét các tính năng bảo mật chính mà Laravel sẽ hổ trợ để giúp đảm bảo an toàn cho ứng dụng web của chúng ta.</p>\n<h1>II. Các tính năng bảo mật trong Laravel</h1>\n<p>Tính năng bảo mật của Laravel đảm bảo rằng các nhà phát triển hiện có thể sử dụng hầu như mọi khía cạnh của quy trình bảo mật an toàn. Hơn nữa, tất cả dữ liệu liên quan đến quy trình đều được kiểm tra ở bất kỳ đâu cần thiết, có nghĩa là nền tảng bảo vệ chống lại các lỗ hổng phổ biến.</p>\n<ul>\n<li>Laravel Authentication System</li>\n<li>Reduce Laravel Vulnerabilities From CSRF (Cross Site Request Forgery)</li>\n<li>Protection against XSS (Cross Site Scripting)</li>\n<li>SQL Injection</li>\n<li>Improve Laravel Application Security</li>\n<li>Laravel Security Packages</li>\n</ul>\n<h2>1. Laravel Authentication System</h2>\n<p>Laravel cung cấp sẵn một quy trình xác thực người dùng mạnh mẽ với mã bảng soạn sẵn liên quan có sẵn trong giàn giáo.</p>\n<p>Laravel sử dụng <code class=\"language-text\">providers</code> và <code class=\"language-text\">guards</code> để tạo thuận lợi cho quá trình xác thực. Mục đích của <code class=\"language-text\">guards</code> là xác thực người dùng cho mỗi yêu cầu mà họ đưa ra, trong khi <code class=\"language-text\">providers</code> tạo điều kiện để truy xuất lại người dùng từ cơ sở dữ liệu.</p>\n<p>Là một nhà phát triển, tất cả những gì bạn phải làm là thiết lập database, bộ điều khiển và mô hình. Trong quá trình này, các tính năng xác thực được tích hợp vào trong ứng dụng.</p>\n<h2>2. Reduce Laravel Vulnerabilities From CSRF (Cross Site Request Forgery)</h2>\n<p>Laravel thường sử dụng CSRF để đảm bảo rằng các bên thứ ba bên ngoài không thể tạo yêu cầu giả mạo và không vi phạm bảo mật của Laravel.</p>\n<p>Đối với điều này, Laravel tự động tạo CSRF cho mỗi phiên người dùng đang hoạt động. Khi yêu cầu được gọi thì Laravel sẽ so sánh mã thông báo yêu cầu với mã thông báo đã lưu trước đó trong phiên của người dùng. Nếu mã thông báo không khớp thì yêu cầu được coi là không hợp lệ và nó chấm dứt thực thi. Ngoài ra, bất cứ khi nào bạn xác định một biểu mẫu HTML trong ứng dụng của mình, bạn phải cung cấp một trường CSRF ẩn để phần mềm trung gian bảo vệ CSRF sẽ xử lý phần còn lại.</p>\n<p>Giả sử hệ thống của bạn có 1 action xóa tài khoản người dùng như sau:\n<code class=\"language-text\">https://xyz.com/account/{id}/delete</code>\nNếu có một người nào biết được link này thì họ sẽ hack được, họ có thể gửi mail cho bạn chứa link, hoặc nội dung là một hay nhiều thẻ img với src chính là url đó và mỗi hình có id khác nhau kiểu như:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">&lt;</span>img height<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"0\"</span> width<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"0\"</span> src<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"https://xyz.com/account/{id}/delete\"</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sử dụng CSRF token: Trong Laravel cung cấp cho bạn phòng tránh, bạn có thể thêm vào các Form:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">&lt;</span>form method<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"POST\"</span> action<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"/profile\"</span><span class=\"token operator\">></span>\n    @csrf\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>3. Protection against XSS (Cross Site Scripting)</h2>\n<p>Cross-site scripting (XSS) cho phép những kẻ tấn công đưa các đoạn mã độc hại vào nội dung của các trang web đáng tin cậy. Các tập lệnh này đi cùng với nội dung động đến trình duyệt của người dùng và được thực thi ở đó. Bằng cách này, những kẻ tấn công lợi dụng các lỗ hổng trong trang web mà người dùng truy cập.</p>\n<p>XSS là một đoạn mã độc, để khái thác một lỗ hổng XSS, hacker sẽ chèn mã độc thông qua các đoạn script để thực thi chúng ở phía Client. Mục đích chính của cuộc tấn công này là ăn cắp dữ liệu nhận dạng của người dùng như: cookies, session tokens và các thông tin khác.\nTrong hầu hết các trường hợp, cuộc tấn công này đang được sử dụng để ăn cắp cookie của người khác. Như chúng ta biết, cookie giúp chúng tôi đăng nhập tự động. Do đó với cookie bị đánh cắp, chúng tôi có thể đăng nhập bằng các thông tin nhận dạng khác.</p>\n<h2>4. SQL Injection</h2>\n<p>SQL Injection (SQLi) là một kỹ thuật tấn công trong đó các câu lệnh SQL độc hại được chèn vào một dữ liệu đầu vào và được thực thi. Điều này cho phép những kẻ tấn công kiểm soát cơ sở dữ liệu. Họ có thể sửa đổi, đánh cắp hoặc xóa dữ liệu.</p>\n<p>Laravel sử dụng Eloquent ORM (object relational mapper) không cho phép dữ liệu truy vấn độc hại đi qua các biểu mẫu của bạn. Do ràng buộc tham số PDO, Eloquent ORM thoát các lệnh SQL này và lưu các truy vấn không hợp lệ dưới dạng văn bản.</p>\n<p>Hãy xem xét ví dụ về biểu mẫu được sử dụng để thu thập địa chỉ email của người dùng từ cơ sở dữ liệu. biểu mẫu sẽ tìm kiếm một địa chỉ email, ví dụ: “abc@example.com”. Bây giờ hãy tưởng tượng rằng truy vấn SQL được sửa đổi thành:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> email <span class=\"token operator\">=</span> <span class=\"token string\">'abc@example.com'</span> <span class=\"token operator\">or</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Trong ví dụ trên, 1 = 1 là một biểu thức logic đơn giản luôn đúng.\nBây giờ hãy xem xét một ứng biến khác của cuộc tấn công, trong đó truy vấn được sửa đổi trực tiếp thành lệnh “drop table users” và thay vì địa chỉ email, “abc@example.com” được viết. Truy vấn sẽ giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> email <span class=\"token operator\">=</span> <span class=\"token string\">'abc@example.com'</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> users<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Khi truy vấn này được thực thi, bảng “users” sẽ bị xóa khỏi cơ sở dữ liệu.\nKhi ràng buộc tham số PDO được đặt, đầu vào nằm trong dấu ngoặc kép và truy vấn sẽ giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> email <span class=\"token operator\">=</span> <span class=\"token string\">'abc@example.com or 1=1'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Vì không có bản ghi nào khớp với email hoặc “1 = 1”, nên truy vấn sẽ không trả về bất kỳ thứ gì.</p>\n<p>Laravel cung cấp các cách khác để nói chuyện với cơ sở dữ liệu, chẳng hạn như truy vấn SQL thô. Tuy nhiên, Eloquent vẫn là lựa chọn phổ biến nhất. Học cách sử dụng ORM vì nó giúp ngăn chặn các cuộc tấn công chèn vào SQL do các truy vấn SQL độc hại gây ra.</p>\n<h2>5. Improve Laravel Application Security</h2>\n<p>Nhờ các tính năng bảo mật Laravel có sẵn, framework này đã an toàn hơn nhiều so với các framework PHP khác. Tuy nhiên, có một số điều bạn có thể làm để làm cho project Laravel của bạn an toàn hơn. Một số điều này cho phép bạn làm cho ứng dụng của mình không gặp rủi ro khỏi tất cả các cuộc tấn công mã có thể xảy ra và tăng cường bảo mật của nó ở mức độ cao hơn.</p>\n<p>Laravel sử dụng PDO để ngăn chặn các cuộc tấn công SQL injection vì không có biến nào được chuyển vào cơ sở dữ liệu mà không cần xác thực. Tuy nhiên, các nhà phát triển vẫn chọn SQL thô vì nhiều lý do.\nNếu trường hợp này xảy ra với bạn, bạn nên luôn sử dụng các truy vấn SQL được chuẩn bị kỹ lưỡng để ngăn ngừa rủi ro. Hãy xem xét câu lệnh sau để tránh SQL injection:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\">$email <span class=\"token operator\">=</span> <span class=\"token string\">\"'abc@example.com' or 1=1\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Truy vấn không an toàn</span>\nDB::raw<span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM users WHERE email = $email\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Truy vấn an toàn</span>\nDB::raw<span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM users WHERE email = ?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>$email<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Laravel thay thế các dấu hỏi bằng biến truy vấn, tự động bỏ qua các biến đầu vào. Điều này bảo vệ hệ thống khỏi các cuộc tấn công SQL injection.</p>\n<h3>5.1. Force HTTPS</h3>\n<p>Khi bạn triển khai trang web của mình trên HTTP, tất cả dữ liệu được trao đổi bao gồm mật khẩu và những dữ liệu khác được gửi ở dạng nội dung thuần túy. Do đó có thể dễ dàng bị đánh cắp bởi bất kỳ ai giữa đường truyền. Vì vậy, để giữ an toàn cho thông tin này, hãy luôn triển khai các ứng dụng web của bạn trên HTTPS để bảo vệ thông tin nhạy cảm của nó.</p>\n<p>Bạn chỉ cần thiết lập chứng chỉ SSL trên trang web của mình bằng cách nhận được sự hỗ trợ nhỏ từ bất kỳ nhà phát triển Laravel nào, những ứng dụng kia sẽ chuyển ứng dụng của bạn từ HTTP sang HTTPS một cách dễ dàng. Trong khi để ẩn các đường dẫn nhất định, bạn có thể sử dụng bộ lọc được xác định bên dưới sẽ chuyển hướng người dùng đến một đường dẫn an toàn.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'https'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Request<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">secure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Redirect<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">secure</span><span class=\"token punctuation\">(</span><span class=\"token constant\">URI</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">current</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>5.2. Escape Content to Prevent XSS</h3>\n<p>Để tránh các cuộc tấn công XSS, bạn nên sử dụng cú pháp dấu ngoặc kép:<code class=\"language-text\">{{ $variable }}</code></p>\n<p>Chỉ sử dụng cái này <code class=\"language-text\">{!! $variable !!}</code> khi bạn chắc chắn rằng dữ liệu trong biến được hiển thị an toàn hơn.</p>\n<h3>5.3. Use Laravel Purifier</h3>\n<p>Dấu ngoặc nhọn kép trong Laravel đảm bảo rằng không có HTML thô nào được cung cấp cho khách hàng, tuy nhiên, nếu bạn muốn cung cấp một số biến HTML cho khách hàng từ cơ sở dữ liệu của mình, thì bạn có thể sử dụng HTML Purifier, một công cụ được cập nhật toàn diện sẽ nâng cấp mã của bạn và sẽ xử lý các mã HTML bị bỏ sót và bị thiếu.</p>\n<h2>6. Laravel Security Packages</h2>\n<p>Laravel cung cấp một số packages để tăng cường bảo mật cho các ứng dụng của bạn. Dưới đây là các package bảo mật phổ biến nhất cho Laravel:</p>\n<h3>6.1. Laravel Security Component</h3>\n<p>Laravel Security Component chủ yếu cung cấp bảo mật cho các roles/objects và tích hợp lõi bảo mật Symfony trong Laravel. Nó sử dụng cử tri để kiểm tra các đặc quyền dựa trên các vai trò khác nhau, vì vậy có thể xác nhận tính bảo mật của nó.</p>\n<h3>6.2. Laravel Security</h3>\n<p>Laravel Security là một trong những package được sử dụng thường xuyên nhất và được biết đến với việc loại bỏ các lỗ hổng XSS trong codebase. Nó đã được chuyển từ Codeigniter 3 sang Laravel 5.</p>\n<h3>6.3. Laravel-ACL</h3>\n<p>Laravel-ACL cung cấp các quyền được bảo mật dựa trên vai trò cho quá trình xác thực Laravel. Package này giúp bảo vệ các route và phương pháp điều khiển CRUD trong các ứng dụng.</p>\n<h1>III. Tổng kết</h1>\n<p>Đây là các tính năng bảo mật quan trọng nhất của Laravel. Hy vọng mọi người nhớ tất cả các tính năng này và áp dụng trên ứng dụng trong các dự án với Laravel tiếp theo để giúp bảo vệ trang web của mình.</p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"23bcc07b-b420-5436-9be2-29973331699a","frontmatter":{"title":"Laravel Security Best Practices for Your Website","date":"08-11-2020","tags":["laravel"]},"fields":{"slug":"/laravel-security-best-practices-for-your-website/","readingTime":{"text":"10 min read"}}}},{"node":{"excerpt":"Xin chào các bạn! Hiện tại Laravel đã update version lên Laravel 8.x. Vậy nên mình muốn giới thiệu một thay đổi tuy cơ bản nhưng vô cùng đặc biệt tại phiên bản này. Đó là authentication basic, chúng…","snippet":"<html><head></head><body><p>Xin ch&#xE0;o c&#xE1;c b&#x1EA1;n! Hi&#x1EC7;n t&#x1EA1;i Laravel &#x111;&#xE3; update version l&#xEA;n Laravel 8.x. V&#x1EAD;y n&#xEA;n m&#xEC;nh mu&#x1ED1;n gi&#x1EDB;i thi&#x1EC7;u m&#x1ED9;t thay &#x111;&#x1ED5;i tuy c&#x1A1; b&#x1EA3;n nh&#x1B0;ng v&#xF4; c&#xF9;ng &#x111;&#x1EB7;c bi&#x1EC7;t t&#x1EA1;i phi&#xEA;n b&#x1EA3;n n&#xE0;y. &#x110;&#xF3; l&#xE0; authentication basic, ch&#xFA;ng ta c&#xF9;ng t&#xEC;m hi&#x1EC3;u xem n&#xF3; kh&#xE1;c g&#xEC; so v&#x1EDB;i c&#xE1;c&#x2026;</p></body></html>","html":"<p>Xin chào các bạn! Hiện tại Laravel đã update version lên Laravel 8.x. Vậy nên mình muốn giới thiệu một thay đổi tuy cơ bản nhưng vô cùng đặc biệt tại phiên bản này. Đó là authentication basic, chúng ta cùng tìm hiểu xem nó khác gì so với các phiên bản trước nhé!</p>\n<h1>Bước 1: Cài đặt project Laravel 8.x</h1>\n<ul>\n<li>\n<p>Chạy câu lệnh cài đặt project laravel:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer create-project laravel/laravel projectLaravel --prefer-dist</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tuy nhiên nếu bạn muốn cài đặt đồng thời Jetstream thì hãy bổ sung --jet vào sau tên project laravel của bạn trong câu lệnh trên <code class=\"language-text\">--jet</code>. VD: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer create-project laravel/laravel projectLaravel --jet --prefer-dist</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hoặc bạn có thể cài đặt project laravel xong sau đó chạy câu lệnh <code class=\"language-text\">composer require laravel/jetstream</code> để cài đặt Jetstream sau.</p>\n<h1>Bước 2: Setup Database</h1>\n</li>\n<li>Bạn hãy tạo 1 database mysql bất kỳ sau đó mở file <code class=\"language-text\">.env</code> lên và cấu hình kết nối project tới database:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 358px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ba95f077f46fd21ba4b561fa12560a61/39185/env.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABRUlEQVQoz3VQ2Y6DIBT1OyoqFqxiM6WtoGwqWrVPM/P/fzNXO1tmOQnJJXDuWYIkSUrG4ihO94AUkFFKCIELpRSu+APxLwRwDocsDJGQdds5IeqX59dluXPOp3kZRz/ebl3vtWriKPpJpjQ7HsswDC/XyliltbHGPp14LSvg101jtIYBDP6hvJJLBuSqEq61zraD96cTN0ZbaxkrWVFADoS+ZKMPC8Ge0Dw/gO3rtXLOyroZ+n4jWz94jEESJxg/+oCZEAozMOEhIDRjrPhUBtPGutsyO9cKKZQxzpphHGUjIXaj1DwtUlQhQlBhAJuKPN+UgWxEXfd9d1+maZqllPC9cy7LMpymEJBQijczD6zK5aqMVmVnwLbv+3EcoHApRF4Ux7JMtpzv+F4YZN5sI87PWitYoZTuus4Pw+V83u124DD+B2+t2VnlTbpAEwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"env\" title=\"env\" src=\"/static/ba95f077f46fd21ba4b561fa12560a61/39185/env.png\" srcset=\"/static/ba95f077f46fd21ba4b561fa12560a61/4edbd/env.png 175w,\n/static/ba95f077f46fd21ba4b561fa12560a61/13ae7/env.png 350w,\n/static/ba95f077f46fd21ba4b561fa12560a61/39185/env.png 358w\" sizes=\"(max-width: 358px) 100vw, 358px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Buớc 3: Migration</h1>\n<ul>\n<li>chạy câu lệnh <code class=\"language-text\">php artisan migrate</code> để tạo các bảng ban đầu vào database\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c9e04093c37126bc26c5883b07df6ce4/7321b/migration.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSklEQVQY0zWRW3KjMBBFWcaUMeAAKduxQIinxSNgiONkJrP/5ZxpyOSjq6Vu3dNXkqPKgrSsJAy6Liltw8kk/PJddoGHGwa48QHX2+O6UpNw93t83+dw8AjkzLoOAn/Ljnl7Jh8j1FVTTC2qMai+ovtYqOaBpCvRQ4Muc9RFkec5l5cX9gINggDP+wb9hJMMEdo+kemE1/6VuqpoqprH45PbNFOJe9tcsdbSXK90XUdd12SZYRhGtNbsdrttwBqOmZ8xQ0hRZMzLsolWweefL+6Pj23f94OIB+7v79iuFWhPI0Nu0w0r/SgSUzLgfD6vwJhcgHmhuc0LrTiwbcvvr78sb/f/rnpaqU3TSC/gVtyO44gx35AkSTmdzoRhiOOnMYdLxPF4xMj7pGkqBxJqcZAXBUopUhGsOcsyMoGk0l+v+tNb3cVxtH3aP5gMuuo9xAVxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"migration\" title=\"migration\" src=\"/static/c9e04093c37126bc26c5883b07df6ce4/8c557/migration.png\" srcset=\"/static/c9e04093c37126bc26c5883b07df6ce4/4edbd/migration.png 175w,\n/static/c9e04093c37126bc26c5883b07df6ce4/13ae7/migration.png 350w,\n/static/c9e04093c37126bc26c5883b07df6ce4/8c557/migration.png 700w,\n/static/c9e04093c37126bc26c5883b07df6ce4/e996b/migration.png 1050w,\n/static/c9e04093c37126bc26c5883b07df6ce4/7321b/migration.png 1184w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Bước 4: Cài đặt Jetstream</h1>\n<ul>\n<li>Chạy câu lệnh <code class=\"language-text\">composer require laravel/jetstream</code> để cài đặt, nếu bạn nào đã cài ở bước 1 thì bỏ qua bước này nhé\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cc265d6de04bb04c254c2c0f3e46a9d3/7321b/jetstream.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 83.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACv0lEQVQ4y4VU2ZKbMBDkOwwS2GAMkrhvxGFnN/n/P+qMhHcTb+V46JJUJVo909M4QgjsjwfmRaOfBmRdhW4cUCwdMt2h0D3O6gbGGLh3IPBp5fwFjJmVweFxiGAp4PcKfJBw6xt4J+B2KdyJzioCU1dwEYHfQvCUzucAnB5gX2CIHXOZrTkYkTGdgfcSvDxIDRjBm/NjzeluRuQXH4yU+r7/AkPqeCQzrXL0ekKnR/iDApsOtWxUuBDRbUoQNhLJWKKZFao6QVlWhBJJmkIphTiOn4Sui0xl2NcN27bBnzKwhZTSGg8Jiv4GPQlMc49x0lio123b2G8ulws8dig9+mgIPQ8qy7AuK9Z1pV5Kq9CUGDQp8iFGP8boupIe1BjGichn1HWDMAw/S/0wx3FJoSE06vZ9h69z6pmCNwjb0/NMxLSXZNK6RujJPK0Xur+jbhoMw4gkSWB4rELjVlPWeNsfeGx3RGOB8F4jWityv0K/SHooRt21eH9/x/2+QS+LFXC9XhFGEaIngiCAE2Up5NpB6hbJUODW5khzBVHmiNIbZKGgpEBKKvK8QJr+2gshIaS0Cquqtg84fhJBbT3USiDSYqOhHluUNNDl1EM2BaRU9iMTAkmOFkVhyzNlGg8MTqeTXR2ZSvx4+46V+nInp7/dH2iXESURm6QIMkOSqjOVY0wwzpryPpz9CifLcuvarLWFabZXxDjRqNikmMRcAzAaZquGHYo+nP3d4Sdh9kmmCft+R1Am4OQ0p8HmM83k9QIe+DZur/llf1J4EI7zZAmNQp8ITRRtWkz8LoGN2r+IXkpeZlI3zXa4H9sDfpEc8RuJMIvBzzS8T6K/lfpJGMobxEbN1w3EWCGbO1sqMyW34tj3tJo/DBFz/z8KWRLCHckASoO7KLhNYgns34f6Z0rm5kwxtH+j69mWz/5C+BN1DPeO+pVHJgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jetstream\" title=\"jetstream\" src=\"/static/cc265d6de04bb04c254c2c0f3e46a9d3/8c557/jetstream.png\" srcset=\"/static/cc265d6de04bb04c254c2c0f3e46a9d3/4edbd/jetstream.png 175w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/13ae7/jetstream.png 350w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/8c557/jetstream.png 700w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/e996b/jetstream.png 1050w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/7321b/jetstream.png 1184w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Bước 5: Cài đặt Liveware hoặc Inertia</h1>\n<ul>\n<li>Chạy câu lệnh <code class=\"language-text\">php artisan jetstream:install livewire</code> để cài đặt\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1a0ebf656a66b6aa1815691fb4bed3ff/e6c84/liveware.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.14285714285715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOUlEQVQ4y32U6XKjMBCE/Rq7CGFuMMbmRuKM7bz/K/W2IEnZW0l+dI0so08zQw+HMI4x3Vb0g0Y/DqjbBp1W0POEsipxOp1wPudbTNMUUkrYtv0Sn3XIThnWZaUW3G43tE2LQWss04xhGHC/36EUL+sVrkUBz/N+hG1Ax3H4YImZAM2DSinUTYO261CWJa7XK875BeM4oq4bqkaaJBBCfA80pSzrinmeMX1A66pGx0zLa4GYLQmCYItGYRR9C/oCxnHCUu+ETVhY9vLGft4mtG8TLn2Ny+WCKAw3WMIemviZ3fc9zM4EreyXxuPxQN13+KNOEGMOoTOIxIM4SghLwLKsX2EfJWcsd9mB9wca1cPqT5BDDkmoTANI5/XQT7AdyAxnlqo/gZpAZijVGbamQr5VYcM2Bwj6DfZV8soMR1rl/f6O9jNDzez6DNJ1CJK/Ql6A0SlFNSkUioaeB+R8EX8H9k5RTQpxjSAc+0ebPLfB6OBHIYqhQz0aaIu8KVGz7Ep1e9QdCvrRGP54dGARbA6aC571Min39Q2ak7Cw9GkYGeetDbOxEr1pJmhzAs3d9/1m+IpeNZOk9bBNUZZl2xQdoihGVTOz/IqiapDTzEfXx9Hz4XoBXD+kGLnneRE88x/l+xF8L6TpIwS+/1yyg6T1EBcu4tpD1PhIGRPq3HGPv+PSRRQJZGeLxhb8UAhGa9sLw/9Kdl3JSbARBpKyeRvX4R73fa4p35eIE8k1nwt3mbXZ32G7nf4Beka6zXBRbb4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/1a0ebf656a66b6aa1815691fb4bed3ff/8c557/liveware.png\" srcset=\"/static/1a0ebf656a66b6aa1815691fb4bed3ff/4edbd/liveware.png 175w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/13ae7/liveware.png 350w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/8c557/liveware.png 700w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/e996b/liveware.png 1050w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/e6c84/liveware.png 1148w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n<li>sau đó chạy câu lệnh <code class=\"language-text\">run npm install &amp;&amp; npm run dev</code> để build các JS và CSS cho ứng dụng của bạn, thành công sẽ có thông báo:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3b26596c67694b7c3500088dd3d71401/fd84e/npm-success.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 12.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuUlEQVQI1z3OwU6DQBhFYR6DZJh/GMOMArYNI7ZSUgZqF60r48ra93+OIyXRxbe8NyfZhIZhGtGisfaBGCPOOQ7DwDhGxAjK6IUWwzRN9H3P8f1EXVekaUqWZSilFon7Gng673F1SffWcZwHIbzwff3hdr1RdBvkc08+s68r4iHycTnTNGEOsGitEZF/id7WqGeH2JyyrPDeUcyFbduy2+7IK4+0FRJK5LHAO896vSI3Zim6n9xP//wCozha2O0rFzcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/3b26596c67694b7c3500088dd3d71401/8c557/npm-success.png\" srcset=\"/static/3b26596c67694b7c3500088dd3d71401/4edbd/npm-success.png 175w,\n/static/3b26596c67694b7c3500088dd3d71401/13ae7/npm-success.png 350w,\n/static/3b26596c67694b7c3500088dd3d71401/8c557/npm-success.png 700w,\n/static/3b26596c67694b7c3500088dd3d71401/e996b/npm-success.png 1050w,\n/static/3b26596c67694b7c3500088dd3d71401/fd84e/npm-success.png 1056w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Bước 6: Tiếp tục migrate các migration mới</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan migrate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ea45dad9746bf844c3382f4e4e115aeb/5bd27/migration-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 22.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3UlEQVQY0zWPa26DMBCEuQivxgWjGjAE29gYDApB7f0PNN1YyY/RrGal2W+TdZNwvoPWI5xbooQQEG0H3nDUdQ3OOaq3c96gqhjlFRpOGXmeZ6QcWZYhkRtD778gxwbOekzThGVZcD4vWGujZmOglIrz66DSGoYyZx3GYYjH2q4DYwyJvmqoJ4MyAiEc0Ebj8Thx/f7Fgn3fsYWNdgHee1jnqNTRRwYLlXdU1PcyeiTsD442fEPef3AcJ8w8wxFhCHukeNF+yFa/QhOpEC2G8U5Et/hqWZYoigJpmuIfeWV+wr/rvZgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/ea45dad9746bf844c3382f4e4e115aeb/8c557/migration-2.png\" srcset=\"/static/ea45dad9746bf844c3382f4e4e115aeb/4edbd/migration-2.png 175w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/13ae7/migration-2.png 350w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/8c557/migration-2.png 700w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/e996b/migration-2.png 1050w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/2cefc/migration-2.png 1400w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/5bd27/migration-2.png 1432w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<ul>\n<li>Sau đó chạy ứng dụng <code class=\"language-text\">php artisan serve</code>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e053067ab60f0c25bce72aaa092c4fb6/ae28e/serve.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAeklEQVQI1yXIaxKCIABGUfcRZDaIQwKhgJqOuv9VXal+nPkelcsDLhUldei56QbZPZGqQbQNqm3RWqOUKr5d4b2jftTcpUBK+Ush/qo+B8z4xk8jdhqI58qwzdgY6IIl54l9PziOk5Qy87LwWTdiTDjnCo8xr7IjY/kueEI8W4qlMfcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/e053067ab60f0c25bce72aaa092c4fb6/8c557/serve.png\" srcset=\"/static/e053067ab60f0c25bce72aaa092c4fb6/4edbd/serve.png 175w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/13ae7/serve.png 350w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/8c557/serve.png 700w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/e996b/serve.png 1050w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/2cefc/serve.png 1400w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/ae28e/serve.png 1598w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n<li>Truy cập vào <a href=\"http://127.0.0.1:8000/\">http://127.0.0.1:8000/</a> trên trình duyệt của bạn\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.42857142857144%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABD0lEQVQoz3WRyW7DMAxE/f9/2OYQ5FQjseJIlrhoc0dyEhhOa7zDiOaQA3DQmJZAs10CSyDAHQms/yDG8uzCzzgOFDPHLKkwqCuvHehe/xNJGS6KZWjvVMgHOp/5cqHTyX99B+cJxdbR5jahmyHTbsrwVKI8z36a2JhobYwp1TXmtp9EIVKpG7oLNbySFIQZr+bhvMIjSiQ5Z0y5TcZ7YhFmFdFSivYsOzOGl8oSEb+1sgKU1nVFCOxu0VhVY631aG5+VWPuzIIpG60Pt1g8vtLfpX8fm1NByIddnPNuCSEwYmMnLJN5XG/mPlvrPPA41+dmNHNM+LERc31rTe08myZNgI9mHONVPZxkz7sH/AK/kUXNwylpbgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/b2c0050e99607894903267b012ac638b/8c557/laravel.png\" srcset=\"/static/b2c0050e99607894903267b012ac638b/4edbd/laravel.png 175w,\n/static/b2c0050e99607894903267b012ac638b/13ae7/laravel.png 350w,\n/static/b2c0050e99607894903267b012ac638b/8c557/laravel.png 700w,\n/static/b2c0050e99607894903267b012ac638b/e996b/laravel.png 1050w,\n/static/b2c0050e99607894903267b012ac638b/2cefc/laravel.png 1400w,\n/static/b2c0050e99607894903267b012ac638b/8bf8a/laravel.png 1901w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></li>\n</ul>\n<h1>Bước 7: Test Feature</h1>\n<ul>\n<li>Click vào register góc phải trên màn hình, điên đầy đủ thông tin để đăng ký 1 tài khoản\n<img src=\"/register.png\" alt=\"liveware\"></li>\n</ul>\n<p>Sau khi đăng ký thành công, sẽ điều hướng bạn tới trang Dashboard:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c4a647a31f731c52d9006af4762e2676/9c177/dashboard.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.71428571428571%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABRklEQVQoz5VQ127EMAzL//9me72et7xHnJTyDaAvHQIjCFJoitrO87R0UJhjP/8bWx89lxyCn6Dv/I2x9z5a79/QgNpaWfmBzYeEkbHH+6VYo60lIl9KnfPAKz+gtg5yHqM7Ot4uUambMcZaW3Ke8xcb4G8h5tbG3LuxyhE567QxUiuldEP0Xmt7BjZvtXLjPI8Xuc85Y8oxpWfmIsQUQuRIXIRVgLvv+0M5pgLgP0c+pbykFhprAh60ELnPnc635BVw5srKKVdL4XIV15sSUktlhNJSGx9T68NR/LiKT6EVX9NbR8Y6vPgiQ7w5KkQoaq4NgwJnfUAJ2zjKlliDxRceymvt7CiQDyCkUtBNQOaitE4hKmPvUmjeseqnMpg3qaS2QuHURq4MTmHPCSMYYS9wJDWAA0F1Y8POC4ylugl5L/4CbdwXmqayjfKaMdAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/c4a647a31f731c52d9006af4762e2676/8c557/dashboard.png\" srcset=\"/static/c4a647a31f731c52d9006af4762e2676/4edbd/dashboard.png 175w,\n/static/c4a647a31f731c52d9006af4762e2676/13ae7/dashboard.png 350w,\n/static/c4a647a31f731c52d9006af4762e2676/8c557/dashboard.png 700w,\n/static/c4a647a31f731c52d9006af4762e2676/9c177/dashboard.png 880w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<ul>\n<li>Test thử tính năng login với tài khoản vừa tạo, logout tài khoản rồi click vào login sẽ thấy form login như sau:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 557px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 87.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQ4y42TTYvUQBCG8wP1JnjXw/4B9+TFiwcRPK14EjyIB714EUEE9+BdV3EYxBlYZ8fZfGzSX1WddFcnVk9GGDLJYvHQaZJ6u+tNVycG7CHa2MbZrrOAcT6awySjyrq2Pxf47iMKadFO6pPxVY09fgBH9+DbDKe2nRQD2JPn+PgpfPqMdXPtzoD1UIxxXJ5bpXfzcbHzni0658JBdF3/bAdwNM5pg4knKiqpoQ5tR6HzFMd+4ojHdoDzLWd676OYQvs7NV/n69ky//7r8my+/jJbMT8W6WyRrbLmTxn2uSioMoGI1FYcpPFpCbmwWYl5xSNcFjqvsBBWGJIQ9uE3tml5Z9WXrbVG/r+Wu+J/w+3KppCV9nwjL1KdCXelA1Oo0E8OyRUZG3Y7s+dVqtnq2Xy13JhMdZsqXMO6JAF7nlnfOO881XVTNw2fReQgYiYFtsmn9a/s7QeldSWkkMoA8DFOWY1LEO15js0wDM4QQkpeUhte8aqsWPbi5Zsbt+7cvH330ZNnnCOkGRfHWrZKbYxUqqoEO3n/4fT4/kPm1eu3nMNVJsbgCIBoa8QtNsJH6Zzv29N70gZib/ONmQAHSAVCsQuuBfqL8RdQmQBXNSlGgwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" srcset=\"/static/1cb417fcc0da394477005c104ae0de56/4edbd/login.png 175w,\n/static/1cb417fcc0da394477005c104ae0de56/13ae7/login.png 350w,\n/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png 557w\" sizes=\"(max-width: 557px) 100vw, 557px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<p>Login thành công cũng đưa bạn đến trang Dashboard, click vào profile tại menu góc màn hình\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 557px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 87.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQ4y42TTYvUQBCG8wP1JnjXw/4B9+TFiwcRPK14EjyIB714EUEE9+BdV3EYxBlYZ8fZfGzSX1WddFcnVk9GGDLJYvHQaZJ6u+tNVycG7CHa2MbZrrOAcT6awySjyrq2Pxf47iMKadFO6pPxVY09fgBH9+DbDKe2nRQD2JPn+PgpfPqMdXPtzoD1UIxxXJ5bpXfzcbHzni0658JBdF3/bAdwNM5pg4knKiqpoQ5tR6HzFMd+4ojHdoDzLWd676OYQvs7NV/n69ky//7r8my+/jJbMT8W6WyRrbLmTxn2uSioMoGI1FYcpPFpCbmwWYl5xSNcFjqvsBBWGJIQ9uE3tml5Z9WXrbVG/r+Wu+J/w+3KppCV9nwjL1KdCXelA1Oo0E8OyRUZG3Y7s+dVqtnq2Xy13JhMdZsqXMO6JAF7nlnfOO881XVTNw2fReQgYiYFtsmn9a/s7QeldSWkkMoA8DFOWY1LEO15js0wDM4QQkpeUhte8aqsWPbi5Zsbt+7cvH330ZNnnCOkGRfHWrZKbYxUqqoEO3n/4fT4/kPm1eu3nMNVJsbgCIBoa8QtNsJH6Zzv29N70gZib/ONmQAHSAVCsQuuBfqL8RdQmQBXNSlGgwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" srcset=\"/static/1cb417fcc0da394477005c104ae0de56/4edbd/login.png 175w,\n/static/1cb417fcc0da394477005c104ae0de56/13ae7/login.png 350w,\n/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png 557w\" sizes=\"(max-width: 557px) 100vw, 557px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<p>Tại đây chúng ta sẽ thấy phần cập nhật Profile:</p>\n<ul>\n<li>Ảnh Profile (max: 1024KB)</li>\n<li>Sửa tên, email.</li>\n<li>Đổi mật khẩu</li>\n<li>Bật bảo mật 2 lớp</li>\n<li>Browse sessions</li>\n<li>Xoá tài khoản, bạn cần setup mail để confirm việc này:</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/afa7deed1fbf2ed5fef30971412b759a/898f6/mail.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABn0lEQVQoz3VS2VLCQBDkO6xSQc6gMZAIOYgJJJuTkCAEL+TJ8kH//72dXSCKVT507ezOTm/P9NZU7QbdXgOK0gULp9BGCtqdS7S7dTRb5+jQyvMcPN7v67/ixklcuxvdoiddIYpnSLMA2SJEMvfhTXTEiYdbpVcV7Iuu/nlkH1eE6ZwhjKZYPqTImIc8juAHDnzfhkcwTJXyLixrBEs3kKQegsAFY/dwHB2mpaHVvvghTFJfEGZ5iDwMEVgxBso1buQOlIGEwbAPqd8UdyWpif51q8LxvFLI5XKFERHOqe2X7RrPmwKJ59AYGPI8xnRmCQV/Wz0dB81Qu5NFwBXyOXLCx6clyvUCkWujILJ7V0e9cSbM4kZxcPLj+vuh2misCLncAN5ysUwPxjBsyhzMNqFpctW2bgzFPPnv4LVckEp58TMItbE+EISrVYqynGO7XWG3K/H+/ord8wPeCE+bDK90/vn1gaKIkCQumWUiDG0yZiJiVZUEKlMmtobZzIDnmXTJpvZdOIYKJgoswoTGEWNIRbLcpH9LZintAzoV4TfH0SVDIimhQwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mail\" title=\"mail\" src=\"/static/afa7deed1fbf2ed5fef30971412b759a/8c557/mail.png\" srcset=\"/static/afa7deed1fbf2ed5fef30971412b759a/4edbd/mail.png 175w,\n/static/afa7deed1fbf2ed5fef30971412b759a/13ae7/mail.png 350w,\n/static/afa7deed1fbf2ed5fef30971412b759a/8c557/mail.png 700w,\n/static/afa7deed1fbf2ed5fef30971412b759a/898f6/mail.png 798w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span> \n<p>  Nhập email để confirm:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/45512bd5b096a6a6e8efab583afc0fce/c0388/input-mail.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQoz41TTW/TQBDNH+RWoSJyKKQHhJoUqlTAARDkhHqq4MQPQBxAHCpxAYGExA0KrUoBCRHlw3FiOx9er3fW8a6Xt44BN6USq6fR29l5s7PJc4XHtISIE0lKEooFnT4to3JaKYhGHu08Ek+eC6WIRf8tRqnS9Pa9WKnFu4/jH20hE9vx3+KIizJYJAQJxxVPX8TP9uLBSGAhWa75KxZSEpqXICiZzxOt5zKxBNulAqKkECuVxkKggbRZLIk3C5Kco61N4mZ0AUEr7DGYUgocI1Q4551uz/MDd+SNfN91hyPPB7F8OMQGCURnYE+GHgrHWmu5EEece74/nszGkykOgvEE0QuCaRjO5yluSFUKAiyWUtoYg0GsGGNjzEwrk+lFNFmWwxadtQox43IQMFKGtJG6iBLbFMjixIiTQCbVBj+AFQeROTh2Do96X74NPh229w/aH456H4/7n7+7+1/dbqA7vvqDrq9+eqnPNJ6R30ym67Bef+oMwr4zc1zWcSMvVIDPVCgNMMsjwBLLMVdxc/kleGkes9aDhxvN243tu9dv3N+6CbQaTfB79ead9avbr968Q1nIeKUQ5bosj/gntm61VqpXVtc2Ll7erNY2q+vXLqzVq7XG6qX6ufO1vZevC7F140nAJ3CWNQ4MI3JQzvO4cAvPTbrs7bKBozM+Jvbb3r8AgZhw5BZ9a4AAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"input mail\" title=\"input mail\" src=\"/static/45512bd5b096a6a6e8efab583afc0fce/c0388/input-mail.png\" srcset=\"/static/45512bd5b096a6a6e8efab583afc0fce/4edbd/input-mail.png 175w,\n/static/45512bd5b096a6a6e8efab583afc0fce/13ae7/input-mail.png 350w,\n/static/45512bd5b096a6a6e8efab583afc0fce/c0388/input-mail.png 542w\" sizes=\"(max-width: 542px) 100vw, 542px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span> </p>\n<p>  Sau đó sẽ có 1 mail gửi về cho bạn để hoàn thành thao tác này:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ca56730c5dbe9b7f3884ba462040776f/9c177/confirm-mail.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABOElEQVQoz42SSU7EMBBF+/4XYMGWDQt2HAY20Ew9JLHjqewqj5SbqKVGooP1ZCVOff1KfW9aa8ZYIcQ8z1JKpZS1Nufc/rE2r0/Pw/EoZyWEhGX5XEptra6K0QcLqCEaHxWQBuJdOQbnBRoVvO3G7efx5ePwvp+kxfnEprcN/DlMOkzmAunQegRMgbIB7LjuxK+MC3ERs1KYC/jEeOJxWAtE8TwFfogxlVL4166JNSCXIkXGOb/bD8MoMotKabWmfEVsggKslcv64LbvXze3d/cPj+cWroq7M3VnpIBElLhRtk2pR1FXnE9i75EbPul78/RDTDHldXGMuZdybS6/Ql4Xs5tx3kHQxgsVRulHGaa5w2mtReXSbgiHCbVNBjLv2nUsJI7vTzHD18tT9v2SJEqZs15IHT7/Bphx7KgG8NzwAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"confirm mail\" title=\"confirm mail\" src=\"/static/ca56730c5dbe9b7f3884ba462040776f/8c557/confirm-mail.png\" srcset=\"/static/ca56730c5dbe9b7f3884ba462040776f/4edbd/confirm-mail.png 175w,\n/static/ca56730c5dbe9b7f3884ba462040776f/13ae7/confirm-mail.png 350w,\n/static/ca56730c5dbe9b7f3884ba462040776f/8c557/confirm-mail.png 700w,\n/static/ca56730c5dbe9b7f3884ba462040776f/9c177/confirm-mail.png 880w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span> </p>\n<h2>Kết luận</h2>\n<ul>\n<li>Chúng ta đã tim hiểu sơ bộ về sự thay đổi của Authentication Laravel tại version 8.x. Sự thay đổi này của Laravel 8.x rất hợp lý và tích hợp + hỗ trợ thêm rất nhiều cho authentication so với các phiên bản trước, vẫn đảm bảo được việc dễ dàng cài đặt và sử dụng cho develop.</li>\n</ul>\n<h2>Tài liệu tham khảo</h2>\n<p><a href=\"https://laravel.com/docs/8.x/authentication\">https://laravel.com/docs/8.x/authentication</a></p>\n<p><em>by Ngọc Quân - Tomosia Việt Nam</em></p>","id":"2ee16996-5468-53a8-a56d-6fd476cc4629","frontmatter":{"title":"Authenticate Laravel 8.x basic (Register and Login)","date":"06-11-2020","tags":["php","laravel"]},"fields":{"slug":"/auth-register-and-login-laravel-8.x/","readingTime":{"text":"3 min read"}}}},{"node":{"excerpt":"Chúng ta khi làm việc với Laravel ít nhất vài lần sẽ gặp một task yêu cầu làm công việc tìm kiếm thông tin dựa vào 1 chuỗi đầu vào. Thường thì chúng ta sẽ viết đi viết lại 1 câu điều kiện để thực hiện…","snippet":"<html><head></head><body><p>Ch&#xFA;ng ta khi l&#xE0;m vi&#x1EC7;c v&#x1EDB;i Laravel &#xED;t nh&#x1EA5;t v&#xE0;i l&#x1EA7;n s&#x1EBD; g&#x1EB7;p m&#x1ED9;t task y&#xEA;u c&#x1EA7;u l&#xE0;m c&#xF4;ng vi&#x1EC7;c t&#xEC;m ki&#x1EBF;m th&#xF4;ng tin d&#x1EF1;a v&#xE0;o 1 chu&#x1ED7;i &#x111;&#x1EA7;u v&#xE0;o. Th&#x1B0;&#x1EDD;ng th&#xEC; ch&#xFA;ng ta s&#x1EBD; vi&#x1EBF;t &#x111;i vi&#x1EBF;t l&#x1EA1;i 1 c&#xE2;u &#x111;i&#x1EC1;u ki&#x1EC7;n &#x111;&#x1EC3; th&#x1EF1;c hi&#x1EC7;n t&#xEC;m ki&#x1EBF;m ho&#x1EB7;c s&#x1EED;&#x2026;</p></body></html>","html":"<p>Chúng ta khi làm việc với Laravel ít nhất vài lần sẽ gặp một task yêu cầu làm công việc tìm kiếm thông tin dựa vào 1 chuỗi đầu vào. Thường thì chúng ta sẽ viết đi viết lại 1 câu điều kiện để thực hiện tìm kiếm hoặc sử dụng một thư viện nào đó để làm công việc đó.</p>\n<p>Sau một thời gian copy và patse những câu lệnh where, tôi đã nghĩ ra cách để đơn giản hoá công việc tìm kiếm và có thể tái sử dụng nhiều lần. Chúng ta sẽ tìm hiểu ngay bên dưới.</p>\n<h2>I.  Bắt đầu</h2>\n<h4>1. Khởi tạo trait</h4>\n<ul>\n<li>Tạo thư mục \"App\\Traits\"</li>\n<li>\n<p>Tạo file SearchTrait.php trong thử mục \"App\\Traits\" với nội dung:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Traits</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Builder</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Schema</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Arr</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">trait</span>  SearchTrait\n<span class=\"token punctuation\">{</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h4>2. Định nghĩa những hàm để thực hiện việc tìm kiếm</h4>\n<ul>\n<li>\n<p>Lấy điều kiện join khi search được define trong model và khởi tạo scope để join với những bảng liên quan:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Get list tables with join conditions\n *\n * @return Array\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span>  Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'joins'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Scope to join table with corresponding conditions from getJoins()\n * @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n * @return \\Illuminate\\Database\\Eloquent\\Builder\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeMakeJoins</span><span class=\"token punctuation\">(</span>Builder <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$join</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token variable\">$join</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'='</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Lấy những trường sẽ sẽ được tìm kiếm dựa vào định nghĩa ở model:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Get all fields, which can be search in this tables and relation table\n * @return Array\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$model</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'columns'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Schema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">getColumnListing</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">primaryKey</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getUpdatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCreatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'updated_at'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">method_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'getDeletedAtColumn'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getDeletedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'deleted_at'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> <span class=\"token function\">array_diff</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHidden</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$others</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token variable\">$fields</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Định nghĩa scope dùng để tìm kiếm, ở đây có 2 trường hợp (Tìm kiếm trên bảng hiện tại và những bảng quan hệ hoặc chỉ tìm kiếm trên bảng hiện tại):</li>\n</ul>\n<p>1: Tìm kiếm trên bảng hiện tại và những bảng quan hệ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table and relational tables\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t*/</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearch</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>  <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">makeJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span>  <span class=\"token single-quoted-string string\">'.*'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>2: Chỉ tìm kiếm trên bảng hiện tại (No Relation):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table and relational tables\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t*/</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearchNoRelation</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>  <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h4>3.  Đầy đủ</h4>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span>  <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Traits</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Builder</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Schema</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span>  <span class=\"token package\">Arr</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">trait</span>  SearchTrait\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">/**\n     * Get list tables with join conditions\n     *\n     * @return Array\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>  Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'joins'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">/**\n     * Scope to join table with corresponding conditions from getJoins()\n     * @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n     * @return \\Illuminate\\Database\\Eloquent\\Builder\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeMakeJoins</span><span class=\"token punctuation\">(</span>Builder <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$join</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token variable\">$join</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'='</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">/**\n     * Get all fields, which can be search in this tables and relation table\n     * @return Array\n     */</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$model</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'columns'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Schema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">getColumnListing</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">primaryKey</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getUpdatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCreatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'updated_at'</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">method_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'getDeletedAtColumn'</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token operator\">?</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getDeletedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'deleted_at'</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> <span class=\"token function\">array_diff</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHidden</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$others</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$fields</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table and relational tables\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t* @return \\Illuminate\\Database\\Eloquent\\Builder\n\t*/</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearch</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">makeJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span>  <span class=\"token single-quoted-string string\">'.*'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t* @return \\Illuminate\\Database\\Eloquent\\Builder\n\t*/</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearchNoRelation</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span>  <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>II. Cách sử dụng</h2>\n<p><strong><em>1. Trong model:</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"<php?\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-<php? line-numbers\"><code class=\"language-<php?\">namespace  App\\Models;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse App\\Traits\\SearchTrait;\n\nclass \u001dProduct extends Model\n{\n\tuse SearchTrait;\n\t\n\tprotected $searchable = [\n\t\t&#39;columns&#39; =&gt; [\n\t\t\t&#39;products.name&#39;, &#39;categories.name&#39;, &#39;users.name&#39;\n\t\t],\n\t\t&#39;joins&#39; =&gt; [\n\t\t\t&#39;category&#39; =&gt; [&#39;\u001dproducts.category_id&#39;, &#39;categories.id&#39;],\n\t\t\t&#39;user&#39; =&gt; [&#39;\u001dproducts.user_id&#39;, &#39;users.id&#39;]\n\t\t]\n\t];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>columns</strong> : Những cột sẽ được thực hiện tìm kiếm.</li>\n<li><strong>joins</strong>: Những bảng quan hệ và điều kiện để nối bảng.</li>\n</ul>\n<p><strong><em>2. Trong \bController:</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span>  <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Controllers</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Product</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Request</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Controller</span>\n  \t<span class=\"token comment\">/**\n     * Get list products\n     * @param Request $request\n     * @return View\n     */</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>Request <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$keywork</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$request</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'keywork'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$products</span> <span class=\"token operator\">=</span> Product<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keywork</span><span class=\"token punctuation\">,</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'products.index'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'products'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Ở đây tham số thứ 2 của hàm search()</li>\n<li>$matchAllFields: Nếu <strong>true</strong> thì tất cả các trường tìm kiếm đều phải chứa giá trị <strong>keywork</strong> và ngược lại chỉ cần một trong các trường chứa <strong>keywork</strong>.</li>\n</ul>\n<h2>III. Kết luận</h2>\n<p>Như vậy, trong blog này chúng ta đã có một cách thực hiện công việc tìm kiếm một cách đơn giản và dễ tái sử dụng bằng cách sử dụng <strong>Trait</strong> trong Laravel. Mong là bài chia sẽ này sẽ giúp được mọi người trong công việc của mình.</p>\n<h6><em><div style=\"text-align: right\"> [Tran Van Tuan Anh | Trần Văn Tuấn Anh ] </div></em></h6>","id":"c63995c7-a6e2-5f5d-85a3-35e55a86f2e2","frontmatter":{"title":"[Laravel] Create a simple laravel search by trait","date":"04-11-2020","tags":["laravel"]},"fields":{"slug":"/create-a-simple-laravel-search-by-trait/","readingTime":{"text":"6 min read"}}}},{"node":{"excerpt":"Khi mới bắt đầu làm việc với Laravel, mình tin là nhiều người không biết hoặc không có thói quen \"khai thác\" hết những tính năng của Model. Vì vậy, trong bài viết này mình sẽ giới thiệu đến các bạn…","snippet":"<html><head></head><body><p>Khi m&#x1EDB;i b&#x1EAF;t &#x111;&#x1EA7;u l&#xE0;m vi&#x1EC7;c v&#x1EDB;i Laravel, m&#xEC;nh tin l&#xE0; nhi&#x1EC1;u ng&#x1B0;&#x1EDD;i kh&#xF4;ng bi&#x1EBF;t ho&#x1EB7;c kh&#xF4;ng c&#xF3; th&#xF3;i quen &quot;khai th&#xE1;c&quot; h&#x1EBF;t nh&#x1EEF;ng t&#xED;nh n&#x103;ng c&#x1EE7;a Model.</p> <p>V&#xEC; v&#x1EAD;y, trong b&#xE0;i vi&#x1EBF;t n&#xE0;y m&#xEC;nh s&#x1EBD; gi&#x1EDB;i thi&#x1EC7;u &#x111;&#x1EBF;n c&#xE1;c b&#x1EA1;n 7 &#x111;i&#x1EC1;u c&#x1EA7;n bi&#x1EBF;t &#x111;&#x1EC3; t&#x1EAD;n d&#x1EE5;ng t&#x1ED1;i &#x111;a&#x2026;</p></body></html>","html":"<p>Khi mới bắt đầu làm việc với Laravel, mình tin là nhiều người không biết hoặc không có thói quen \"khai thác\" hết những tính năng của Model.</p>\n<p>Vì vậy, trong bài viết này mình sẽ giới thiệu đến các bạn 7 điều cần biết để tận dụng tối đa Model, giúp mọi thứ sẽ đơn giản hơn rất nhiều.</p>\n<h2>Tạo Model</h2>\n<p>Đầu tiên chúng ta hãy tạo 1 model có tên <strong>Blog</strong> cho dễ thực hành nhé: </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"> php artisan make<span class=\"token punctuation\">:</span>model Blog </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Giờ chúng ta đã có Model rồi, bắt đầu vào tìm hiểu sức mạnh đầu tiên nào.</p>\n<h2>1. Casting attributes</h2>\n<p>Casting attributes - tức là bạn có thể chuyển đổi thuộc tính thành 1 kiểu dữ liệu nhất định, ví dụ như sau: </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$casts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>  \n    <span class=\"token single-quoted-string string\">'is_published'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'boolean'</span>  \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi khai báo như vậy, bất kể khi nào truy cập tới <em>is_published</em> thì nó cũng sẽ ở dạng boolean kể cả khi trong database bạn lưu ở dạng interger. </p>\n<p>Ngoài ra còn có rất nhiều kiểu chuyển đổi khác như là <em>date</em>, <em>datetime</em>.</p>\n<p>Khi mới bắt đầu, mình có thói quen viết thế này ở blade  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">{{ $blog->created_at->format ('Y-m-d') }}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và tất nhiên, nếu ở 1 blade khác cần dùng truy cập với <em>created_at</em> thì mình sẽ phải viết đi viết lại rất nhiều lần. Giờ đây điều này có thể thay thế bằng cách sử dụng thuộc tính $casts : </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$casts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'created_at'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'datetime:Y-m-d'</span><span class=\"token punctuation\">,</span> \n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Thuộc tính <em>created_at</em> sẽ luôn trả về theo định dạng <em>Y-m-d</em> và chúng ta không cần phải thực hiện bất kỳ công việc format nào nữa.</p>\n<h2>2. Accessors</h2>\n<p>Đôi khi bạn muốn kết hợp nhiều thuộc tính thành một hoặc bạn chỉ muốn định dạng một thuộc tính. Điều này có thể được thực hiện với <strong>Accessors</strong> trong Laravel.</p>\n<p>Mình sẽ lấy 1 ví dụ. Trong bảng <em>users</em>, có 2 trường là \"<em>first_name</em>\" và \"<em>last_name</em>\".  Nếu muốn hiển thị tên đầy đủ của người đó, có thể viết như sau </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">first_name</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' '</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">last_name</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đó là một cách tiếp cận rất ngây thơ. Cách Laravel để giải quyết vấn đề này là sử dụng một Accessors. Đây là một phương thức được định nghĩa trong một Model với cú pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">get[NameOfAttribute]Attribute</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Với bài toán mình vừa đưa ra ở trên, nếu muốn lấy <em>full_name</em> , bạn cần viết như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> getFullNameAttribute <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">return</span>  <span class=\"token double-quoted-string string\">\"<span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span> first_name<span class=\"token punctuation\">}</span></span> <span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span> last_name<span class=\"token punctuation\">}</span></span>\"</span> <span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó, muốn truy cập đến <em>full_name</em> chỉ cần gọi </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">full_name</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>3.  Mutators</h2>\n<p>Ngược với  <strong>Accessor</strong>,  <strong>Mutators</strong>  cho phép chúng ta định dạng lại giá trị thuộc tính trước khi lưu vào Database. Có cú pháp giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setLastNameAttribute</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'last_name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">ucfirst</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Ví dụ trên sẽ apply hàm  <em>ucfirst()</em>  cho  <em>last</em>name_  và lưu kết quả vào trong  <em>$attributes</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">last_name</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'jones'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả sẽ là 'Jones'.</p>\n<h2>4. Visibility</h2>\n<p>Có một vài thuộc tính không nên được chứa trong dữ liệu được lấy ra, ví dụ như thuộc tính <em>password</em>. Và đây là trường hợp mà <strong>Visibility</strong> phát huy tác dụng, chúng ta có thể sử dụng thuộc tính <strong>$hidden</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$hidden</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'password'</span> \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nói đơn giản nhất, hidden tức là không hiển thị. Thuộc tính <strong>$hidden</strong> giống như một blacklist cho thuộc tính. </p>\n<p>Và ngoài ra, chúng ta cũng có thể sử dụng thuộc tính <strong>$visible</strong> được coi là whitelist cho thuộc tính.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$visible</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'first_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'last_name'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi sử dụng thuộc tính  <strong>$visible</strong>  trong model, thì các thuộc tính không được thiết lập sẽ tự động ẩn.</p>\n<h2>5. Appending values</h2>\n<p>Khi một Model có  <em>accessors</em>  và  <em>relations</em>, theo mặc định chúng sẽ không được thêm vào array và JSON của Model. Để làm điều này, chúng ta phải thêm  <em>accessors</em>  và  <em>relations</em>  vào thuộc tính  <em><strong>$appends</strong></em>  của model. Ví dụ với thuộc tính  <em>full</em>name_:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><em>Chú ý: Accessors được thêm vào thuộc tính $append sử dụng snack case chứ không phải camel case.</em></p>\n<p>Giả sử model User có quan hệ 1 - n với model Blog:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">blogs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span>App\\<span class=\"token package\">Blog</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để thêm blog vào model chỉ cần thêm vào thuộc tính  <em>$appends</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'blogs'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể chỉ định thuộc tính thêm vào. Ví dụ, chúng ta muốn thêm thuộc tính blog id và title vào model:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'blogs:id,title'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>6. Touches</h3>\n<p>Khi một model có mối quan hệ  <em>BelongsTo</em>  hoặc  <em>BelongsToMany</em>  với model khác, như trong trường hợp này: Comment model thuộc về một Blog, khi bạn sửa một comment và bạn muốn blog liên quan đến comment này cũng sẽ cập nhật lại thời gian, điều này có thể được thực hiện bằng cách thêm mối quan hệ vào thuộc tính  <em>$touches</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Comment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$touches</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'blog'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">blog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span>App\\<span class=\"token package\">Blog</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi Comment model được update, thì thuộc tính  <em>updated</em>at_  của Blog model liên quan với comment này sẽ được cập nhật tự động.</p>\n<h2>Kết luận</h2>\n<p>Trên đây làm 6 điều quan trọng cần biết để có thể tận dụng tối đa Model, nếu như chưa có thói quen sử dụng thì mình khuyên các bạn nên thay đổi, ngay sau khi đọc được bài viết này :D </p>\n<p>Cảm ơn và hẹn gặp lại trong những bài viết mới nhé ! See yaaaa</p>\n<p> <em>From Vnus with love ....</em></p>","id":"1fae4a51-206d-5548-b2fb-6e76106c17a6","frontmatter":{"title":"6 things you need to know to get the most out of your Laravel Model","date":"19-10-2020","tags":["php","laravel"]},"fields":{"slug":"/6-things-you-need-to-know-to-get-the-most-out-of-your-laravel-model/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Như các bạn đã biết, phân quyền trong một ứng dụng là một phần không thể thiếu trong việc phát triển phần mềm. Vậy nên, hôm nay mình sẽ giới thiệu một package có thể giúp các bạn phân quyền nhanh và…","snippet":"<html><head></head><body><p>Nh&#x1B0; c&#xE1;c b&#x1EA1;n &#x111;&#xE3; bi&#x1EBF;t, ph&#xE2;n quy&#x1EC1;n trong m&#x1ED9;t &#x1EE9;ng d&#x1EE5;ng l&#xE0; m&#x1ED9;t ph&#x1EA7;n kh&#xF4;ng th&#x1EC3; thi&#x1EBF;u trong vi&#x1EC7;c ph&#xE1;t tri&#x1EC3;n ph&#x1EA7;n m&#x1EC1;m. V&#x1EAD;y n&#xEA;n, h&#xF4;m nay m&#xEC;nh s&#x1EBD; gi&#x1EDB;i thi&#x1EC7;u m&#x1ED9;t package c&#xF3; th&#x1EC3; gi&#xFA;p c&#xE1;c b&#x1EA1;n ph&#xE2;n quy&#x1EC1;n nhanh v&#xE0; &#x111;&#x1A1;n gi&#x1EA3;n trong m&#x1ED9;t website &#x111;&#x1B0;&#x1EE3;c vi&#x1EBF;t b&#x1EB1;ng&#x2026;</p></body></html>","html":"<p>Như các bạn đã biết, phân quyền trong một ứng dụng là một phần không thể thiếu trong việc phát triển phần mềm. Vậy nên, hôm nay mình sẽ giới thiệu một package có thể giúp các bạn phân quyền nhanh và đơn giản trong một website được viết bằng PHP với framework là Laravel. Đó là package laravel-permission. Chúng ta cùng tìm hiểu nhé!</p>\n<h1>I. Cài đặt Laravel permission</h1>\n<p>Laravel permission cho phép chúng ta có thể dễ dàng phân chia các vai trò (roles) và quyền (permissions) dùng để quản lý quyền hạn truy cập trong một trang web. Để cài đặt package này, chúng ta cần:</p>\n<ul>\n<li>Laravel phiên bản cao hơn 5.8</li>\n<li>Nếu bạn đang có sẵn file <code class=\"language-text\">config/permission.php</code> bạn phải đổi tên hoặc xóa, bởi vì khi setup thì package sẽ được publishes vào <code class=\"language-text\">config/permission.php</code>\nChúng ta chạy câu lệnh dưới để cài đặt package nhé:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">composer <span class=\"token keyword\">require</span> spatie<span class=\"token operator\">/</span>laravel<span class=\"token operator\">-</span>permission</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó, trong config/app.php chúng ta add service provide cho package như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    Spatie\\<span class=\"token package\">Permission<span class=\"token punctuation\">\\</span>PermissionServiceProvider</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó, publish migration thông qua lệnh:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">php artisan vendor<span class=\"token punctuation\">:</span>publish <span class=\"token operator\">--</span>provider<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"Spatie\\Permission\\PermissionServiceProvider\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Chạy lệnh <code class=\"language-text\">php artisan migrate</code> và chúng ta sẽ có các bảng như roles, permissions, role<em>has</em>permissions, model<em>has</em>roles và model<em>has</em>permission</p>\n<h2>II. Tạo Role và Permission</h2>\n<p>Đầu tiên add trait của <code class=\"language-text\">Spatie\\Permission\\Traits\\HasRoles</code> vào model mà bạn muốn phần quyền ở đây thì mình sẽ add vào model <code class=\"language-text\">Admin</code> nhé:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Traits<span class=\"token punctuation\">\\</span>HasRoles</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Admin</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Authenticatable</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">HasRoles</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó chúng ta thêm các vai trò (roles) và quyền (permissions), một role có thể có nhiều permission. Chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Role</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Permission</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$role</span> <span class=\"token operator\">=</span> Role<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span> <span class=\"token operator\">=</span> Permission<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Như trên các bạn đã thấy, mình vừa tạo ra một Role có tên là <code class=\"language-text\">subAdmin</code> và một Permission là <code class=\"language-text\">managementUser</code></p>\n<p>Một quyền có thể được chỉ định cho một vài cho bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permission</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//or...</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nhiều quyền có thể được đồng bộ hóa với một vai trò bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncPermissions</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permissions</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncRoles</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$roles</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Có thể xóa quyền khỏi vai trò bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">revokePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permission</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeRole</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Để lấy thông tin tất cả các <code class=\"language-text\">users</code> có role là <code class=\"language-text\">subAdmin</code> chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> Admin<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">role</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc trả về các user có quyền truy cập <code class=\"language-text\">managementUser</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> Admin<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">permission</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>III. Cách sử dụng</h2>\n<p><strong><em>1. Trao quyền trực tiếp cho 1 user</em></strong></p>\n<p>Bạn có thể giao một quyền cho một <code class=\"language-text\">user</code> như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span>managementUser'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>bạn cũng có thể giao nhiều quyền user trong một lần hoặc có thể sử dụng mảng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//or</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để xóa một quyền khỏi một <code class=\"language-text\">user</code> nào đó, chúng ta làm như sau :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">revokePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc xóa và thêm mới một quyền khác thì chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncPermissions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và còn một số option khác, các bạn có thể tham khảo thêm <a href=\"https://spatie.be\">https://spatie.be</a></p>\n<p><strong><em>2. Trao quyền thông qua Role</em></strong></p>\n<p>Một roles có thể được trao cho bất cứ <code class=\"language-text\">users</code> nào bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'edit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cũng có thể giao nhiều roles cho user trong một lần hoặc có thể sử dụng mảng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể xóa và thêm vai trò mới thông qua</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hoặc để xóa một role khỏi một user, chúng ta chỉ cần làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cũng có thể check xem liệu <code class=\"language-text\">user</code> có phải là <code class=\"language-text\">role</code> đang cần tìm bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Sử dụng với middleware</em></strong></p>\n<p>Bạn có thể sử dụng <code class=\"language-text\">can</code> như một mặc định để giới hạn quyền truy cập cho trang web bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'can:managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc nếu bạn không muốn sử dụng mặc định, Laravel permission mang đến cho chúng ta các middleware <code class=\"language-text\">RoleMiddleware</code>, <code class=\"language-text\">PermissionMiddleware</code> and <code class=\"language-text\">RoleOrPermissionMiddleware</code>. Để sử dụng, bạn cần thêm vào app/Http/Kernel.php file như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$routeMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Middlewares<span class=\"token punctuation\">\\</span>RoleMiddleware</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'permission'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Middlewares<span class=\"token punctuation\">\\</span>PermissionMiddleware</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó sử dụng chúng để kiểm tra các route :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'role:super-admin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nRoute<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'permission:managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>4. Sử dụng trực tiếp trên Blade</em></strong></p>\n<p>Đối với phần view, để hiển thị view tương ứng cho các vai trò, chúng ta có thể sử dụng <code class=\"language-text\">@can</code>, <code class=\"language-text\">@cannot</code>, <code class=\"language-text\">@canany</code>, and <code class=\"language-text\">@guest</code> để kiểm tra việc xem thông tin hiển thị trên một trang web. Chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">//</span>\n@endcan</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn cũng có thể dùng <code class=\"language-text\">role</code> để check việc này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">role</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//</span>\n@endrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc là:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">hasrole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//</span>\n@endhasrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể linh hoạt trong việc check nhiều <code class=\"language-text\">roles</code> hơn như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">hasanyrole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin|admin'</span><span class=\"token punctuation\">)</span>\n   <span class=\"token comment\">//</span>\n@<span class=\"token keyword\">else</span>\n  <span class=\"token comment\">//</span>\n@endhasanyrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>IV. Kết luận</h2>\n<p>Bài viết trên mình cũng đã giới thiệu và hướng dẫn sử dụng một số tính năng cơ bản trong package laravel permission để phân quyền trong ứng dụng chạy bằng framework Laravel. Cảm ơn các bạn đã đọc bài viết của mình ^-^</p>\n<h6><em><div style=\"text-align: right\"> - by Phan Trung </div></em></h6>","id":"d67db112-1e9b-5cad-bbb0-8fddcb9110a7","frontmatter":{"title":"[Laravel] Simple authorization with the Laravel permission package","date":"14-10-2020","tags":["php","laravel"]},"fields":{"slug":"/phan-quyen-voi-package-Laravel-permission/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"1. Định nghĩa Dependency Injection(DI) là mô hình lập trình, cách tổ chức code sao cho các đoạn code khác nhau, các module khác nhau, các lớp khác nhau không phụ thuộc nhau một cách cứng nhắc, mà cần…","snippet":"<html><head></head><body><h4>1. &#x110;&#x1ECB;nh ngh&#x129;a</h4> <p>Dependency Injection(DI) l&#xE0; m&#xF4; h&#xEC;nh l&#x1EAD;p tr&#xEC;nh, c&#xE1;ch t&#x1ED5; ch&#x1EE9;c code sao cho c&#xE1;c &#x111;o&#x1EA1;n code kh&#xE1;c nhau, c&#xE1;c module kh&#xE1;c nhau, c&#xE1;c l&#x1EDB;p kh&#xE1;c nhau kh&#xF4;ng ph&#x1EE5; thu&#x1ED9;c nhau m&#x1ED9;t c&#xE1;ch c&#x1EE9;ng nh&#x1EAF;c, m&#xE0; c&#x1EA7;n c&#xF3; m&#x1ED9;t c&#x1A1; ch&#x1EBF; thay &#x111;&#x1ED5;i c&#xE1;c th&#xE0;nh ph&#x1EA7;n ph&#x1EE5; thu&#x1ED9;c&#x2026;</p></body></html>","html":"<h3>1. Định nghĩa</h3>\n<p>Dependency Injection(DI) là mô hình lập trình, cách tổ chức code sao cho các đoạn code khác nhau, các module khác nhau, các lớp khác nhau không phụ thuộc nhau một cách cứng nhắc, mà cần có một cơ chế thay đổi các thành phần phụ thuộc cả ở thời điểm chạy và thời điểm biên dịch.</p>\n<h3>2. Lợi ích</h3>\n<p>Làm giảm sự phụ thuộc giữa các đối tượng.</p>\n<p>Giúp viết Unit test dễ dàng hơn.</p>\n<p>Giảm thiểu được boilerplate code vì việc khởi tạo dependency được làm bởi một component khác.</p>\n<p>Mở rộng dự án dễ dàng hơn.</p>\n<p>Giúp ích trong việc liên kết lỏng (loose coupling) giữa các thành phần trong dự án.</p>\n<p>Dễ bảo trì, module hóa ứng dụng và mở rộng.</p>\n<h3>3. Nhược điểm</h3>\n<p>Dependency Injection ẩn các dependency nên một số lỗi chỉ xảy ra khi chạy chương trình thay vì có thể phát hiện khi biên dịch chương trình.</p>\n<p>Nó khá là phức tạp để học, và nếu dùng quá đà thì có thể dẫn tới một số vấn đề khác.</p>\n<p>Có thể làm ảnh hưởng tới chức năng auto-complete hay Find references của một số IDE.</p>\n<p>Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$username</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">username</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$username</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">password</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">username</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C1. Không sử dụng DI</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C2. Sử dụng DI</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C3. Sử dụng DI trong setter</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C4. Sử dụng DI thông qua Interface</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">DatabaseInterface</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong cách 1 ở trên ta không sử dụng DI sẽ có một số vấn đề là ta phải khởi tạo Config ngay trong class Database, về logic thì không có gì để nói, nhưng về mở rộng và bảo trì code thì sẽ khó bởi:</p>\n<p>Database và Config class đang bị gắn vào nhau, nếu Config có sự thay đổi(về tham số khởi tạo chẳng hạn) thì sẽ kéo theo sự thay đổi của Database và những class liên quan tới Config.</p>\n<p>Database biết nhiều thứ của Config quá, mà cái gì quá cũng không tốt.</p>\n<p>Với cách thứ 2 thì Database không phụ thuộc vào Config nữa, mà được truyền thẳng đối tượng Config thông qua hàm khởi tạo, như vậy sẽ giải quyết được vấn đề ở cách 1 thực hiện.</p>\n<h3>4. Các kiểu Dependency Injection</h3>\n<h3>4.1. Constructor Injection</h3>\n<p>Ở cách thứ 2 chính là sử dụng kiểu Constructor Injection, với cách này có một số đặc điểm là giảm sự phụ thuộc, giảm sự phức tạp từ Config và linh hoạt trong việc mở rộng và thay đổi từ Config.</p>\n<h3>4.2. Setter Injection</h3>\n<p>Ở cách thứ 3 là sử dụng kiểu Setter Injection. Như vậy ta cũng không cần làm thay đổi logic trong code mà chỉ đơn giản khai báo trong setter, đôi khi chúng ta cũng cần một giá trị mặc định gì đó cho Config thì có thể triển khai trong setter này.</p>\n<h3>4.3. Interface Injection</h3>\n<p>Sử dụng như trong cách thứ 4. Khi Database cần triển khai thì cần implements DatabaseInterface và cần cung cấp đối tượng Config thông qua setConfig.</p>\n<h2>5. Dependency Injection Container</h2>\n<p><code>Khi đối tượng phụ thuộc quá lớn thì sao?</code></p>\n<p>Lúc này giải pháp đưa ra là cần tạo một thùng chứa chuyên quản lý tất cả các đối tượng độc lập, từ autoload, khởi tạo, thiết lập và cài cắm vào đối tượng khác. Dependency Injection Container được ra đời.\nTrong Laravel có một công cụ rất mạnh đó là Service Container, nó quản lý các dependencies và thực hiện xử lý dependency injection. Các bạn có thể tham khảo thêm trong <a href=\"https://laravel.com/docs/8.x/container\">tài liệu của Laravel.</a></p>\n<h2>6. Tạm kết</h2>\n<p>Vậy trách nhiệm của dependency injection là:</p>\n<ul>\n<li>Tạo ra các object.</li>\n<li>Biết được class nào cần những object đấy.</li>\n<li>Cung cấp cho những class đó những object chúng cần.</li>\n</ul>\n<p>Bằng cách này, nếu trong tương lai object đó có sự thay đổi thì dependency injection có nhiệm vụ cấp lại những object cần thiết cho class.</p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"5809e949-9f5e-51e1-91a3-91888adf5371","frontmatter":{"title":"Dependency injection and dependency injection container in Laravel","date":"12-10-2020","tags":["php","laravel"]},"fields":{"slug":"/dependency-injection-and-dependency-injection-container-in-laravel/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Bài viết này mình muốn chia sẻ với các bạn một gói xây dựng Widget trong Laravel khá hữu dụng và ổn định, để biết chi tiết hơn chúng ta cùng đi vào vấn đề luôn nhé! version laravel >= 5.5 I. Giới…","snippet":"<html><head></head><body><p>B&#xE0;i vi&#x1EBF;t n&#xE0;y m&#xEC;nh mu&#x1ED1;n chia s&#x1EBB; v&#x1EDB;i c&#xE1;c b&#x1EA1;n m&#x1ED9;t g&#xF3;i x&#xE2;y d&#x1EF1;ng Widget trong Laravel kh&#xE1; h&#x1EEF;u d&#x1EE5;ng v&#xE0; &#x1ED5;n &#x111;&#x1ECB;nh, &#x111;&#x1EC3; bi&#x1EBF;t chi ti&#x1EBF;t h&#x1A1;n ch&#xFA;ng ta c&#xF9;ng &#x111;i v&#xE0;o v&#x1EA5;n &#x111;&#x1EC1; lu&#xF4;n nh&#xE9;!</p> <p><em>version laravel</em> &gt;= 5.5</p> <h1>I. Gi&#x1EDB;i thi&#x1EC7;u</h1> <ul> <li> <p>Trong qu&#xE1; tr&#xEC;nh x&#xE2;y d&#x1EF1;ng website&#x2026;</p></li></ul></body></html>","html":"<p>Bài viết này mình muốn chia sẻ với các bạn một gói xây dựng Widget trong Laravel khá hữu dụng và ổn định, để biết chi tiết hơn chúng ta cùng đi vào vấn đề luôn nhé!</p>\n<p><em>version laravel</em> >= 5.5</p>\n<h1>I. Giới thiệu</h1>\n<ul>\n<li>\n<p>Trong quá trình xây dựng website chúng ta thường có rất nhiều các thành phần lặp đi lặp lại việc xử lý logic</p>\n<ul>\n<li>Calenda, Chart, List,... trong các website phía quản trị admin hoặc hệ thống quản lý</li>\n<li>1 website tin tức luôn có 1 sidebar left hiển thị các bài viết mới nhất, bài viết liên quan.</li>\n<li>1 website thương mại điện tử dưới mỗi detail sản phẩm luôn hiển thị slider sản phẩm liên quan....</li>\n</ul>\n</li>\n<li>Các vấn đề trên về logic xử lý thì giống nhau nhưng có thể chỉ khác về Input. Việc lặp lại khiến code khó maintain khi thay đổi, các lớp xử lý logic sinh ra nhiều khó quản lý, hiệu năng không đảm bảo. Vì vậy mình đã tìm 1 ra gói Laravel Widget có thể hỗ trỡ mình giải quyết vấn đề đó khi xây dựng website bằng Framework Laravel.</li>\n<li>Laravel Widget được xây dựng nhằm mục đích hỗ trợ các website tối ưu cơ bản quá trình xây dựng các thành phần trong web cả về logic, giao diện và clean code. Tương tác tốt với các lớp và cấu hình &#x26; cài đặt dễ dàng, dễ sử dụng. Tính mở rộng cũng rất cao hỗ trợ rất tốt cho blade view. </li>\n</ul>\n<h1>II. Chi tiết</h1>\n<h2>Cài đặt</h2>\n<ul>\n<li>\n<p>Việc cài đặt dễ dàng với câu lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer require arrilot/laravel-widgets</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Version Laravel >= 5.5</li>\n</ul>\n<h2>Sử dụng</h2>\n<p><em>Để dễ hình dung về 1 case chúng ta sẽ đi vào ví dụ là 1 website tin tức và khi bạn truy cập vào website này, luôn có 1 thành phần hiển thị các tin tức đã xem gần đây của bạn. Chúng ta sẽ tạo 1 widget xử lý điều đó nhé!</em></p>\n<ul>\n<li>\n<p>Đầu tiên, chúng ta chạy 1 câu lệnh tạo ra 1 widget được cung cấp bởi gói đã cài đặt trên:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan make:widget RecentNews</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>lệnh này sẽ tạo ra 2 file: <code class=\"language-text\">resources/views/widgets/recent_news.blade.php</code> (1 file blade view trống) và <code class=\"language-text\">app/Widgets/RecentNews</code> (nếu bạn không muốn tạo file view thì thêm <code class=\"language-text\">--plain</code> vào cuối câu lệnh trên)</p>\n</li>\n</ul>\n<p>File <code class=\"language-text\">app/Widgets/RecentNews</code> có nội dung như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">  <span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Widgets</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">use</span> <span class=\"token package\">Arrilot<span class=\"token punctuation\">\\</span>Widgets<span class=\"token punctuation\">\\</span>AbstractWidget</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n  <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/**\n      * The configuration array.\n      *\n      * @var array\n      */</span>\n      <span class=\"token keyword\">protected</span> <span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">/**\n      * Treat this method as a controller action.\n      * Return view() or other content to display.\n      */</span>\n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets.recent_news'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token single-quoted-string string\">'config'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>tại đây sẽ xử lý logic dữ liệu và hiển thị widget, khá giống với vai trò 1 controller. Bạn có thể đưa các lớp vào đây xử lý. Ví dụ mình muốn sử dụng 1 repository <code class=\"language-text\">NewsRepository</code> hoặc 1 model <code class=\"language-text\">News</code> có thể truyền vào <code class=\"language-text\">function run()</code> sau đó truyền params ra view của widget như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>NewsRepository <span class=\"token variable\">$newRepository</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$listNews</span> <span class=\"token operator\">=</span> News<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$newsRecents</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$newRepository</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getListRecent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets.recent_news'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'config'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'news'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$listNews</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'newsRecents'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$newsRecents</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Tiếp theo để hiển thị view widget <code class=\"language-text\">recentNews</code> chúng ta có thể đặt <code class=\"language-text\">@widget(&#39;recentNews&#39;)</code> ở bất kỳ blade view nào chúng ta muốn, widget sẽ hiển thị ở vị trí đó. Ví dụ nội dung file <code class=\"language-text\">resource/views/widgets/recent_news.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"col-md-4\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Tin tức đã xem<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n@<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$newsRecents</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$news</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"box-news-recent\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"title\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token variable\">$news</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">title</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"{{ <span class=\"token interpolation\"><span class=\"token variable\">$news</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">thumbnail</span></span> }}\"</span> alt<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"{{ <span class=\"token interpolation\"><span class=\"token variable\">$news</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">title</span></span> }}\"</span> width<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"70\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n@<span class=\"token keyword\">foreach</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Giờ hiển thị vào <code class=\"language-text\">resource/views/news/index.php</code> là 1 file view chúng ta chỉ cần chèn đoạn code gọi widget này ở bất kỳ đâu trong file đó:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">widget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'newsRecent'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'recentNews'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc tiếp:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">recentNews</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Truyền các tham số vào Widget (Passing variables to widget)</h2>\n<h3>truyền qua mảng cấu hình ($config)</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'count'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">5</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n@<span class=\"token function\">widget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'recentNews'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// shows 5</span>\n@<span class=\"token function\">widget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'recentNews'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'count'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// shows 10</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code class=\"language-text\">count</code> cho phép chúng ta hiển thị widget đó lặp lại liên tiếp.</li>\n<li>\n<p>Có thể truyền các giá trị tuỳ biến từ bên ngoài vào widget thông qua <code class=\"language-text\">$config</code> ví dụ <code class=\"language-text\">@widget(&#39;recentNews&#39;, [&#39;foo&#39; =&gt; &#39;bar&#39;])</code>, bên trong <code class=\"language-text\">app/Widgets/RecentNews</code> tại <code class=\"language-text\">function run()</code> chúng ta có thể đọc được param vừa truyền:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token variable\">$foo</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'foo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// $foo == 'bar' </span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets.recent_news'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'config'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Widget bất đồng bộ (Asynchronous widgets)</h2>\n<p>Trong một vài trường hợp, load widget bằng Ajax rất có lợi. Việc load widget bất đồng bộ cũng rất đơn giản, chỉ cần đổi cú pháp từ <code class=\"language-text\">Widget:: =&gt; AsyncWidget::</code> và <code class=\"language-text\">@widget =&gt; @asyncWidget</code> là xong.</p>\n<ul>\n<li>Các tham số của widget sẽ được mã hóa (theo mặc định) và được gửi qua lệnh gọi ajax. Vì vậy, khi nhận tham số hãy sử dụng <code class=\"language-text\">json_encoded()</code> và <code class=\"language-text\">json_decoded()</code>.</li>\n</ul>\n<h6><em>Lưu ý: Bạn có thể tắt mã hóa cho một <strong>widget</strong> cụ thể bằng cách thêm</em> <code class=\"language-text\">public  $encryptParams = false;</code> <em>trong đó. Tuy nhiên, hành động này là không khuyến khích nếu không thực sự cần thiết vì không an toàn.</em></h6>\n<h6><em>Lưu ý: Bạn có thể đặt</em> <code class=\"language-text\">use_jquery_for_ajax_calls = true</code> <em>trong tệp cấu hình để sử dụng nó cho các cuộc gọi ajax nếu muốn, nhưng bạn cần thêm jquery vào trang của mình theo cách thủ công trong trường hợp này.</em></h6>\n<ul>\n<li>\n<p>Mặc định trong quá trình call Ajax hiển thị widget thì sẽ không có gì hiển thị khi loading, bạn có thể custom bằng <code class=\"language-text\">function placeholder()</code> cho việc hiển thị đó:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">placeholder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token single-quoted-string string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Tự động tải lại Widget (Reloadable widgets)</h2>\n<ul>\n<li>Bạn có thể cấu hình đơn giản tải lại Widget sau N giây bạn muốn.</li>\n<li>\n<p>Chỉ cần set <code class=\"language-text\">$reloadTimeout</code> là xong</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n  * The number of seconds before each reload.\n  *\n  * @var int|float\n  */</span>\n  <span class=\"token keyword\">public</span> <span class=\"token variable\">$reloadTimeout</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h6>_Lưu ý: Cân nhắc sử dụng tính năng này một cách hợp lý không sẽ trở thành spam.</h6>\n</li>\n</ul>\n<h2>Caching</h2>\n<ul>\n<li>\n<p>Cache 1 widget bằng cách set <code class=\"language-text\">public $cacheTime</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/**\n * The number of minutes before cache expires.\n * False means no caching at all.\n *\n * @var int|float|bool\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token variable\">$cacheTime</span> <span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Widget groups</h2>\n<ul>\n<li>\n<p>Thông thường chúng ta sẽ hiển thị các widget bằng cách viết chúng vào blade view muốn hiển thị. Nhưng còn 1 cách khác cho phép chúng ta có thể sắp xếp vị trí widget, nhóm chúng lại và có thể viết trong controller với cú pháp đơn giản:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// add several widgets to the 'sidebar' group anywhere you want (even in controller)</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgetName1'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$config1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgetName2'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$config2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>// display them in a view in the correct order\n@widgetGroup('sidebar')\n// or\n{{ Widget::group('sidebar')->display() }}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">- Bạn có thể đặt dấu phân cách tuỳ ý vào giữa các widget được group lại `Widget::group(&#39;sidebar&#39;)-&gt;setSeparator(&#39;&lt;hr&gt;&#39;)-&gt;...;`\n\n- Bạn cũng có thể gói từng widget trong một nhóm bằng `wrap` bằng cách:\n```php\nWidget::group(&#39;sidebar&#39;)-&gt;wrap(function ($content, $index, $total) {\n    // $total is a total number of widgets in a group.\n    return &quot;&lt;div class=&#39;widget-{$index}&#39;&gt;{$content}&lt;/div&gt;&quot;;\n})-&gt;...;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Removing widgets from a group</h3>\n<ul>\n<li>Trong một số trường hợp khi hiển thị ta phải bỏ 1 số widget vì một vài điều kiện thì có các cách sau</li>\n<li>\n<p>loại bỏ widget khỏi group bằng unique ID</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$id1</span> <span class=\"token operator\">=</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$id2</span> <span class=\"token operator\">=</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeById</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// There is only second widget in the group now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả widgets ra khỏi group bằng specific name\nví dụ add 2 widget cùng có specific name là <code class=\"language-text\">&quot;files&quot;</code> sau đó thực hiện xoá các widget có specific name = \"files\"</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeByName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Widget group is empty now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả widgets có cùng position ra khỏi group.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeByPosition</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Widget group is empty now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả widget trong group</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Widget group is empty now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3>Kiểm tra trạng thái của group (Checking the state of a group)</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bool</span>\n\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bool</span>\n\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// int</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Kết luận</h2>\n<ul>\n<li>Qua bài viết trên chúng ta có thể thấy Laravel Widget dễ sử dụng, cú pháp thân thiện và giải quyết được nhiều vấn đề trong quá trình xây dựng website.</li>\n<li>Laravel Widget tương thích với nhiều phiên bản của Laravel và khá linh hoạt trong bất kể Design pattern nào.</li>\n<li>Tuy nhiên vẫn còn 1 số điểm hạn chế về việc sử dụng bất đồng bộ, pagination,... và quá trình phát triển phải custom lại 1 số thứ về logic xử lý.</li>\n</ul>\n<h2>Tài liệu tham khảo</h2>\n<ul>\n<li>Các bạn có thể đọc tài liệu gốc &#x26; follow update Laravel Widget tại đây\n<a href=\"https://github.com/arrilot/laravel-widgets\">https://github.com/arrilot/laravel-widgets</a></li>\n</ul>\n<h6><em><div style=\"text-align: right\"> - by Ngoc Quan </div></em></h6>","id":"0a3a7ae8-7606-5eba-91c8-d9895d9f57cc","frontmatter":{"title":"Widget trong Laravel","date":"08-10-2020","tags":["php","laravel"]},"fields":{"slug":"/widget-trong-laravel/","readingTime":{"text":"8 min read"}}}},{"node":{"excerpt":"Ở bài viết trước chúng ta đã tìm hiểu về Authentication cơ bản trong framework Laravel và demo một vài tính năng đăng nhập, đăng ký,... Nhưng đó là chỉ là 1 auth user, thông thường 1 website ít nhất…","snippet":"<html><head></head><body><p>&#x1EDE; b&#xE0;i vi&#x1EBF;t tr&#x1B0;&#x1EDB;c ch&#xFA;ng ta &#x111;&#xE3; t&#xEC;m hi&#x1EC3;u v&#x1EC1; Authentication c&#x1A1; b&#x1EA3;n trong framework Laravel v&#xE0; demo m&#x1ED9;t v&#xE0;i t&#xED;nh n&#x103;ng &#x111;&#x103;ng nh&#x1EAD;p, &#x111;&#x103;ng k&#xFD;,... Nh&#x1B0;ng &#x111;&#xF3; l&#xE0; ch&#x1EC9; l&#xE0; 1 auth user, th&#xF4;ng th&#x1B0;&#x1EDD;ng 1 website &#xED;t nh&#x1EA5;t s&#x1EBD; c&#xF3; 2 &#x111;&#x1ED1;i t&#x1B0;&#x1EE3;ng user (User th&#xF4;ng th&#x1B0;&#x1EDD;ng, User&#x2026;</p></body></html>","html":"<p>Ở <a href=\"https://blog.tomosia.com/authentication-trong-laravel/\">bài viết trước</a> chúng ta đã tìm hiểu về Authentication cơ bản trong framework Laravel và demo một vài tính năng đăng nhập, đăng ký,... Nhưng đó là chỉ là 1 auth user, thông thường 1 website ít nhất sẽ có 2 đối tượng user (User thông thường, User Administrator). Chưa kể có những hệ thống có rất nhiều user và nằm ở các bảng khác nhau trong database.\nVí dụ: 1 công ty có các cửa hàng, trong cửa hàng có các nhân viên và người dùng mua hàng\nChúng ta sẽ cần có Account Company, Account Shop, Account Employee, Account User và các acc này không có cùng thuộc tính giống nhau nên không thể lưu chung 1 bảng được mà phải lưu ở các bảng khác nhau trong database. Vậy Laravel sẽ xử lý ra sao chúng ta cùng tìm hiểu nhé!</p>\n<p><em>Authentication basic Laravel</em> :\n<a href=\"https://blog.tomosia.com/authentication-trong-laravel/\">https://blog.tomosia.com/authentication-trong-laravel/</a></p>\n<p><em>Version Laravel: 5.x, 6.x, 7.x</em></p>\n<h1>I. Chuẩn bị dữ liệu</h1>\n<p><strong><em>1. Database</em></strong></p>\n<ul>\n<li>\n<p>Dùng migrations để tạo 4 bảng tương ứng với 4 authenticate user của hệ thống</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan make:migration create_admins_table --create<span class=\"token operator\">=</span>admins\nphp artisan make:migration create_shops_table --create<span class=\"token operator\">=</span>shops\nphp artisan make:migration create_admins_table --create<span class=\"token operator\">=</span>employees\nphp artisan make:migration create_users_table --create<span class=\"token operator\">=</span>users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>migration <code class=\"language-text\">create_admins_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admins'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>migration <code class=\"language-text\">create_shops_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'shops'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'company_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>migration <code class=\"language-text\">create_employees_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'employees'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'company_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'shop_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>migration <code class=\"language-text\">create_users_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'address'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_by'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>chạy câu lệnh để chạy 4 migration trên khởi tạo thành 4 bảng tương ứng trong database</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan migrate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Model</em></strong></p>\n</li>\n<li>\n<p>Tạo 1 thư mục app/Models trong projects sau đó tạo 4 models tương ứng các bảng vừa tạo</p>\n<ul>\n<li>\n<p>Để tránh dài dòng chúng ta chỉ ví dụ 1 Model cho bảng Admin, các bảng khác tạo tương tự:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<p>use Illuminate\\Notifications\\Notifiable;\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;</p>\n<p>class Admin extends Authenticatable\n{\nuse Notifiable;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">protected $guard = &#39;admin&#39;;\n\nprotected $fillable = [\n    &#39;name&#39;, &#39;email&#39;, &#39;password&#39;,\n];\n\nprotected $hidden = [\n    &#39;password&#39;, &#39;remember_token&#39;,\n];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">+ Ở đây **Model Admin** có extends **Authenticatable** của Laravel để kế thừa các dặc tính Authenticate của Laravel và sử dụng như 1 model bình thường.\n+ Tiếp theo ta có thêm thành phần \n```php\nprotected $guard = &#39;admin&#39;;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>mục đích để khai báo tên GUARD cho model và sau này sử dụng authenticate Admin, tên GUARD sẽ sử dụng rất thường xuyên và quan trọng.</p>\n</li>\n<li>Các model còn lại các bạn tạo tương tự Model Admin nhé!</li>\n</ul>\n<h2>II Cấu hình</h2>\n<ul>\n<li>Giờ chúng ta sẽ đi vào việc cấu hình các luồng xác thực cho các đối tượng User vừa khởi tạo dữ liệu và model.</li>\n</ul>\n<p><strong>GUARD</strong></p>\n<ul>\n<li>\n<p>Laravel cho phép chúng ta được sử dụng nhiều guardard, mỗi guard sẽ ứng với 1 thành phần xác thực khác nhau. Việc cấu hình guard ở file <code class=\"language-text\">Config/auth.php</code></p>\n<ul>\n<li>\n<p>cấu hình guard mặc định của Laravel như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'guards'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n<span class=\"token single-quoted-string string\">'web'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token single-quoted-string string\">'api'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'token'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'hash'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mặc định chỉ có 2 guard là web và api, nhưng chúng ta có tới 4 guard như đã nói trên thì sẽ câu hình như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'guards'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n<span class=\"token single-quoted-string string\">'admin'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'admin_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'shop'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'shop_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'employee'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'employee_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'user'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'user_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>PROVIDER</strong></p>\n<ul>\n<li>Chắc các bạn cũng đã thấy cấu hình guard vừa rồi mình cũng đã thay đổi cả tên provider của từng guard. Tiếp theo mình sẽ hướng dẫn các bạn cấu hình provider nhé!</li>\n</ul>\n<p>Guard để xác thực người dùng còn Provider sẽ lấy ra dữ liệu người dùng sau khi xác thực, vậy nên việc cấu hình Provider sẽ liên quan tới việc liên kết Authenticate tới Model tương ứng. Việc cấu hình vẫn ở trong <code class=\"language-text\">app/auth.php</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'admin_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>Admin</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'shop_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>Shop</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'employee_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>Employee</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'user_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>ROUTE</strong></p>\n<ul>\n<li>như vậy từ việc cấu hình ở Guard liên kết vói Provider và Provider liên kết với Model thì chúng ta đã hoàn tất việc cấu hình về cơ bản cho các autheticate. Giờ thì chúng ta khai báo các route tương ứng để thực hiện các chức năng cơ bản của 1 authenticate như đăng nhập, đăng ký, quên mật khẩu,... như sau:</li>\n<li>\n<p>Ví dụ với Admin, còn lại các bạn làm tương tự</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LoginController@showLoginForm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nRoute<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LoginController@login'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>Route::group(['namespace' => 'Admin', 'prefix' => 'admin'], function () {\nRoute::group(['middleware' => ['auth:admin']], function () {\nRoute::get('/home', 'HomeController@index');\n});\n});</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Tại đây mình đã gọi tới LoginController để hiển thị form login với `function showLoginForm` và check login cho Admin với `function login`, sau khi login thành công với Auth Admin sẽ điều hướng tới trang home.\n\n## III Xử lý multiple authenticate\n**_1. Controller_**\n\n- Tại đây mình mô tả cách xử lý chung các autheticate trong 1 controller, nếu các bạn muốn xử lý riêng thì tách controller xử lý tương tự.\n```php\n&lt;?php\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Foundation\\Auth\\AuthenticatesUsers;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse App\\Http\\Controllers\\Controller;\n\nclass LoginController extends Controller\n{\n    /*\n    |--------------------------------------------------------------------------\n    | Login Controller\n    |--------------------------------------------------------------------------\n    |\n    | This controller handles authenticating users for the application and\n    | redirecting them to your home screen. The controller uses a trait\n    | to conveniently provide its functionality to your applications.\n    |\n    */\n\n    use AuthenticatesUsers;\n\n    /**\n     * Where to redirect users after login.\n     *\n     * @var string\n     */\n\n    protected $redirectTo = &#39;/home&#39;;\n    /**\n     * Create a new controller instance.\n     *\n     * @return void\n     */\n\n     const ALL_GUARD = [\n       &#39;admin&#39;, &#39;shop&#39;, &#39;employee&#39;, &#39;user&#39;\n     ];\n\n    public function guard()\n    {\n        return Auth::guard(&#39;admin&#39;);\n    }\n\n    function login(Request $request) \n    {\n      $dataLogin = $request-&gt;only([&#39;email&#39;, &#39;password&#39;]);\n      foreach (self::ALL_GUARD as $guard) {\n        if (Auth::guard($guard)-&gt;attempt($dataLogin)) {\n          return redirect(&#39;/&#39;.$guard.&#39;/home&#39;);\n        }\n      }\n      return redirect(&#39;/login&#39;);\n    }\n\n    public function showLoginForm()\n    {\n        return view(&#39;auth.login&#39;);\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Tại đây chúng ta khi <code class=\"language-text\">use AuthenticatesUsers</code> đã xử lý tương đối cho việc login rồi nhưng để dễ hình dung mình có viết lại 1 số function để tự xử lý logic login theo ý mình. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>Request <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$dataLogin</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$request</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">only</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">ALL_GUARD</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$guard</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Auth<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">guard</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$guard</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">attempt</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$dataLogin</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$guard</span><span class=\"token punctuation\">.</span><span class=\"token single-quoted-string string\">'/home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đơn giản chỉ là check từng guard một xem email, password tại guard nào xác thực thành công sẽ khởi tạo phiên đăng nhập và điều hướng tới trang home. Tuy nhiên cách xử lý này không tối ưu mà chỉ mang tính ngắn gọn demo, còn nhiều vấn đề. Mình khuyến khích các bạn nên tách riêng Controller xử lý cho từng authenticate.</p>\n</li>\n</ul>\n<p><strong><em>2. Middleware</em></strong></p>\n<ul>\n<li>Chúng ta khởi tạo middleware để sau khi login sẽ xác thực việc truy cập tới mỗi route của người dùng. Ví dụ Middleware cho Admin như sau:</li>\n<li>\n<p>Chạy câu lệnh tạo middleware:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan make:middleware AdminAuth</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Tại middleware AdminAuth code như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?</span>php</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<p>namespace App\\Http\\Middleware;</p>\n<p>use App\\Traits\\ResponseTrait;\nuse Closure;\nuse Illuminate\\Support\\Facades\\Auth;</p>\n<p>class AdminAuth\n{\nuse ResponseTrait;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">const GUARD_ADMIN = &#39;admin&#39;;\n\n/**\n * Handle an incoming request.\n *\n * @param \\Illuminate\\Http\\Request $request\n * @param \\Closure $next\n * @return mixed\n */\npublic function handle($request, Closure $next)\n{\n    if (Auth::guard(self::GUARD_ADMIN)-&gt;check()) {\n        return $next($request);\n    }\n\n    return abort(401);\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">+ Khai báo middleware trong `app/Http/Middleware/Kernel.php` để sử dụng middleware. Khai báo thêm `&#39;admin&#39; =&gt; \\App\\Http\\Middleware\\AdminAuth::class` vào $routeMiddleware như sau:\n```php\n  protected $routeMiddleware = [\n      ...\n      &#39;admin&#39; =&gt; \\App\\Http\\Middleware\\AdminAuth::class,\n      ...\n  ];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>IV. Kết luận</h2>\n<ul>\n<li><strong>Multiple Authenticate</strong> rất tiện lợi và dễ sử dụng, hơn nữa nó làm cho Framework Laravel trở nên ưu việt hơn khi có thể kết hợp được với nhiều thư viện authenticate khác để xây dựng hệ thống website đa dạng hơn hoặc 1 service API tuyệt vời.</li>\n<li>Mong bài viết này sẽ phần nào giúp các bạn hiểu được cơ bản về <strong>multiple authenticate Laravel</strong> giúp các bạn có thể ứng dụng được khi làm project và yêu thích PHP &#x26; Laravel hơn để có thể tìm hiểu sâu và cùng nhau chia sẻ các kiến thức về lĩnh vực lập trình PHP &#x26; Laravel nhé!</li>\n</ul>\n<h6><em><div style=\"text-align: right\"> - by Ngoc Quan </div></em></h6>","id":"1277686e-3992-5dfa-ae8e-2a1872a411af","frontmatter":{"title":"Authentication Laravel - Multiple Authenticate","date":"07-10-2020","tags":["php","laravel"]},"fields":{"slug":"/authentication-laravel-multiple-authentication/","readingTime":{"text":"8 min read"}}}},{"node":{"excerpt":"Chào mọi người, hôm nay chúng ta hãy cùng nhau chia sẻ kiến thức về Authentication cơ bản trong Framework Laravel nhé! Khái niệm Authentication là gì?\nAuthentication theo Wikipedia:\nlà một hành động…","snippet":"<html><head></head><body><p>Ch&#xE0;o m&#x1ECD;i ng&#x1B0;&#x1EDD;i, h&#xF4;m nay ch&#xFA;ng ta h&#xE3;y c&#xF9;ng nhau chia s&#x1EBB; ki&#x1EBF;n th&#x1EE9;c v&#x1EC1; Authentication c&#x1A1; b&#x1EA3;n trong Framework Laravel nh&#xE9;!</p> <h1>Kh&#xE1;i ni&#x1EC7;m</h1> <p><strong><em>Authentication l&#xE0; g&#xEC;?</em></strong> <em>Authentication theo Wikipedia:</em> l&#xE0; m&#x1ED9;t h&#xE0;nh &#x111;&#x1ED9;ng nh&#x1EB1;m thi&#x1EBF;t l&#x1EAD;p ho&#x1EB7;c ch&#x1EE9;ng th&#x1EF1;c m&#x1ED9;t &#x111;i&#x1EC1;u g&#xEC; &#x111;&#xF3; (ho&#x1EB7;c m&#x1ED9;t ng&#x1B0;&#x1EDD;i n&#xE0;o &#x111;&#xF3;) &#x111;&#xE1;ng&#x2026;</p></body></html>","html":"<p>Chào mọi người, hôm nay chúng ta hãy cùng nhau chia sẻ kiến thức về Authentication cơ bản trong Framework Laravel nhé!</p>\n<h1>Khái niệm</h1>\n<p><strong><em>Authentication là gì?</em></strong>\n<em>Authentication theo Wikipedia:</em>\nlà một hành động nhằm thiết lập hoặc chứng thực một điều gì đó (hoặc một người nào đó) đáng tin cậy, có nghĩa là, những lời khai báo do người đó đưa ra hoặc về vật đó là sự thật. Xác thực một đối tượng còn có nghĩa là công nhận nguồn gốc (<em>provenance</em>) của đối tượng, trong khi, xác thực một người thường bao gồm việc thẩm tra nhận dạng của họ. Việc xác thực thường phụ thuộc vào một hoặc nhiều nhân tố xác thực (<em>authentication factors</em>) để minh chứng cụ thể.</p>\n<p><strong>Authentication Laravel</strong>\nTương tự như khái niệm trên, authentication trong \u001dLaravel cũng được dùng để xác thực một điều gì đó như request của người dùng đến sever.\nĐặc biệt Laravel làm cho việc triển khai xác thực rất đơn giản. Trên thực tế, hầu hết mọi thứ đều được cấu hình sẵn sàng cho chúng ta sử dụng một cách dễ dàng và hiệu quả.</p>\n<h2>Authentication trong Laravel</h2>\n<p>Như đã giới thiệu ở trên, Laravel làm cho việc triển khai xác thực trở nên đơn giản và hiệu quả, vậy cách cấu hình và sử dụng như thế nào?</p>\n<p>Đầu tiên, hãy mở file <code class=\"language-text\">auth.php</code> trong thư mục config trong project Laravel:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    \n    | Authentication Defaults\n    \n    |--------------------------------------------------------------------------\n    | This option controls the default authentication \"guard\" and password\n    | reset options for your application. You may change these defaults\n    | as required, but they're a perfect start for most applications.\n    |\n    */</span>\n    \n    <span class=\"token single-quoted-string string\">'defaults'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'guard'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'web'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token single-quoted-string string\">'passwords'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    \n    | Authentication Guards\n    \n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | Next, you may define every authentication guard for your application.\n    \n    | Of course, a great default configuration has been defined for you\n    \n    | here which uses session storage and the Eloquent user provider.\n    \n    |\n    \n    | All authentication drivers have a user provider. This defines how the\n    \n    | users are actually retrieved out of your database or other storage\n    \n    | mechanisms used by this application to persist your user's data.\n    \n    |\n    \n    | Supported: \"session\", \"token\"\n    \n    |\n    \n    */</span>\n    \n      \n    \n    <span class=\"token single-quoted-string string\">'guards'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'web'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t    <span class=\"token single-quoted-string string\">'driver'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'provider'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token single-quoted-string string\">'api'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t    <span class=\"token single-quoted-string string\">'driver'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'token'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'provider'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'hash'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n \n    <span class=\"token comment\">/*\n    | User Providers\n    \n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | All authentication drivers have a user provider. This defines how the\n    \n    | users are actually retrieved out of your database or other storage\n    \n    | mechanisms used by this application to persist your user's data.\n    \n    |\n    \n    | If you have multiple user tables or models you may configure multiple\n    \n    | sources which represent each model / table. These sources may then\n    \n    | be assigned to any extra authentication guards you have defined.\n    |\n    | Supported: \"database\", \"eloquent\"\n    |\n    \n    */</span>\n    \n      \n    \n    <span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'driver'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token single-quoted-string string\">'model'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    \n      \n    \n    <span class=\"token comment\">// 'users' => [</span>\n    \n    <span class=\"token comment\">// 'driver' => 'database',</span>\n    \n    <span class=\"token comment\">// 'table' => 'users',</span>\n    \n    <span class=\"token comment\">// ],</span>\n    \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    \n    | Resetting Passwords\n    \n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | You may specify multiple password reset configurations if you have more\n    \n    | than one user table or model in the application and you want to have\n    \n    | separate password reset settings based on the specific user types.\n    \n    |\n    \n    | The expire time is the number of minutes that the reset token should be\n    \n    | considered valid. This security feature keeps tokens short-lived so\n    \n    | they have less time to be guessed. You may change this as needed.\n    \n    |\n    \n    */</span>\n    \n    <span class=\"token single-quoted-string string\">'passwords'</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'users'</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t    <span class=\"token single-quoted-string string\">'provider'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'table'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'password_resets'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'expire'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'throttle'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    | Password Confirmation Timeout\n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | Here you may define the amount of seconds before a password confirmation\n    \n    | times out and the user is prompted to re-enter their password via the\n    \n    | confirmation screen. By default, the timeout lasts for three hours.\n    */</span>\n    <span class=\"token single-quoted-string string\">'password_timeout'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token number\">10800</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta đang tìm hiểu cơ bản về Authentication Laravel nên tại đây chúng ta chỉ quan tâm tới phần cấu hình này </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span> \n\t    <span class=\"token single-quoted-string string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span> \n\t\t    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span> \n\t\t    <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> \n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>Driver: Đây là thiết lập xác định phương thức lấy thông tin người dùng để xác thực, và như các bạn thấy thì mặc định nó sẽ sử dụng  <em><strong><a href=\"%5Bhttps://laravel.com/docs/7.x/eloquent%5D(https://laravel.com/docs/7.x/eloquent)\">eloquent</a>,</strong></em> tuy nhiên còn một sự lựa chọn khác là <em>database</em> và thậm trí bạn cũng có thể tạo thêm một driver riêng theo nhu cầu sử dụng của bạn (mình sẽ nói ở phần nâng cao).</em></p>\n<p><em>Model: Đây là thiết lập nguồn dữ liệu lấy ra từ đâu. Ở đây mặc định Laravel chọn là moder User (local: App\\User.php). Thông số này bạn có thể chỉnh thành name model của bạn muốn truy xuất để lấy dữ liệu.\nVí dụ: App\\Models\\Account.php, App\\Models\\Admin.php,...</em></p>\n<p>Hệ thống xác thực Authentication của Laravel được xây dựng dựa trên 2 thành phần cốt lõi - guard và provider.</p>\n<h1>Guards</h1>\n<p><code class=\"language-text\">Guard</code>  được hiểu là một cách cung cấp logic được dùng để xác thực người dùng. Trong Laravel, thường hay dùng  <code class=\"language-text\">session guard</code>  hoặc  <code class=\"language-text\">token guard</code>.  </p>\n<ul>\n<li><code class=\"language-text\">Session guard</code>  duy trì trạng thái người dùng trong mỗi lần request bằng cookie. </li>\n<li><code class=\"language-text\">Token guard</code> xác thực người dùng bằng cách kiểm tra token hợp lệ trong mỗi lần request.</li>\n</ul>\n<p>Vì vậy, <strong>guard</strong> xác định logic của việc xác thực, và không cần thiết để luôn xác thực bằng cách lấy các thông tin hợp lệ từ phía back-end. Bạn có thể triển khai một guard mà chỉ cần kiểm tra sự có mặt của một thông tin cụ thể trong headers của request và xác thực người dùng dựa trên điều đó.</p>\n<h1>Providers</h1>\n<p>Nếu  <code class=\"language-text\">Guards</code>  hỗ trợ việc định nghĩa logic để xác thực thì  <code class=\"language-text\">Providers</code>  lấy ra dữ liệu người dùng từ phía back-end. Nếu guard yêu cầu người dùng phải hợp lệ với bộ lưu trữ ở back-end thì việc triển khai truy suất người dùng sẽ được providers thực hiện. Laravel hỗ trợ cho việc người dùng truy xuất sử dụng Eloquent và Query Builder vào database. Tuy nhiên, chúng ta có thể thêm bất kì thay đổi vào. Ví dụ, các bạn đặt model User trong namespace App nữa mà các bạn muốn đặt trong namespace App\\Model thì chúng ta sẽ thay đỏi  <code class=\"language-text\">providers</code>  trong file  <code class=\"language-text\">app/auth.php</code>  như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Model<span class=\"token punctuation\">\\</span>User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Tạo Auth login cơ bản trong Laravel</h2>\n<p>Để tạo Auth trong Laravel thì cũng hết sức đơn giản. Chúng ta dùng lệnh:</p>\n<ul>\n<li>\n<p>version laravel &#x3C;= 5.x</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">\bphp artisan make:auth</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>version laravel >= 6.x </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer require laravel/ui</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan ui vue --auth</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau khi chạy lệnh này lên thì Laravel sẽ thêm cho chúng ta một homeController, 2 route và \u001dcác view mới.</p>\n<ul>\n<li>Ngay lúc này bạn run project lên và sẽ thấy một số thay đổi về giao diện welcome mặc định của Laravel. Có thêm LOGIN &#x26; REGISTER ở bên góc trên bên phải màn hình.</li>\n</ul>\n<p><img src=\"https://s3.ap-northeast-1.amazonaws.com/furublog/media/two-authentication-laravel/Two-Factor-Authentication-Laravel-2.png\" alt=\"enter image description here\"></p>\n<ul>\n<li>Click vào LOGIN sẽ hiển thị giao diện form đăng nhập mặc định như sau</li>\n</ul>\n<p><img src=\"https://blog.haposoft.com/content/images/2020/03/90359819_214514456312271_9219684060106850304_n.png\" alt=\"enter image description here\"></p>\n<ul>\n<li>Click vào REGISTER sẽ hiển thị form đăng ký để khởi tạo 1 tài khoản với authenticate của laravel</li>\n</ul>\n<p><img src=\"https://blog.haposoft.com/content/images/2020/03/90498509_209542350279297_5428125770587308032_n.png\" alt=\"enter image description here\"></p>\n<p>Các bạn hãy thử đăng ký tại form register và đăng nhập tại form login để hiểu hơn về tính năng. Sau đó check table users trong database xem dữ liệu tài khoản vừa tạo nhé.</p>\n<h2>Kết luận</h2>\n<p>Chúng ta đã cùng nhau tìm hiểu về authentication laravel căn để có thể xây dựng được một authentication để sử dụng cơ bản. Ngoài ra Authentication Laravel còn có rất nhiều điều thú vị khác chúng ta sẽ cùng nhau chia sẻ ở bài viết Authentication Laravel nâng cao, các bạn sẽ thấy thêm phần thú vị về Framework Laravel.</p>","id":"32a4c9a9-7ec5-5539-8dae-57bc06a63c31","frontmatter":{"title":"Authentication basic Laravel","date":"26-08-2020","tags":["php","laravel"]},"fields":{"slug":"/authentication-trong-laravel/","readingTime":{"text":"7 min read"}}}},{"node":{"excerpt":"I. Giới thiệu Như mọi người đã biết, một ứng dụng luôn phải tương tác với cơ sở dữ liệu. Đối với Laravel thì có 2 kiểu truy vấn phổ biến, đó là Eloquent ORM và Query Builder. Tại sao cùng với mục đích…","snippet":"<html><head></head><body><h1>I. Gi&#x1EDB;i thi&#x1EC7;u</h1> <p>Nh&#x1B0; m&#x1ECD;i ng&#x1B0;&#x1EDD;i &#x111;&#xE3; bi&#x1EBF;t, m&#x1ED9;t &#x1EE9;ng d&#x1EE5;ng lu&#xF4;n ph&#x1EA3;i t&#x1B0;&#x1A1;ng t&#xE1;c v&#x1EDB;i c&#x1A1; s&#x1EDF; d&#x1EEF; li&#x1EC7;u. &#x110;&#x1ED1;i v&#x1EDB;i Laravel th&#xEC; c&#xF3; 2 ki&#x1EC3;u truy v&#x1EA5;n ph&#x1ED5; bi&#x1EBF;n, &#x111;&#xF3; l&#xE0; <strong>Eloquent ORM</strong> v&#xE0; <strong>Query Builder</strong>.</p> <p>T&#x1EA1;i sao c&#xF9;ng v&#x1EDB;i m&#x1EE5;c &#x111;&#xED;ch l&#xE0; truy v&#x1EA5;n database l&#x1EA1;i&#x2026;</p></body></html>","html":"<h1>I. Giới thiệu</h1>\n<p>Như mọi người đã biết, một ứng dụng luôn phải tương tác với cơ sở dữ liệu. Đối với Laravel thì có 2 kiểu truy vấn phổ biến, đó là <strong>Eloquent ORM</strong> và <strong>Query Builder</strong>.</p>\n<p>Tại sao cùng với mục đích là truy vấn database lại có những kiểu truy vấn khác nhau, điểm khác nhau giữa chúng là gì. Khi nào thì nên sử dụng Eloquent, ngược lại khi nào dùng Query Builder? Cùng tìm hiểu nhé.</p>\n<h2>II. Định nghĩa</h2>\n<h3>1. Query Builder</h3>\n<p>Trong Laravel, Query Builder cung cấp giao diện để chạy các truy vấn CSDL. Nó có thể được sử dụng để thực hiện tất cả, từ kết nối DB cơ bản, CRUD, aggregates...</p>\n<p>Query Builder sử dụng PDO (PHP Data Object, hệ thống API có sẵn của PHP để kết nối đến các CSDL thông dụng), bản thân API PDO đã bảo vệ chúng ta trước các tấn công SQL Injection, do đó khi xử dụng Query Builder không cần lo lắng xử lý dữ liệu trước khi chèn vào database</p>\n<p>Việc thực hiện truy vấn bằng query builder khá đơn giản, chúng ta sẽ sử dụng facade DB để bắt đầu một query builder, ví dụ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>2. Eloquent ORM</h3>\n<p>Đầu tiên ORM là gì? ORM (Object Relative Mapper)  là 1 kỹ thuật lập trình giúp ánh xạ các bản ghi dữ liệu trong hệ quản trị cơ sở dữ liệu sang dạng đối tượng đang định nghĩa trong các class .</p>\n<p><strong>Eloquent ORM</strong> cho phép chúng ta có thể thao tác với các đối tượng DB và quan hệ tương ứng. Nó tương tự như làm việc với các đối tượng trong PHP. Ở đây, chính là tương tác thông qua \"Model\". Trong model sẽ định nghĩa table được truy vấn.</p>\n<h2>III. Cách sử dụng</h2>\n<p><strong><em>1. Query Builder</em></strong></p>\n<ul>\n<li>Query Builder xây dựng lớp DB để thực hiện các câu truy vấn. Do đó, để bắt đầu 1 Query Builder, ta sử dụng hàm table() trong DB facade.</li>\n<li>Ví dụ:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">  <span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Truy vấn này sẽ trả về 1 mảng kết quả, trong đó mỗi kết quả là 1 object StdClass của PHP. Bạn có thể truy cập vào giá trị mỗi cột như 1 thuộc tính của object.</li>\n</ul>\n<p><strong><em>2. Eloquent ORM</em></strong></p>\n<ul>\n<li>Do trong Eloquent ORM, mỗi bảng của database tương ứng với 1 model nên để bắt đầu sử dụng được nó, ta cần tạo Eloquent model trong thư mục  <code class=\"language-text\">app</code>. Lưu ý là mỗi Eloquent model này đều phải extend  <code class=\"language-text\">Illuminate\\Database\\Eloquent\\Model</code>  class.</li>\n<li>Ví dụ về Eloquent Model:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">namespace</span>  <span class=\"token package\">App</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span>  <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Model</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span>  <span class=\"token class-name\">User</span>  <span class=\"token keyword\">extends</span>  <span class=\"token class-name\">Model</span>\n\n<span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/**\n\n* The table associated with the model.\n\n*\n\n* @var string\n\n*/</span>\n\n<span class=\"token keyword\">protected</span>  <span class=\"token variable\">$table</span>  <span class=\"token operator\">=</span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Ví dụ về query sử dụng Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả trả về là 1 eloquent collections, trong đó mỗi kết quả là 1 User object.</p>\n<h2>IV. Một số query cơ bản</h2>\n<p>Về cơ bản, các câu lệnh query của Eloquent ORM có 1 chút thay đổi so với Query Builder, khiến câu lệnh trông ngắn gọn và đẹp đẽ hơn:</p>\n<p><strong><em>1. Lấy tất cả các bản ghi</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Lấy bản ghi theo id</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Lấy 1 bản ghi theo 1 trường xác định</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">,</span>  <span class=\"token single-quoted-string string\">'Tomoblog'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">,</span>  <span class=\"token single-quoted-string string\">'Tomoblog'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>4. Aggregates</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>5. Insert</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">firstOrCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">firstOrNew</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Trên đây mình chỉ giới thiệu một vài câu query cơ bản và ngắn gọn nhất, để tìm hiểu kĩ hơn thì mọi người có thể vào đây nhé </p>\n<p><a href=\"https://laravel.com/docs/7.x/queries\">https://laravel.com/docs/7.x/queries</a></p>\n<p><a href=\"https://laravel.com/docs/7.x/eloquent\">https://laravel.com/docs/7.x/eloquent</a></p>\n<h2>V. So sánh</h2>\n<p><strong><em>1. Tính dễ sử dụng</em></strong></p>\n<ul>\n<li>Các câu lệnh của Eloquent ORM là ngắn gọn, dễ hiểu và dễ sử dụng hơn so với các câu lệnh khá dài dòng của Query Builder.</li>\n<li>Hơn nữa, sử dụng Eloquent ORM cũng dễ dàng hơn trong việc kết nối giữa các bảng với nhau.</li>\n<li>Tuy nhiên, với 1 số truy vấn phức tạp, không sử dụng được Eloquent ORM thì vẫn cần sử dụng Query Builder để cho kết qủa chính xác nhất.</li>\n</ul>\n<p><strong><em>2. Hiệu suất</em></strong></p>\n<p><strong>QueryBuilder</strong> có hiệu suất truy vấn dữ liệu nhanh hơn <strong>Eloquent</strong>  <strong>ORM</strong> bởi vì Eloquent phải thêm một lớp trong ứng dụng và yêu cầu nhiều truy vấn SQL. Đối với các database mà có ít bản ghi hiệu suất của chúng không có quá là nhiều sự chênh lệch, vậy nên đối với những database này mình khuyên các bạn nên sử dụng Eloquent ORM vì cú pháp đơn giản và ngắn gọn của chúng.</p>\n<ul>\n<li><strong>Ví dụ</strong>: Để chèn 1000 hàng cho một bảng đơn giản Eloquent mất 1,2 giây và trong trường hợp đó QueryBuilder chỉ mất 800 mili giây (ms). Vậy tại sao lại phải sử dụng Eloquent? Có cần thiết không?</li>\n<li>\n<p>Câu trả lời là <strong>có</strong>, bởi vì:</p>\n<ul>\n<li>Tạo ra một mối quan hệ tốt hơn và nhận được kết quả với nhiều cú pháp đơn giản.</li>\n<li>Có lẽ nhiều người bảo rằng các cú pháp của QueryBuilder gần giống với MS SQL, Mysql mà các bạn đã được học ở trường nên dễ gây thiện cảm hơn khi học, nhưng không Eloquent ORM tuy cú pháp có khác nhưng mà nó đơn giản và ngắn gọn hơn rất nhiều theo mình thì nó hợp với những bạn không có nhiều kiến thức về truy vấn SQL như các bạn sinh viên sắp và mới ra trường,...</li>\n<li>Phần quan trọng nhất là nếu chúng ta muốn thay đổi cơ sở dữ liệu khác , thì DB::raw sẽ gây đau đầu cho chúng ta và trong trường hợp đó Laravel Eloquent sẽ giải quyết tất cả các vấn đề một cách đơn giản. Nó có thể xử lý các loại Database khác nhau.</li>\n</ul>\n</li>\n</ul>\n<p><strong><em>3. Tính tương tác</em></strong></p>\n<p>Chúng ta có thể sử dụng tất cả các function của Query Builder trong Eloquent nhưng không thể sử dụng các funcation của Eloquent trong Query Builder.</p>\n<h2>VI. Kết luận</h2>\n<p>Như vậy, trong blog này chúng ta đã tìm hiểu về 2 kiểu truy vấn trong Laravel. Mỗi loại đều có những ưu điểm và nhược điểm riêng. Vì vậy tùy vào mục đính sử dụng để chọn kiểu truy vấn cho phù hợp nhé.</p>","id":"e5ab0fe3-9a03-534b-9852-f837d97b43b6","frontmatter":{"title":"[Laravel] So sánh Eloquent ORM và Query Builder","date":"04-08-2020","tags":["php","laravel"]},"fields":{"slug":"/laravel-so-sanh-eloquent-orm-va-query-builder/","readingTime":{"text":"6 min read"}}}},{"node":{"excerpt":"Chúng ta biết rằng  là nhãn hiệu cho một loại mã vạch ma trận (hoặc mã vạch hai chiều) và thường được sử dụng để lưu trữ URL hoặc thông tin khác được đọc bằng camera trên điện thoại thông minh hay các…","snippet":"<html><head></head><body><p>Ch&#xFA;ng ta bi&#x1EBF;t r&#x1EB1;ng <code class=\"language-text\">M&#xE3; QR</code> l&#xE0; nh&#xE3;n hi&#x1EC7;u cho m&#x1ED9;t lo&#x1EA1;i m&#xE3; v&#x1EA1;ch ma tr&#x1EAD;n (ho&#x1EB7;c m&#xE3; v&#x1EA1;ch hai chi&#x1EC1;u) v&#xE0; th&#x1B0;&#x1EDD;ng &#x111;&#x1B0;&#x1EE3;c s&#x1EED; d&#x1EE5;ng &#x111;&#x1EC3; l&#x1B0;u tr&#x1EEF; URL ho&#x1EB7;c th&#xF4;ng tin kh&#xE1;c &#x111;&#x1B0;&#x1EE3;c &#x111;&#x1ECD;c b&#x1EB1;ng camera tr&#xEA;n &#x111;i&#x1EC7;n tho&#x1EA1;i th&#xF4;ng minh hay c&#xE1;c lo&#x1EA1;i m&#xE1;y c&#xF3; ch&#x1EE9;c n&#x103;ng&#x2026;</p></body></html>","html":"<p>Chúng ta biết rằng <code class=\"language-text\">Mã QR</code> là nhãn hiệu cho một loại mã vạch ma trận (hoặc mã vạch hai chiều) và thường được sử dụng để lưu trữ URL hoặc thông tin khác được đọc bằng camera trên điện thoại thông minh hay các loại máy có chức năng quét mã khác. Mã QR có thể chứa 3248 bit hoặc 406 byte.</p>\n<p>Tìm hiểu thêm <code class=\"language-text\">Mã QR</code> qua bài viết của này để hiểu rõ hơn <a href=\"https://www.qr-code-generator.com/qr-code-marketing/qr-codes-basics/\"> QR Code Generator</a></p>\n<p>Trong hướng dẫn này, chúng ta sẽ tạo <code class=\"language-text\">Mã QR</code> trong <a href=\"https://laravel.com/\">Framework Laravel</a> .</p>\n<h2>Mã QR trong Framework Laravel</h2>\n<p>Trong laravel tôi tìm thấy nhiều package để render mã QR. Tuy nhiên tôi đã tìm thấy một package thực sự tốt đó là  <a href=\"https://github.com/SimpleSoftwareIO/simple-qrcode\">simple-qrcode</a>\nỞ bài viết này tôi xin giới thiệu cho các bạn về version 3 của package này !</p>\n<p>Tài liệu tham khảo : <a href=\"https://www.simplesoftware.io/#/docs/simple-qrcode\">Simple QrCode</a></p>\n<h2>Cài đặt và cách sử dụng QR Code</h2>\n<p>Chúng ta làm theo những bước sau :</p>\n<ol>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-1-c%C3%A0i-%C4%91%E1%BA%B7t-laravel\">Cài đặt Laravel</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-2-c%C3%A0i-%C4%91%E1%BA%B7t-g%C3%B3i-v%C3%A0-c%E1%BA%A5u-h%C3%ACnh\">Cài đặt gói và cấu hình</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-3-c%C3%A1ch-s%E1%BB%AD-d%E1%BB%A5ng-c%C6%A1-b%E1%BA%A3n\">Cách sử dụng cơ bản</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-4-t%E1%BA%A1o-l%E1%BB%99-tr%C3%ACnh--route-\">Tạo lộ trình (Route)</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-5-t%E1%BA%A1o-trong-t%E1%BA%ADp-tin-blade\">Tạo trong tập tin Blade</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-6-s%E1%BB%AD-d%E1%BB%A5ng-n%C3%A2ng-cao\">Sử dụng nâng cao</a></li>\n</ol>\n<h3>Bước 1: Cài đặt Laravel</h3>\n<ul>\n<li>\n<p>Chuyển đến thư mục dự án của bạn (đối với xampp, chuyển đến thư mục htdocs) và viết lệnh này trong thiết bị đầu cuối của bạn để tạo dự án.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">composer create-project --prefer-dist laravel/laravel qr-code</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<h3>Bước 2: Cài đặt gói và cấu hình</h3>\n<p>Đầu tiên, thêm Simple QrCode package vào require trong file <code class=\"language-text\">composer.json</code> của bạn:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&quot;require&quot;: {\n ...\n &quot;simplesoftwareio/simple-qrcode&quot;: &quot;^3.0&quot;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>sau đó, run command</p>\n<p><code class=\"language-text\">composer update</code></p>\n<p>hoặc bạn có thể dùng command sau để thay thế cách trên:</p>\n<p><code class=\"language-text\">composer require simplesoftwareio/simple-qrcode</code></p>\n<p>Đối với phiên bản Laravel &#x3C;= 5.4 ta cấu hình <code class=\"language-text\">Service Provider</code>, trong file <code class=\"language-text\">config/app.php</code> ta đăng kí trong mảng <code class=\"language-text\">providers</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&#39;providers&#39; =&gt; [\n ...\n SimpleSoftwareIO\\QrCode\\ServiceProvider::class\n]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>và thêm Aliases ở trong mảng <code class=\"language-text\">aliases</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&#39;aliases&#39; =&gt; [\n ...\n &#39;QrCode&#39; =&gt; SimpleSoftwareIO\\QrCode\\Facade::class\n]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>run <code class=\"language-text\">composer dump-autoload</code> để reload lại composer auto load cache.</p>\n<h3>Bước 3: Cách sử dụng cơ bản</h3>\n<ul>\n<li>Chúng ta đã cài đặt thành công Mã QR trong ứng dụng Laravel của mình. Chúng ta hãy xem một số cách sử dụng cơ bản. Cú pháp cơ bản là:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::size(100)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><strong>Kích thước</strong> : Chúng ta có thể thay đổi kích thước của hình ảnh mã QR.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::size(300)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><strong>Màu sắc</strong> : Chúng ta cũng có thể thiết lập màu nền.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::size(250)-&gt;backgroundColor(255,255,204)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n<img src=\"https://cdn.mynotepaper.com/wp-content/uploads/2019/03/22144106/color_qr_code.png\" alt class=\"wp-image-1652\">\n<p>\n<code>M&#xE3; QR &#x111;&#x1EA7;y m&#xE0;u s&#x1EAF;c</code>\n</p>\n</center>\n<center>\n<i>\nNgu&#x1ED3;n t&#x1EEB;:\n<a href=\"https://cdn.mynotepaper.com/\" target=\"_blank\">https://cdn.mynotepaper.com</a>\n</i>\n</center>\n<h3>Bước 4: Tạo lộ trình ( Route )</h3>\n<p>Trong bước này đầu tiên ta tạo route <code class=\"language-text\">qrcode</code> với method <code class=\"language-text\">GET</code>. Sao chép và dán mã này vào trong tệp <code class=\"language-text\">routes/web.php</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;?php\n...\nRoute::get(&#39;qrcode&#39;, function () {\n    return QrCode::size(250)\n        -&gt;backgroundColor(255, 255, 204)\n        -&gt;generate(&#39;Tomosia&#39;);\n});</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ hãy chạy ứng dụng của bạn và truy cập URL để xem Mã QR.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// run application\nphp artisan serve\n\n// visit the route\nhttp://localhost:8000/qrcode</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Bước 5: Tạo trong tập tin Blade</h3>\n<p>Chúng ta có thể dễ dàng tạo Mã QR trong file <code class=\"language-text\">blade</code>. Định dạng là:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{!! QrCode::generate(&#39;Tomosia&#39;); !!}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hãy xem một ví dụ:</p>\n<p>Tạo một route:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Route::get(&#39;qrcode_blade&#39;, function () {\n    return view(&#39;qr_code&#39;);\n});</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ tạo một file <code class=\"language-text\">blade</code> trong thư mục <strong>resources</strong> có tên <code class=\"language-text\">qr_code_blade.php</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;&gt;\n    &lt;title&gt;Laravel QR Code Example&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div class=&quot;text-center&quot; style=&quot;margin-top: 50px;&quot;&gt;\n    &lt;h3&gt;Laravel QR Code Example&lt;/h3&gt;\n\n    {!! QrCode::size(300)-&gt;generate(&#39;Tomosia&#39;); !!}\n\n    &lt;p&gt;Tomosia&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hãy xem kết qủa bằng cách truy cập route từ trình duyệt:</p>\n<center>\n<img src=\"https://images.viblo.asia/0998d669-0b87-405f-83ca-956971bf3476.png\" alt>\n<p>\n<code>M&#xE3; QR hi&#x1EC3;n th&#x1ECB; &#x1EDF; tr&#xEC;nh duy&#x1EC7;t</code>\n</p>\n</center>\n<center>\n<i>\nNgu&#x1ED3;n t&#x1EEB;:\n<a href=\"https://images.viblo.asia\" target=\"_blank\">https://images.viblo.asia</a>\n</i>\n</center>\n<blockquote>\n<p> Lưu ý : Trong quá trình quét mã thì nếu mã QR bạn để background màu đen thì mã QR sẽ có khả năng bị lỗi.</p>\n</blockquote>\n<h3>Bước 6: Sử dụng nâng cao</h3>\n<ul>\n<li><strong>Xem mã QR mà không cần lưu</strong> : Bạn có thể hiển thị hình ảnh PNG mà không lưu tệp bằng cách cung cấp chuỗi thô và mã hóa <code class=\"language-text\">base64_encode</code>.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;img src=&quot;data:image/png;base64, {!! base64_encode(QrCode::format(&#39;png&#39;)-&gt;size(100)-&gt;generate(&#39;Make me into an QrCode!&#39;)) !!} &quot;&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><strong>Định dạng</strong> : Thông thường tạo (); Chức năng trả về hình ảnh svg.</li>\n<li>Có một số định dạng khác :</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::format(&#39;png&#39;); //Returns a PNG image\n\nQrCode::format(&#39;eps&#39;);  //Returns a EPS image\n\nQrCode::format(&#39;svg&#39;);  //Returns a SVG image</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p><strong>Mã hóa</strong> : Chúng ta cũng có thể thiết lập mã hóa ký tự:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::encoding(&#39;UTF-8&#39;)-&gt;generate(&#39;QR code with special symbols ♠♥!!&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p><strong>Margin</strong> : Đặt lề theo cách tùy chỉnh này:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::margin(10)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li><strong>Bitcoin</strong> : Với sự trợ giúp của chức năng trợ giúp này, chúng ta có thể gửi thanh toán khi được quét.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::BTC($address, $amount);\n\n//Sends a 0.334BTC payment to the address\nQrCode::BTC(&#39;bitcoin address&#39;, 0.334);\n\n//Sends a 0.334BTC payment to the address with some optional arguments\nQrCode::size(500)-&gt;BTC(&#39;address&#39;, 0.0034, [\n    &#39;label&#39; =&gt; &#39;my label&#39;,\n    &#39;message&#39; =&gt; &#39;my message&#39;,\n    &#39;returnAddress&#39; =&gt; &#39;https://www.returnaddress.com&#39;\n]);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Tin nhắn văn bản</strong> : Chúng ta có thể viết sms bằng mã QR.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::SMS($phoneNumber, $message);\n\n//Creates a text message with the number filled in.\nQrCode::SMS(&#39;555-555-5555&#39;);\n\n//Creates a text message with the number and message filled in.\nQrCode::SMS(&#39;555-555-5555&#39;, &#39;Body of the message&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Số điện thoại di động</strong> : Quay số điện thoại di động từ mã QR được quét.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::phoneNumber($phoneNumber);\n\nQrCode::phoneNumber(&#39;555-555-5555&#39;);\n\nQrCode::phoneNumber(&#39;1-800-Laravel&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Email</strong> : Chúng ta cũng có thể tự động điền vào <code class=\"language-text\">email</code>, <code class=\"language-text\">subject</code> và <code class=\"language-text\">body</code>khi quét mã QR:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::email($to, $subject, $body);\n\n//Fills in the to address\nQrCode::email(&#39;foo@bar.com&#39;);\n\n//Fills in the to address, subject, and body of an e-mail.\nQrCode::email(&#39;foo@bar.com&#39;, &#39;This is the subject.&#39;, &#39;This is the message body.&#39;);\n\n//Fills in just the subject and body of an e-mail.\nQrCode::email(null, &#39;This is the subject.&#39;, &#39;This is the message body.&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Vị trí địa lý</strong> : Truyền kinh độ và vĩ độ thông qua mã QR:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::geo($latitude, $longitude);\n\nQrCode::geo(37.822214, -122.481769);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Kết nối với WiFi</strong> : Dễ dàng kết nối với WiFi từ mã QR được quét.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::wiFi([\n\t&#39;encryption&#39; =&gt; &#39;WPA/WEP&#39;,\n\t&#39;ssid&#39; =&gt; &#39;SSID of the network&#39;,\n\t&#39;password&#39; =&gt; &#39;Password of the network&#39;,\n\t&#39;hidden&#39; =&gt; &#39;Whether the network is a hidden SSID or not.&#39;\n]);\n\n//Connects to an open WiFi network.\nQrCode::wiFi([\n\t&#39;ssid&#39; =&gt; &#39;Network Name&#39;,\n]);\n\n//Connects to an open, hidden WiFi network.\nQrCode::wiFi([\n\t&#39;ssid&#39; =&gt; &#39;Network Name&#39;,\n\t&#39;hidden&#39; =&gt; &#39;true&#39;\n]);\n\n//Connects to an secured, WiFi network.\nQrCode::wiFi([\n\t&#39;ssid&#39; =&gt; &#39;Network Name&#39;,\n\t&#39;encryption&#39; =&gt; &#39;WPA&#39;,\n\t&#39;password&#39; =&gt; &#39;myPassword&#39;\n]);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Vị trí hình ảnh</strong> : Chúng ta có thể đặt một hình ảnh bên trong mã QR.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$image = QrCode::format(&#39;png&#39;)\n    -&gt;merge(&#39;folder/image.png&#39;, 0.5, true)\n    -&gt;size(500)-&gt;errorCorrection(&#39;H&#39;)\n    -&gt;generate(&#39;MyNotePaper&#39;);\n\nreturn response($image)-&gt;header(&#39;Content-type&#39;,&#39;image/png&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với sự trợ giúp của gói này, việc tạo Mã QR rất dễ dàng. Tôi hy vọng bài viết này sẽ giúp ích cho bạn.</p>","id":"d1bb7a1a-4e1e-54af-89d9-04c0ef9cada6","frontmatter":{"title":"[Laravel] Tạo mã QR trong Framework Laravel","date":"02-08-2020","tags":["php","laravel"]},"fields":{"slug":"/laravel-tao-ma-qr-trong-framework-laravel/","readingTime":{"text":"6 min read"}}}}]}},"pageContext":{"tag":"laravel"}},"staticQueryHashes":["3963689063","63159454","81262063"]}