{"componentChunkName":"component---src-templates-tag-js","path":"/tags/aws/","result":{"data":{"site":{"siteMetadata":{"title":"TOMOSIA VIETNAM","author":"„ÄåÂÖ±„Å´„Äç„ÄåÂπ∏„Åõ„Äç„ÄåÁÅØ„Åô„Äç","labels":[{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"rails","tech":"Ruby on Rails","name":"M20.8848485 15.8107143v1.1635714h1.9818182c.4060606 0 1.1030303-.315 1.1272727-1.19571427v-.45c0-.75214286-.5818182-1.1957143-1.1272727-1.1957143h-.9878788v-.54h1.9575757v-1.17h-1.8787878c-.4848485 0-1.1333334.42428573-1.1333334 1.215v.405c0 .7907143.6424243 1.1957143 1.1333334 1.1957143 1.3636363.00642857-.3272728 0 .9333333 0v.56571428l-2.0060606.0064286zm-10.6181818-.28285716s1.060606-.09642857 1.060606-1.5492857c0-1.45285715-1.2848485-1.58785715-1.2848485-1.58785715H7.72727273v4.5835714H8.8909091v-1.1057143l1.0060606 1.1057142h1.7212121l-1.3515151-1.4464286zm-.44848488-.93857143H8.8909091v-1.0478571h.93333332s.26060608.1028572.26060608.5207143c0 .4178572-.26666668.5271429-.26666668.5271429zM14.2 12.4228572h-1.1818182c-.8424242 0-1.1272727.81-1.1272727 1.1957143v3.35571427h1.1818182v-.8035714h1.1090909v.8035714h1.1454545V13.6185715c0-.97714286-.8363636-1.1957143-1.1272727-1.1957143zm-.0181818 2.44928572h-1.1151515V13.76s0-.2507143.3696969-.2507143h.4060606c.3272728 0 .3333334.2507143.3333334.2507143v1.11214286h.0060606zm1.6848485-2.44928573h1.230303v4.5514285h-1.230303v-4.5514285zm2.9575757 3.375v-3.375H17.6v4.5514285h2.8787879v-1.1764285h-1.6545455zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76969696.16714284-3.93939393 1.87071427-5.2121212 4.12071427C.6 15.0714285.4242424 16.9742857.4242424 16.9742857zM10.4 9.0607143L10.4242424 8.63c-.0545454-.03214286-.2060606-.1092857-.58787876-.225l-.02424243.4242857c.2.0707143.3939394.14785716.5878788.2314286zM9.82424242 10.42357143l-.02424242.405c.2.00642857.4.03214286.6.07714286l.0242424-.3985715c-.2060606-.045-.4060606-.0707143-.59999998-.0835715zm-2.24242424-2.0057143h.06060606l-.12121212-.39214284c-.1878788 0-.38181818.0128571-.58181818.0385714l.1151515.3792857c.1757576-.0192857.35151517-.0257143.52727274-.0257143zm.2909091 2.3657143l.13939393.44357143c.1757576-.09.3515152-.16714286.5272728-.225l-.1333333-.42428572c-.2060606.06428572-.3818182.135-.5333333.2057143zM5.1212121 9.09285713l-.27272727-.44357142c-.15151515.0835715-.3090909.1735715-.47272727.2764286l.27878787.45c.15757576-.1028571.3090909-.1992857.46666667-.2828571zm1.24242424 2.89285716l.2909091.4628571c.1030303-.1607143.22424242-.3085715.35757575-.4564286L6.7393939 11.555c-.13939394.135-.26666667.28285714-.37575758.4307143zm-.87878788 2.07l.4909091.4114285C6 14.2164285 6.04242424 13.9657143 6.1030303 13.715l-.43636363-.36642857c-.07878788.23785714-.13333334.47571428-.1818182.70714286zM2.830303 11.0021428L2.4 10.60357142c-.15757576.1607143-.3090909.32142858-.44848485.48214287L2.41818182 11.51c.12727273-.17357143.26666666-.34714286.4121212-.50785714zM1 13.8757143l-.6969697-.27c-.1151515.27642856-.24242424.59785713-.3030303.77142856l.6969697.27C.77575758 14.42857143.9030303 14.11357143 1 13.8757143zm4.3939394 1.81285713c.0121212.34071428.04242424.61714286.07272727.81L6.1939394 16.775c-.05454546-.2507143-.10909092-.53357143-.14545455-.8357143l-.65454546-.25071427z","size":20,"color":"#CC0000"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"#777BB4"},{"tag":"laravel","tech":"Laravel","name":"M23.644 5.43c.009.032.014.065.014.099v5.15c0 .135-.073.26-.189.326l-4.323 2.49v4.934c0 .135-.072.258-.188.326L9.931 23.95c-.021.012-.043.02-.066.027-.008.002-.016.008-.024.01-.063.018-.13.018-.192 0-.011-.002-.02-.008-.029-.012-.021-.008-.043-.014-.063-.025L.534 18.755c-.117-.068-.189-.191-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.021.014-.032.006-.02.014-.04.023-.058.004-.013.015-.022.023-.033.012-.016.021-.031.033-.045.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034h.001L5.044.05c.115-.067.259-.067.375 0l4.512 2.597h.002c.015.01.027.021.041.033.012.009.025.018.037.027.013.014.021.029.033.045.008.011.02.021.025.033.011.019.017.038.024.058.003.011.011.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.005-.066.014-.098.003-.011.009-.021.013-.032.007-.02.014-.039.024-.059.007-.012.018-.021.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.028.014-.011.026-.023.041-.032h.001l4.513-2.598c.116-.067.259-.067.375 0l4.513 2.598c.016.01.027.021.042.031.012.01.025.018.036.028.013.014.022.029.034.044.008.012.019.021.024.033.011.02.018.039.024.059.006.011.012.022.015.033zm-.74 5.032V6.179l-1.578.908-2.182 1.256v4.283l3.76-2.164zm-4.511 7.75v-4.287l-2.146 1.225-6.127 3.498v4.326l8.273-4.762zM1.095 3.624v14.588l8.273 4.762v-4.326l-4.322-2.445-.002-.003h-.002c-.014-.01-.025-.021-.04-.031-.011-.01-.024-.018-.035-.027l-.001-.002c-.013-.012-.021-.025-.031-.039-.01-.012-.021-.023-.028-.037h-.002c-.008-.014-.013-.031-.02-.047-.006-.016-.014-.027-.018-.043-.004-.018-.006-.037-.008-.057-.002-.014-.006-.027-.006-.041V5.789l-2.18-1.257-1.578-.908zM5.231.81l-3.76 2.164 3.76 2.164 3.758-2.164L5.231.81zm1.956 13.505l2.182-1.256V3.624l-1.58.909-2.182 1.256v9.435l1.58-.909zM18.769 3.364l-3.76 2.164 3.76 2.163 3.759-2.164-3.759-2.163zm-.376 4.979l-2.182-1.256-1.579-.908v4.283l2.182 1.256 1.579.908V8.343zm-8.65 9.654l5.514-3.148 2.756-1.572-3.757-2.163-4.324 2.489-3.941 2.27 3.752 2.124z","size":20,"color":"#FF2D20"},{"tag":"cakephp","tech":"CakePHP","name":"M0 13.875v3.745c0 2.067 5.37 3.743 12 3.743V17.62c-6.63 0-12-1.68-12-3.743v-.002zm21.384 2.333L12 13.875v3.745l9.384 2.333C23.02 19.313 24 18.503 24 17.62v-3.745c0 .882-.98 1.692-2.616 2.333zM12 10.133v3.742c-6.627 0-12-1.677-12-3.744V6.38c0-2.064 5.37-3.743 12-3.743 6.625 0 12 1.68 12 3.744v3.75c0 .883-.98 1.69-2.616 2.334L12 10.13v.003z","size":20,"color":"#D33C43"},{"tag":"swift","tech":"Swift","name":"M21.984 16.348c.056-.112.056-.224.112-.336 1.346-5.272-1.851-11.44-7.347-14.693 2.412 3.253 3.365 7.122 2.524 10.599-.056.28-.168.617-.28.897a5.173 5.173 0 0 1-.45-.28S11.104 9.17 5.273 3.282c-.169-.168 3.14 4.71 6.841 8.58-1.738-1.01-6.673-4.542-9.758-7.403.337.617.842 1.234 1.346 1.851 2.58 3.309 5.945 7.346 9.983 10.43-2.86 1.74-6.842 1.851-10.88 0-1.01-.448-1.85-1.009-2.804-1.682 1.682 2.636 4.318 5.048 7.459 6.337 3.757 1.627 7.57 1.515 10.318 0h.057c.112-.056.224-.112.336-.224 1.346-.673 3.982-1.402 5.44 1.402.392.785 1.121-2.86-1.626-6.225z","size":20,"color":"#FA7343"},{"tag":"ios","tech":"iOS","name":"M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z","size":20,"color":"#403f3f"},{"tag":"kotlin","tech":"Kotlin","name":"M1.3 24l11.3-11.5L24 24zM0 0h12L0 12.5zM13.4 0L0 14v10l12-12L24 0z","size":20,"color":"#0095D5"},{"tag":"android","tech":"Android","name":"M24 19H0a13.6 13.6 0 0 1 2.21-6.07A11.2 11.2 0 0 1 5.87 9.4l.41-.23-2.02-3.41a.51.51 0 0 1 .17-.7.5.5 0 0 1 .69.18l2.08 3.5a12.62 12.62 0 0 1 4.84-.9 12.2 12.2 0 0 1 4.75.9l2.07-3.5a.5.5 0 0 1 .7-.17.51.51 0 0 1 .16.7L17.7 9.19l.5.28a11.38 11.38 0 0 1 3.63 3.62A14.48 14.48 0 0 1 24 19zm-7.5-4.48a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1zm-11 0a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1z","size":20,"color":"#3DDC84"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"#403f3f"},{"tag":"aws","tech":"AWS","name":"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z","size":20,"color":"#232F3E"},{"tag":"instagram","tech":"Instagram","name":"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z","size":20,"color":"#E4405F"},{"tag":"facebook","tech":"Facebook","name":"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z","size":20,"color":"#1877F2"},{"tag":"gitlab ci","tech":"Gitlab CI","name":"M4.844.904a1.007 1.007 0 00-.955.692l-2.53 7.783c0 .007-.005.012-.007.02L.07 13.335a1.437 1.437 0 00.522 1.607l11.072 8.045a.566.566 0 00.67-.004l11.074-8.04a1.436 1.436 0 00.522-1.61l-1.26-3.867a.547.547 0 00-.031-.104l-2.526-7.775a1.004 1.004 0 00-.957-.684.987.987 0 00-.949.69l-2.406 7.408H8.203l-2.41-7.408a.987.987 0 00-.943-.69h-.006zm-.006 1.42l2.174 6.678H2.674l2.164-6.678zm14.328 0l2.168 6.678h-4.342l2.174-6.678zm-10.594 7.81h6.862l-2.15 6.618L12 20.693 8.572 10.135zm-5.515.005h4.322l3.086 9.5-7.408-9.5zm13.568 0h4.326l-6.703 8.588-.709.914 2.959-9.108.127-.394zM2.1 10.762l6.978 8.947-7.818-5.682a.305.305 0 01-.112-.341l.952-2.924zm19.8 0l.952 2.922a.305.305 0 01-.11.341v.002l-7.82 5.68.025-.035 6.953-8.91Z","size":20,"color":"#FCA121"}]}},"allMarkdownRemark":{"totalCount":6,"edges":[{"node":{"excerpt":"H·ªá sinh th√°i AWS kh·ªïng l·ªì cung c·∫•p cho ch√∫ng ta v√¥ v√†n c√¥ng c·ª• gi√∫p ƒë·∫©y nhanh th·ªùi gian ƒë∆∞a √Ω t∆∞·ªüng th√†nh s·∫£n ph·∫©m. Trong ƒë√≥ c√≥ Elastic Beanstalk (EB). EB l√† n·ªÅn t·∫£ng gi√∫p ta qu·∫£n l√Ω t·∫•t c·∫£ m·ªçi th·ª©‚Ä¶","snippet":"<div class=\"custom-block-body\"><p>H&#x1EC7; sinh th&#xE1;i AWS kh&#x1ED5;ng l&#x1ED3; cung c&#x1EA5;p cho ch&#xFA;ng ta v&#xF4; v&#xE0;n c&#xF4;ng c&#x1EE5; gi&#xFA;p &#x111;&#x1EA9;y nhanh th&#x1EDD;i gian &#x111;&#x1B0;a &#xFD; t&#x1B0;&#x1EDF;ng th&#xE0;nh s&#x1EA3;n ph&#x1EA9;m. Trong &#x111;&#xF3; c&#xF3; Elastic Beanstalk (EB). EB l&#xE0; n&#x1EC1;n t&#x1EA3;ng gi&#xFA;p ta qu&#x1EA3;n l&#xFD; t&#x1EA5;t c&#x1EA3; m&#x1ECD;i th&#x1EE9;, nh&#x1B0; server,load balancer,autoscale,deploy, monitoring, vv... m&#x1ED9;t c&#xE1;ch tr&#x1EF1;c quan v&#xE0; d&#x1EC5; hi&#x1EC3;u nh&#x1EA5;t. Ch&#x1EC9; m&#x1EA5;t 1,2 ng&#xE0;y setup l&#xE0; t&#x1EA5;t c&#x1EA3; m&#x1ECD;i th&#x1EE9; ready. B&#xE0;i vi&#x1EBF;t n&#xE0;y h&#x1B0;&#x1EDB;ng d&#x1EAB;n c&#xE1;ch g&#x1EAF;n m&#x1ED9;t IP t&#xED;nh cho t&#x1EA5;t c&#x1EA3; c&#xE1;c instances trong 1 load balanced EB environment.</p></div>","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>H·ªá sinh th√°i AWS kh·ªïng l·ªì cung c·∫•p cho ch√∫ng ta v√¥ v√†n c√¥ng c·ª• gi√∫p ƒë·∫©y nhanh th·ªùi gian ƒë∆∞a √Ω t∆∞·ªüng th√†nh s·∫£n ph·∫©m. Trong ƒë√≥ c√≥ Elastic Beanstalk (EB). EB l√† n·ªÅn t·∫£ng gi√∫p ta qu·∫£n l√Ω t·∫•t c·∫£ m·ªçi th·ª©, nh∆∞ server,load balancer,autoscale,deploy, monitoring, vv... m·ªôt c√°ch tr·ª±c quan v√† d·ªÖ hi·ªÉu nh·∫•t. Ch·ªâ m·∫•t 1,2 ng√†y setup l√† t·∫•t c·∫£ m·ªçi th·ª© ready. B√†i vi·∫øt n√†y h∆∞·ªõng d·∫´n c√°ch g·∫Øn m·ªôt IP t√≠nh cho t·∫•t c·∫£ c√°c instances trong 1 load balanced EB environment.</p></div></div>\n<h2>M·ªü ƒë·∫ßu</h2>\n<p>V·ªõi 1 load balanced EB environment, c√≥ r·∫•t nhi·ªÅu th·ª© c√≥ th·ªÉ l√†m thay ƒë·ªïi IP server c·ªßa b·∫°n.</p>\n<ul>\n<li>deploy</li>\n<li>auto scaling</li>\n<li>stop &#x26; start server</li>\n<li>update config, settings ...</li>\n</ul>\n<p>EB r·∫•t linh ho·∫°t, n√™n server c·ªßa b·∫°n c≈©ng s·∫Ω r·∫•t \"linh ho·∫°t\".\nV·∫≠y n·∫øu t√¥i mu·ªën g·∫Øn 1 IP c·ªë ƒë·ªãnh duy nh·∫•t cho t·∫•t c·∫£ c√°c server c·ªßa t√¥i th√¨ sao?\nC√≥ nhi·ªÅu k·ªãch b·∫£n y√™u c·∫ßu m·ªôt IP c·ªë ƒë·ªãnh cho server. T√≥m l·∫°i l√† kh√¥ng mu·ªën c√¥ng khai th√¥ng tin v·ªõi ng∆∞·ªùi ngo√†i, t√¥i ch·ªâ cho √¥ng n√†y v·ªõi IP n√†y truy c·∫≠p d·ªØ li·ªáu c·ªßa t√¥i th√¥i.</p>\n<p><em>M·ªôt s·ªë kh√°i ni·ªám trong b√†i vi·∫øt c√≥ th·ªÉ l·∫° l·∫´m v·ªõi m·ªôt s·ªë b·∫°n ch∆∞a c√≥ kinh nghi·ªám l√†m vi·ªác v·ªõi AWS.</em></p>\n<h2>L√†m th·∫ø n√†o ƒë·ªÉ c·ªë ƒë·ªãnh IP servers trong Loadbalanced EB</h2>\n<p>Tr·∫£ l·ªùi lu√¥n l√† d√πng NAT Gateway. NAT Gateway d√πng ƒë·ªÉ l√†m g√¨? Theo t√†i li·ªáu, NAT Gateway cho ph√©p server c·ªßa b·∫°n k·∫øt n·ªëi v·ªõi internet nh∆∞ng kh√¥ng cho internet k·∫øt n·ªëi tr·ª±c ti·∫øp t·ªõi server.</p>\n<blockquote>\n<p>You can use a network address translation (NAT) gateway to enable instances in a private subnet to connect to the internet or other AWS services, but prevent the internet from initiating a connection with those instances.\nrefs <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html\">https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html</a></p>\n</blockquote>\n<p>nat gateway diagram | ngu·ªìn: <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html\">https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html</a>\n<img src=\"https://docs.aws.amazon.com/vpc/latest/userguide/images/nat-gateway-diagram.png\" alt=\"nat gateway diagram\"></p>\n<p>H·ªá th·ªëng s·∫Ω ho·∫°t ƒë·ªông nh∆∞ sau:</p>\n<ul>\n<li>NAT gateway n·∫±m gi·ªØa server v√† Internet (chi·ªÅu k·∫øt n·ªëi t·ª´ server ra internet)</li>\n<li>NAT gateway ƒë∆∞·ª£c g·∫Øn 1 IP c·ªë ƒëinh</li>\n<li>T·∫•t c·∫£ c√°c k·∫øt n·ªëi t·ª´ server t·ªõi internet ƒë∆∞·ª£c router ƒëi·ªÅu h∆∞·ªõng qua NAT Gateway tr∆∞·ªõc khi t·ªõi Internet</li>\n</ul>\n<p>Nh∆∞ v·∫≠y suy ra vi·ªác b·∫°n c·∫ßn ph·∫£i l√†m l√†:</p>\n<ul>\n<li>NAT Gateway c·∫ßn ƒë∆∞·ª£c thi·∫øt l·∫≠p ƒë·ªÉ truy c·∫≠p ƒë∆∞·ª£c internet</li>\n<li>C·∫ßn g·∫Øn m·ªôt IP tƒ©nh cho NAT Gateway</li>\n<li>C·∫ßn ƒëi·ªÅu h∆∞·ªõng t·∫•t c·∫£ c√°c k·∫øt n·ªëi c·ªßa server qua NAT Gateway</li>\n</ul>\n<p>Ti·∫øp theo s·∫Ω l√† c√°c b∆∞·ªõc c·ª• th·ªÉ, ph·∫£i l√†m th·∫ø n√†o</p>\n<h3>B∆∞·ªõc 1: Chu·∫©n b·ªã s·∫µn c√°c t√†i nguy√™n c·∫ßn thi·∫øt</h3>\n<ul>\n<li>1 VPC</li>\n<li>1 EIP (Elastic IP) ch∆∞a ƒë∆∞·ª£c s·ª≠ d·ª•ng</li>\n<li>1 Route table cho internet access (public)</li>\n<li>1 Route table cho NAT Gateway (private)</li>\n<li>2 subnet (1 private, 1 public)</li>\n<li>servers (·ªü ƒë√¢y d√πng lu√¥n Loadbalanced EB servers)</li>\n</ul>\n<h3>B∆∞·ªõc 2: T·∫°o 1 NAT Gateway m·ªõi</h3>\n<ul>\n<li>Subnet: ch·ªçn public subnet</li>\n<li>Elastic IP allocation ID: ch·ªçn EIP ƒë√£ chu·∫©n b·ªã</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1bb8b342b68abfd4cc401ec69333ff6c/b2b2c/create-gateway.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACE0lEQVQ4y51Uy5LaMBDkm3PMMfd8SC45pCqH/EQ2WXYrN8DGLPiB5adsY0xnevyAQIpQUVV7bGvU6nlIs+f5C+Yvr/j5PFd8f/qB+esv+CZFXhTI8hxplj0E+s7ctQfX28DbvCmWjoPFyoG33WGz3SJOkoE0V3sPJJ2tSeiu4bguFosldr6Puq5RliUKQVVV+l3dgfpb2xMaYxAEAfb7PRJRU0iYp9MJXdeJ7XA8Hh9C0zQ9YSREm7etKAtgq1pQqbIxf4e2RTdscIlxcHOOVvyUkJIzWZzKYpJQOom5azsq6G6VjkQ3hEEYwphEcsW8WVVHezgc1OneINkNIR+JoBASTbKETJV5UaodlY5qubCWfI1kN4RUM5a8FJVNy/yI46DgOnfdEP71mAhZDE+KspZe3AYRTF7qBqza6SKsESwQc8pINLo0g7XVmbCRFzuEyVCa5rK/Gu2xCTLP/yQgURBG8AOpQZJOG8x2Ox+ZvPSOVp3PxfkT0z/1s0qi68SyQ5RwsVyBx4+7MXyelH0cS5OnWn2CDU8byyEwSdLPJf13HBtRe6GQ7ZLnwyWQZtPkWNFHQF+mZKoyDz5JKd3q2W3wz8F2+VvbMBRHLgfeNMzH/45WeJWwKM7nllZV2mpSew0WpOB8GqEMVrDhWuCgCL3zScny7KGLlD5RFMELpDhPX2E+vYP58gHm83uYbx+lBgl+A845bePtgIFEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create new gateway\"\n        title=\"create new gateway\"\n        src=\"/static/1bb8b342b68abfd4cc401ec69333ff6c/8c557/create-gateway.png\"\n        srcset=\"/static/1bb8b342b68abfd4cc401ec69333ff6c/4edbd/create-gateway.png 175w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/13ae7/create-gateway.png 350w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/8c557/create-gateway.png 700w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/e996b/create-gateway.png 1050w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/2cefc/create-gateway.png 1400w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/b2b2c/create-gateway.png 1708w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>NAT Gateway ph·∫£i truy c·∫≠p ƒë∆∞·ª£c internet n√™n ph·∫£i ch·ªçn public subnet</p>\n<h3>B∆∞·ªõc 3: Thi·∫øt l·∫≠p Route table private</h3>\n<p>T·∫°o m·ªôt route table m·ªõi, sau ƒë√≥ edit routes, th√™m routes sau</p>\n<ul>\n<li>Destination: 0.0.0.0/0</li>\n<li>Target: ch·ªçn NAT gateway v·ª´a t·∫°o.</li>\n</ul>\n<p>Route table n√†y c√≥ nhi·ªám v·ª• ƒëi·ªÅu h∆∞·ªõng t·∫•t c·∫£ k·∫øt n·ªëi ƒë·∫øn v√† g·ª≠i t·ªõi NAT Gateway</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c94e24b79205ea9ec382198a6b464ce/95be1/route-table-private.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVQY032QXQ6DIBCEvf9lmvQQPmjTW9RWaBXlTy0w3aVGTR+64SPAbmZ3KIwxGMcRy7IgpYQY40YIYeP4/o+ibVswahjQ9yqjlELXdZBSghtqrfObkCIzUG2+C4GmafK5J7z3KG4Pibt4wc0BdnqvBGg7oa5rlGWJqqqy6OA09GSReHrCObc6i/DOghIohJDQNAUHW6a1kmCtzd/BYmwncU3esdVzhJhgPA0yk6D33y674M4xfnNHDDk6X584XQQ+Lm2DqvwDOisAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"route table\"\n        title=\"route table\"\n        src=\"/static/8c94e24b79205ea9ec382198a6b464ce/8c557/route-table-private.png\"\n        srcset=\"/static/8c94e24b79205ea9ec382198a6b464ce/4edbd/route-table-private.png 175w,\n/static/8c94e24b79205ea9ec382198a6b464ce/13ae7/route-table-private.png 350w,\n/static/8c94e24b79205ea9ec382198a6b464ce/8c557/route-table-private.png 700w,\n/static/8c94e24b79205ea9ec382198a6b464ce/e996b/route-table-private.png 1050w,\n/static/8c94e24b79205ea9ec382198a6b464ce/2cefc/route-table-private.png 1400w,\n/static/8c94e24b79205ea9ec382198a6b464ce/95be1/route-table-private.png 2574w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi t·∫°o routes th√¨ qua subnets. Click v√†o private subnet ƒë√£ chu·∫©n b·ªã v√† \"Edit route table association\".\nCh·ªçn l·∫°i Route table private v·ª´a t·∫°o</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/caa7d1e07a1301eaec7e62b94223d532/3162c/private-subnet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4ElEQVQoz3WSbWvTUBTH820r070o/QDzQ5Qy+wAW0Q3xleiroQgyMWkzu2Z2Ky1FZ9c2aXJvcvP8sP49N0rpxnbhxz3hnJz7Pw+Kwxhs20GcZthsNltuiSRJiQRFUUCerZ/sorhFEARgXgAxUSFOuxBTDUoYhpjNZhicDzEej3F5Ncbo8gqTyRRxEiHPM8zncwwNA6PRaIthXJT/5XmOVDhI7D8ImEUJ8w2O377Dk0oFtVoN1WoVz/b3cXDwHNfOEovYwqvXb1DZ8cv76d4eGoeHyEitzBGT7IgKUXiU4MvXUzSbL/Cy2y3pdDo4OjrG3LFw41s4+fQZ9Xod7XYbzVYLLbobjQbef/gIP8nAgwjMD2F7PhTTNHGzWMCiPjLmwF5bcD0PaZYhiiIIT0D4PgJqzX186qEQAj75GZezsCmhtcav39c4Gwxw1vsOXfsG/ccA58MhjIufWFn/HngMxl3YDoMcLnddKMvVCpPpFP1+H6qqQdU09Ho9slXoul4qiOIYcnghKd5FVlCqY5wS8vIBxaOSpPHYSdMUOZWfEdLO/tslO9/SJ9ugcJJsmtbdQEImkXvIXFJIO5rResh9fAi5OuX6UFKFcV7WLxt8H+EHWHOBpeOB0wSDB2Luxvv4C1Jg2ssLKoDZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"private subnet\"\n        title=\"private subnet\"\n        src=\"/static/caa7d1e07a1301eaec7e62b94223d532/8c557/private-subnet.png\"\n        srcset=\"/static/caa7d1e07a1301eaec7e62b94223d532/4edbd/private-subnet.png 175w,\n/static/caa7d1e07a1301eaec7e62b94223d532/13ae7/private-subnet.png 350w,\n/static/caa7d1e07a1301eaec7e62b94223d532/8c557/private-subnet.png 700w,\n/static/caa7d1e07a1301eaec7e62b94223d532/e996b/private-subnet.png 1050w,\n/static/caa7d1e07a1301eaec7e62b94223d532/2cefc/private-subnet.png 1400w,\n/static/caa7d1e07a1301eaec7e62b94223d532/3162c/private-subnet.png 2750w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Nh∆∞ v·∫≠y t·∫•t c·∫£ server trong subnet private, k·∫øt n·ªëi t·ªõi internet s·∫Ω ƒë·ªÅu ƒë∆∞·ª£c ƒëi·ªÅu h∆∞·ªõng th√¥ng qua NAT Gateway</p>\n<h3>B∆∞·ªõc 4: Chuy·ªÉn t·∫•t c·∫£ servers sang private subnet (DONE)</h3>\n<p>Khi t·∫°o EB environment m·ªõi c·∫ßn th·ª±c hi·ªán ƒë·∫©y ƒë·ªß 1,2,3\nnh∆∞ng v·ªõi EB c√≥ s·∫µn th√¨ ch·ªâ c·∫ßn th·ª±c hi·ªán b∆∞·ªõc 3 th√¥i.</p>\n<ol>\n<li>Ph·∫ßn Network: ch·ªçn VPC</li>\n<li>\n<p>Load balancer setting</p>\n<ul>\n<li>Visibility: ch·ªçn public</li>\n<li>Ch·ªçn public subnets.</li>\n</ul>\n</li>\n<li>\n<p>Instance settings</p>\n<ul>\n<li>Public IP addres: b·ªè ch·ªçn</li>\n<li>Instance subnets: ch·ªçn private subnet</li>\n</ul>\n</li>\n</ol>\n<p>Nh∆∞ v·∫≠y ta ƒë√£ ho√†n t·∫•t c√°c b∆∞·ªõc thi·∫øt l·∫≠p IP c·ªë ƒë·ªãnh cho t·∫•t c·∫£ server trong 1 load balanced EB environment.\nƒê·ªÉ test th·ª≠ th√†nh qu·∫£ th√¨ r·∫•t ƒë∆°n gi·∫£n</p>\n<ul>\n<li>ssh v√†o server</li>\n<li>run <code class=\"language-text\">curl ipinfo.io</code> ƒë·ªÉ ki·ªÉm tra IP c·ªßa server</li>\n</ul>\n<h2>K·∫øt</h2>\n<p>B√†i vi·∫øt ƒë√£</p>\n<ul>\n<li>tr√¨nh b√†y c√°ch l√†m th·∫ø n√†o ƒë·ªÉ g·∫Øn IP c·ªë ƒë·ªãnh cho servers trong loadbalanced EB env</li>\n<li>gi·∫£i th√≠ch ng·∫Øn g·ªçn v·ªÅ c√°ch ho·∫°t ƒë·ªông c≈©ng nh∆∞ t·∫°i sao l·∫°i setting th·∫ø n√†y, setting th·∫ø kia.</li>\n</ul>\n<p>Do √≠t th·ªùi gian n√™n b√†i vi·∫øt ch∆∞a gi·∫£i th√≠ch h·∫øt ƒë∆∞·ª£c c√°c kh√°i ni·ªám ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p ƒë·∫øn, m·ªôt s·ªë b·∫°n ch∆∞a c√≥ kinh nghi·ªám aws s·∫Ω th·∫•y kh√≥ hi·ªÉu. Th·ªùi gian t·ªõi t√°c gi·∫£ s·∫Ω c·ªë g·∫Øng c√≥ nhi·ªÅu b√†i ch·ªß ƒë·ªÅ li√™n quan t·ªõi aws h∆°n.</p>\n<p>C·∫£m ∆°n m·ªçi ng∆∞·ªùi ƒë√£ ƒë·ªçc b√†i vi·∫øt, n·∫øu c√≥ comments th√¨ li√™n l·∫°c v·ªõi m√¨nh qua email anh.nguyen@tomosia.com.</p>\n<p>[[author | Nguyen Tuan Anh ]]</p>","id":"9a7eaf02-7193-542e-b4e7-299864a2d04b","frontmatter":{"title":"T·∫°o IP tƒ©nh cho Elastic Beanstalk","date":"28-02-2021","tags":["aws"]},"fields":{"slug":"/tao-ip-tinh-cho-elastic-beanstalk/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Trong b√†i n√†y t√¥i s·∫Ω h∆∞·ªõng d·∫´n l√†m th·∫ø n√†o ƒë·ªÉ Lambda (hay c√°c resources kh√°c trong AWS) thu·ªôc private subnet c√≥ th·ªÉ truy c·∫≠p Internet. Ngo√†i ra, ta c√≥ th·ªÉ ch·ªâ ƒë·ªãnh ƒë∆∞·ª£c IP c·ªë ƒë·ªãnh khi lambda truy c·∫≠p‚Ä¶","snippet":"<div class=\"custom-block-body\"><p>Trong b&#xE0;i n&#xE0;y t&#xF4;i s&#x1EBD; h&#x1B0;&#x1EDB;ng d&#x1EAB;n l&#xE0;m th&#x1EBF; n&#xE0;o &#x111;&#x1EC3; Lambda (hay c&#xE1;c resources kh&#xE1;c trong AWS) thu&#x1ED9;c private subnet c&#xF3; th&#x1EC3; truy c&#x1EAD;p Internet. Ngo&#xE0;i ra, ta c&#xF3; th&#x1EC3; ch&#x1EC9; &#x111;&#x1ECB;nh &#x111;&#x1B0;&#x1EE3;c IP c&#x1ED1; &#x111;&#x1ECB;nh khi lambda truy c&#x1EAD;p internet</p></div>","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Trong b√†i n√†y t√¥i s·∫Ω h∆∞·ªõng d·∫´n l√†m th·∫ø n√†o ƒë·ªÉ Lambda (hay c√°c resources kh√°c trong AWS) thu·ªôc private subnet c√≥ th·ªÉ truy c·∫≠p Internet. Ngo√†i ra, ta c√≥ th·ªÉ ch·ªâ ƒë·ªãnh ƒë∆∞·ª£c IP c·ªë ƒë·ªãnh khi lambda truy c·∫≠p internet</p></div></div>\n<p><img src=\"https://blog.theodo.com/static/ab8c61557bfb8bb1310933f58d76e74c/a79d3/aws-vpc-internet-access-thumbnail-image.png\" alt=\"AWS VPC with Internet Access\"></p>\n<h2>1 - Create a VPC</h2>\n<blockquote>\n<p><strong>VPC</strong> (<strong>Virtual Private Cloud</strong>) L√† m·∫°ng ri√™ng ·∫£o tr√™n Cloud n∆°i m√† b·∫°n c√≥ th·ªÉ t·∫°o ra c√°c t√†i nguy√™n cho h·ªá th·ªëng c·ªßa m√¨nh, n√≥ gi√∫p b·∫°n t·∫°o ra m·ªôt m√¥i tr∆∞·ªùng t√°ch bi·ªát, n∆°i m√† b·∫°n c√≥ th·ªÉ tri·ªÉn khai h·ªá th·ªëng trong m·ªôt h·ªá th·ªëng m·∫°ng ·∫£o ri√™ng m√† b·∫°n ƒë·ªãnh nghƒ©a. B·∫°n c√≥ to√†n quy·ªÅn quy·∫øt ƒë·ªãnh m√¥i tr∆∞·ªùng m·∫°ng ·∫£o n√†y s·∫Ω nh∆∞ th·∫ø n√†o, bao g·ªìm l·ª±a ch·ªçn d·∫£i IP c·ªßa ri√™ng b·∫°n, t·∫°o m·∫°ng con (<strong>subnet</strong>), b·∫£ng ƒë·ªãnh tuy·∫øn (<strong>route table</strong>) v√† c·ªïng k·∫øt n·ªëi m·∫°ng (<strong>net gateway</strong>), c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng c·∫£ <strong>IPv4</strong> v√† <strong>IPv6</strong> cho b·∫£o m·∫≠t v√† d·ªÖ d√†ng truy c·∫≠p ·ª©ng d·ª•ng, t√†i nguy√™n c·ªßa b·∫°n.</p>\n</blockquote>\n<p>N·∫øu b·∫°n ch∆∞a c√≥ VPC th√¨ b·∫°n c·∫ßn t·∫°o 1 c√°i.\nƒê·ªÉ l√†m ƒëi·ªÅu ƒë√≥, ƒëi ƒë·∫øn tab Services, ch·ªçn VPC, click Your VPC ph√≠a b√™n tr√°i menu v√† t·∫°o 1 c√°i</p>\n<ul>\n<li>Nh·∫≠p t√™n VPC, v√≠ d·ª• <code class=\"language-text\">my-wonderful-vpc</code></li>\n<li>\n<p>Trong kh·ªëi CIDR (class inter-domain routing) nh·∫≠p 1 d·∫£i ƒë·ªãa ch·ªâ IP cho VPC c·ªßa b·∫°n, v√≠ d·ª• 172.30.0.0/16\n<img src=\"https://blog.theodo.com/static/12dddc4cf6be0009fc21ad56da5414af/50383/create-vpc-image.png\" alt=\"create-vpc-image.png\"></p>\n<blockquote>\n<p>172.30.0.0/16 ch√∫ng ta g·ªçi l√† network mask. C√≥ nghƒ©a l√† t·∫•t c·∫£ IP s·∫Ω b·∫Øt ƒë·∫ßu t·ª´ 172.30.0.0 ƒë·∫øn 172.30.255.255\n<img src=\"https://blog.theodo.com/static/49d09eacdd40b1b6616f6b32af3fa0ad/50383/infra-step-1-image.png\" alt=\"infra-step-1-image.png\"></p>\n</blockquote>\n</li>\n</ul>\n<h2>2 - Create private and public subnets in your VPC</h2>\n<blockquote>\n<p>Subnet ƒë∆°n gi·∫£n l√† 1 d·∫£i ƒë·ªãa ch·ªâ IP trong VPC. Subnet c√≥ th·ªÉ ƒë∆∞·ª£c coi l√† ph√¢n chia c√°c m·∫°ng l·ªõn th√†nh c√°c m·∫°ng nh·ªè h∆°n. V·ªÅ vi·ªác chia c√°c m·∫°ng nh·ªè h∆°n s·∫Ω gi√∫p ta d·ªÖ d√†ng b·∫£o tr√¨, b·∫£o m·∫≠t t·ªët h∆°n.</p>\n</blockquote>\n<p>ƒê·ªÉ d√πng lambda, b·∫°n c·∫ßn t·∫°o 1 private subnet b√™n trong VPC.\nClick on Subnets b√™n tr√°i menu VPC service v√† sau ƒë√≥ click Create Subnet:</p>\n<ul>\n<li>Nh·∫≠p t√™n subnet c·ªßa b·∫°n, v√≠ d·ª• <code class=\"language-text\">my-wonderful-vpc-private-subnet</code></li>\n<li>Ch·ªçn VPC m√† b·∫°n t·∫°o ·ªü b∆∞·ªõc tr√™n (<code class=\"language-text\">my-wonder-vpc</code>)</li>\n<li>\n<p>Trong kh·ªëi CIDR, ch·ªçn 1 d·∫£i IP con (subrange IPs addresses) trong d·∫£i IP c·ªßa VPC, v√≠ d·ª• 172.30.1.0/24 (t·ª´ 173.30.1.0 ƒë·∫øn 172.30.1.25)\n<img src=\"https://blog.theodo.com/static/19139e2d6109ddc2f4335db22e427c4c/50383/create-subnet-image.png\" alt=\"create-subnet-image.png\"></p>\n<blockquote>\n<p>ƒê·ªÉ d·ªÖ tr·ª±c quan h∆°n v·ªÅ CIDR b·∫°n truy c·∫≠p v√†o trang <a href=\"https://cidr.xyz/\">https://cidr.xyz/</a> ƒë·ªÉ c√≥ th·ªÉ bi·∫øt ƒë∆∞·ª£c l·ªõp m·∫°ng c·ªßa b·∫°n b·∫Øt ƒë·∫ßu t·ª´ ƒë·∫ßu v√† k·∫øt th√∫c ·ªü ƒë√¢u, c√≥ bao nhi√™u IP.</p>\n</blockquote>\n</li>\n</ul>\n<p>L·∫∑p l·∫°i b∆∞·ªõc tr√™n, ta s·∫Ω t·∫°o public subnets, v√≠ d·ª• <code class=\"language-text\">my-wonderfull-vpc-public</code> subnet v·ªõi 1 d·∫£i IP con l√† 172.30.2.0/24.\nB·∫°n s·∫Ω thi·∫øt l·∫≠p public subnet v√† private subnet ·ªü b∆∞·ªõc th·ª© 4.\n<img src=\"https://blog.theodo.com/static/08e12c442dc676f731fb65be57f54f49/50383/infra-step-2-image.png\" alt=\"infra-step-2-image.png\"></p>\n<h2>3 - Create an Internet Gateway and a NAT Gateway in the VPC</h2>\n<blockquote>\n<p>Internet Gateway (IGW) l√† 1 k·∫øt n·ªëi logical gi·ªØa VPC v√† Internet. N√≥ kh√¥ng ph·∫£i l√† 1 thi·∫øt b·ªã v·∫≠t l√Ω. N·∫øu VPC kh√¥ng c√≥ IGW th√¨ c√°c resources trong VPC kh√¥ng th·ªÉ truy c·∫≠p Internet.</p>\n</blockquote>\n<blockquote>\n<p>A Network Address Translation (NAT) gi√∫p c√°c instance trong private subnet c√≥ th·ªÉ k·∫øt n·ªëi ƒë·∫øn Internet, nh∆∞ng s·∫Ω tr√°nh Internet k·∫øt n·ªëi tr·ª±c ti·∫øp ƒë·∫øn c√°c instance b√™n trong VPC. ƒê·ªÅ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y, NAT s·∫Ω √°nh x·∫° t·∫•t c·∫£ c√°c ƒë·ªãa ch·ªâ IP private ƒë√£ ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh cho c√°c Instance th√†nh m·ªôt ƒë·ªãa ch·ªâ IPv4 public ƒë∆∞·ª£c g·ªçi l√† ƒë·ªãa ch·ªâ Elastic IP (EIP).</p>\n</blockquote>\n<p>ƒê·ªÉ truy c·∫≠p Internet, b·∫°n s·∫Ω c·∫ßn g·∫Øn IGW ƒë·∫øn VPC.\nCh·ªçn Internet Gateways b√™n menu tr√°i v√† sau ƒë√≥ click button Create internet gateway:</p>\n<ul>\n<li>Nh·∫≠p t√™n IGW, v√≠ d·ª• <code class=\"language-text\">my-wonderful-vpc-igw</code>\n<img src=\"https://blog.theodo.com/static/41ce266991f341fdb961aadce3a59dc0/50383/create-internet-gateway-image.png\" alt=\"create-internet-gateway-image.png\"></li>\n</ul>\n<p>B·∫°n s·∫Ω c·∫ßn g·∫Øn (attach) IGW cho VPC. M·ªü l·∫°i tab IGW, ch·ªçn IGW m√† b·∫°n v·ª´a t·∫°o (<code class=\"language-text\">my-wonderful-vpc-igw</code>), click v√†o Action, ch·ªçn Attach to VPC v√† ch·ªçn VPC c·ªßa b·∫°n (<code class=\"language-text\">my-wonderful-vpc</code>).\nB·∫°n c≈©ng c·∫ßn t·∫°o NAT Gateway. Click NAT Gateways b√™n tr√°i menu v√† sau ƒë√≥ click button Create NAT Gateway:</p>\n<ul>\n<li>Ch·ªçn subnet m√† b·∫°n mu·ªën public (<code class=\"language-text\">my-vonderful-vpc-public-subnet</code>)</li>\n<li>Ch·ªçn 1 Elastic IPs. N·∫øu b·∫°n ch∆∞a c√≥, th√¨ click Create New EIP.\n<img src=\"https://blog.theodo.com/static/7aa827098d17caed31765460b403b981/50383/create-nat-gateway-image.png\" alt=\"create-nat-gateway-image.png\"></li>\n</ul>\n<p>B√¢y gi·ªù, Infra c·ªßa b·∫°n s·∫Ω tr√¥ng nh∆∞ th·∫ø n√†y:\n<img src=\"https://blog.theodo.com/static/803d02f074409334a01dae329754468b/50383/infra-step-3-image.png\" alt=\"infra-step-3-image.png\"></p>\n<h2>4 - Associate the right route tables to the subnets</h2>\n<blockquote>\n<p>Route table l√† m·ªôt t·∫≠p h·ª£p c√°c quy t·∫Øc routes, n√≥ s·∫Ω ƒë·ªãnh tuy·∫øn ƒë∆∞·ªùng ƒëi cho traffic. B·∫°n c√≥ th·ªÉ t·∫°o ra nhi·ªÅu Route table trong VPC n·∫øu b·∫°n mu·ªën. Route table c√≥ th·ªÉ li√™n k·∫øt ƒë·∫øn m·ªôt ho·∫∑c nhi·ªÅu subnets.\nRemarks:</p>\n<ul>\n<li>M·∫∑c d√π n·∫øu b·∫°n kh√¥ng t·∫°o route table, th√¨ m·∫∑c ƒë·ªãnh s·∫Ω c√≥ m·ªôt main route table default v√† t·∫•t c·∫£ c√°c subnets trong VPC s·∫Ω li√™n k·∫øt ƒë·∫øn main route table n√†y.\nN·∫øu subnet li√™n k·∫øt ƒë·∫øn route table c√≥ g·∫Øn IGW th√¨ n√≥ ƒë∆∞·ª£c g·ªçi l√† public subnet.</li>\n</ul>\n</blockquote>\n<p>Ch√∫ng ta s·∫Ω t·∫°o 2 custom route table cho m·ªói subnets.\nTrong VPC service, click Route Tables b√™n menu tr√°i v√† click button Create route table:</p>\n<ul>\n<li>Nh·∫≠p t√™n route table, v√≠ d·ª• <code class=\"language-text\">my-wonderful-vpc-public-route-table</code> v√† <code class=\"language-text\">my-wonderful-vpc-private-route-table</code></li>\n<li>Ch·ªçn VPC ƒë√£ t·∫°o ·ªü b∆∞·ªõc 1 (<code class=\"language-text\">my-wonderful-vpc</code>)\n<img src=\"https://blog.theodo.com/static/68f753b7d01ec4f6c004db14956c2331/50383/create-route-table-image.png\" alt=\"create-route-table-image.png\"></li>\n</ul>\n<p>B√¢y gi·ªù b·∫°n c√≥ 2 route tables, ch√∫ng ta s·∫Ω thi·∫øt l·∫≠p ch√∫ng. ƒê·∫ßu ti√™n l√† public subnet.\nQuay tr·ªü l·∫°i Route Table v√† ch·ªçn t·∫°o route table <code class=\"language-text\">my-wonderful-vpc-public-route-table</code>:</p>\n<ul>\n<li>Click tab Route</li>\n<li>Click button Edit routes</li>\n<li>Th√™m 1 route m·ªõi v·ªõi destination 0.0.0.0/0 v√† Target l√† IGW ID <code class=\"language-text\">igw-...</code> ƒë√£ t·∫°o ·ªü b∆∞·ªõc 3 v√† click Save Routes\n<img src=\"https://blog.theodo.com/static/307cc080b0692cdf810187dfd87fb3c1/50383/configure-public-route-table-routes-image.png\" alt=\"configure-public-route-table-routes-image.png\"></li>\n<li>Sau ƒë√≥, click tab Subnet Associations</li>\n<li>Click button Edit subnet associations</li>\n<li>Th√™m public subnet <code class=\"language-text\">my-wonderful-vpc-public-subnet</code> ƒë√£ t·∫°o ·ªü b∆∞·ªõc 2 v√† click Save.\n<img src=\"https://blog.theodo.com/static/051d00934b4a2e260d9db69048d3d22f/50383/configure-public-route-table-subnet-association-image.png\" alt=\"configure-public-route-table-subnet-association-image.png\"></li>\n</ul>\n<p>V·ªõi c√°ch l√†m nh∆∞ tr√™n, b·∫°n ƒë√£ ƒëi·ªÅu h∆∞·ªõng t·∫•t c·∫£ c√°c outgoing traffic (Traffic ƒë·∫ßu ra) c·ªßa public subnet ƒë·∫øn IGW, ƒëi·ªÅu n√†y s·∫Ω l√†m cho subnet n√†y th√†nh public subnet.</p>\n<p>B√¢y gi·ªù, s·∫Ω thi·∫øt l·∫≠p private route table. Quay l·∫°i tab Route Tables v√† ch·ªçn route table <code class=\"language-text\">my-wonderful-vpc-private-route-table</code>:</p>\n<ul>\n<li>Click tab Routes</li>\n<li>Click button Edit routes</li>\n<li>Th√™m route v·ªõi Destination 0.0.0.0/0 v√† Target l√† NAT Gateway ID <code class=\"language-text\">nat-...</code> t·∫°o ·ªü b∆∞·ªõc 3 v√† click Save Routes.</li>\n<li>Click tab Subnet Associations</li>\n<li>Click button Edit subnet associations</li>\n<li>Add private subnet <code class=\"language-text\">my-wonderful-vpc-private-subnet</code> ·ªü b∆∞·ªõc 2 v√† click Save.</li>\n</ul>\n<p>V·ªõi c√°ch l√†m n√†y, b·∫°n ƒë√£ ƒëi·ªÅu h∆∞·ªõng t·∫•t c·∫£ traffic c·ªßa private subnet ƒë·∫øn NAT Gateway.\n<img src=\"https://blog.theodo.com/static/f031e446d606674453849748d76df61c/50383/infra-step-4-image.png\" alt=\"infra-step-4-image.png\"></p>\n<h2>5 - Create the lambda function and configure it</h2>\n<p>Ph·∫ßn kh√≥ nh·∫•t ƒë√£ xong\nN·∫øu b·∫°n ch∆∞a t·∫°o Lambda th√¨ ƒëi ƒë·∫øn tab Lambda service, sau ƒë√≥ click button Create function:</p>\n<ul>\n<li>Ch·ªçn t√™n Lambda, v√≠ d·ª• <code class=\"language-text\">my-wonderful-lambda</code></li>\n<li>Ch·ªçn Node.js runtime</li>\n<li>Trong section Permission, ch·ªçn <code class=\"language-text\">create a new role with basic lambda permissions</code>\n<img src=\"https://blog.theodo.com/static/a94a4a7cf62d680e58e0af7d130f7e64/50383/configure-lambda-permissions-image.png\" alt=\"configure-lambda-permissions-image.png\"></li>\n</ul>\n<p>Click v√†o function lambda v·ª´a t·∫°o, n√≥ s·∫Ω m·ªü ra 1 trang thi·∫øt l·∫≠p. K√©o xu·ªëng tab Network v√† b·∫°n ph·∫£i ƒëi·ªÅn 3 th·ª©:</p>\n<ul>\n<li>VPC ƒë√£ t·∫°o ·ªü b∆∞·ªõc 1 (<code class=\"language-text\">my-wonderful-vpc</code>)</li>\n<li>Private subnet ƒë√£ t·∫°o ·ªü b∆∞·ªõc 2 (<code class=\"language-text\">my-wonderful-vpc-private-subnet</code>)</li>\n<li>Security Group l√† default ho·∫∑c Security Group m√† b·∫°n t·ª± custom <code class=\"language-text\">**your-vpc-name**-default-security-group</code>\n<img src=\"https://blog.theodo.com/static/b2e31ea61377158c21380d99bb121885/50383/configure-lambda-vpc-image.png\" alt=\"configure-lambda-vpc-image.png\"></li>\n</ul>\n<h3>üî•üî• Congrats, that's all, your AWS lambda function has access to Internet! üî•üî•</h3>\n<p><img src=\"https://blog.theodo.com/static/ed3e678879d7cd543ba42ce4566b8c9e/50383/infra-step-5-image.png\" alt=\"infra-step-5-image.png\"></p>\n<p><em>Ngu·ªìn: <a href=\"https://blog.theodo.com/2020/01/internet-access-to-lambda-in-vpc/\">https://blog.theodo.com/2020/01/internet-access-to-lambda-in-vpc/</a></em></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Minh Tang Q. </div><div class=\"custom-block-body\"></div></div>","id":"c33ecae0-654e-5070-91f2-aef77d66722a","frontmatter":{"title":"[AWS] Why my Lambda cannot access Internet anymore from its AWS VPC?","date":"19-02-2021","tags":["aws"]},"fields":{"slug":"/aws-why-my-lambda-cannot-access-internet-anymore-from-its-aws-vpc/","readingTime":{"text":"6 min read"}}}},{"node":{"excerpt":"Amazon Elastic Container Registry (ECR) l√† d·ªãch v·ª• l∆∞u tr·ªØ b·ªô ch·ª©a Docker ƒë∆∞·ª£c qu·∫£n l√Ω ƒë·∫ßy ƒë·ªß gi√∫p c√°c nh√† ph√°t tri·ªÉn d·ªÖ d√†ng l∆∞u tr·ªØ, qu·∫£n l√Ω v√† tri·ªÉn khai h√¨nh ·∫£nh b·ªô ch·ª©a Docker. Amazon ECR ƒë∆∞·ª£c‚Ä¶","snippet":"<html><head></head><body><p>Amazon Elastic Container Registry (<strong>ECR</strong>) l&#xE0; d&#x1ECB;ch v&#x1EE5; l&#x1B0;u tr&#x1EEF; b&#x1ED9; ch&#x1EE9;a Docker &#x111;&#x1B0;&#x1EE3;c qu&#x1EA3;n l&#xFD; &#x111;&#x1EA7;y &#x111;&#x1EE7; gi&#xFA;p c&#xE1;c nh&#xE0; ph&#xE1;t tri&#x1EC3;n d&#x1EC5; d&#xE0;ng l&#x1B0;u tr&#x1EEF;, qu&#x1EA3;n l&#xFD; v&#xE0; tri&#x1EC3;n khai h&#xEC;nh &#x1EA3;nh b&#x1ED9; ch&#x1EE9;a Docker. Amazon <strong>ECR</strong> &#x111;&#x1B0;&#x1EE3;c t&#xED;ch h&#x1EE3;p v&#x1EDB;i Amazon Elastic Container Service (ECS),&#x2026;</p></body></html>","html":"<p>Amazon Elastic Container Registry (<strong>ECR</strong>) l√† d·ªãch v·ª• l∆∞u tr·ªØ b·ªô ch·ª©a <a href=\"https://aws.amazon.com/vi/docker/\">Docker</a> ƒë∆∞·ª£c qu·∫£n l√Ω ƒë·∫ßy ƒë·ªß gi√∫p c√°c nh√† ph√°t tri·ªÉn d·ªÖ d√†ng l∆∞u tr·ªØ, qu·∫£n l√Ω v√† tri·ªÉn khai h√¨nh ·∫£nh b·ªô ch·ª©a Docker. Amazon <strong>ECR</strong> ƒë∆∞·ª£c t√≠ch h·ª£p v·ªõi <a href=\"https://aws.amazon.com/vi/ecs/\">Amazon Elastic Container Service (ECS)</a>, gi√∫p ƒë∆°n gi·∫£n h√≥a quy tr√¨nh c√¥ng vi·ªác t·ª´ khi kh√¢u ph√°t tri·ªÉn ƒë·∫øn kh√¢u s·∫£n xu·∫•t. Amazon ECR gi√∫p b·∫°n kh√¥ng ph·∫£i v·∫≠n h√†nh c√°c kho b·ªô ch·ª©a ri√™ng hay thay ƒë·ªïi quy m√¥ c∆° s·ªü h·∫° t·∫ßng ng·∫ßm. Amazon ECR s·∫Ω tr·ªü th√†nh m√°y ch·ªß l∆∞u tr·ªØ h√¨nh ·∫£nh c·ªßa b·∫°n trong ki·∫øn tr√∫c c√≥ ƒë·ªô s·∫µn s√†ng cao v√† quy m√¥ linh ho·∫°t, cho ph√©p b·∫°n tri·ªÉn khai c√°c b·ªô ch·ª©a cho ·ª©ng d·ª•ng c·ªßa m√¨nh m·ªôt c√°ch ·ªïn ƒë·ªãnh. Kh·∫£ nƒÉng t√≠ch h·ª£p v·ªõi AWS Identity and Access Management (<strong>IAM</strong>) ƒëem ƒë·∫øn cho b·∫°n kh·∫£ nƒÉng ki·ªÉm so√°t t·ª´ng kho ·ªü c·∫•p t√†i nguy√™n. V·ªõi Amazon <strong>ECR</strong>, b·∫°n s·∫Ω kh√¥ng ph·∫£i tr·∫£ ti·ªÅn tr∆∞·ªõc hay c√≥ cam k·∫øt g√¨. B·∫°n ch·ªâ ph·∫£i chi tr·∫£ chi ph√≠ cho l∆∞·ª£ng d·ªØ li·ªáu b·∫°n l∆∞u trong c√°c kho c≈©ng nh∆∞ d·ªØ li·ªáu ƒë∆∞·ª£c truy·ªÅn l√™n Internet.\n<img src=\"https://d1.awsstatic.com/diagrams/product-page-diagrams/Product-Page-Diagram_Amazon-ECR.bf2e7a03447ed3aba97a70e5f4aead46a5e04547.png\" alt=\"enter image description here\"></p>\n<h1>L·ª£i √≠ch</h1>\n<ul>\n<li>ƒê√¢y l√† d·ªãch v·ª• l∆∞u tr·ªØ Docker image cho c√°c d·ª± √°n v√† nhi·ªÅu m√¥i tr∆∞·ªùng s·ª≠ d·ª•ng n·ªÅn t·∫£ng ƒë√°m m√¢y <strong>AWS</strong>, ECR cho ph√©p b·∫°n t·∫°o ph√¢n v√πng theo <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html\">region</a> ƒë·ªãnh s·∫µn.</li>\n<li>S·ª± k·∫øt h·ª£p tuy·ªát v·ªùi v·ªõi <strong>AWS \u001dBeanstalk</strong>, ƒë·ªëi v·ªõi c√°c d·ª± √°n t√≠ch h·ª£p deploy b·∫±ng CI/CD khi \u001c s·ª≠ d·ª•ng ƒë·∫øn <em>Beanstalk</em> th√¨ Docker ECR l√† m·ªôt trong nh·ªØng s·ª± l·ª±a t·ªëi ∆∞u v√† ƒëa d·ª•ng \u001dnh·∫•t trong h·ªá sinh th√°i ƒë√°m m√¢y AWS.</li>\n<li><strong>Docker ECR</strong> ƒë∆∞·ª£c m√£ ho√° file v√† s·ª≠ d·ª•ng AWS Identity n√™n ch·ªâ c√≥ th·ªÉ truy c·∫≠p v√† s·ª≠ d·ª•ng n·∫øu c√≥ Identity, b·∫°n kh√¥ng th·ªÉ copy nguy√™n link c·ªßa Docker image n√†y r·ªìi truy c·∫≠p ·ªü m·ªôt n∆°i kh√°c khi kh√¥ng c√≥ Identity ƒë∆∞·ª£c. B·∫°n c√≥ th·ªÉ build image t·ª´ local, CI/CD v√† pust l√™n Docker ECR k√®m theo <strong>Identity</strong> ƒë√£ cho.</li>\n<li>\n<p>D·ª±a v√†o region ƒë√£ ƒë·ªãnh s·∫µn n√™n t·ªëc ƒë·ªô build/deploy d·ª± √°n s·∫Ω nhanh h∆°n l√† d√πng Docker hub, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt repo ch·ª©a nhi·ªÅu m√¥i tr∆∞·ªùng(test, develop, staging).</p>\n<h2>ƒê∆∞·ª£c qu·∫£n l√Ω to√†n ph·∫ßn</h2>\n</li>\n</ul>\n<p>Amazon Elastic Container Registry gi√∫p b·∫°n kh√¥ng ph·∫£i v·∫≠n h√†nh v√† thay ƒë·ªïi quy m√¥ c∆° s·ªü h·∫° t·∫ßng ƒë·ªÉ l√†m n·ªÅn t·∫£ng ho·∫°t ƒë·ªông cho s·ªï ƒëƒÉng k√Ω b·ªô ch·ª©a c·ªßa m√¨nh. B·∫°n s·∫Ω kh√¥ng c·∫ßn ph·∫£i c√†i ƒë·∫∑t v√† qu·∫£n l√Ω ph·∫ßn m·ªÅm hay thay ƒë·ªïi quy m√¥ c∆° s·ªü h·∫° t·∫ßng. Ch·ªâ c·∫ßn ƒë·∫©y h√¨nh ·∫£nh trong b·ªô ch·ª©a c·ªßa b·∫°n l√™n Amazon ECR v√† l·∫•y h√¨nh ·∫£nh ra b·∫±ng b·∫•t k·ª≥ c√¥ng c·ª• qu·∫£n l√Ω b·ªô ch·ª©a n√†o khi b·∫°n c·∫ßn tri·ªÉn khai.</p>\n<h2>ƒê·ªô s·∫µn s√†ng cao</h2>\n<p>Amazon Elastic Container Registry c√≥ ki·∫øn tr√∫c b·ªÅn b·ªâ, d∆∞ th·ª´a v√† c√≥ quy m√¥ c·ª±c k·ª≥ linh ho·∫°t. C√°c h√¨nh ·∫£nh trong b·ªô ch·ª©a c·ªßa b·∫°n r·∫•t d·ªÖ s·ª≠ d·ª•ng v√† truy c·∫≠p, n√™n b·∫°n c√≥ th·ªÉ tri·ªÉn khai ·ªïn ƒë·ªãnh c√°c b·ªô ch·ª©a m·ªõi cho ·ª©ng d·ª•ng c·ªßa m√¨nh.</p>\n<h2>B·∫£o m·∫≠t</h2>\n<p>Amazon Elastic Container Registry truy·ªÅn h√¨nh ·∫£nh c·ªßa b·∫°n qua k·∫øt n·ªëi HTTPS v√† t·ª± ƒë·ªông m√£ h√≥a h√¨nh ·∫£nh ƒë∆∞·ª£c l∆∞u tr·ªØ c·ªßa b·∫°n. B·∫°n c√≥ th·ªÉ c·∫•u h√¨nh c√°c ch√≠nh s√°ch ƒë·ªÉ qu·∫£n l√Ω quy·ªÅn v√† ki·ªÉm so√°t truy c·∫≠p v√†o h√¨nh ·∫£nh c·ªßa b·∫°n b·∫±ng c√°ch s·ª≠ d·ª•ng ng∆∞·ªùi d√πng v√† vai tr√≤ c·ªßa AWS Identity and Access Management (IAM) m√† kh√¥ng ph·∫£i tr·ª±c ti·∫øp qu·∫£n l√Ω th√¥ng tin x√°c th·ª±c tr√™n phi√™n b·∫£n EC2.</p>\n<h2>Quy tr√¨nh c√¥ng vi·ªác ƒë∆°n gi·∫£n ho√° nh·∫•t c√≥ th·ªÉ</h2>\n<p>Amazon Elastic Container Registry ƒë∆∞·ª£c t√≠ch h·ª£p v·ªõi Amazon ECS v√† CLI Docker, ƒëem ƒë·∫øn cho b·∫°n kh·∫£ nƒÉng ƒë∆°n gi·∫£n h√≥a quy tr√¨nh c√¥ng vi·ªác ph√°t tri·ªÉn v√† s·∫£n xu·∫•t. B·∫°n c√≥ th·ªÉ d·ªÖ d√†ng ƒë·∫©y h√¨nh ·∫£nh trong b·ªô ch·ª©a c·ªßa b·∫°n l√™n Amazon ECR b·∫±ng c√°ch s·ª≠ d·ª•ng CLI Docker t·ª´ b·ªô m√°y ph√°t tri·ªÉn c·ªßa b·∫°n r·ªìi Amazon ECS s·∫Ω c√≥ th·ªÉ l·∫•y tr·ª±c ti·∫øp t·ª´ ƒë√≥ ƒë·ªÉ ph·ª•c v·ª• qu√° tr√¨nh tri·ªÉn khai s·∫£n xu·∫•t.</p>\n<h1>K·∫øt h·ª£p v·ªõi CI/CD</h1>\n<h2>∆Øu ƒëi·ªÉm:</h2>\n<ul>\n<li>T·ª´ c√°c ·ª©ng d·ª•ng CI/CD hot nh·∫•t hi·ªán nay nh∆∞: Circleci, Github Action, Gitlab Action,... c√≥ th·ªÉ s·ª≠ d·ª•ng ƒë·ªÉ build c√°c Docker image <strong>ECR</strong> v√† th·ª±c hi·ªán testing trong c√°c Docker container ƒë√≥ r·∫•t ti·ªán d·ª•ng v√† gi·∫£m thi·ªÉu kh·∫£ nƒÉng r·ªßi do cho m√¥i tr∆∞·ªùng production.</li>\n<li>Ch√∫ng ta c√≥ th·ªÉ linh ƒë·ªông ƒë·ªÉ build c√°c job theo quy tr√¨nh ƒë·ªÉ ki·ªÉm th·ª≠ code, docker ho·∫°t ƒë·ªông c√≥ ch∆°n chu hay kh√¥ng tr∆∞·ªõc khi ti·∫øn ƒë·∫øn b∆∞·ªõc deploy d·ª± √°n,...</li>\n<li>S·ª≠ d·ª•ng Docker ECR trong CI b·∫°n s·∫Ω kh√¥ng c·∫ßn ph·∫£i m·∫•t nhi·ªÅu th·ªùi gian ƒë·ªÉ ƒëi ch·ªâ cho c√°c thanh ni√™n develop kh√°c r·∫±ng ƒëo·∫°n code n√†y c√≥ th·ªÉ l·ªói hay kh√¥ng v√† l·ªói ƒë√≥ ·ªü ƒë√¢u, c√°ch fix nh∆∞ th·∫ø n√†o, c√°c thanh ni√™n ƒë√≥ s·∫Ω t·ª± bi·∫øt c√°ch fix v√† t√¨m hi·ªÉu,... B·∫°n c√≥ th·ªÉ d√†nh time l√†m c√°c c√¥ng vi·ªác kh√°c trong m·ªôt m·ªõ c√¥ng vi·ªác ƒë∆∞·ª£c giao :D.</li>\n<li>\n<p>B·∫°n c√≥ th·ªÉ k·∫øt n·ªëi ƒë·∫øn c√°c <strong>RDS</strong> t·ª´ b√™n trong m·ªói container.</p>\n<h2>Nh∆∞·ª£c ƒëi·ªÉm:</h2>\n</li>\n<li>Docker ECR ch·ªâ d√†nh cho kh√°ch h√†ng ch·ªãu ch∆°i, b·∫°n s·∫Ω ph·∫£i t·ªën th√™m chi ph√≠ cho m·ªói l·∫ßn build v√† deploy d·ª± √°n.</li>\n<li>Ch·ªâ d√†nh cho ng∆∞·ªùi v·ªÅ Docker m·ªõi c√≥ th·ªÉ build v√† s·ª≠ d·ª•ng.</li>\n<li>Ch·ªâ d√†nh cho c√°c d·ª± √°n c√≥ s·ª≠ d·ª•ng ƒë·∫øn n·ªÅn t·∫£ng ƒë√°m m√¢y AWS.</li>\n<li>T√†i li·ªáu v·ªÅ Docker ECR c√≤n √≠t ƒë√≤i h·ªèi kh·∫£ nƒÉng research c·ªßa b·∫°n ph·∫£i ƒë·∫°t m·ª©c th∆∞·ª£ng th·ª´a :D.</li>\n<li>B·∫°n ph·∫£i am hi·ªÉu v·ªÅ AWS m·ªõi c√≥ th·ªÉ c·∫•u h√¨nh cho d·ª± √°n ho·∫°t ƒë·ªông ƒë√∫ng y√™u c·∫ßu.</li>\n</ul>\n<h1>K·∫øt lu·∫≠n</h1>\n<p>T·ª´ b√†i vi·∫øt n√†y b·∫°n ƒë√£ ph·∫ßn n√†o h√¨nh dung v·ªÅ <strong>AWS Docker ECR</strong> r·ªìi ƒë√∫ng kh√¥ng n√†o, ƒë·ª´ng ng·∫°i ng·∫ßn h√£y ƒë·ªÅ xu·∫•t v√† √°p d·ª•ng v√†o d·ª± √°n nh√©, n√≥ s·∫Ω r·∫•t linh ho·∫°t cho d·ª± √°n c·ªßa b·∫°n ƒë√≥.\nB·∫°n s·∫Ω c·∫ßn t·ªën ch√∫t time t√¨m hi·ªÉu xem c∆° ch·∫ø ho·∫°t ƒë·ªông c·ªßa n√≥ th·∫ø n√†o,.. :D  ƒë·ª´ng lo l·∫Øng, n√≥ ƒë∆°n gi·∫£n l·∫Øm:</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">L√™ VƒÉn Chi·∫øn </div><div class=\"custom-block-body\"></div></div>","id":"c4f936a4-80ba-5a9e-9798-d18167228a62","frontmatter":{"title":"About Amazon Elastic Container Registry (ECR)","date":"18-10-2020","tags":["docker","aws","erc","ci","git"]},"fields":{"slug":"/about-amazon-elastic-container-registry-ecr/","readingTime":{"text":"6 min read"}}}},{"node":{"excerpt":"Crawling d·ªØ li·ªáu kh√¥ng ph·∫£i l√† kh√°i ni·ªám qu√° xa l·∫°, nh∆∞ng ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ m·ªôt website ƒë√¥i khi ch√∫ng ta c≈©ng hay g·∫∑p t√¨nh tr·∫°ng b·ªã ch·∫∑n IP d·∫´n ƒë·∫øn server kh√¥ng th·ªÉ ti·∫øp l·ª•c d·ªØ li·ªáu. √ù t∆∞·ªüng. √ù t∆∞·ªüng‚Ä¶","snippet":"<html><head></head><body><p>Crawling d&#x1EEF; li&#x1EC7;u kh&#xF4;ng ph&#x1EA3;i l&#xE0; kh&#xE1;i ni&#x1EC7;m qu&#xE1; xa l&#x1EA1;, nh&#x1B0;ng &#x111;&#x1EC3; l&#x1EA5;y d&#x1EEF; li&#x1EC7;u t&#x1EEB; m&#x1ED9;t website &#x111;&#xF4;i khi ch&#xFA;ng ta c&#x169;ng hay g&#x1EB7;p t&#xEC;nh tr&#x1EA1;ng b&#x1ECB; ch&#x1EB7;n IP d&#x1EAB;n &#x111;&#x1EBF;n server kh&#xF4;ng th&#x1EC3; ti&#x1EBF;p l&#x1EE5;c d&#x1EEF; li&#x1EC7;u.</p> <h5>&#xDD; t&#x1B0;&#x1EDF;ng.</h5> <p>&#xDD; t&#x1B0;&#x1EDF;ng &#x111;&#x1EC3; gi&#x1EA3;i quy&#x1EBF;t v&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EA5;y&#x2026;</p></body></html>","html":"<p>Crawling d·ªØ li·ªáu kh√¥ng ph·∫£i l√† kh√°i ni·ªám qu√° xa l·∫°, nh∆∞ng ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ m·ªôt website ƒë√¥i khi ch√∫ng ta c≈©ng hay g·∫∑p t√¨nh tr·∫°ng b·ªã ch·∫∑n IP d·∫´n ƒë·∫øn server kh√¥ng th·ªÉ ti·∫øp l·ª•c d·ªØ li·ªáu.</p>\n<h4>√ù t∆∞·ªüng.</h4>\n<p>√ù t∆∞·ªüng ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë·∫•y l√† ch√∫ng ta s·∫Ω ti·∫øn h√†nh t·∫°o m·ªôt service IP rotator ƒë·ªÉ renew l·∫°i IP khi website ho·∫∑c API ch√∫ng ta mu·ªën l·∫•y d·ªØ li·ªáu ch·∫∑n IP.</p>\n<p>√ù t∆∞·ªüng c√≥ v·∫ª hay nh∆∞ng v·∫•n ƒë·ªÅ l√† l√†m sao ch√∫ng ta c√≥ m·ªôt l∆∞·ª£ng ƒë·ªãa ch·ªâ IP ƒë·ªß l·ªõn ƒë·ªÉ thay ƒë·ªïi cho server v√† th·ªùi gian thay ƒë·ªïi IP cho server c√≥ qu√° m·∫•t th·ªùi gian hay kh√≥ khƒÉn.</p>\n<p>R·∫•t may l√† AWS c√≥ m·ªôt d·ªãch v·ª• v·ªõi t√™n g·ªçi l√† <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html\">Elastic I\u001dP</a> , cho ph√©p t·∫°o ra m·ªôt IP v√† ƒë√≠nh k√®m v√†o server, t·∫•t nhi√™n server trong tr∆∞·ªùng h·ª£p n√†y ch√∫ng ta ph·∫£i s·ª≠ d·ª•ng EC2 :))).</p>\n<p>V·ªõi <code class=\"language-text\">Elastic I\u001dP</code> th√¨ s·∫Ω kh√¥ng b·ªã t√≠nh ph√≠ ph√°t sinh n·∫øu b·∫°n t·∫°o ra m·ªôt ƒë·ªãa ch·ªâ ip m·ªõi ƒë∆∞·ª£c g√°n v√†o cho EC2 v√† ph·∫£i xo√° ip c≈© ƒëi.</p>\n<h4>Gi·∫£i ph√°p.</h4>\n<p>Thi√™n Th·ªùi ƒê·ªãa L·ª£i Nh√¢n H√≤a ƒë·ªÅu h·ªôi t·ª• ·ªü ƒë√¢y c·∫£ ch·ª© ƒë√¢u, hay ti·∫øn h√†nh thi·∫øt k·∫ø m·ªôt s∆° ƒë·ªì ƒë·ªÉ ch√∫ng ta c√≥ c√°i nh√¨n r√µ h∆°n.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1615887560690\" width=\"261.796875\" xmlns=\"http://www.w3.org/2000/svg\" height=\"383\" viewBox=\"0 0 261.796875 383\"><style>#mermaid-1615887560690 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1615887560690 .label text{fill:#333}#mermaid-1615887560690 .node rect,#mermaid-1615887560690 .node circle,#mermaid-1615887560690 .node ellipse,#mermaid-1615887560690 .node polygon,#mermaid-1615887560690 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1615887560690 .node .label{text-align:center}#mermaid-1615887560690 .node.clickable{cursor:pointer}#mermaid-1615887560690 .arrowheadPath{fill:#333}#mermaid-1615887560690 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1615887560690 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1615887560690 .edgeLabel rect{opacity:0.5}#mermaid-1615887560690 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1615887560690 .cluster text{fill:#333}#mermaid-1615887560690 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1615887560690 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1615887560690 text.actor{fill:#000;stroke:none}#mermaid-1615887560690 .actor-line{stroke:grey}#mermaid-1615887560690 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1615887560690 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1615887560690 #arrowhead{fill:#333}#mermaid-1615887560690 .sequenceNumber{fill:#fff}#mermaid-1615887560690 #sequencenumber{fill:#333}#mermaid-1615887560690 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1615887560690 .messageText{fill:#333;stroke:none}#mermaid-1615887560690 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1615887560690 .labelText{fill:#000;stroke:none}#mermaid-1615887560690 .loopText{fill:#000;stroke:none}#mermaid-1615887560690 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#ccf}#mermaid-1615887560690 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1615887560690 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1615887560690 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1615887560690 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1615887560690 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1615887560690 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .section{stroke:none;opacity:0.2}#mermaid-1615887560690 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1615887560690 .section2{fill:#fff400}#mermaid-1615887560690 .section1,#mermaid-1615887560690 .section3{fill:#fff;opacity:0.2}#mermaid-1615887560690 .sectionTitle0{fill:#333}#mermaid-1615887560690 .sectionTitle1{fill:#333}#mermaid-1615887560690 .sectionTitle2{fill:#333}#mermaid-1615887560690 .sectionTitle3{fill:#333}#mermaid-1615887560690 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1615887560690 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .grid path{stroke-width:0}#mermaid-1615887560690 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1615887560690 .task{stroke-width:2}#mermaid-1615887560690 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .taskText:not([font-size]){font-size:11px}#mermaid-1615887560690 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1615887560690 .task.clickable{cursor:pointer}#mermaid-1615887560690 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1615887560690 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1615887560690 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1615887560690 .taskText0,#mermaid-1615887560690 .taskText1,#mermaid-1615887560690 .taskText2,#mermaid-1615887560690 .taskText3{fill:#fff}#mermaid-1615887560690 .task0,#mermaid-1615887560690 .task1,#mermaid-1615887560690 .task2,#mermaid-1615887560690 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1615887560690 .taskTextOutside0,#mermaid-1615887560690 .taskTextOutside2{fill:#000}#mermaid-1615887560690 .taskTextOutside1,#mermaid-1615887560690 .taskTextOutside3{fill:#000}#mermaid-1615887560690 .active0,#mermaid-1615887560690 .active1,#mermaid-1615887560690 .active2,#mermaid-1615887560690 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1615887560690 .activeText0,#mermaid-1615887560690 .activeText1,#mermaid-1615887560690 .activeText2,#mermaid-1615887560690 .activeText3{fill:#000 !important}#mermaid-1615887560690 .done0,#mermaid-1615887560690 .done1,#mermaid-1615887560690 .done2,#mermaid-1615887560690 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1615887560690 .doneText0,#mermaid-1615887560690 .doneText1,#mermaid-1615887560690 .doneText2,#mermaid-1615887560690 .doneText3{fill:#000 !important}#mermaid-1615887560690 .crit0,#mermaid-1615887560690 .crit1,#mermaid-1615887560690 .crit2,#mermaid-1615887560690 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1615887560690 .activeCrit0,#mermaid-1615887560690 .activeCrit1,#mermaid-1615887560690 .activeCrit2,#mermaid-1615887560690 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1615887560690 .doneCrit0,#mermaid-1615887560690 .doneCrit1,#mermaid-1615887560690 .doneCrit2,#mermaid-1615887560690 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1615887560690 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1615887560690 .milestoneText{font-style:italic}#mermaid-1615887560690 .doneCritText0,#mermaid-1615887560690 .doneCritText1,#mermaid-1615887560690 .doneCritText2,#mermaid-1615887560690 .doneCritText3{fill:#000 !important}#mermaid-1615887560690 .activeCritText0,#mermaid-1615887560690 .activeCritText1,#mermaid-1615887560690 .activeCritText2,#mermaid-1615887560690 .activeCritText3{fill:#000 !important}#mermaid-1615887560690 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1615887560690 g.classGroup text .title{font-weight:bolder}#mermaid-1615887560690 g.clickable{cursor:pointer}#mermaid-1615887560690 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1615887560690 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1615887560690 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1615887560690 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1615887560690 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1615887560690 .dashed-line{stroke-dasharray:3}#mermaid-1615887560690 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1615887560690 .commit-id,#mermaid-1615887560690 .commit-msg,#mermaid-1615887560690 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1615887560690 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1615887560690 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1615887560690 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1615887560690 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1615887560690 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1615887560690 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1615887560690 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1615887560690 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1615887560690 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1615887560690 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1615887560690 .node circle.state-start{fill:black;stroke:black}#mermaid-1615887560690 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1615887560690 #statediagram-barbEnd{fill:#9370db}#mermaid-1615887560690 .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1615887560690 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1615887560690 .statediagram-state .divider{stroke:#9370db}#mermaid-1615887560690 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1615887560690 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1615887560690 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1615887560690 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1615887560690 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1615887560690 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1615887560690 .note-edge{stroke-dasharray:5}#mermaid-1615887560690 .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1615887560690 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g transform=\"translate(0, 0)\"><marker id=\"flowchart-pointEnd\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"10\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"flowchart-pointStart\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"0\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 5 L 10 10 L 10 0 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"flowchart-circleEnd\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"11\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"flowchart-circleStart\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"-1\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"flowchart-crossEnd\" class=\"flowchart\" viewBox=\"0 0 11 11\" refX=\"12\" refY=\"5.2\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><path stroke=\"black\" d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"flowchart-crossStart\" class=\"flowchart\" viewBox=\"0 0 11 11\" refX=\"-1\" refY=\"5.2\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><path stroke=\"black\" d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><g class=\"root\"><g class=\"clusters\"></g><g class=\"edgePaths\"><path d=\"M133.31677827380952,42L127.18846106150794,46.166666666666664C121.06014384920634,50.333333333333336,108.80350942460318,58.666666666666664,102.67519221230158,67C96.546875,75.33333333333333,96.546875,83.66666666666667,96.546875,87.83333333333333L96.546875,92\" id=\"id1\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M96.546875,125L96.546875,129.16666666666666C96.546875,133.33333333333334,96.546875,141.66666666666666,96.546875,150C96.546875,158.33333333333334,96.546875,166.66666666666666,96.546875,170.83333333333334L96.546875,175\" id=\"id2\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M96.546875,208L96.546875,212.16666666666666C96.546875,216.33333333333334,96.546875,224.66666666666666,96.546875,233C96.546875,241.33333333333334,96.546875,249.66666666666666,96.546875,253.83333333333334L96.546875,258\" id=\"id3\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M96.546875,291L96.546875,295.1666666666667C96.546875,299.3333333333333,96.546875,307.6666666666667,102.67519221230158,316C108.80350942460318,324.3333333333333,121.06014384920634,332.6666666666667,127.18846106150794,336.8333333333333L133.31677827380952,341\" id=\"id4\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M183.32384672619048,341L189.45216393849205,336.8333333333333C195.58048115079364,332.6666666666667,207.83711557539684,324.3333333333333,213.9654327876984,313.25C220.09375,302.1666666666667,220.09375,288.3333333333333,220.09375,274.5C220.09375,260.6666666666667,220.09375,246.83333333333334,220.09375,233C220.09375,219.16666666666666,220.09375,205.33333333333334,220.09375,191.5C220.09375,177.66666666666666,220.09375,163.83333333333334,220.09375,150C220.09375,136.16666666666666,220.09375,122.33333333333333,220.09375,108.5C220.09375,94.66666666666667,220.09375,80.83333333333333,213.9654327876984,69.75C207.83711557539684,58.666666666666664,195.58048115079364,50.333333333333336,189.45216393849205,46.166666666666664L183.32384672619048,42\" id=\"id5\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"id1\" transform=\"translate(158.3203125, 25)\"><rect rx=\"17\" ry=\"17\" x=\"-82.34375\" y=\"-17\" width=\"164.6875\" height=\"34\"></rect><g class=\"label\" transform=\"translate(-70.59375, -9.5)\"><foreignObject width=\"141.1875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">1. Detect b·ªã ch·∫∑n IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id2\" transform=\"translate(96.546875, 108.5)\"><rect rx=\"16.5\" ry=\"16.5\" x=\"-82.328125\" y=\"-16.5\" width=\"164.65625\" height=\"33\"></rect><g class=\"label\" transform=\"translate(-70.703125, -9)\"><foreignObject width=\"141.40625\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">2.Allocate Elastic IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id3\" transform=\"translate(96.546875, 191.5)\"><rect rx=\"16.5\" ry=\"16.5\" x=\"-88.546875\" y=\"-16.5\" width=\"177.09375\" height=\"33\"></rect><g class=\"label\" transform=\"translate(-76.921875, -9)\"><foreignObject width=\"153.84375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">3.Associate Elastic IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id4\" transform=\"translate(96.546875, 274.5)\"><rect rx=\"16.5\" ry=\"16.5\" x=\"-83.21875\" y=\"-16.5\" width=\"166.4375\" height=\"33\"></rect><g class=\"label\" transform=\"translate(-71.59375, -9)\"><foreignObject width=\"143.1875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">4.Release Elastic IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id5\" transform=\"translate(158.3203125, 358)\"><rect rx=\"17\" ry=\"17\" x=\"-95.4765625\" y=\"-17\" width=\"190.953125\" height=\"34\"></rect><g class=\"label\" transform=\"translate(-83.7265625, -9.5)\"><foreignObject width=\"167.453125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">5.Ti·∫øp t·ª•c crawl d·ªØ li·ªáu</span></div></foreignObject></g></g></g></g></g></svg></div>\n<h4>Vi·∫øt code ƒë·ªÉ tri·ªÉn khai √Ω t∆∞·ªüng.</h4>\n<p> T√¥i t·∫°o m·ªôt file m·ªõi ƒë·∫∑t t√™n <code class=\"language-text\">aws-ip-rotator.sh</code>. ·ªû ƒë√¢y m√¨nh d√πng <code class=\"language-text\">shell script</code> v√† <code class=\"language-text\">aws-cli</code> ƒë·ªÉ vi·∫øt code, c√°c d·ªãch v·ª• c·ªßa aws h·∫ßu nh∆∞ ƒë·ªÅu c√≥ th∆∞ vi·ªán cho h·∫ßu h·∫øt c√°c ng√¥n ng·ªØ l·∫≠p tr√¨nh hay d√πng. N√™n ch√∫ng ta ho√†n to√†n c√≥ th·ªÉ tri·ªÉn khai √Ω t∆∞·ªüng b·∫±ng c√°c ng√¥n ng·ªØ kh√°c nh∆∞ ruby, php, nodejs,...</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">INSTANCE</span></span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s http://169.254.169.254/latest/meta-data/instance-id<span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">OLD_IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s http://169.254.169.254/latest/meta-data/public-ipv4<span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">OLD_ALLOCATION_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>aws ec2 describe-addresses --public-ips $OLD_IP --query <span class=\"token string\">\"Addresses[0].AllocationId\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">tr</span> -d <span class=\"token string\">'\"'</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">NEW_IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>aws ec2 allocate-address --query PublicIp <span class=\"token operator\">|</span> <span class=\"token function\">tr</span> -d <span class=\"token string\">'\"'</span><span class=\"token variable\">)</span></span>\naws ec2 associate-address --instance-id <span class=\"token environment constant\">$INSTANCE</span> --public-ip <span class=\"token variable\">$NEW_IP</span>\naws ec2 release-address --allocation-id <span class=\"token variable\">$OLD_ALLOCATION_ID</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>Gi·∫£i th√≠ch chi ti·∫øt 6 d√≤ng code.</h4>\n<ul>\n<li>\bD√≤ng 3: L·∫•y gi√° tr·ªã Instance ID c·ªßa EC2 hi·ªán t·∫°i ƒëang request.</li>\n<li>D√≤ng 4: L·∫•y ƒë·ªãa ch·ªâ IP hi·ªán t·∫°i c·ªßa EC2.</li>\n<li>D√≤ng 5: L·∫•y Allocation ID c·ªßa IP hi·ªán t·∫°i li√™n k·∫øt v·ªõi EC2.</li>\n<li>D√≤ng 6: T·∫°o ra m·ªôt ƒë·ªãa ch·ªâ IP ho√†n to√†n m·ªõi ƒë·ªÉ thay th·∫ø cho IP hi·ªán t·∫°i.</li>\n<li>D√≤ng 7: ƒê√≠nh k√®m IP m·ªõi v√†o EC2.</li>\n<li>D√≤ng 8: Xo√° IP c≈© ƒë·ªÉ tr√°nh \u001dAWS t√≠nh th√™m ph√≠ ph√°t sinh.</li>\n</ul>\n<p> V·∫≠y l√† ch√∫ng ta ƒë√£ t·∫°o ra m·ªôt IP rotator ch·ªâ v·ªõi 6 d√≤ng code, v·ªõi ƒëo·∫°n code tr√™n n√≥ c√≥ th·ªÉ ho·∫°t ƒë·ªông ƒë·ªëi v·ªõi EC2-Classic v√† c·∫£ EC2-VPC. Ch√∫ng ta c≈©ng c√≥ th·ªÉ ch·∫°y tr·ª±c ti·∫øp file code ·ªü tr√™n trong  d·ª± √°n ho·∫∑c  c≈©ng c√≥ th·ªÉ setting m·ªôt con cronjob.</p>","id":"e3ab2296-90b6-553a-be63-c728aa23da72","frontmatter":{"title":"[Aws] T·∫°o IP rotator cho server v·ªõi Elastic IP AWS ch·ªâ 6 d√≤ng code","date":"21-07-2020","tags":["aws"]},"fields":{"slug":"/aws-tao-ip-rotator-cho-server-voi-elastic-ip-aws-chi-6-dong-code/","readingTime":{"text":"3 min read"}}}},{"node":{"excerpt":"V·∫•n ƒë·ªÅ ƒë·∫∑t ra Th·ª© nh·∫•t: L√†m th·∫ø n√†o ƒë·ªÉ hi·ªÉn th·ªã 100 t·∫•m ·∫£nh/1 trang m·ªôt c√°ch nhanh nh·∫•t? ƒê·∫£m b·∫£o t·ªëi ∆∞u t·ªëc ƒë·ªô load ·∫£nh, n√¢ng cao hi·ªáu qu·∫£ SEO Google v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët h∆°n. Th·ª© hai: ƒê·ªÉ‚Ä¶","snippet":"<html><head></head><body><h3>V&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EB7;t ra</h3> <ul> <li>Th&#x1EE9; nh&#x1EA5;t: L&#xE0;m th&#x1EBF; n&#xE0;o &#x111;&#x1EC3; hi&#x1EC3;n th&#x1ECB; 100 t&#x1EA5;m &#x1EA3;nh/1 trang m&#x1ED9;t c&#xE1;ch nhanh nh&#x1EA5;t? &#x110;&#x1EA3;m b&#x1EA3;o t&#x1ED1;i &#x1B0;u t&#x1ED1;c &#x111;&#x1ED9; load &#x1EA3;nh, n&#xE2;ng cao hi&#x1EC7;u qu&#x1EA3; SEO Google v&#xE0; tr&#x1EA3;i nghi&#x1EC7;m ng&#x1B0;&#x1EDD;i d&#xF9;ng t&#x1ED1;t h&#x1A1;n.</li> <li>Th&#x1EE9; hai: &#x110;&#x1EC3; ng&#x1B0;&#x1EDD;i d&#xF9;ng \u001dupload &#x1EA3;nh l&#xEA;n server&#x2026;</li></ul></body></html>","html":"<h2>V·∫•n ƒë·ªÅ ƒë·∫∑t ra</h2>\n<ul>\n<li>Th·ª© nh·∫•t: L√†m th·∫ø n√†o ƒë·ªÉ hi·ªÉn th·ªã 100 t·∫•m ·∫£nh/1 trang m·ªôt c√°ch nhanh nh·∫•t? ƒê·∫£m b·∫£o t·ªëi ∆∞u t·ªëc ƒë·ªô load ·∫£nh, n√¢ng cao hi·ªáu qu·∫£ SEO Google v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët h∆°n.</li>\n<li>Th·ª© hai: ƒê·ªÉ ng∆∞·ªùi d√πng \u001dupload ·∫£nh l√™n server v·ªõi dung l∆∞·ª£ng tr√™n 500MB. N·∫øu ƒë·ªÉ web server x·ª≠ l√Ω qu√° tr√¨nh nh·∫≠n d·ªØ li·ªáu t·ª´ user upload l√™n, sau ƒë√≥ convert ƒë·ªëi v·ªõi file c√≥ dung l∆∞·ª£ng l·ªõn th√¨ kh√¥ng h·ªÅ ·ªïn ch√∫t n√†o. V·∫≠y ƒë·ªÉ gi·∫£m t·∫£i cho web server th√¨ ta s·∫Ω s·ª≠ d·ª•ng serverless trong t√¨nh hu·ªëng n√†y. <a href=\"https://aws.amazon.com/vi/serverless/\">(V√¨ sao s·ª≠ d·ª•ng serverless?)</a></li>\n</ul>\n<h2>S·ª± tr·ªïi d·∫≠y c·ªßa Webp</h2>\n<p><img src=\"https://miro.medium.com/max/1698/1*fRLZo9RWFkC2rkHXJzrdQA.png\" alt=\"Compare\"></p>\n<p>ƒê·ªãnh d·∫°ng WebP ƒë√£ tr·ªü n√™n ng√†y c√†ng ph·ªï bi·∫øn k·ªÉ t·ª´ khi Google gi·ªõi thi·ªáu n√≥ v√†o nƒÉm 2010. ƒêi·ªÉm m·∫°nh l·ªõn nh·∫•t c·ªßa n√≥ n·∫±m ·ªü kh·∫£ nƒÉng t·∫°o k√≠ch th∆∞·ªõc t·ªáp nh·ªè h∆°n nhi·ªÅu trong khi v·∫´n duy tr√¨ ch·∫•t l∆∞·ª£ng h√¨nh ·∫£nh t∆∞∆°ng t·ª±.</p>\n<p>ƒê·ªãnh d·∫°ng Webp s·∫Ω gi√∫p b·∫°n gi·∫£m 26%  dung l∆∞·ª£ng so v·ªõi PNG. v√†  25 ‚Äì 34% so v·ªõi ƒë·ªãnh d·∫°ng JPEG, m√† v·∫´n v·∫´n gi·ªØ ƒë∆∞·ª£c ch·∫•t l∆∞·ª£ng hi·ªÉn th·ªã. ƒêi·ªÅu n√†y gi√∫p web gi·∫£m th·ªùi gian t·∫£i ·∫£nh, tƒÉng t·ªëc ƒë·ªô tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Ngu·ªìn t·ª´: <a href=\"https://bitsofco.de/why-and-how-to-use-webp-images-today/\">https://bitsofco.de/why-and-how-to-use-webp-images-today/</a> </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85985771-616f8700-ba15-11ea-9f7c-0b2161fa86f9.png\" alt=\"Compare\"></p></div></div>\n<p>Tuy nhi√™n v·ªõi ƒë·ªãnh d·∫°ng Webp th√¨ kh√¥ng ph·∫£i t·∫•t c·∫£ c√°c tr√¨nh duy·ªát ƒë·ªÅu h·ªó tr·ª£. Hi·ªán t·∫°i, WebP th·ª±c s·ª± ƒë∆∞·ª£c h·ªó tr·ª£ trong c√°c phi√™n b·∫£n m·ªõi nh·∫•t c·ªßa Google Chrome, Firefox, Edge, tr√¨nh duy·ªát Opera, Tr√¨nh duy·ªát Android v√† Samsung internet.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">WebP support table: <a href=\"https://bitsofco.de/why-and-how-to-use-webp-images-today/\">https://bitsofco.de/why-and-how-to-use-webp-images-today/</a> </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85986227-19049900-ba16-11ea-8707-5e09c467ba4f.png\" alt=\"Compare\"></p></div></div>\n<h2>Tri·ªÉn khai √Ω t∆∞·ªüng</h2>\n<p>·ªû browser, khi ng∆∞·ªùi d√πng upload ·∫£nh th√¨ web server s·∫Ω c√≥ nhi·ªám v·ª• gi√°n ti·∫øp nh·∫≠n h√¨nh ·∫£nh, x√°c th·ª±c v√† ƒë·∫©y ·∫£nh l√™n S3 ƒë·ªÉ l∆∞u tr·ªØ. Khi S3 nh·∫≠n th·∫•y r·∫±ng c√≥ ·∫£nh m·ªõi ƒë∆∞·ª£c ƒë·∫©y l√™n s·∫Ω g·ªçi (trigger) ƒë·∫øn lambda ƒë·ªÉ ti·∫øn h√†nh convert sang d·∫°ng webp. Sau khi convert ·∫£nh th√¨ s·∫Ω ƒë∆∞·ª£c l∆∞u t·∫°i th∆∞ m·ª•c m·ªõi m√† ta ch·ªâ ƒë·ªãnh (dƒ© nhi√™n ta s·∫Ω kh√¥ng override l·∫°i ·∫£nh g·ªëc m√† user ƒë·∫©y l√™n, m√† l√† t·∫°o ra 1 file ·∫£nh thumb v·ªõi ƒë·ªãnh d·∫°ng webp). Trong qu√° tr√¨nh  Lambda x·ª≠ l√Ω ta c√≥ th·ªÉ d√πng cloudWatch ƒë·ªÉ debug.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Diagram S3 Lambda </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85989062-30458580-ba1a-11ea-9a22-4dad722102d8.png\" alt=\"Diagram S3 Lambda\"></p></div></div>\n<p>V·∫≠y ƒë·ªÉ chuy·ªÉn ƒë·ªïi ·∫£nh sang ƒë·ªãnh d·∫°ng Webp th√¨ ch√∫ng ta c√≥ th·ªÉ d√πng <a href=\"https://imagemagick.org/index.php\">imageMagick</a> ho·∫∑c <a href=\"https://developers.google.com/speed/webp/docs/cwebp\">cwebp</a>.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-body\"><p><img src=\"https://miro.medium.com/max/500/1*_TeG6-eUitTR_l3SKpJ5Ow.jpeg\" alt=\"LEGENDARY\"></p></div></div>\n<h2>Th·ª±c hi·ªán</h2>\n<h3>1. ·ªû m√†n h√¨nh console Cloud AWS</h3>\n<p>Truy c·∫≠p IAM, ch·ªçn roles v√† t·∫°o full quy·ªÅn S3 v√† CloudWatch ƒë·ªÉ Lambda c√≥ th·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ S3 v√† ghi log v√†o cloudWatch. ·ªû ƒë√¢y ta ƒë·∫∑t t√™n l√† <code class=\"language-text\">full-s3-logs</code></p>\n<p><img src=\"https://i.imgur.com/Rew8ydu.png\"></p>\n<p>Chu·∫©n b·ªã 1 c·∫∑p <code class=\"language-text\">access_key_id</code> v√† <code class=\"language-text\">secret_key_id</code>. N·∫øu ch∆∞a c√≥ h√£y click v√†o <em>Username > My security Credentials > Access keys > Ti·∫øn h√†nh t·∫°o key</em> (N√™n download file csv v·ªÅ m√°y, v√¨ key sau khi t·∫°o ra s·∫Ω kh√¥ng th·ªÉ kh√¥i ph·ª•c l·∫°i n·∫øu m·∫•t). H√£y nh·ªõ b·∫£o m·∫≠t key n√†y, kh√¥ng ƒë∆∞·ª£c public.</p>\n<p>Truy c·∫≠p v√†o trang  <a href=\"https://serverlessrepo.aws.amazon.com/applications\">https://serverlessrepo.aws.amazon.com/applications</a> t√¨m libraries  <a href=\"https://serverlessrepo.aws.amazon.com/applications/arn:aws:serverlessrepo:us-east-1:145266761615:applications~image-magick-lambda-layer\">image-magick-lambda-layer</a>. V√† click n√∫t deploy ƒë·ªÉ c√†i ƒë·∫∑t th∆∞ vi·ªán <em>imagemagick</em> cho serverless.</p>\n<p><img src=\"https://i.imgur.com/9d8kx1C.png\"></p>\n<h3>2. ·ªû m√¥i tr∆∞·ªùng Local</h3>\n<p>C√†i ƒë·∫∑t  <a href=\"https://www.serverless.com/\">serverless framework</a>  b·∫±ng npm:  <code class=\"language-text\">npm i serverless</code></p>\n<p>Ch·∫°y l·ªánh:  <code class=\"language-text\">serverless create -t aws-ruby -p image-resizer&lt;:T√™n Project&gt;</code>  ƒë·ªÉ t·∫°o project serverless vi·∫øt b·∫±ng ng√¥n ng·ªØ ruby</p>\n<p>Ch·∫°y l·ªánh:  <code class=\"language-text\">bundle init</code>  ƒë·ªÉ t·∫°o ra Gemfile. ·ªû ƒë√¢y ta d√πng 2 gem <code class=\"language-text\">aws-sdk</code> v√† <code class=\"language-text\">minimagick</code></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># Gemfile</span>\nsource 'https<span class=\"token punctuation\">:</span>//rubygems.org'\n\ngit_source(<span class=\"token punctuation\">:</span>github) <span class=\"token punctuation\">{</span><span class=\"token punctuation\">|</span>repo_name<span class=\"token punctuation\">|</span> \"https<span class=\"token punctuation\">:</span>//github.com/<span class=\"token comment\">#{repo_name}\" }</span>\n\ngem 'aws<span class=\"token punctuation\">-</span>sdk<span class=\"token punctuation\">-</span>s3'<span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 1.30.0'</span>\ngem 'mini_magick'<span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 4.9.0'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>H√£y check version ruby tr∆∞·ªõc khi th·ª±c hi·ªán l·ªánh bundle. H√£y x√°c ƒë·ªãnh r·∫±ng serverless s·ª≠ d·ª•ng \u001dversion ruby n√†o th√¨ d∆∞·ªõi local l√∫c bundle ph·∫£i s·ª≠ d·ª•ng version ruby gi·ªëng nh∆∞ th·∫ø. ·ªû ƒë√¢y d√πng rvm n√™n ta c√≥ l·ªánh  <code class=\"language-text\">rvm use 2.7.0</code>  ƒë·ªÉ thi·∫øt l·∫≠p phi√™n b·∫£n ruby.</p>\n<p>Ch·∫°y l·ªánh:  <code class=\"language-text\">bundle install --path vendor/bundle</code> ƒë·ªÉ bundle v√†o th∆∞ m·ª•c d·ª± √°n</p>\n<p>C√≥ nhi·ªÅu c√°ch ƒë·ªÉ c√†i ƒë·∫∑t credential d∆∞·ªõi local  <a href=\"https://www.serverless.com/framework/docs/providers/aws/guide/credentials/\" title=\"H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t credential\">(Tham kh·∫£o th√™m)</a>. ·ªû ƒë√¢y ta d√πng c√°ch ƒë∆°n gi·∫£n nh·∫•t l√† export bi·∫øn tr·ª±c ti·∫øp t·∫°i 1 session tab terminal (n·∫øu t·∫Øt tab ƒëi th√¨ h·∫øt hi·ªáu l·ª±c). G√µ l·ªánh  <code class=\"language-text\">export AWS_SECRET_ACCESS_KEY=secret_keys</code>  v√†  <code class=\"language-text\">export AWS_ACCESS_KEY_ID=access_key</code>.</p>\n<p>Sau c√°c b∆∞·ªõc chu·∫©n b·ªã ·ªü tr√™n th√¨ trong project s·∫Ω g·ªìm c√°c file: <em>Gemfile, serverless.yml, handler.rb v√† th∆∞ m·ª•c vendor/bundle/ruby/2.7.0</em></p>\n<h3>Code</h3>\n<p><em>handler.rb:</em>  File n√†y s·∫Ω l√† endpoint ƒë·ªÉ lambda g·ªçi t·ªõi. N√≥ s·∫Ω c√≥ 2 params truy·ªÅn v√†o l√† event v√† context</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">load_path <span class=\"token operator\">=</span> <span class=\"token builtin\">Dir</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/opt/bundle/ruby/2.7.0/gems/**/lib\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token variable\">$LOAD_PATH</span><span class=\"token punctuation\">.</span>unshift<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>load_path<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">require</span> <span class=\"token string\">'converter'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ImageHandler</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span></span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">:</span><span class=\"token punctuation\">)</span>\n    event <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"Records\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>first\n    bucket <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"s3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"bucket\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span>\n    filename <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"s3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"object\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"key\"</span><span class=\"token punctuation\">]</span>\n\n    file <span class=\"token operator\">=</span> <span class=\"token constant\">Converter</span><span class=\"token punctuation\">.</span>from_s3<span class=\"token punctuation\">(</span>bucket<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n    file<span class=\"token punctuation\">.</span>convert2webp\n    file<span class=\"token punctuation\">.</span>upload_file<span class=\"token punctuation\">(</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string\">'BUCKET_DEST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>T·∫°o 1 file <em>converter.rb:</em> File n√†y d√πng ƒë·ªÉ \u001dl·∫•y image t·ª´ s3, ti·∫øn h√†nh convert v√† upload ng∆∞·ª£c l·∫°i l√™n s3.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string\">\"aws-sdk-s3\"</span>\n<span class=\"token keyword\">require</span> <span class=\"token string\">\"mini_magick\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Converter</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">from_s3</span></span><span class=\"token punctuation\">(</span>bucket_name<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n    puts <span class=\"token string\">'==###== Downloading image from S3'</span>\n    s3 <span class=\"token operator\">=</span> <span class=\"token constant\">Aws</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">S3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Resource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    object <span class=\"token operator\">=</span> s3<span class=\"token punctuation\">.</span>bucket<span class=\"token punctuation\">(</span>bucket_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n\n    tmp_filename <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>filename<span class=\"token delimiter tag\">}</span></span>\"</span>\n    object<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>response_target<span class=\"token punctuation\">:</span> tmp_filename<span class=\"token punctuation\">)</span>\n\n    puts  <span class=\"token string\">\"==###== Successfully downloaded\"</span>\n\n    <span class=\"token constant\">Converter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while downloading: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    extname <span class=\"token operator\">=</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>extname<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@filename</span> <span class=\"token operator\">=</span> filename\n    <span class=\"token variable\">@basename</span> <span class=\"token operator\">=</span> filename<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>extname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first\n    <span class=\"token variable\">@tmp_file</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>filename<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">convert2webp</span></span>\n    <span class=\"token variable\">@converted_filename</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@basename</span><span class=\"token delimiter tag\">}</span></span>.webp\"</span>\n    <span class=\"token variable\">@converted_tmp_file</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@converted_filename</span><span class=\"token delimiter tag\">}</span></span>\"</span>\n\n    puts <span class=\"token string\">\"==###== Converting the image <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@tmp_file</span><span class=\"token delimiter tag\">}</span></span> to <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@converted_tmp_file</span><span class=\"token delimiter tag\">}</span></span>\"</span>\n\n    <span class=\"token constant\">MiniMagick</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Tool</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Convert</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>convert<span class=\"token operator\">|</span>\n      convert <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span> <span class=\"token variable\">@tmp_file</span>\n      convert <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span> <span class=\"token variable\">@converted_tmp_file</span>\n    <span class=\"token keyword\">end</span>\n    puts  <span class=\"token string\">\"==###== Successfully converted\"</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while converting: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">upload_file</span></span><span class=\"token punctuation\">(</span>dest_bucket<span class=\"token punctuation\">)</span>\n    puts <span class=\"token string\">'==###== Uploading image to S3'</span>\n\n    s3 <span class=\"token operator\">=</span> <span class=\"token constant\">Aws</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">S3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Resource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    object <span class=\"token operator\">=</span> s3<span class=\"token punctuation\">.</span>bucket<span class=\"token punctuation\">(</span>dest_bucket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">(</span><span class=\"token variable\">@converted_filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>upload_file<span class=\"token punctuation\">(</span><span class=\"token variable\">@converted_tmp_file</span><span class=\"token punctuation\">)</span>\n    puts  <span class=\"token string\">\"==###== Successfully uploaded\"</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while uploading: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>serverless.yml:</em> File config cho framework</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp\n\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> your<span class=\"token punctuation\">-</span>images\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> ruby2.7\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>role/full<span class=\"token punctuation\">-</span>s3<span class=\"token punctuation\">-</span>logs\n\n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">handle_convert</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.ImageHandler.process\n    <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> GemsLambdaLayer<span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>lambda<span class=\"token punctuation\">:</span>us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>layer<span class=\"token punctuation\">:</span>image<span class=\"token punctuation\">-</span>magick<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">BUCKET_DEST</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n    <span class=\"token key atrule\">memorySize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> <span class=\"token comment\"># in MB</span>\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">900</span> <span class=\"token comment\"># in seconds</span>\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">s3</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.source<span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>ObjectCreated<span class=\"token punctuation\">:</span>*\n<span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> vendor/<span class=\"token important\">**</span>\n   <span class=\"token punctuation\">-</span> Gemfile\n   <span class=\"token punctuation\">-</span> Gemfile.lock\n\n<span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gems</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> vendor\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Project's vendor\n\n<span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ConvertImage</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>S3<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Bucket\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">BucketName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.dest<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Cu·ªëi c√πng th√¨ ch·∫°y l·ªánh  <code class=\"language-text\">serverless deploy</code>. Framework s·∫Ω ti·∫øn h√†nh t·∫°o cloudformation tr√™n AWS v√† Cloudformation s·∫Ω t·ª± ƒë·ªông build serverless lambda theo nh·ªØng g√¨ ta ƒë√£ c·∫•u h√¨nh trong file serverless.yml</p>\n<h2>Gi·∫£i th√≠ch</h2>\n<p>Trong n√†y ch·ªâ c√≥ file serverless.yml l√† c·∫ßn ƒë·ªÉ gi·∫£i th√≠ch t·ª´ng ƒëo·∫°n code, c√≤n file ruby th√¨ ch√∫ng ta ƒë·ªçc c·ªßng c√≥ th·ªÉ n·∫Øm ƒë∆∞·ª£c n·ªôi dung r·ªìi.</p>\n<p><strong>ƒêo·∫°n 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> your<span class=\"token punctuation\">-</span>images\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>D√πng ƒë·ªÉ t·∫°o bi·∫øn tham chi·∫øu cho b√™n d∆∞·ªõi s·ª≠ d·ª•ng. ·ªû ƒë√¢y ta c√≥ 2 tham chi·∫øu l√† source v√† dest. C√°ch g·ªçi th√¨ syntax: <code class=\"language-text\">${self.custom.bucket.source}</code> v√†  <code class=\"language-text\">${self:custom.bucket.dest}</code></p>\n<p><strong>ƒêo·∫°n 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> ruby2.7\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>role/full<span class=\"token punctuation\">-</span>s3<span class=\"token punctuation\">-</span>logs</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>name:</strong>  S·ª≠ d·ª•ng d·ªãch v·ª• AWS</p>\n<p><strong>runtime:</strong>  Ch·∫°y phi√™n b·∫£n ruby2.7</p>\n<p><strong>region:</strong>  Region ch·∫°y lambda</p>\n<p><strong>role:</strong>  Do tr∆∞·ªõc ƒë√≥ ta ƒë√£ t·∫°o role r·ªìi, n√™n ·ªü ƒë√¢y ta ch·ªâ c·∫ßn link ƒë·∫øn l√† ƒë∆∞·ª£c. C√≤n kh√¥ng th√¨ ta v·∫´n c√≥ th·ªÉ t·∫°o ·ªü trong n√†y. C√≥ th·ªÉ tham kh·∫£o th√™m t·∫°i trang ch·ªß serverless.</p>\n<p><strong>ƒêo·∫°n 3</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">handle_convert</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.ImageHandler.process\n    <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> GemsLambdaLayer<span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>lambda<span class=\"token punctuation\">:</span>us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>layer<span class=\"token punctuation\">:</span>image<span class=\"token punctuation\">-</span>magick<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">BUCKET_DEST</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n    <span class=\"token key atrule\">memorySize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> <span class=\"token comment\"># in MB</span>\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">900</span> <span class=\"token comment\"># in seconds</span>\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">s3</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.source<span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>ObjectCreated<span class=\"token punctuation\">:</span>*</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>functions:</strong>  ·ªû ƒë√¢y ta ch·ªâ ƒë·ªãnh nghƒ©a 1 function l√† <code class=\"language-text\">handle_convert</code>. Ngo√†i ra c·ªßng c√≥ th·ªÉ define nhi·ªÅu function h∆°n</p>\n<p><strong>handler:</strong>  S·∫Ω define endpoint ƒë·ªÉ lambda trigger  <code class=\"language-text\">handler(t√™n file).ImageHandler(t√™n class).process(t√™n method)</code></p>\n<p><strong>layers:</strong>  Ch√∫ng ta s·ª≠ d·ª•ng 2 l·ªõp layer ƒë·ªÉ ph·ª•c v·ª• cho vi·ªác convert, l·ªõp layer ƒë·∫ßu ti√™n c√≥ t√™n l√† GemsLambdaLayer (layer n√†y s·∫Ω ƒë·ªÅ c·∫≠p ·ªü ƒëo·∫°n 5). Layer n√†y ch∆∞a th∆∞ m·ª•c bundle. Function n√†y mu·ªën tham chi·∫øu ƒë·∫øn layer th√¨ s·ª≠ d·ª•ng syntax <code class=\"language-text\">{Ref: TenLayer&lt;Vi·∫øt theo ki·ªÉu CamelCase&gt;}</code></p>\n<p>Layer th·ª© 2 l√† 1 ƒë∆∞·ªùng link arn:aws. Do b∆∞·ªõc tr√™n ta c√≥ s·ª≠ d·ª•ng 1 layer c√≥ s·∫µn c·ªßa AWS l√† image-magick-lambda n√™n ta s·∫Ω pasted ƒë∆∞·ªùng link layer ƒë√≥ v√†o ƒë√¢y.</p>\n<p><strong>environment:</strong>  Khai b√°o t√™n bi·∫øn m√¥i tr∆∞·ªùng</p>\n<p><strong>memorySize:</strong>  Khai b√°o l∆∞·ª£ng Ram ƒë·ªÉ lambda x·ª≠ l√Ω</p>\n<p><strong>timeout:</strong>  Th·ªùi gian gi·ªõi h·∫°n x·ª≠ l√Ω. N·∫øu ta ƒë·ªÉ Ram qu√° √≠t ho·∫∑c timeout qu√° √≠t th√¨ lambda s·∫Ω kh√¥ng th·ª±c hi·ªán ƒë∆∞·ª£c. Nh∆∞ng ƒë·ªÉ nhi·ªÅu qu√° th√¨ l·∫°i t·ªën ph√≠ (b·ªüi v√¨ lambda s·∫Ω d·ª±a v√†o 2 ti√™u ch√≠ n√†y ƒë·ªÉ t√≠nh ti·ªÅn), cho n√™n h√£y c√¢n nh·∫Øc sao cho ph√π h·ª£p.</p>\n<p><strong>events:</strong>  ·ªû ƒë√¢y ta mu·ªën h∆∞·ªõng ƒë·∫øn l√† S3 v·ªõi bucket l√†  your-images. S·ª± ki·ªán khi c√≥ 1 object ƒë∆∞·ª£c t·∫°o th√¨ s·∫Ω trigger ƒë·∫øn lambda.</p>\n<p><strong>ƒêo·∫°n 4</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> vendor/<span class=\"token important\">**</span>\n   <span class=\"token punctuation\">-</span> Gemfile\n   <span class=\"token punctuation\">-</span> Gemfile.lock</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>M·ª•c ƒë√≠ch l√† ta kh√¥ng mu·ªën ƒë·∫©y c√°c file b√™n d∆∞·ªõi l√™n serverless.</p>\n<p><strong>ƒêo·∫°n 5</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gems</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> vendor\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Project's vendor</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>·ªû d∆∞·ªõi local khi ta bundle th√¨ s·∫Ω t·∫°o ra th∆∞ m·ª•c vendor. V·∫≠y ta s·∫Ω d√πng vendor n√†y ƒë·ªÉ l√†m 1 l·ªõp Layer. ·ªû ƒë√¢y m√¨nh ƒë·∫∑t t√™n layer l√†  <code class=\"language-text\">gems</code>  Cho n√™n khi reference th√¨ ta ph·∫£i vi·∫øt cho ƒë√∫ng syntax m√† framework y√™u c·∫ßu, t·ª©c l√† vi·∫øt d·∫°ng camelCase v·ªõi suffix l√†  <code class=\"language-text\">LambdaLayer</code>. Cho n√™n d·ªü ƒëo·∫°n 3 ta m·ªõi ghi l√† <code class=\"language-text\">{Ref: GemsLambdaLayer}</code></p>\n<p><strong>ƒêo·∫°n 6</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ConvertImage</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>S3<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Bucket\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">BucketName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.dest<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>D√πng ƒë·ªÉ t·∫°o 1 bucket ƒë√≠ch. ƒê·ªÉ sau khi x·ª≠ l√Ω convert xong th√¨ ta upload v√†o bucket n√†y</p>\n<h2>L·ªùi k·∫øt</h2>\n<p>Trong b√†i n√†y m√¨nh ƒë√£ h∆∞·ªõng d·∫´n v√† gi·∫£i th√≠ch chi ti·∫øt, hi v·ªçng khi th·ª±c hi·ªán s·∫Ω kh√¥ng ph√°t sinh l·ªói. N·∫øu c√≥ th√¨ ch√∫ng ta c√≥ th·ªÉ xem log trong Cloudwatch ƒë·ªÉ fix d·∫ßn th√¥i. Ch√∫c c√°c b·∫°n th√†nh c√¥ng.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Minh Tang Q. </div><div class=\"custom-block-body\"></div></div>","id":"484d6a95-13ea-5d51-8ff9-1f0a993668ab","frontmatter":{"title":"[Aws] Converting a image to WebP in AWS Lambda using Ruby","date":"29-06-2020","tags":["ruby","aws"]},"fields":{"slug":"/aws-su-dung-serverless-de-chuyen-doi-anh-sang-dinh-dang-webp-bang-ruby/","readingTime":{"text":"9 min read"}}}},{"node":{"excerpt":"V·∫•n ƒë·ªÅ ƒë·∫∑t ra B·∫°n ƒëang l√†m vi·ªác v·ªõi API c·ªßa Facebook, nh·ªØng plugin c·ªßa Facebook. Nh∆∞ng khi deploy code l√™n staging ƒë·ªÉ ki·ªÉm tra th√¨ l·∫°i nh·∫≠n ƒë∆∞·ª£c l·ªói l√† API c·ªßa Facebook ch·ªâ h·ªó tr·ª£ localhost v√† domain‚Ä¶","snippet":"<html><head></head><body><h3>V&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EB7;t ra</h3> <ul> <li>B&#x1EA1;n &#x111;ang l&#xE0;m vi&#x1EC7;c v&#x1EDB;i API c&#x1EE7;a Facebook, nh&#x1EEF;ng plugin c&#x1EE7;a Facebook. Nh&#x1B0;ng khi deploy code l&#xEA;n staging &#x111;&#x1EC3; ki&#x1EC3;m tra th&#xEC; l&#x1EA1;i nh&#x1EAD;n &#x111;&#x1B0;&#x1EE3;c l&#x1ED7;i l&#xE0; API c&#x1EE7;a Facebook ch&#x1EC9; h&#x1ED7; tr&#x1EE3; localhost v&#xE0; domain &#x111;&#x1B0;&#x1EE3;c c&#xE0;i &#x111;&#x1EB7;t HTTPS (SSL certificate). </li> <li>C&#xF3; nhi&#x1EC1;u lo&#x1EA1;i ch&#x1EE9;ng&#x2026;</li></ul></body></html>","html":"<h2>V·∫•n ƒë·ªÅ ƒë·∫∑t ra</h2>\n<ul>\n<li>B·∫°n ƒëang l√†m vi·ªác v·ªõi API c·ªßa Facebook, nh·ªØng plugin c·ªßa Facebook. Nh∆∞ng khi deploy code l√™n staging ƒë·ªÉ ki·ªÉm tra th√¨ l·∫°i nh·∫≠n ƒë∆∞·ª£c l·ªói l√† API c·ªßa Facebook ch·ªâ h·ªó tr·ª£ localhost v√† domain ƒë∆∞·ª£c c√†i ƒë·∫∑t HTTPS (SSL certificate). </li>\n<li>C√≥ nhi·ªÅu lo·∫°i ch·ª©ng ch·ªâ SSL cung c·∫•p c√°c m·ª©c ƒë·ªô b·∫£o m·∫≠t kh√°c nhau. Ch√∫ng ta c√≥ th·ªÉ mua m·ªôt ch·ª©ng ch·ªâ SSL t·∫°i Namecheap v·ªõi c√°c m·ª©c gi√° kh√°c nhau. Nh∆∞ng trong b√†i vi·∫øt n√†y s·∫Ω tr√¨nh b√†y m·ªôt c√°ch ƒë·ªÉ c√†i ƒë·∫∑t HTTPS cho domain m·ªôt c√°ch mi·ªÖn ph√≠.</li>\n</ul>\n<h2>Chu·∫©n b·ªã</h2>\n<ul>\n<li>1 server AWS EC2 Ubuntu 18.04 + Apache2</li>\n<li>\n<p>VPS EC2 ƒë√£ ƒë∆∞·ª£c m·ªü s·∫µn port 80 v√† port 443</p>\n<h2>C√°ch l√†m</h2>\n</li>\n</ul>\n<h4>1. C√†i ƒë·∫∑t Apache:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> apache2 -y\n<span class=\"token function\">sudo</span> a2enmod rewrite\n<span class=\"token function\">sudo</span> a2enmod ssl\n<span class=\"token function\">sudo</span> a2enmod headers\n<span class=\"token function\">sudo</span> systemctl restart apache2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>2. C√†i ƒë·∫∑t th∆∞ vi·ªán Certbot:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> software-properties-common\n<span class=\"token function\">sudo</span> apt-apt-repository ppa:certbot/certbot\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> certbot python-certbot-apache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>3. Cho ph√©p HTTPS th√¥ng qua t∆∞·ªùng l·ª≠a:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> ufw allow <span class=\"token string\">'Apache Full'</span>\n$ <span class=\"token function\">sudo</span> ufw delete allow <span class=\"token string\">'Apache'</span>\n$ <span class=\"token function\">sudo</span> ufw status</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>B·∫°n s·∫Ω nh·∫≠n ƒë∆∞∆°c k·∫øt qu·∫£ nh∆∞ b√™n d∆∞·ªõi:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Output\nStatus: active\nTo                         Action      From\n--                         ------      ----\nOpenSSH                    ALLOW       Anywhere                  \nApache Full                ALLOW       Anywhere                  \nOpenSSH (v6)               ALLOW       Anywhere (v6)             \nApache Full (v6)           ALLOW       Anywhere (v6)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>4. C√†i ƒë·∫∑t HTTPS cho domain:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot --apache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>B∆∞·ªõc n√†y s·∫Ω y√™u c·∫ßu b·∫°n nh·∫≠p email, email n√†y s·∫Ω ƒë∆∞·ª£c d√πng ƒë·ªÉ l√†m m·ªõi ch·ª©ng ch·ªâ SSL khi h·∫øt h·∫°n.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Saving debug log to /var/log/letsencrypt/letsencrypt.log\nPlugins selected: Authenticator apache, Installer apache\nEnter email address <span class=\"token punctuation\">(</span>used <span class=\"token keyword\">for</span> urgent renewal and security notices<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>Enter <span class=\"token string\">'c'</span> to\ncancel<span class=\"token punctuation\">)</span>: you@your_domain</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi nh·∫≠p Email, b·∫°n c·∫ßn x√°c nh·∫≠n tu√¢n th·ªß quy ƒë·ªãnh c·ªßa d·ªãch v·ª• Let‚Äôs Encrypt. Ch·ªçn A ƒë·ªÉ ti·∫øp t·ª•c.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nPlease <span class=\"token builtin class-name\">read</span> the Terms of Service at\nhttps://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must\nagree <span class=\"token keyword\">in</span> order to register with the ACME server at\nhttps://acme-v02.api.letsencrypt.org/directory\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">)</span>gree/<span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span>ancel: A</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Ti·∫øp theo, b·∫°n s·∫Ω ƒë∆∞·ª£c h·ªèi li·ªáu b·∫°n c√≥ mu·ªën chia s·∫ª email c·ªßa m√¨nh v·ªõi Electronic Frontier Foundation ƒë·ªÉ nh·∫≠n tin t·ª©c v√† th√¥ng tin kh√°c hay kh√¥ng. B·ªè qua n·∫øu b·∫°n th·∫•y kh√¥ng c·∫ßn thi·∫øt.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nWould you be willing to share your email address with the Electronic Frontier\nFoundation, a founding partner of the Let<span class=\"token string\">'s Encrypt project and the non-profit\norganization that develops Certbot? We'</span>d like to send you email about our work\nencrypting the web, EFF news, campaigns, and ways to support digital freedom.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">)</span>es/<span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">)</span>o: N</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>B∆∞·ªõc ti·∫øp theo b·∫°n s·∫Ω ƒë∆∞·ª£c ch·ªçn t√™n mi·ªÅn ƒë·ªÉ c√†i ƒë·∫∑t HTTPS. N·∫øu mu·ªën c√†i ƒë·∫∑t cho to√†n b·ªô th√¨ ƒë·ªÉ tr·ªëng v√† nh·∫•n Enter ƒë·ªÉ ti·∫øp t·ª•c.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Which names would you like to activate HTTPS for?\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token number\">1</span>: your_domain\n<span class=\"token number\">2</span>: www.your_domain\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nSelect the appropriate numbers separated by commas and/or spaces, or leave input\nblank to <span class=\"token keyword\">select</span> all options shown <span class=\"token punctuation\">(</span>Enter <span class=\"token string\">'c'</span> to cancel<span class=\"token punctuation\">)</span>:</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Ti·∫øp theo l√† qu√° tr√¨nh ki·ªÉm tra ƒëi·ªÅu ki·ªán t√™n mi·ªÅn c·ªßa b·∫°n c√≥ ƒë√°p ·ª©ng ƒëi·ªÅu ki·ªán ƒë·ªÉ c√†i ƒë·∫∑t HTTPS kh√¥ng? N·∫øu h·ª£p l·ªá s·∫Ω ti·∫øn h√†nh c√†i ƒë·∫∑t HTTPS cho t√™n mi·ªÅn b·∫°n v·ª´a ch·ªçn.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Obtaining a new certificate\nPerforming the following challenges:\nhttp-01 challenge <span class=\"token keyword\">for</span> your_domain\nhttp-01 challenge <span class=\"token keyword\">for</span> www.your_domain\nEnabled Apache rewrite module\nWaiting <span class=\"token keyword\">for</span> verification<span class=\"token punctuation\">..</span>.\nCleaning up challenges\nCreated an SSL vhost at /etc/apache2/sites-available/your_domain-le-ssl.conf\nEnabled Apache socache_shmcb module\nEnabled Apache ssl module\nDeploying Certificate to VirtualHost /etc/apache2/sites-available/your_domain-le-ssl.conf\nEnabling available site: /etc/apache2/sites-available/your_domain-le-ssl.conf\nDeploying Certificate to VirtualHost /etc/apache2/sites-available/your_domain-le-ssl.conf</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi c√†i ƒë·∫∑t k·∫øt th√∫c. B·∫°n s·∫Ω ƒë∆∞·ª£c h·ªèi l√† c√≥ mu·ªën chuy·ªÉn h∆∞·ªõng trang web sang HTTPS kh√¥ng? C·ª• th·ªÉ l√† n·∫øu ng∆∞·ªùi d√πng v√†o t√™n mi·ªÅn c·ª≠a b·∫°n v·ªõi k√™nh HTTP s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông chuy·ªÉn h∆∞·ªõng sang HTTPS.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token number\">1</span>: No redirect - Make no further changes to the webserver configuration.\n<span class=\"token number\">2</span>: Redirect - Make all requests redirect to secure HTTPS access. Choose this <span class=\"token keyword\">for</span>\nnew sites, or <span class=\"token keyword\">if</span> you<span class=\"token string\">'re confident your site works on HTTPS. You can undo this\nchange by editing your web server'</span>s configuration.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nSelect the appropriate number <span class=\"token punctuation\">[</span><span class=\"token number\">1</span>-2<span class=\"token punctuation\">]</span> <span class=\"token keyword\">then</span> <span class=\"token punctuation\">[</span>enter<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>press <span class=\"token string\">'c'</span> to cancel<span class=\"token punctuation\">)</span>: <span class=\"token number\">2</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi x√°c nh·∫≠n. Qu√° tr√¨nh c√†i ƒë·∫∑t HTTPS cho t√™n mi·ªÅn c·ªßa b·∫°n ƒë√£ ho√†n t·∫•t. B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c th√¥ng b√°o nh∆∞ b√™n d∆∞·ªõi.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nCongratulations<span class=\"token operator\">!</span> You have successfully enabled https://your_domain and https://www.your_domain\nYou should <span class=\"token builtin class-name\">test</span> your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d<span class=\"token operator\">=</span>your_domain\nhttps://www.ssllabs.com/ssltest/analyze.html?d<span class=\"token operator\">=</span>www.your_domain\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nIMPORTANT NOTES:\n-Congratulations<span class=\"token operator\">!</span> Your certificate and chain have been saved at:\n/etc/letsencrypt/live/your_domain/fullchain.pem\nYour key <span class=\"token function\">file</span> has been saved at:\n/etc/letsencrypt/live/your_domain/privkey.pem\nYour cert will expire on <span class=\"token number\">2020</span>-07-27. To obtain a new or tweaked\nversion of this certificate <span class=\"token keyword\">in</span> the future, simply run certbot again\nwith the <span class=\"token string\">\"certonly\"</span> option. To non-interactively renew *all* of\nyour certificates, run <span class=\"token string\">\"certbot renew\"</span>\n-Your account credentials have been saved <span class=\"token keyword\">in</span> your Certbot\nconfiguration directory at /etc/letsencrypt. You should <span class=\"token function\">make</span> a\nsecure backup of this folder now. This configuration directory will\nalso contain certificates and private keys obtained by Certbot so\nmaking regular backups of this folder is ideal.\n-If you like Certbot, please consider supporting our work by:\nDonating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\nDonating to EFF:                    https://eff.org/donate-le</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>T·ªïng k·∫øt</h2>\n<p>V·∫≠y l√† ch√∫ng ta c√†i ƒë·∫∑t ƒë∆∞·ª£c HTTPS cho t√™n mi·ªÅn c·ªßa m√¨nh r·ªìi. T·∫•t nhi√™n b·∫°n c·∫ßn ph·∫£i c√†i ƒë·∫∑t Vitua Host cho domain c·ªßa m√¨nh sau khi c√†i ƒë·∫∑t Apache ƒë·ªÉ Certbot c√≥ th·ªÉ t√¨m ƒë∆∞·ª£c. Ch·ª©ng ch·ªâ SSL n√†y c√≥ th·ªùi h·∫°n 90 ng√†y. Khi h·∫øt h·∫°n ch·ªâ c·∫ßn v√†o ch·∫°y l·∫°i t·ª´ ƒë·∫ßu b∆∞·ªõc 4 l√† c√≥ th·ªÉ ƒë∆∞∆°c. Ngo√†i ra ch√∫ng ta c√≥ th·ªÉ c√†i ƒë·∫∑t cho m√°y ch·ªß t·ª± l√†m m·ªõi ch·ª©ng ch·ªâ SSL khi h·∫øt h·∫°n. T√¥i s·∫Ω h∆∞·ªõng d·∫´n c·ª• th·ªÉ ·ªü b√†i vi·∫øt ti·∫øp theo. Mong b√†i vi·∫øt n√†y s·∫Ω gi√∫p ƒë∆∞·ª£c m·ªçi ng∆∞·ªùi.</p>\n<h2>Tham kh·∫£o</h2>\n<ul>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04\">https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04</a></li>\n<li><a href=\"https://vicloud.vn/community/cach-cai-dat-bo-linux-apache-mysql-php-lamp-tren-ubuntu-1804-540.html\">https://vicloud.vn/community/cach-cai-dat-bo-linux-apache-mysql-php-lamp-tren-ubuntu-1804-540.html</a></li>\n</ul>\n<p>[[author | Tr·∫ßn VƒÉn Tu·∫•n Anh ]]</p>","id":"8579fdd4-40bd-587f-aebf-a0d0c4a931cf","frontmatter":{"title":"[Aws] How to install HTTPS using Cerbot for Apache2 on AWS EC2","date":"10-01-2020","tags":["aws"]},"fields":{"slug":"/aws-cach-cai-dat-https-bang-cerbot-cho-apache2-tren-aws-ec2/","readingTime":{"text":"8 min read"}}}}]}},"pageContext":{"tag":"aws"}},"staticQueryHashes":["3963689063","63159454","81262063"]}