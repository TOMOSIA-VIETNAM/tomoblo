{"componentChunkName":"component---src-pages-archive-js","path":"/archive/","result":{"data":{"site":{"siteMetadata":{"title":"TOMOSIA VIETNAM","author":"「共に」「幸せ」「灯す」","labels":[{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"rails","tech":"Ruby on Rails","name":"M20.8848485 15.8107143v1.1635714h1.9818182c.4060606 0 1.1030303-.315 1.1272727-1.19571427v-.45c0-.75214286-.5818182-1.1957143-1.1272727-1.1957143h-.9878788v-.54h1.9575757v-1.17h-1.8787878c-.4848485 0-1.1333334.42428573-1.1333334 1.215v.405c0 .7907143.6424243 1.1957143 1.1333334 1.1957143 1.3636363.00642857-.3272728 0 .9333333 0v.56571428l-2.0060606.0064286zm-10.6181818-.28285716s1.060606-.09642857 1.060606-1.5492857c0-1.45285715-1.2848485-1.58785715-1.2848485-1.58785715H7.72727273v4.5835714H8.8909091v-1.1057143l1.0060606 1.1057142h1.7212121l-1.3515151-1.4464286zm-.44848488-.93857143H8.8909091v-1.0478571h.93333332s.26060608.1028572.26060608.5207143c0 .4178572-.26666668.5271429-.26666668.5271429zM14.2 12.4228572h-1.1818182c-.8424242 0-1.1272727.81-1.1272727 1.1957143v3.35571427h1.1818182v-.8035714h1.1090909v.8035714h1.1454545V13.6185715c0-.97714286-.8363636-1.1957143-1.1272727-1.1957143zm-.0181818 2.44928572h-1.1151515V13.76s0-.2507143.3696969-.2507143h.4060606c.3272728 0 .3333334.2507143.3333334.2507143v1.11214286h.0060606zm1.6848485-2.44928573h1.230303v4.5514285h-1.230303v-4.5514285zm2.9575757 3.375v-3.375H17.6v4.5514285h2.8787879v-1.1764285h-1.6545455zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76969696.16714284-3.93939393 1.87071427-5.2121212 4.12071427C.6 15.0714285.4242424 16.9742857.4242424 16.9742857zM10.4 9.0607143L10.4242424 8.63c-.0545454-.03214286-.2060606-.1092857-.58787876-.225l-.02424243.4242857c.2.0707143.3939394.14785716.5878788.2314286zM9.82424242 10.42357143l-.02424242.405c.2.00642857.4.03214286.6.07714286l.0242424-.3985715c-.2060606-.045-.4060606-.0707143-.59999998-.0835715zm-2.24242424-2.0057143h.06060606l-.12121212-.39214284c-.1878788 0-.38181818.0128571-.58181818.0385714l.1151515.3792857c.1757576-.0192857.35151517-.0257143.52727274-.0257143zm.2909091 2.3657143l.13939393.44357143c.1757576-.09.3515152-.16714286.5272728-.225l-.1333333-.42428572c-.2060606.06428572-.3818182.135-.5333333.2057143zM5.1212121 9.09285713l-.27272727-.44357142c-.15151515.0835715-.3090909.1735715-.47272727.2764286l.27878787.45c.15757576-.1028571.3090909-.1992857.46666667-.2828571zm1.24242424 2.89285716l.2909091.4628571c.1030303-.1607143.22424242-.3085715.35757575-.4564286L6.7393939 11.555c-.13939394.135-.26666667.28285714-.37575758.4307143zm-.87878788 2.07l.4909091.4114285C6 14.2164285 6.04242424 13.9657143 6.1030303 13.715l-.43636363-.36642857c-.07878788.23785714-.13333334.47571428-.1818182.70714286zM2.830303 11.0021428L2.4 10.60357142c-.15757576.1607143-.3090909.32142858-.44848485.48214287L2.41818182 11.51c.12727273-.17357143.26666666-.34714286.4121212-.50785714zM1 13.8757143l-.6969697-.27c-.1151515.27642856-.24242424.59785713-.3030303.77142856l.6969697.27C.77575758 14.42857143.9030303 14.11357143 1 13.8757143zm4.3939394 1.81285713c.0121212.34071428.04242424.61714286.07272727.81L6.1939394 16.775c-.05454546-.2507143-.10909092-.53357143-.14545455-.8357143l-.65454546-.25071427z","size":20,"color":"#CC0000"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"#777BB4"},{"tag":"laravel","tech":"Laravel","name":"M23.644 5.43c.009.032.014.065.014.099v5.15c0 .135-.073.26-.189.326l-4.323 2.49v4.934c0 .135-.072.258-.188.326L9.931 23.95c-.021.012-.043.02-.066.027-.008.002-.016.008-.024.01-.063.018-.13.018-.192 0-.011-.002-.02-.008-.029-.012-.021-.008-.043-.014-.063-.025L.534 18.755c-.117-.068-.189-.191-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.021.014-.032.006-.02.014-.04.023-.058.004-.013.015-.022.023-.033.012-.016.021-.031.033-.045.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034h.001L5.044.05c.115-.067.259-.067.375 0l4.512 2.597h.002c.015.01.027.021.041.033.012.009.025.018.037.027.013.014.021.029.033.045.008.011.02.021.025.033.011.019.017.038.024.058.003.011.011.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.005-.066.014-.098.003-.011.009-.021.013-.032.007-.02.014-.039.024-.059.007-.012.018-.021.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.028.014-.011.026-.023.041-.032h.001l4.513-2.598c.116-.067.259-.067.375 0l4.513 2.598c.016.01.027.021.042.031.012.01.025.018.036.028.013.014.022.029.034.044.008.012.019.021.024.033.011.02.018.039.024.059.006.011.012.022.015.033zm-.74 5.032V6.179l-1.578.908-2.182 1.256v4.283l3.76-2.164zm-4.511 7.75v-4.287l-2.146 1.225-6.127 3.498v4.326l8.273-4.762zM1.095 3.624v14.588l8.273 4.762v-4.326l-4.322-2.445-.002-.003h-.002c-.014-.01-.025-.021-.04-.031-.011-.01-.024-.018-.035-.027l-.001-.002c-.013-.012-.021-.025-.031-.039-.01-.012-.021-.023-.028-.037h-.002c-.008-.014-.013-.031-.02-.047-.006-.016-.014-.027-.018-.043-.004-.018-.006-.037-.008-.057-.002-.014-.006-.027-.006-.041V5.789l-2.18-1.257-1.578-.908zM5.231.81l-3.76 2.164 3.76 2.164 3.758-2.164L5.231.81zm1.956 13.505l2.182-1.256V3.624l-1.58.909-2.182 1.256v9.435l1.58-.909zM18.769 3.364l-3.76 2.164 3.76 2.163 3.759-2.164-3.759-2.163zm-.376 4.979l-2.182-1.256-1.579-.908v4.283l2.182 1.256 1.579.908V8.343zm-8.65 9.654l5.514-3.148 2.756-1.572-3.757-2.163-4.324 2.489-3.941 2.27 3.752 2.124z","size":20,"color":"#FF2D20"},{"tag":"cakephp","tech":"CakePHP","name":"M0 13.875v3.745c0 2.067 5.37 3.743 12 3.743V17.62c-6.63 0-12-1.68-12-3.743v-.002zm21.384 2.333L12 13.875v3.745l9.384 2.333C23.02 19.313 24 18.503 24 17.62v-3.745c0 .882-.98 1.692-2.616 2.333zM12 10.133v3.742c-6.627 0-12-1.677-12-3.744V6.38c0-2.064 5.37-3.743 12-3.743 6.625 0 12 1.68 12 3.744v3.75c0 .883-.98 1.69-2.616 2.334L12 10.13v.003z","size":20,"color":"#D33C43"},{"tag":"swift","tech":"Swift","name":"M21.984 16.348c.056-.112.056-.224.112-.336 1.346-5.272-1.851-11.44-7.347-14.693 2.412 3.253 3.365 7.122 2.524 10.599-.056.28-.168.617-.28.897a5.173 5.173 0 0 1-.45-.28S11.104 9.17 5.273 3.282c-.169-.168 3.14 4.71 6.841 8.58-1.738-1.01-6.673-4.542-9.758-7.403.337.617.842 1.234 1.346 1.851 2.58 3.309 5.945 7.346 9.983 10.43-2.86 1.74-6.842 1.851-10.88 0-1.01-.448-1.85-1.009-2.804-1.682 1.682 2.636 4.318 5.048 7.459 6.337 3.757 1.627 7.57 1.515 10.318 0h.057c.112-.056.224-.112.336-.224 1.346-.673 3.982-1.402 5.44 1.402.392.785 1.121-2.86-1.626-6.225z","size":20,"color":"#FA7343"},{"tag":"ios","tech":"iOS","name":"M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z","size":20,"color":"#403f3f"},{"tag":"kotlin","tech":"Kotlin","name":"M1.3 24l11.3-11.5L24 24zM0 0h12L0 12.5zM13.4 0L0 14v10l12-12L24 0z","size":20,"color":"#0095D5"},{"tag":"android","tech":"Android","name":"M24 19H0a13.6 13.6 0 0 1 2.21-6.07A11.2 11.2 0 0 1 5.87 9.4l.41-.23-2.02-3.41a.51.51 0 0 1 .17-.7.5.5 0 0 1 .69.18l2.08 3.5a12.62 12.62 0 0 1 4.84-.9 12.2 12.2 0 0 1 4.75.9l2.07-3.5a.5.5 0 0 1 .7-.17.51.51 0 0 1 .16.7L17.7 9.19l.5.28a11.38 11.38 0 0 1 3.63 3.62A14.48 14.48 0 0 1 24 19zm-7.5-4.48a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1zm-11 0a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1z","size":20,"color":"#3DDC84"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"#403f3f"},{"tag":"aws","tech":"AWS","name":"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z","size":20,"color":"#232F3E"},{"tag":"instagram","tech":"Instagram","name":"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z","size":20,"color":"#E4405F"},{"tag":"facebook","tech":"Facebook","name":"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z","size":20,"color":"#1877F2"},{"tag":"gitlab ci","tech":"Gitlab CI","name":"M4.844.904a1.007 1.007 0 00-.955.692l-2.53 7.783c0 .007-.005.012-.007.02L.07 13.335a1.437 1.437 0 00.522 1.607l11.072 8.045a.566.566 0 00.67-.004l11.074-8.04a1.436 1.436 0 00.522-1.61l-1.26-3.867a.547.547 0 00-.031-.104l-2.526-7.775a1.004 1.004 0 00-.957-.684.987.987 0 00-.949.69l-2.406 7.408H8.203l-2.41-7.408a.987.987 0 00-.943-.69h-.006zm-.006 1.42l2.174 6.678H2.674l2.164-6.678zm14.328 0l2.168 6.678h-4.342l2.174-6.678zm-10.594 7.81h6.862l-2.15 6.618L12 20.693 8.572 10.135zm-5.515.005h4.322l3.086 9.5-7.408-9.5zm13.568 0h4.326l-6.703 8.588-.709.914 2.959-9.108.127-.394zM2.1 10.762l6.978 8.947-7.818-5.682a.305.305 0 01-.112-.341l.952-2.924zm19.8 0l.952 2.922a.305.305 0 01-.11.341v.002l-7.82 5.68.025-.035 6.953-8.91Z","size":20,"color":"#FCA121"}]}},"allMarkdownRemark":{"totalCount":93,"edges":[{"node":{"excerpt":"Laravel http client allowing you to quickly make outgoing HTTP requests to communicate with other web applications. Bài viết này mình sẽ giới thiệu về http client phiên bản laravel 8, dùng để tạo HTTP…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Laravel http client allowing you to quickly make outgoing HTTP requests to communicate with other web applications.</p></div></div>\n<p>Bài viết này mình sẽ giới thiệu về http client phiên bản laravel 8, dùng để tạo HTTP request giúp các web application giao tiếp với nhau.</p>\n<h2>1. Http là gì?</h2>\n<p>HTTP (Hyper Text Transfer Protocol) là một giao thức truyền siêu văn bản (text, image, sound bar, video…) nằm ở tầng ứng dụng (Application layer) của tập giao thức TCP/IP, sử dụng để truyền nhận dữ liệu giữa các hệ thống phân tán thông qua internet, cụ thể giao thức hoạt động theo mô hình Client-Server bằng cách thực hiện các quá trình request-response giữa các hệ thống máy tính khác nhau. Giao thức HTTP quy định cấu trúc của các gói tin và cách thức truyền nhận dữ liệu giữa client và server thông qua môi trường internet. HTTP hiện là nền tảng truyền dẫn dữ liệu của ứng dụng duyệt web hiện nay.</p>\n<h2>2. Http client là gì</h2>\n<p>Khi ta truy cập một website và tương tác với các thành phần của website để gửi thông tin thì bản chất của việc đó là browser thay ta gửi đi các HTTP requests. Khi đó browser mà chúng ta đang dùng đóng vai trò một HTTP client.Bất kỳ phần mềm nào có thể gửi HTTP request và nhận được response từ HTTP server thì đều là HTTP client cả.</p>\n<h2>3. Create http client với PHP</h2>\n<p>Guzzle là một PHP HTTP client giúp gửi các HTTP request giao tiếp với các web application khác trở lên đơn giản.</p>\n<h2>4. Laravel HTTP client</h2>\n<p>Laravel http client sử dụng Guzzle http client giúp việc gửi http request để giao tiếp với các ứng dụng web khác đơn giản dễ dàng. Trước khi sử dụng cần chắc chắn rằng bạn đã cài Guzzle package như để 1 dependency của ứng dụng. Ở các phiên bản laravel mới mặc định package này đã được cài sẵn.</p>\n<h2>5. Tạo Http request với Laravel http client</h2>\n<p>Để tạo http request có thể sử dụng các phương thức, get, post, put, patch, delete được cung cấp sẵn bởi http facade</p>\n<h3>1. Http get request</h3>\n<p>Tạo get request đến trang <a href=\"http://example.com\">http://example.com</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Http</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Tạo get request kèm theo query string, giống như truy cập đến trang <a href=\"http://example.com/users?name=huunv&#x26;page=1\">http://example.com/users?name=huunv&#x26;page=1</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Huunv'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'page'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>2. Http post request</h3>\n<p>Sử dụng method post của facade http, dữ liệu gửi lên là một mảng truyền vào ở đối số thứ 2 của hàm, mặc định dữ liệu sẽ gửi theo application/json content type.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Http</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Steve'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Network Administrator'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo Form URL Encoded Requests, gửi dữ liệu application/x-www-form-urlencoded content type.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">asForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Sara'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Privacy Consultant'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>3. Http put, patch request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users/1'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Steve'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Network Administrator'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users/1'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Steve'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Network Administrator'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4. Http delete request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users/1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>5. Add header to http request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'X-First'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'foo'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'X-Second'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'bar'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Taylor'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>6. Create http request với authentication</h3>\n<p>Basic authentication...</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withBasicAuth</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'taylor@laravel.com'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'secret'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Digest authentication...</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withDigestAuth</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'taylor@laravel.com'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'secret'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Authentication with beaer token</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withToken</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'token'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>7. Set timeout http request</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>8. Guzzle Options</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">withOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'debug'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com/users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>9. Dumping Requests</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">return</span> Http<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">dd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'http://example.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>10. Http response</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// Convert response from http request to string</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Convert response from http request to array</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span><span class=\"token operator\">|</span>mixed<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Convert response from http request to collection</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> Illuminate\\<span class=\"token package\">Support<span class=\"token punctuation\">\\</span>Collection</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> int<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response = 200</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=200 and &lt; 300</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">successful</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=400</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">failed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=500</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">serverError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Status code of response >=400 and &lt; 500</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">clientError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> bool<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The header from the response</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$header</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The headers from the response</span>\n<span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Lời kết</h2>\n<p>Cảm ơn mọi người đã dành thời gian đọc bài viết của mình. Hi vọng bài viết giúp ích được cho mọi người khi làm các tính năng liên quan đến việc giao tiếp giữa các web application với nhau.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Huunv </div><div class=\"custom-block-body\"></div></div>","id":"902458ab-2e3d-56e5-931f-4d0689135c42","frontmatter":{"title":"Laravel Http Client","date":"07-04-2021","tags":["php","laravel"]},"fields":{"slug":"/laravel-http-client/"}}},{"node":{"excerpt":"Trong thời kỳ công nghiệp 4.0 như hiện nay, lập trình như một ngành HOT được mọi người nhắm đến. Mọi người đến với lập trình với nhiều mục đích khác nhau. Nhưng... với tôi \"Lập trình là thứ tôi đam mê…","html":"<p>Trong thời kỳ công nghiệp 4.0 như hiện nay, lập trình như một ngành HOT được mọi người nhắm đến. Mọi người đến với lập trình với nhiều mục đích khác nhau. Nhưng... với tôi \"Lập trình là thứ tôi đam mê nhất , nên tôi sẽ theo đuổi nó !\"</p>\n<h3>Giới thiệu</h3>\n<p>Để làm nghề lập trình, trước hết các bạn phải hiểu <strong>thế nào là lập trình viên</strong>. Lập trình viên là người <strong>thiết kế</strong>, <strong>xây dựng</strong> và <strong>bảo trì</strong> các <strong>chương trình máy tính</strong> (phần mềm). Bằng cách <strong>thao tác các đoạn mã</strong> (các ngôn ngữ) trên các công cụ lập trình, họ có thể tạo ra các <strong>chương trình mới</strong>, <strong>sửa lỗi</strong> hay <strong>nâng cấp chương trình</strong> đó để <strong>tăng tính hiệu quả của việc sử dụng máy tính</strong>.</p>\n<h3>Nội dung</h3>\n<h3>Tương lai của nghề lập trình</h3>\n<p>Chỉ trong vòng 3 năm trở lại đây, số lượng việc làm ngành IT gia tăng mạnh mẽ, nhu cầu tuyển dụng IT tăng dần đều qua các năm. Đặc biệt, năm 2020 tăng 45% so với cùng kỳ năm 2018, và dự báo đến năm 2021 thị trường tuyển dụng IT cần tới 350 000 lập trình viên tức tăng gấp 20 lần so với năm 2018. Trong khi đó, hiện tại chúng ta chỉ mới đáp ứng được khoảng 200 000 lập trình viên, tương đương thị trường đang thiếu khoảng 150 000 lập trình viên. Tuy nhiên nhiều chuyên gia nhận định rằng đây chỉ là sự thiếu hụt ngắn hạn.</p>\n<p><em>Mức lương theo cấp bậc</em></p>\n<p><img src=\"https://www.devpro.edu.vn/public/uploads/images/kinda%20useless/1/5.png\"></p>\n<p><em>Năm 2021, nên học lập trình ngôn ngữ nào?</em></p>\n<p><img src=\"https://collegelearners.com/wp-content/uploads/2021/02/best-programming-language-for-beginners.png\"></p>\n<p>Bên cạnh Javascript đang dẫn đầu xu thế công nghệ thế giới, Big Data, Internet of Things (IoT), Docker, điện toán đám mây và an ninh mạng cũng đang là các xu hướng mà các lập trình viên hướng tới. Những công nghệ này góp phần tối ưu hoá cuộc sống thời hiện tại của chúng ta.</p>\n<h3>Ai cũng có thể tiếp cận lập trình</h3>\n<p>Nghề lập trình có lẽ sẽ là tấm vé giúp bạn trở thành một công dân toàn cầu.</p>\n<p>Một điều dễ nhận thấy là công nghệ phần cứng thay đổi với tốc độ quá nhanh, trong khi đó, các công nghệ hay các ngôn ngữ lập trình gần như chẳng mấy thay đổi trong suốt nhiều năm.</p>\n<p>Gần đây, các công ty công nghệ lớn đều muốn xây dựng lợi thế của riêng mình bằng cách tự xây dựng ngôn ngữ mới. Nhưng đừng lo lắng, nếu bạn biết ngôn ngữ Ruby thì về cơ bản, bạn đã biết ngôn ngữ Scala hoặc Golang, hoặc nếu bạn biết C++ thì sẽ chẳng khó khăn gì để học ngôn ngữ Swift của Apple…</p>\n<p>Khoảng 10 năm trước, khi người ta còn nói rằng tiếng Anh là kỹ năng mang lại lợi thế lớn để hội nhập thì giờ nó trở thành một kỹ năng cơ bản nếu bạn muốn có một công việc tốt. Đến thời điểm hiện tại và trong tương lai gần, nếu bạn biết một vài ngôn ngữ lập trình thì đó sẽ là lợi thế cạnh tranh rất lớn để có thể được chấp nhận làm việc ở mọi nơi trên thế giới.</p>\n<p>Dù làm việc ở đâu, các lập trình viên cũng dùng ngôn ngữ lập trình như nhau nên ngôn ngữ lập trình trong tương lai có thể thay thế vai trò của ngoại ngữ như tiếng Anh để trở thành ngôn ngữ quốc tế.</p>\n<h3>Vậy lập trình có phải đích đến ?</h3>\n<p>Trước khi bước vào cuộc đời của một lập trình viên bạn nên tự đặt cho mình những câu hỏi:\nMột người cần học lập trình trong bao nhiêu lâu là đủ? Chỉ bốn năm đại học? Hay bốn năm đại học cộng 3 năm đi làm  (tức bảy năm)? Hay hai tháng sau khi hoàn thành khoá intern Ruby ở Tomosia? Hay đơn giản là 1 tháng (đọc xong “Ruby and Scala”)?  <em><strong>Với lập trình không bao giờ là \"đủ\"!</strong></em>  Bạn đến với lập trình vì kiếm tiền?, vì muốn cống hiến cho xã hội?, v.v\n1234567890JQK xì gì gì đó =)) Tuy nhiên, hãy đến với lập trình bằng sự đam mê vì  <strong>\"đam mê là chìa khóa thành công\"</strong></p>\n<h3>Đam mê là chìa khóa thành công</h3>\n<p><img src=\"https://viblo.asia/uploads/a21b9567-2e71-41db-822e-3c8c714baa00.jpg\"></p>\n<p>Tôi tâm đắc một câu nói rằng:\"  <em>…muốn theo đuổi ngành lập trình nói riêng và bất kỳ ngành nào nói chung, điều quan trọng nhất vẫn là đam mê. Không có đam mê mà chỉ làm việc vì cơm áo gạo tiền thì không “sướng”, và khi đã không “sướng” thì đến một lúc nào đó sẽ cảm thấy nhàm chán. Chỉ có theo đuổi đam mê thì công việc mới bền lâu được…</em>\"</p>\n<p>Bạn có biết:<em>\"Cơ hội thành công khi theo đuổi đam mê sẽ cao gấp 488 lần so với khi theo đuổi kiếm tiền\"</em></p>\n<p>Nghề lập trình không phải là một nghề dễ. Lập trình viên đòi hỏi sự sáng tạo và tư duy logic. Có thể nói, suy nghĩ logic là một điều quan trọng nhất trong lập trình. Bạn phải có đủ nhạy bén, linh hoạt và khả năng phán xét cao để giải quyết một vấn đề triệt để bằng phương pháp logic. Vì thế, nếu không có khả năng suy luận logic thì chắc chắn một điều nghề lập trình không thích hợp với bạn. Bạn sẽ cảm thấy nhàm chán và nhức đầu khi theo đuổi các đoạn code của chương trình, các vấn đề về debug (gỡ rối), về lỗi, về dấu chấm, dấu phẩy…</p>\n<p>Hãy chú ý, ngoài khả năng sáng tạo và logic, bạn cần có các kỹ năng làm việc theo nhóm và độc lập. Đây là yếu tố giúp bạn hoàn thành công việc nhanh hay chậm, khoa học hay không khoa học, hiệu quả hay thất bại. Thời gian rất quan trọng, bạn cần phải lập kế hoạch cụ thể, lên trình tự cho công việc của bạn để bạn hoàn thành dự án đúng quy định.</p>\n<p><strong>Tôi luôn chiêm nghiệm rằng:  <em>\"Kinh nghiệm và tư duy có thể trau dồi theo thời gian, nhưng thứ mà mỗi lập trình viên không thể thiếu đó chính là đam mê\"</em></strong>.</p>\n<h3>Lời kết</h3>\n<p>Lập trình không phải là nghề dễ. Nó sẽ khó với những ai không đam mê. Hãy bỏ qua các giới hạn về thời gian, ngôn ngữ,... Và đến với lập trình bằng cả nhiệt huyết của mình, cánh cửa thành công đang đến gần hơn với bạn rồi đó !!!  </p>\n<p>by Hà Tiến Đạt - Tomosia Việt Nam</p>","id":"30556501-90f8-5db1-b622-4865929b1c86","frontmatter":{"title":"Tôi đến với lập trình là vì đam mê","date":"01-04-2021","tags":["other"]},"fields":{"slug":"/toi-den-voi-lap-trinh-la-vi-dam-me/"}}},{"node":{"excerpt":"Trước tiên, Medium là gì, thì có lẽ tôi và các bạn cũng không lạ gì nữa. Đó là một kho thông tin đồ sộ. Nhưng dạo này, việc truy cập gặp nhiều khó khăn quá. Đã có rất nhiều phương pháp nhưng đều lỗi…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Trước tiên, Medium là gì, thì có lẽ tôi và các bạn cũng không lạ gì nữa. Đó là một kho thông tin đồ sộ. Nhưng dạo này, việc truy cập gặp nhiều khó khăn quá. Đã có rất nhiều phương pháp nhưng đều lỗi sau một thời gian.</p></div></div>\n<p><strong>Tôi phải đi tìm cách để có thể truy cập medium.com một cách bình thường thôi.</strong></p>\n<p>Khi truy cập một trang web bị chặn, tôi thường thay đổi DNS, sửa file host hoặc dùng một VPN.</p>\n<p>Với suy nghĩ simple như thế, tôi đã thay đổi DNS để có thể truy cập Medium, nhưng tình hình không khả quan một chút nào.</p>\n<p>Cách thứ 2, tôi thêm vào file host: <code class=\"language-text\">/etc/hosts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">162.159.152.4 medium.com</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Lần này thì tốt hơn chút, nhưng vẫn có lỗi: <code class=\"language-text\">Secure Connection Failed</code></p>\n<p>Thế thì chỉ còn 1 cách dùng VPN, và tất nhiên <a href=\"https://1.1.1.1\">https://1.1.1.1</a> là phương án đầu tiên tôi nghĩ ra.</p>\n<p>Nó hoạt động tốt. Ơ, thế tại sao lại có bài viết này ? Có cái này thôi cũng phải nói.</p>\n<p>Sau khi sử dụng phương án 1.1.1.1 trên, nó hoạt động. Nhưng với tôi, đó là tốt chứ chưa đủ.</p>\n<p>1.1.1.1 là 1 server nước ngoài, khi bật VPN lên thì mọi traffic của tôi đều phải đi qua nó. Nó dẫn đến một số website hoạt động không nhanh.</p>\n<p>Thế là, tôi nghĩ đến phương án, tìm một VPN có thể chỉ bật khi vào medium.com thôi. Còn các website khác, tôi vẫn truy cập trực tiếp. Ngay lúc này, tôi nghĩ đến tìm extension VPN cho Chrome mà không nghĩ đến phần mềm VPN.</p>\n<p>Có một số lý do:</p>\n<ul>\n<li>Dùng extension thì VPN chỉ tác động lên trình duyệt được cài đặt. Các traffic khác như Git, SVN vẫn hoạt động độc lập mà không bị theo dõi</li>\n<li>Chỉ có trình duyệt mới filter url một cách tốt nhất (cảm quan cá nhân của tôi).</li>\n</ul>\n<h3>Hướng dẫn vào medium.com qua VPN</h3>\n<p>Và sau một hồi lần mò trên <a href=\"https://chrome.google.com/webstore/category/extensions?hl=en\">Chrome Web Store</a> , tôi tìm được một thư viện đúng với yêu cầu của mình <a href=\"https://chrome.google.com/webstore/detail/free-vpn-for-chrome-vpn-p/majdfhpaihoncoakbjgbdhglocklcgno\">Free VPN for Chrome - VPN Proxy VeePN</a></p>\n<p>Dưới đây là hướng dẫn sử dụng, nó không đúng với tên bài viết, nên tôi chỉ nói qua đơn giản thôi</p>\n<ul>\n<li>Step 1: Truy cập vào medium.com và nhấn vào icon của extension</li>\n</ul>\n<img src=\"https://i.ibb.co/mFrWp7Q/Screen-Shot-2021-03-30-at-16-51-20.png\" alt=\"https://i.ibb.co/mFrWp7Q/Screen-Shot-2021-03-30-at-16-51-20.png\" style=\"zoom:33%;\">\n<ul>\n<li>Step 2: Nhấn vào nút khiên như hình trên.</li>\n<li>\n<p>Step 3: Nhấn vào <code class=\"language-text\">Add current site</code></p>\n<img src=\"https://i.ibb.co/nLddXZw/Screen-Shot-2021-03-30-at-16-59-26.png\" style=\"zoom:50%;\">\n</li>\n<li>\n<p>Step 4: Reload lại website và tận hưởng thành quả nhé</p>\n<p>Hãy để ý, chỉ có website bạn cho vào danh sách, VPN mới bật <img src=\"https://i.ibb.co/XxW7Yz4/Screen-Shot-2021-03-30-at-17-02-28.png\" style=\"zoom: 50%;\"></p>\n<p>Còn các website khác, VPN trong trạng thái tắt, không làm ảnh hưởng đến trải nghiệm sử dụng internet của các bạn</p>\n</li>\n</ul>","id":"071f468d-ad6d-5f08-98e9-511be40b14b9","frontmatter":{"title":"I'm trying to figure out how to access the blocked website, include Medium","date":"30-03-2021","tags":["medium"]},"fields":{"slug":"/toi-da-di-tim-cach-truy-cap-website-bi-chan-nhu-the-nao-trong-do-co-medium/"}}},{"node":{"excerpt":"Navigation Component là 1 libs xịn xò do chủ nhà Google cung cấp, giúp anh em lập trình viên dễ dàng navigate, pass-data, add animation ... giữa các màn. Tuy nhiên sau khi sử dụng, mình gặp phải 1 vài…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Navigation Component là 1 libs xịn xò do chủ nhà Google cung cấp, giúp anh em lập trình viên dễ dàng navigate, pass-data, add animation ... giữa các màn. Tuy nhiên sau khi sử dụng, mình gặp phải 1 vài Issues đối với lib này.</p></div></div>\n<p>Còn nếu bạn chưa biết về Navigation Component, có thể tham khảo docx của google: <a href=\"https://developer.android.com/guide/navigation\">https://developer.android.com/guide/navigation</a><br></br></p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://www.youtube.com/embed/Y0Cs2MQxyIs\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<h1>1. Lỗi khi người dùng nhấn nút chuyển màn quá nhanh:</h1>\n<p>Lỗi này xảy ra khi action có sử dụng animation. Ở đây mình ví dụ có 2 sự kiện click để navigate từ màn A sang màn B, và từ màn A sang màn C</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">val action1 <span class=\"token operator\">=</span> AFragmentDirections.actionAFragmentToBFragment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nfindNavController<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.navigate<span class=\"token punctuation\">(</span>action1<span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">.</span>\n<span class=\"token builtin class-name\">.</span>\nval action2 <span class=\"token operator\">=</span> AFragmentDirections.actionAFragmentToCFragment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nfindNavController<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.navigate<span class=\"token punctuation\">(</span>action2<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi người dùng click để <strong>navigate(1)</strong> từ A sang B và đồng thời tiếp tục click để <strong>navigate(2)</strong> sang C. Hệ thống sẽ nhận sự kiện navigate(1) trước, nhưng cũng đồng thời chạy sự kiện navigate(2). Khi đó hệ thống sẽ nhận destination ở B, nên sự kiện navigate(2) không thể xử lý và gây ra crash:\n<code class=\"language-text\">action_aFragment_to_bFragment cannot be found from the current destination Destination</code><br>\nĐể giải quyết ta có 2 solution như sau:</p>\n<h2>Chặn multi-click và chặn click khi đang navigate (khi animation đang chạy):</h2>\n<p>Thêm thuộc tính block multi touch vào <code class=\"language-text\">themes.xml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    &lt;style name=&quot;Theme.MyStyle&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\n        ...\n        &lt;!--Block multi touch--&gt;\n        &lt;item name=&quot;android:splitMotionEvents&quot;&gt;false&lt;/item&gt;\n        ...\n    &lt;/style&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo biến check <code class=\"language-text\">isNavigate</code> và xử lý không cho click khi <code class=\"language-text\">isNavigate == true</code> ở Activity:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    var isNavigating = false\n    override fun dispatchTouchEvent(ev: MotionEvent?): Boolean {\n        return if (isNavigating) {\n            true\n        } else {\n            super.dispatchTouchEvent(ev)\n        }\n    }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở Fragment, ta lắng nghe việc Animation có đang được thực hiện hay không, rồi thay đổi biến <code class=\"language-text\">isNavigate</code> ở Activity.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    override fun onCreateAnimation(transit: Int, enter: Boolean, nextAnim: Int): Animation? {\n        if (nextAnim == 0 || !enter) return super.onCreateAnimation(transit, enter, nextAnim)\n        else {\n            return AnimationUtils.loadAnimation(requireContext(), nextAnim).apply {\n                setAnimationListener(object : Animation.AnimationListener {\n                    override fun onAnimationStart(animation: Animation?) {\n                        (activity as MainActivity)?.isNavigating = true\n                    }\n                    override fun onAnimationEnd(animation: Animation?) {\n                        (activity as MainActivity).isNavigating = false\n                    }\n                    override fun onAnimationRepeat(animation: Animation?) {\n                    }\n                })\n            }\n        }\n    }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Tạo function safe-navigate:</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    fun Fragment.safeNavigateFromNavController(directions: NavDirections) {\n        val navController = findNavController()\n        val nav = navController.currentDestination\n        if (nav is FragmentNavigator.Destination &amp;&amp; javaClass.name == nav.className) {\n            navController.navigate(directions)\n        }\n    }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>Function này giúp ta check đc, destination có đang ở A hay không, nếu không thì sẽ không thực hiện việc navigate.\nTa thay thế <code class=\"language-text\">findNavController().navigate(action)</code> như sau:</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">val action1 = AFragmentDirections.actionAFragmentToBFragment()\nsafeNavigateFromNavController(action1)\n.\n.\nval action2 = AFragmentDirections.actionAFragmentToCFragment()\nsafeNavigateFromNavController(action2)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>2. Bất tiện trong việc tái sự dụng màn và action:</h2>\n<p>Khi sử dụng lại 1 dãy fragment của 1 <strong>nav_</strong> khác, bạn cần phải khai báo lại toàn bộ <strong>id</strong> của fragment, <strong>id</strong> của action, <strong>name and type</strong> của argument giống hệt với các thông số của <strong>nav_</strong> đó, thì mới có thể sử dụng navigate theo cách khai báo direction. Nếu không IDE sẽ báo error ngay khi compile vì nó chỉ nhận direction của 1 bên nav.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">var object = Object(1,&quot;Hello&quot;)\nval action = AFragmentDirections.actionAFragmentToCFragment(object)\nfindNavController().navigate(action)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể pass data theo cách khai báo bundle, làm điều này sẽ không cần thiết cần phải khai báo các thông số giống nhau nữa:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">var object = Object(1,&quot;Hello&quot;)\nval bundle = bundleOf(&quot;{name_of_argument}&quot; to object)\t\nfindNavController().navigate(R.action.{id_of_action})</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>Tuy nhiên khi khai báo qua bundle rất dễ bị sai sót trong việc viết code</p>\n</blockquote>\n<h2>3. Chỉ có thể replace hoặc add fragment:</h2>\n<p>Đúng vậy, khi sử dụng navigation component, bạn chỉ có thể chọn 1 trong 2 loại là <strong>add</strong> hoặc <strong>replace</strong> fragment.<br></br>\nĐiều này xảy ra khá nhiều khó khăn, ví dụ như khi <strong>replace</strong>, nếu cần <code class=\"language-text\">swipe to back</code> thì do màn sau đã thay thế màn trước, nên khi swipe, màn dưới đã destroy nên sẽ hiển thị trắng<br></br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a71dc6b0f3af0103a0f8ca1baab4750/47311/swipte_empty.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 205.71428571428575%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAApABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAIFAwEE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHJ2coHpGYbo7VY1EgvS4upoH//xAAeEAABAwQDAAAAAAAAAAAAAAACEBEyAAEDEhMUMf/aAAgBAQABBQLjChxBt18CBNkCe1kCbWQJsSD7X//EABYRAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAwEBPwEq/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AV//xAAdEAACAgEFAAAAAAAAAAAAAAABEABxICIxMjOR/9oACAEBAAY/AuIg0idQ8Qti2LYub4f/xAAcEAACAwADAQAAAAAAAAAAAAAAARARoSFBYZH/2gAIAQEAAT8hKdW6rQ4lhDs+cjCPJ/IwjyjCO60iP//aAAwDAQACAAMAAAAQsB8zwC//xAAWEQEBAQAAAAAAAAAAAAAAAAAQEQD/2gAIAQMBAT8Q1Ef/xAAWEQADAAAAAAAAAAAAAAAAAAAAESD/2gAIAQIBAT8Qln//xAAeEAEAAgIDAQEBAAAAAAAAAAABABEhMRBR8HFBYf/aAAgBAQABPxDDWH5Go0SVsuIcrXDzO4jLd4/jjzO5YtV2l2zx5ncAKBXHudwS0Cq1ijP5iOmafpNJ/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swipte_empty.jpg\"\n        title=\"swipte_empty.jpg\"\n        src=\"/static/0a71dc6b0f3af0103a0f8ca1baab4750/29d31/swipte_empty.jpg\"\n        srcset=\"/static/0a71dc6b0f3af0103a0f8ca1baab4750/e52aa/swipte_empty.jpg 175w,\n/static/0a71dc6b0f3af0103a0f8ca1baab4750/70ebb/swipte_empty.jpg 350w,\n/static/0a71dc6b0f3af0103a0f8ca1baab4750/29d31/swipte_empty.jpg 700w,\n/static/0a71dc6b0f3af0103a0f8ca1baab4750/9ecec/swipte_empty.jpg 1050w,\n/static/0a71dc6b0f3af0103a0f8ca1baab4750/47311/swipte_empty.jpg 1080w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> <br></br>\nCòn khi <strong>add</strong>, nếu add quá nhiều fragment, quá nhiều backstack sẽ dẫn đến việc sử dụng quá nhiều bộ nhớ, giảm hiệu năng app.</p>\n<h2>Kết luận:</h2>\n<p>Trong bài viết này, mình đã nêu các vấn đề của Navigation Architecture Component mà mình đã gặp phải và cách giải quyết.<br> <br>\nThanks for reading. Bye! See you later.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Hung Nguyen 1 </div><div class=\"custom-block-body\"></div></div>","id":"d5ff1595-0e07-51d9-9992-6499b600888c","frontmatter":{"title":"Issues about Navigation Component","date":"29-03-2021","tags":["android","kotlin"]},"fields":{"slug":"/issues-about-navigation-component/"}}},{"node":{"excerpt":"Sử dụng RecyclerView để tạo hiệu ứng paging, scale animation giống như ViewPager. Ngoài ra còn có thể tùy chỉnh nhiều thứ hơn... 1. Mục đích Tạo ra một ứng dụng đơn giản : Hiển thị ảnh dưới dạng page…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Sử dụng RecyclerView để tạo hiệu ứng paging, scale animation giống như ViewPager. Ngoài ra còn có thể tùy chỉnh nhiều thứ hơn...</p></div></div>\n<h2>1. Mục đích</h2>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 206.89655172413794%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/3Fu63e8GAbVLZwflgn\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/3Fu63e8GAbVLZwflgn\"></a></p> </div>\n<p>Tạo ra một ứng dụng đơn giản :</p>\n<ul>\n<li>Hiển thị ảnh dưới dạng page.</li>\n<li>Hoạt ảnh hấp dẫn : ảnh chính được phóng to và hiển thị ở trung tâm, ảnh phụ thu nhỏ</li>\n<li>\n<p>Ảnh được giữ nguyên tỷ lệ khung hình.\nThông thường trong trường hợp này chúng ta sẽ sử dụng ViewPager2. Nhưng sử dụng ViewPager2 thì bạn sẽ gặp rất nhiều vấn đề liên quan đến xử lý ảnh như : kích thước, tỷ lệ ảnh tùy biến,...\nVì thế chúng ta sẽ xử dụng RecyclerView vạn năng, dễ dàng tùy chỉnh để tạo ra một ví dụ đơn giản cho một ứng dụng trình chiếu ảnh.</p>\n<h2>2. Khởi tạo project</h2>\n<p>Ở project này mình sẽ sử dụng một RecyclerView với thuộc tính :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">android:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Item đổ vào RecyclerView mình để một ImageView với thuộc tính :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">android:layout_width=&quot;wrap_content&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:scaleType=&quot;fitXY&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Như vậy các ảnh hiển thị lên bây giỡ sẽ có khung hình tương ứng với kích thước của nó.\nTiếp theo chúng ta sẽ cần thêm nguồn ảnh để hiển thị. Mình sẽ xử dụng ảnh từ một nguồn free khá hay từ trang <a href=\"https://unsplash.com/developers\">https://unsplash.com/developers</a>, các bạn có thể tham khảo cách setup từ tài liệu có sẵn của họ. Sử dụng retrofit2 để lấy data và sau đó sử dụng Glide để load ảnh lên mình có kết quả như sau đây.</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 206.89655172413794%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/nAVO6aTjIgov1Ey9nd\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/nAVO6aTjIgov1Ey9nd\"></a></p> </div>\n</li>\n</ul>\n<p><a href=\"https://github.com/LamPham030921/PagerWithRecyclerView/tree/set_up_project\">Source Code Setup Project</a></p>\n<h2>3. Chỉnh sửa kích thước ảnh</h2>\n<p>Sửa lại thuộc tính chiều cao của RecyclerView thành giá trị cố định </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">android:layout_height=&quot;@dimen/recycler_height&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Trong onBindViewHolder của PhotoAdapter, ta thêm đoạn code</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">val recyclerHeight = \nit.context.resources.getDimensionPixelSize(R.dimen.recycler_height)\nval percent: Float = photo.width!!.toFloat() / photo.height!!.toFloat()\nit.layoutParams =  ConstraintLayout.LayoutParams((recyclerHeight * percent).toInt(), recyclerHeight)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Như vậy chúng ta đã thay đổi lại kích thước của các ảnh mà vẫn giữ nguyên tỷ lệ. Ngoài ra mình cũng sẽ thêm vào một callback để thực hiện load thêm ảnh mỗi khi người dùng cuộn đến gần cuối của list ảnh hiện tại </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">private fun initRecyclerViewItemListener() {\n        val layoutManager = binding.rvPhotos.layoutManager as LinearLayoutManager  \n        binding.rvPhotos.addOnScrollListener(object : RecyclerView.OnScrollListener() {  \n            override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {  \n                super.onScrolled(recyclerView, dx, dy)  \n                val lastPosition = layoutManager.findLastCompletelyVisibleItemPosition()  \n                if (lastPosition == listPhoto.size - 2) viewModel.loadMoreImage()  \n            }  \n        })\n       }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Và kết quả....</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 206.89655172413794%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/iLcllIzqpGuRDKwFHw\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/iLcllIzqpGuRDKwFHw\"></a></p> </div>\n<p><a href=\"https://github.com/LamPham030921/PagerWithRecyclerView/tree/fix_photo_size\">Source Code Fix Image Size</a></p>\n<h2>4. Hiệu ứng phân trang</h2>\n<p>Hiện tại RecyclerView đang được cuộn một cách tự do nhưng chúng ta cần phải hiển thị ảnh đang được chọn một cách nổi bật ở trung tâm. Thật may là RecyclerView đã hỗ trờ chúng ta việc phân trang bằng cách sử dụng <code class=\"language-text\">SnapHelpers</code>.Chỉ với một  dòng code đơn giản : <code class=\"language-text\">PagerSnapHelper().attachToRecyclerView(binding.rvPhotos)</code>\nNhư vậy chúng ta đã có khả năng phân trang cũng như hiển thị ảnh hiện tại ở chính giữa như hiệu ứng mà ViewPager mang lại.\nTiếp đến chúng ta sẽ custom thêm<code class=\"language-text\">ProminentLayoutManager</code> kế thừa từ <code class=\"language-text\">LinearLayoutManager</code> để tạo hiệu ứng cho RecyclerView.\nChi tiết bạn có thể xem trong <code class=\"language-text\">PhotosAdapter</code> . Trong đó quan trọng nhất là thuộc tính <code class=\"language-text\">scaleDownBy</code>, thuộc tính này thể hiện cho độ chênh lệch giữa item được làm nổi bật và các item phụ ( Được tính : item phụ sẽ bằng 1 - <code class=\"language-text\">scaleDownBy</code> * 100%).\nMình sẽ để chênh lệch là 30 % : <code class=\"language-text\">private val scaleDownBy: Float = 0.3f</code></p>\n<p>Thành quả thu được ...</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 206.89655172413794%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/kzLXEKad2mzOzvgrpY\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/kzLXEKad2mzOzvgrpY\"></a></p> <p><a href=\"https://github.com/LamPham030921/PagerWithRecyclerView/tree/add_paging\">Soucre Code Add Paging </a></p> </div>\n<h2>5. Hoàn thiện</h2>\n<p>Một lỗi nhỏ gặp phải khi thực hiện hiệu ứng phóng to - thu nhỏ là khoảng trắng chúng ta đặt để phân chia các item nhỏ cũng sẽ bị thay đổi theo.\nChúng ta sẽ xử lý bằng cách tính toán đoạn khoảng trắng bị phóng to ra của item chính giữa <code class=\"language-text\">translationXFromScale</code>. Sau đó thêm nó vào cho item phụ bị thu nhỏ .\nCuối cùng chúng ta thêm một callback để lắng nghe khi RecyclerView ngừng cuộn thì chúng ta sẽ đặt background là hình ảnh đang ở trung tâm của RecyclerView.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">override fun onScrollStateChanged(recyclerView: RecyclerView, newState: Int) {  \n        super.onScrollStateChanged(recyclerView, newState)  \n        if (newState == RecyclerView.SCROLL_STATE_IDLE) {  \n            val firstPosition = layoutManager.findFirstCompletelyVisibleItemPosition()  \n            Glide.with(context!!).load(listPhoto[firstPosition].urls?.regular)  \n                .into(binding.ivBackground)  \n        }  \n    }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Thành quả cuối cùng mà chúng ta thu được.</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 206.89655172413794%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/3Fu63e8GAbVLZwflgn\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/3Fu63e8GAbVLZwflgn\"></a></p> <p><a href=\"https://github.com/LamPham030921/PagerWithRecyclerView/tree/fix_scale_space\">Source Code Final Version</a></p> </div>\n<h2>6. Tổng Kết</h2>\n<p>Qua bài viết mình đã giới thiệu qua cho mọi người một phương pháp để tạo ra một hiệu ứng khá thú vị và rất dễ chỉnh sửa. Mong nhận được sự ủng hộ cũng như nhận xét của mọi người.\nHẹn gặp lại mọi người ở các bài viết sau.\nLink bài viết gốc : <a href=\"https://medium0.com/m/global-identity?redirectUrl=https%3A%2F%2Fproandroiddev.com%2Fpaging-image-gallery-with-recyclerview-f059d035b7e7\">https://medium0.com/m/global-identity?redirectUrl=https%3A%2F%2Fproandroiddev.com%2Fpaging-image-gallery-with-recyclerview-f059d035b7e7</a></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Lam Pham </div><div class=\"custom-block-body\"></div></div>","id":"57bfa062-ae24-50df-a391-d4fb49e587e2","frontmatter":{"title":"Paging Image with RecyclerView","date":"29-03-2021","tags":["kotlin","android"]},"fields":{"slug":"/paging-image-with-recyclerview/"}}},{"node":{"excerpt":"Laravel Mix là một công cụ để biên dịch và tối ưu hóa nội dung trong dự án Laravel. Nó tương tự như một công cụ xây dựng như gulp, Grunt,... Với những dự án nhỏ thì có vẻ bạn cảm thấy không có gì khác…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Laravel Mix là một công cụ để biên dịch và tối ưu hóa nội dung trong dự án Laravel. Nó tương tự như một công cụ xây dựng như gulp, Grunt,... Với những dự án nhỏ thì có vẻ bạn cảm thấy không có gì khác biệt lắm, nhưng với những dự án lớn thì điều này thực sự cần thiết, bạn sẽ thấy rõ được sự khác biệt khi chúng ta tối ưu nó. Việc tối ưu này sẽ giúp chúng ta giảm kích thước lưu trữ và tối ưu băng thông. Việc làm này sẽ giúp trang web của chúng ta tải nhanh hơn, mang tới người dùng có trải nghiệm tốt hơn. Laravel Mix được xây dựng dành riêng cho Laravel nhưng cũng có thể được sử dụng bên ngoài như một gói npm.</p></div></div>\n<p>Nói ngắn gọn: Laravel Mix quản lý tất cả tài nguyên (assets) như img, css, js trong dự án của bạn, đồng thời nó dựa trên base là webpack build tất cả các file css, js pre-processors như SCSS, SASS thành css, chuyển ES6 thành ES5 (trình duyệt không hiểu cú pháp ES6).</p>\n<h2>I. Cài đặt Laravel Mix</h2>\n<h3>Với Laravel</h3>\n<p>Nếu bạn đang sử dụng Laravel 5.4 trở về sau, thì mix đã được cài đặt. Tất cả những gì bạn phải làm là chạy <code class=\"language-text\">npm install</code>.</p>\n<h3>Với các dự án độc lập</h3>\n<p>Từ gốc ứng dụng của bạn, hãy chạy các commands sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init -y\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> laravel-mix --save-dev\n<span class=\"token function\">cp</span> node_modules/laravel-mix/setup/webpack.mix.js ./</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Trong file <code class=\"language-text\">package.json</code> hãy thêm đoạn sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run development\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"development\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=development node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run development -- --watch\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"hot\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=development node_modules/webpack-dev-server/bin/webpack-dev-server.js --inline --hot --config=node_modules/laravel-mix/setup/webpack.config.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run production\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"production\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=production node_modules/webpack/bin/webpack.js --no-progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>II. Configure Laravel Mix</h2>\n<p>Chúng ta có thể cấu hình và gọi các phương thức khác nhau để biên dịch các tệp CSS, JS và đưa vào một thư mục public. Các file được tạo ra bao gồm các file đã cấu hình bên trong tệp <code class=\"language-text\">webpack.mix.js</code>. Tệp tin <code class=\"language-text\">webpack.mix.js</code> sẽ nằm trong thư mục gốc của dự án Laravel. Hãy coi tệp này là cơ sở chính của bạn cho tất cả cấu hình front-end.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mix <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'laravel-mix'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">js</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/js/app.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/sass/app.scss'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nó đã được preconfigured để compile 1 file ở resources/js/app.js vào file public/js và resources/sass/app.scss vào public/css.<br>\nCó rất nhiều phương thức Mix khác và bạn có thể thấy tất cả các methods đó trong file default webpack.mix.js.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// Full API</span>\n<span class=\"token comment\">// mix.js(src, output);</span>\n<span class=\"token comment\">// mix.react(src, output); &lt;-- Identical to mix.js(), but registers React Babel compilation.</span>\n<span class=\"token comment\">// mix.preact(src, output); &lt;-- Identical to mix.js(), but registers Preact compilation.</span>\n<span class=\"token comment\">// mix.coffee(src, output); &lt;-- Identical to mix.js(), but registers CoffeeScript compilation.</span>\n<span class=\"token comment\">// mix.ts(src, output); &lt;-- TypeScript support. Requires tsconfig.json to exist in the same folder as webpack.mix.js</span>\n<span class=\"token comment\">// mix.extract(vendorLibs);</span>\n<span class=\"token comment\">// mix.sass(src, output);</span>\n<span class=\"token comment\">// mix.less(src, output);</span>\n<span class=\"token comment\">// mix.stylus(src, output);</span>\n<span class=\"token comment\">// mix.postCss(src, output, [require('postcss-some-plugin')()]);</span>\n<span class=\"token comment\">// mix.browserSync('my-site.test');</span>\n<span class=\"token comment\">// mix.combine(files, destination);</span>\n<span class=\"token comment\">// mix.babel(files, destination); &lt;-- Identical to mix.combine(), but also includes Babel compilation.</span>\n<span class=\"token comment\">// mix.copy(from, to);</span>\n<span class=\"token comment\">// mix.copyDirectory(fromDir, toDir);</span>\n<span class=\"token comment\">// mix.minify(file);</span>\n<span class=\"token comment\">// mix.sourceMaps(); // Enable sourcemaps</span>\n<span class=\"token comment\">// mix.version(); // Enable versioning.</span>\n<span class=\"token comment\">// mix.disableNotifications();</span>\n<span class=\"token comment\">// mix.setPublicPath('path/to/public');</span>\n<span class=\"token comment\">// mix.setResourceRoot('prefix/for/resource/locators');</span>\n<span class=\"token comment\">// mix.autoload({}); &lt;-- Will be passed to Webpack's ProvidePlugin.</span>\n<span class=\"token comment\">// mix.webpackConfig({}); &lt;-- Override webpack.config.js, without editing the file directly.</span>\n<span class=\"token comment\">// mix.babelConfig({}); &lt;-- Merge extra Babel configuration (plugins, etc.) with Mix's default.</span>\n<span class=\"token comment\">// mix.then(function () {}) &lt;-- Will be triggered each time Webpack finishes building.</span>\n<span class=\"token comment\">// mix.override(function (webpackConfig) {}) &lt;-- Will be triggered once the webpack config object has been fully generated by Mix.</span>\n<span class=\"token comment\">// mix.dump(); &lt;-- Dump the generated webpack config object to the console.</span>\n<span class=\"token comment\">// mix.extend(name, handler) &lt;-- Extend Mix's API with your own components.</span>\n<span class=\"token comment\">// mix.options({</span>\n<span class=\"token comment\">//   extractVueStyles: false, // Extract .vue component styling to file, rather than inline.</span>\n<span class=\"token comment\">//   globalVueStyles: file, // Variables file to be imported in every component.</span>\n<span class=\"token comment\">//   processCssUrls: true, // Process/optimize relative stylesheet url()'s. Set to false, if you don't want them touched.</span>\n<span class=\"token comment\">//   purifyCss: false, // Remove unused CSS selectors.</span>\n<span class=\"token comment\">//   terser: {}, // Terser-specific options. https://github.com/webpack-contrib/terser-webpack-plugin#options</span>\n<span class=\"token comment\">//   postCss: [] // Post-CSS options: https://github.com/postcss/postcss/blob/master/docs/plugins.md</span>\n<span class=\"token comment\">// });</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với các phương thức này, bạn có thể gói gọn nhiều nhất có thể và không cần phải lo lắng về webpack build căn bản.</p>\n<h3>Một số phương thức hay được sử dụng</h3>\n<p>Laravel có các phương thức như <code class=\"language-text\">less()</code>, <code class=\"language-text\">sass()</code>, <code class=\"language-text\">stylus()</code> để hỗ trợ compile các css pre-prosessor ra các file css mà trình duyệt có thể hiểu được. Cú pháp thực hiện như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">less</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/style.less'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">sass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/style.less'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">stylus</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/style.less'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để compile các file css thông thường thành 1 file ta dùng phương thức <code class=\"language-text\">styles()</code>, và tương tự với js ta dùng <code class=\"language-text\">scripts()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">styles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'resources/assets/css/bootstrap-datepicker.css'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'resources/assets/css/jquery.timepicker.min.css'</span>\n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/css/datetimepicker.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">scripts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n     <span class=\"token string\">'resources/assets/js/bootstrap-datepicker.js'</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">'resources/assets/js/jquery.timepicker.min.js'</span>\n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js/datetimepicker.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc chỉ đơn giản là <code class=\"language-text\">copyDirectory()</code> (copy thư mục) hay <code class=\"language-text\">copy()</code> (copy file):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">copyDirectory</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/admin'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets/admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmix<span class=\"token punctuation\">.</span><span class=\"token function\">copy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/admin.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/assets/admin.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Đánh dấu phiên bản đầu ra:<br>\nTính năng này khá hay. Thông thường các trình duyệt sẽ cache các file css, js trong một khoảng thời gian. Để khắc phục điều này ta sẽ dùng phương thức <code class=\"language-text\">version()</code>. Phương thức này sẽ ép trình duyệt xóa cache và tải các file với phiên bản mới nhất. Phương thức này sẽ thêm một mã hash tại thời điểm chạy.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">mix<span class=\"token punctuation\">.</span><span class=\"token function\">js</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resources/assets/js/app.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'public/js'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">version</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Để biết kết quả sau khi sử dụng phương thức <code class=\"language-text\">version()</code> bạn hãy tìm đến file <code class=\"language-text\">mix-manifest.json</code> trong thư mục public. Nó sẽ trông như thế này.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token string\">\"/static/js/app.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/static/js/app.js?id=8b71863dc9a7570ebc77\"</span><span class=\"token punctuation\">,</span> \n<span class=\"token string\">\"/static/css/app.css\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/static/css/app.css?id=b8a621a46db684d19bc4\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Khi sử dụng phương thức <code class=\"language-text\">version()</code> bạn cần lấy được version của laravel mix hiện tại. Laravel hỗ trợ việc này, đơn giản bạn chỉ cần gọi phương thức <code class=\"language-text\">mix()</code> trong view của mình.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{{ mix('/css/app.css') }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>III. Compiling</h2>\n<p>Sau khi configure những file cần mix trong ứng dụng của bạn, có rất nhiều commands mà chúng ta có thể chạy để có thể build file này.\nCũng giống như composer sử dụng file composer.json để quản lý các package, npm sử dụng file package để quản lý các các thư viện được sử dụng trong dự án. Một số commands cơ bản để compiling bạn có thể thấy chúng trong file package.json đã được đề cập trong phần cài đặt laravel mix.</p>\n<ul>\n<li><code class=\"language-text\">npm run dev</code> Câu lệnh này sẽ thực thi mix các file một lần.</li>\n<li><code class=\"language-text\">npm run watch</code> Câu lệnh này sẽ thực thi mix các file hiện tại và theo dõi các file cần mix (là những file trong thư mục webpack.mix.js) khi có sự thay đổi thì nó sẽ mix cho chúng ta luôn. Cái này chúng ta rất hay sử dụng trong dự án.</li>\n<li><code class=\"language-text\">npm run hot</code> Câu lệnh này thực thi tất cả các tác vụ mix nhưng vẫn active và theo dõi sự thay đổi các tài nguyên, nếu có sự thay đổi, nó thực hiện cập nhật chỉ các module có sự thay đổi, sau đó nó báo cáo với ứng dụng về sự thay đổi và cập nhật mã trong trình duyệt mà không có tải lại tài nguyên.</li>\n<li><code class=\"language-text\">npm run prod</code> Thực thi tất cả các tác vụ Mix và tối ưu (minify) các file kết quả đầu ra, khi đó bạn có thể sử dụng các kết quả để triển khai ứng dụng trên máy chủ.</li>\n</ul>\n<p>Đây là kết quả sau khi sử dung <code class=\"language-text\">npm run prod</code> trong dự án của mình.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 695px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49ac074436f05eeb4a740d86c2db28c1/83b75/laravel-mix.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABB0lEQVQY00WQWXLEIAxEfZqUAbPaCONlMl+5/406jTyVfHQ1CJBeM9WfL/jsKIslUsk8TrlodG+MgbXuI/vnoz7Ps7pzT21aPB8v/2pNkFLk2kFkw7qurDU+sB859RCC1vd91zuj2TibUrKo1bJoIXQRj5wWbGtAbwnej31GYIooVpMUUufk2axrw967DlBCqQbnbdAP+mWwHzNKcTj2iOuIeimGhCQO67dB5NC2GazF47peOM8T7/dbKUf0yS8P2aBs8qwj/69uJCDtiBdjQuCQ1Bi18KwYTSHSKFHKUor+5zSm7d3gIN1xck1lPhpx7zNrwxTzQ/h6CGX9EN4vUl646SN2rRW/45+71GGLaLoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"laravel-mix.png\"\n        title=\"laravel-mix.png\"\n        src=\"/static/49ac074436f05eeb4a740d86c2db28c1/83b75/laravel-mix.png\"\n        srcset=\"/static/49ac074436f05eeb4a740d86c2db28c1/4edbd/laravel-mix.png 175w,\n/static/49ac074436f05eeb4a740d86c2db28c1/13ae7/laravel-mix.png 350w,\n/static/49ac074436f05eeb4a740d86c2db28c1/83b75/laravel-mix.png 695w\"\n        sizes=\"(max-width: 695px) 100vw, 695px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>IV. Kết luận</h2>\n<p>Trong bài viết này, chúng ta đã tìm hiểu cách làm việc với Laravel Mix trong các ứng dụng để giúp cho việc biên dịch css, js,.. trở nên dễ dàng. Bài viết này chỉ là phần giới thiệu cơ bản, để tìm hiểu thêm về Laravel Mix bạn hãy truy cập <a href=\"https://laravel.com/docs/8.x/mix\">trang tài liệu</a> chính thức của Laravel hoặc truy cập <a href=\"https://laravel-mix.com/docs/3.0/installation\">trang web</a> Laravel Mix.<br>\nHy vọng sau bài viết này, mọi người có thể áp dụng được Laravel Mix vào các dự án của mình. Mong nhận được nhiều đóng góp từ mọi người để các bài viết sau có thể hoàn thiện hơn ạ.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Phu Thai </div><div class=\"custom-block-body\"></div></div>","id":"ff25fe25-6507-5327-a939-18a5115d054d","frontmatter":{"title":"How to use Laravel Mix for compiling assets","date":"21-03-2021","tags":["php","laravel"]},"fields":{"slug":"/how-to-use-laravel-mix-for-compiling-assets/"}}},{"node":{"excerpt":"LocalStorage, SessionStorage và cookie là ba cách lưu trữ dữ liệu khác nhau trong trình duyệt. 1. localStorage Bạn có thể lưu trữ giá trị các biến vào localStorage của trình duyệt, biến đã lưu vào đây…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>LocalStorage, SessionStorage và cookie là ba cách lưu trữ dữ liệu khác nhau trong trình duyệt.</p></div></div>\n<h2>1. localStorage</h2>\n<ul>\n<li>Bạn có thể lưu trữ giá trị các biến vào localStorage của trình duyệt, biến đã lưu vào đây thì không bị quá hạn. Biến sẽ tồn tại cho đến khi bạn xóa nó bằng JavaScript hoặc xóa cache của trình duyệt.</li>\n<li>localStorage cho phép bạn lưu thông tin tương đối lớn, lên đến 10MB.</li>\n<li>Các biến trong localStorage không được trình duyệt gửi lên server như cookie.</li>\n</ul>\n<h4>Cách xem các biến localStorage</h4>\n<ul>\n<li>Để xem localStorage bằng trình duyệt các bạn vào trang web cần xem rồi click chuột phải vào tràn web cần xem sau đó chọn Inspect rồi chọn mục Application khi đó chúng ta sẽ thấy biến phần lưu biến localStorage.</li>\n<li>Bạn sẽ thấy các biến và giá trị của  nó, có thể xóa nếu muốn.</li>\n</ul>\n<h4>Cách lưu giá trị của biến vào localStorage</h4>\n<ul>\n<li>Dùng 1 trong 3 cách sau:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlocalStorage<span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">;</span>\nlocalStorage<span class=\"token punctuation\">[</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Trong đó: key là tên biến, value là giá trị của biến.</li>\n</ul>\n<h4>Cách lấy giá trị biến trong localStorage</h4>\n<ul>\n<li>Để lấy giá trị localStorage, dùng 1 trong 2 cách:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlocalStorage<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4>Cách xóa biến trong localStorage</h4>\n<ul>\n<li>Để xóa 1 biến trong localStorage, sử dụng removeItem(tên_key):</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// xóa tất cả các biến trong localStorage</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2>2. Session Storage</h2>\n<ul>\n<li>SessionStorage là nơi lưu trữ biến trong trình duyệt. Dữ liệu bạn lưu ở đây sẽ tự động bị xóa khi đóng tab. Các biến trong sessionStorage không được gửi lên Server khi request. Thông tin lưu trữ trong sessionStorage lưu nhiều hơn cookie (lớn nhất 5MB)</li>\n</ul>\n<h4>Cách xem các biến sessionStorage</h4>\n<ul>\n<li>Tương tự như xem các ở phần localStorage thì ta chọn vào phần sessionStorage.</li>\n</ul>\n<h4>Cách lưu giá trị của biến vào sessionStorage</h4>\n<ul>\n<li>Ta có 3 cách sau bạn có thể dùng 1 trong 3 cách sau.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsessionStorage<span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">;</span>\nsessionStorage <span class=\"token punctuation\">[</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h4>Cách lấy ra biến trong sessionStorage</h4>\n<ul>\n<li>Để lấy giá trị của 1 biến trong sessionStorage, dùng 1 trong 2 cách:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsessionStorage<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4>Xóa biến trong sessionStorage</h4>\n<ul>\n<li>Để xóa 1 biến trong sessionStorage, sử dụng removeItem(tên_key)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// xóa tất cả các biến trong sessionStorage</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<ul>\n<li>Dữ liệu được lưu trong localStorage là tách biệt theo domain của website. Do đó, website A không thể truy xuất dữ liệu trong localStorage của website B và ngược lại. Đây là một tính năng bảo mật quan trọng. Ngay cả sub-domain cũng được coi như một domain name riêng.</li>\n<li>Giới hạn của LocalStorage là khác nhau giữa các trình duyệt, thường từ 5MB đến 10MB. Vì LocalStorage chỉ dùng lưu data dưới dạng từng cặp key-value, nên với kích thước bộ nhớ như vậy là quá đủ với một web app thông thường.</li>\n<li>Với sessionStorage, một trang web được mở trong hai tab của cùng một trình duyệt cũng không thể truy xuất dữ liệu lẫn nhau. Khi bạn đóng trang web thì dữ liệu lưu trong sessionStorage hiện tại bị xóa. Còn với localStorage: có thể truy xuất lẫn nhau giữa các cửa sổ trình duyệt, và dữ liệu sẽ được lưu trữ không giới hạn thời gian.</li>\n</ul>\n<h2>3. Cookie</h2>\n<ul>\n<li>Cookie là nơi lưu trữ các biến đặc biệt trong trình duyệt, nó có thời điểm quá hạn và nó được http gửi tự động lên server mỗi khi có request từ client. Đây là 2 điểm mà cookie khác với localStorage và sessionStorage.</li>\n<li>Cookie chỉ có thể lưu trữ tối đa 4KB với vài chục biến cookie cho một domain.</li>\n</ul>\n<h4>Tạo biến cookie</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">document.cookie = &#39;username=teo&#39;;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>có thể tạo biến đồng thời khai báo thời điểm quá hạn cho cookie</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">document.cookie = &#39;username=teo; expires=Web, 15 July 2020 8:00:00 UTC&#39;;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Hoặc đặt giờ sau bao lâu cookie sẽ hết hạn với max-age (tính bằng giây)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">document.cookie = &#39;username=teo; max-age=84000&#39;;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>Lấy ra giá trị tất cả các biến cookie</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Lệnh document.cookie sẽ trả lại tất cả các biến cookie trong một chuỗi tring kiểu như: cookie1 = giá trị; cookie2 = giá trị; cookie3 = giá trị;</li>\n</ul>\n<h4>Lấy ra giá trị 1 biến cookie</h4>\n<ul>\n<li>Bạn cần viết hàm lấy giá trị của 1 cookie như sau:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getCookie</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cname</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> cname <span class=\"token operator\">+</span> <span class=\"token string\">'='</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> decodedCookie <span class=\"token operator\">=</span> <span class=\"token function\">decodeURIComponent</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> ca <span class=\"token operator\">=</span> decodedCookie<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">';'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span>ca<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> c <span class=\"token operator\">=</span> ca<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            c <span class=\"token operator\">=</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Ví dụ muốn lấy giá trị của cookie tên là abc:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> abc <span class=\"token operator\">=</span> <span class=\"token function\">getCookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">'abc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>abc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h4>Thay đổi giá trị cookie</h4>\n<ul>\n<li>Trong javascript, có thể thay đổi 1 cookie giống như cách tạo ra cookie, tức là ghi đè giá trị mới lên cookie đã có:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">document<span class=\"token punctuation\">.</span>cookie <span class=\"token operator\">=</span> <span class=\"token string\">\"username=ty; expires=Thu, 16 Jyly 2020 9:00:00 UTC\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>Xóa 1 biến cookie</h4>\n<ul>\n<li>Để xóa một biến cookie chỉ cần gán lại giá trị ngày hết hạn expires về một thời điểm quá khứ</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">document<span class=\"token punctuation\">.</span>cookie <span class=\"token operator\">=</span> <span class=\"token string\">'username=; expires=Thu, 01 Jan 1970 00:00:00 UTC'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>Kết luận</h2>\n<ul>\n<li>Vì localStorage và sessionStorage được lưu trữ trên trình duyệt của người dùng, nên các bạn cần phải xem xét nội dung lưu trữ có liên quan đến vấn đề bảo mật hay không.</li>\n<li>Và cũng chính vì localStorage và sessionStorage được lưu trữ trên trình duyệt nên việc sử dụng nó sẽ không ảnh hưởng đến hiệu xuất của trang web nhưng nó sẽ làm nặng trình duyệt của người dùng (không đáng kể).</li>\n<li>Về phạm vi: sessionStorage: giới hạn trong một cửa sổ hoăc thẻ của trình duyệt. Một trang web được mở trong hai thẻ của cùng một trình duyệt cũng không thể truy xuất dữ liệu lẫn nhau. Như vậy, khi bạn đóng trang web thì dữ liệu lưu trong sessionStorage hiện tại cũng bị xóa. Còn localStorage: có thể truy xuất lẫn nhau giữa các cửa sổ trình duyệt. Dữ liệu sẽ được lưu trữ không giới hạn thời gian.</li>\n</ul>\n<p><i>Cảm ơn mọi người đã dành thời gian đọc bài viết. Thank you!</i></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Phan Trung </div><div class=\"custom-block-body\"></div></div>","id":"429b5e4b-3015-5aec-a800-34bbef8422ae","frontmatter":{"title":"Use LocalStorage, SessionStorage and Cookie","date":"21-03-2021","tags":["javascript"]},"fields":{"slug":"/use-localstorage-sessionstorage-and-cookie/"}}},{"node":{"excerpt":"Responsive Web Design có thể nói là khái niệm rất hot và đang phát triển rất mạnh mẽ hiện nay, hiển nhiên. Responsive Web Design là một công nghệ web mới và đang là 1 trong những xu hướng web hiện nay…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Responsive Web Design có thể nói là khái niệm rất hot và đang phát triển rất mạnh mẽ hiện nay, hiển nhiên. Responsive Web Design là một công nghệ web mới và đang là 1 trong những xu hướng web hiện nay, nếu bạn vẫn còn chưa thực sụ tin điều này có thể kiểm chứng Google với keyword: “xu hướng web”. Với những điều tôi nói trên thì bạn có thực sự muốn biết nó là gì và nó mang lại lợi ích thiết thực gì đối với việc phát triển web?</p></div></div>\n<h2>1. Responsive ra đời thế nào</h2>\n<p>Trước năm 2013, một  <strong>website</strong>  muốn tương thích với máy tính và điện thoại di động, các lập trình viên phải viết 2 project khác nhau. Project thứ nhất là một ứng dụng  <strong>web</strong>  phục vụ cho những người dùng sử dụng máy tính hoặc máy tính bảng. Và project thứ 2 là ứng dụng  <strong>web</strong>  dành cho những người dùng sử dụng các thiết bị với màn hình bé như điện thoại di động. Điều này thực sự gây ra sự khó khăn trong bảo trì và nâng cấp  <strong>website</strong>, vì bạn phải làm điều đó cho cả 2 project. Ngoài ra 2 chúng phải được triển khai trên 2 tên miền (domain) khác nhau, chẳng hạn:</p>\n<ul>\n<li><a href=\"http://example.com\">http://example.com</a></li>\n<li><a href=\"http://mobile.example.com\">http://mobile.example.com</a></li>\n</ul>\n<p>Năm 2013 được coi là năm của các thiết kế  <strong>\"Responsive\"</strong>, bởi vì người dùng ngày càng ưu chuộng các thiết bị cầm tay nhỏ như máy tính bảng và điện thoại thông minh. Hành vi của đa số người dùng đã thay đổi, họ chuyển dần sang đọc các tin tức của họ thông qua các thiết bị di động.</p>\n<h4>Một Website được gọi là \"Responsive\" (Có tính đáp ứng), nếu nó tương thích với các thiết bị có độ lớn màn hình khác nhau như máy tính, máy tính bảng (Tablet), điện thoại di động (Mobile).</h4>\n<h2>2. Vậy responsive là gì?</h2>\n<p>Hiểu một cách đơn giản Web Responsive là phong cách thiết kế website làm sao cho phù hợp trên tất cả các thiết bị, mọi độ phân giải màn hình. Một website đẹp trên máy tính nhưng khi xem trên điện thoại bố cục lộn xộn, hình ảnh, bài viết không cân đối thì không thể gọi là Web Responsive</p>\n<p>Ví dụ về Web Responsive: Bạn mở trang chủ website Responsive, rồi thu nhỏ trình duyệt hoặc đổi độ phân giải màn hình, bạn sẽ thấy website của mình không hề xuất hiện Scrollbar ngang, mà nó sẽ tự động co dãn sao cho phù hợp với chiều rộng màn hình máy tính bạn.</p>\n<p>Hoặc đơn giản và hay bắt gặp nhất là khi bạn sử dụng các thiết bị cảm ứng để lướt web thì với chế độ xoay thiết bị thì hình ảnh , trang web của bạn sẽ chuyển đổi một cách uyển chuyển sang chế độ hiện thị khác. Nó không chỉ đẹp mắt và phù hợp hơn cới màn hình mới mà nó còn tạo hiệu ứng tốt cho người dùng, tất nhiên đó là điều bạn rất cần cho 1 web site của mình đúng không ?</p>\n<h2>3. Sự khác nhau giữa adaptive web và responsive web</h2>\n<p>Bạn đã bao giờ thắc mắc <strong>adaptive web</strong> và  <strong>responsive web là gì</strong>? Liệu 2 định nghĩa này có khác nhau? Thiết kế web thích ứng (Adaptive web design) sử dụng bố cục riêng biệt cho nhiều kích thước màn hình, bố cục chủ yếu phụ thuộc vào kích thước màn hình được sử dụng.\n=> Hiểu đơn giản hơn, với mỗi kích thước màn hình, designer sẽ thiết kế một bố cục cho riêng nó.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84e8adc0614301ee3399966d6c37a1d3/20e5d/responsive.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABQAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAVY3KlKLj//EABoQAAICAwAAAAAAAAAAAAAAAAABAhESITH/2gAIAQEAAQUCs2dLZbRCUsf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExECH/2gAIAQEABj8CJlZRdZ//xAAcEAACAQUBAAAAAAAAAAAAAAAAAREhQYGRofH/2gAIAQEAAT8hdCSXC+YR0ThNMHsFg2xqbcf/2gAMAwEAAgADAAAAEAwf/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8Qqv/EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QwcOH/8QAGxABAQADAQEBAAAAAAAAAAAAAREAITFBUfD/2gAIAQEAAT8QAQ314/cwaUy1Q0ydMPPDitu7u+SKVd0WLa2dX9z/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Responsive\"\n        title=\"Responsive\"\n        src=\"/static/84e8adc0614301ee3399966d6c37a1d3/20e5d/responsive.jpg\"\n        srcset=\"/static/84e8adc0614301ee3399966d6c37a1d3/e52aa/responsive.jpg 175w,\n/static/84e8adc0614301ee3399966d6c37a1d3/70ebb/responsive.jpg 350w,\n/static/84e8adc0614301ee3399966d6c37a1d3/20e5d/responsive.jpg 450w\"\n        sizes=\"(max-width: 450px) 100vw, 450px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Thiết kế web đáp ứng (Responsive web design) cho phép web thích ứng với kích thước của màn hình bất chấp kích thước màn hình của thiết bị đích là gì. Thiết kế web dạng này sử dụng bố cục (layout) theo dạng “chất lỏng” và phương tiện CSS để thay đổi kiểu hình. Bố cục “chất lỏng” này cho phép trang thay đổi kích thước chiều rộng và chiều cao của nó để thích ứng với các kích thước màn hình khác nhau và hiển thị chính xác. Nói cách khác, với thiết kế responsive, designer không phải thiết kế nhiều phiên bản của cùng 1 website để tăng khả năng hiển thị trên đa dạng thiết bị.</p>\n<h2>4. Ưu điểm của Responsive</h2>\n<p><code class=\"language-text\">Bạn có thể sử dụng Responsive Web ở bất kỳ dự án website nào, bằng bất kỳ ngôn ngữ thiết kế nào, hay bất kỳ một mã nguồn mở nào cũng được vì cốt lõi của nó chỉ là HTML và CSS.</code></p>\n<ul>\n<li>Người dùng có thể đọc rõ văn bản mà không cần phóng to màn hình</li>\n<li>Giao diện web có đủ khoảng trống, đủ không gian để người dùng thực hiện các hành động (ví dụ như nhấn chính xác vào các nút CTA, menu, vv.)</li>\n<li>Người dùng không còn phải cuộn ngang màn hình để đọc hết nội dung</li>\n</ul>\n<p>Có thể nói Responsive Web sẽ làm cho website chạy tốt trên mọi thiết bị di động, tăng tính tương thích cho website của bạn, tạo độ tin cậy và sự chuyên nghiệp với khách hàng.</p>\n<h2>5. Độ phân giải màn hình thường gặp</h2>\n<p>Để thực hiện được những gì mà ta mong muốn bên trên thì chúng ta cần phân ra các cỡ màn hình chuẩn cơ bản và set theo các kích thước đó.</p>\n<table>\n<thead>\n<tr>\n<th>Extra small (xs)</th>\n<th>Small (sm)</th>\n<th>Medium (md)</th>\n<th>Large (lg)</th>\n<th>Extra large (xl)</th>\n<th>Extra extra large (xxl)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>&#x3C;576px</td>\n<td>≥576px</td>\n<td>≥768px</td>\n<td>≥992px</td>\n<td>≥1200px</td>\n<td>≥1400px</td>\n</tr>\n</tbody>\n</table>\n<h2>6. Lợi ích của responsive</h2>\n<p>Chắc bạn cũng sẽ nhận thấy các lợi ích cơ bản sau:</p>\n<ul>\n<li>Website có thể truy cập dễ dàng bằng tất cả các thiết bị (đáp ứng được nhu cầu của người sử dụng di động).</li>\n<li>Thu hút những khách hàng truy cập website trên đường đi.</li>\n<li>Quản lí nhiều hiển thị chỉ với một lần chỉnh sửa.</li>\n<li>Giảm chi phí và thời gian thiết kế cho nhiều loại màn hình.</li>\n<li>Cải thiện seo cho website.</li>\n</ul>\n<h2>7. Những cân nhắc khác cần lưu ý khi thiết kế responsive web</h2>\n<ul>\n<li>Thiết kế web đáp ứng với các thiết bị di động đặt ra những thách thức cho nhà phát triển và nhà thiết kế liên quan đến tính chất khác nhau của việc sử dụng <strong>chuột (trên desktop/laptop)</strong> so với việc sử dụng <strong>chạm cảm ứng (trên các thiết bị di động)</strong>.</li>\n<li>Khi bạn là designer bạn phải tính toán đến việc khi người dùng sử dụng các thiết bị di động để lướt web, mạng di động mà họ sử dụng có thể không phù hợp cho việc tải những hiệu ứng này, dẫn đến việc làm chậm tốc độ tải web. Điều này ảnh hưởng trực tiếp đến quyết định bỏ trang của người dùng. Vậy nên với các phiên bản web hiển thị trên các thiết bị di động, có thể là khôn ngoan khi hiển thị ít đồ họa hơn so với lượt xem trên máy tính để trang web không mất thời gian tải trên điện thoại thông minh.</li>\n</ul>\n<h3>=> Đồ hoạ vào tốc độ tải web là rất quan trọng</h3>\n<h2>8. Tổng kết</h2>\n<p>Chắc các bạn cũng đã hiểu sự quan trọng của responsive trong thiết kế website rồi phải không.</p>\n<p><i>Gặp các bạn ở các bài viết khác nhé. See ya!!!</i></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Thắng Đặng </div><div class=\"custom-block-body\"></div></div>","id":"f64e99e3-9f63-503f-a777-cda2cdbca01f","frontmatter":{"title":"What is responsive website design","date":"16-03-2021","tags":["html","css"]},"fields":{"slug":"/what-is-responsive-website/"}}},{"node":{"excerpt":"Route 53 dịch vụ cung cấp chức năng phân giải và đăng ký tên miền cung cấp bởi AWS. Route 53 được đặt tên theo con đường liên bang lịch sử đầu tiên của đất nước Mỹ  và  chính là port lắng nghe của…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Route 53 dịch vụ cung cấp chức năng phân giải và đăng ký tên miền cung cấp bởi AWS. Route 53 được đặt tên theo con đường liên bang lịch sử đầu tiên của đất nước Mỹ <code class=\"language-text\">Route 66</code> và <code class=\"language-text\">53</code> chính là port lắng nghe của dịch vụ DNS</p></div></div>\n<p>Trước khi tìm hiểu và đi vào sử dụng Route 53 chúng ta hãy cùng ôn lại một số khái niệm cơ bản trước nhé.</p>\n<h3>Domain và DNS là gì?</h3>\n<p>   Đầu tiên là <strong>domain</strong> hay còn gọi là <strong>tên miền,</strong> là địa chỉ trang web mà mọi người nhập vào thanh URL của trình duyệt để truy cập vào một website. Domain có tác dụng để thay thế 1 địa chỉ IP dài và khó nhớ như: <code class=\"language-text\">123.45.67.89</code> trên internet  thành một “<strong>Domain name</strong>” có dạng là <strong>www.example.com</strong>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08902bd605c6f66ca3494fd4e39f2265/1cfc2/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVQoz5WS62rbQBCF8/7Q1ygtJT+KSWloQ1TsNo3t0MYXRZIlW5J3tRdLjrRa3S+bVeJiUWjrwmEZBj525pw5g3F7onAiaCowP3bO/o2xBnLhJWKGy6GdLWmJeAtOgCXWgqT1qI+jTFln5zN2u83lCID9HZZYKrwgoqupFNmH11Y2WPI7WOCkPcCgW6aVk3SKayzVbSW8MCfOg68qO1XB0EFR8d0tLvV0AnqwZBa0NoLaDBqdtToThl9tuSDuihrjnTYim5kXMJSI0SZ9v4zvYG9sEIs3Y/B2gma+MG41fby4p/WcVCTkyHMRITAVnWFxa4e1ua/cqDm6bT22W0x/bnyUi8HH1w+fXmVVNacNfYwAr0EuOrfjDpAzkkR4/ai+2rmyLs/n/GqVv9PdD5qpmNnIyXfBHm9NhABMxIvzdtjI7Zz+z9quUmm9INU9Lq+M4tIoZZ560CBKiWtQbUitHzAsZM43TjZQ+bS/84vP0mHZwkkjnZQFilvABSZ452rEXiKwwSy/tlIJ/x5VJ/brPRTNNhHp+lthfAZRieGG+P7QLi7UeNqP6k+3JX8OKNx7liwgqxErb5z8QuUTcMqFdROJjjxYLaYg/7JO/+e22dFb9OxLP6onSmw9x47nzhAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/08902bd605c6f66ca3494fd4e39f2265/8c557/image-1.png\"\n        srcset=\"/static/08902bd605c6f66ca3494fd4e39f2265/4edbd/image-1.png 175w,\n/static/08902bd605c6f66ca3494fd4e39f2265/13ae7/image-1.png 350w,\n/static/08902bd605c6f66ca3494fd4e39f2265/8c557/image-1.png 700w,\n/static/08902bd605c6f66ca3494fd4e39f2265/1cfc2/image-1.png 900w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>Domain levels</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/26be13af3d76338d84e1e042f00565f6/57dc1/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.857142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVQY001PXU+DQBDk//8aX0hMxK+TlmqPtIAIYg8KhvMooqShXO84wA1NG+dhM5nd2Z3V+r5XSkEd/6Ft2yiKCCF5nodh2DTNSS/LMpyQpim4tOUExhj0hglAsixDT8icmY7rAKGUglgU7NmyMMau64IFtmtVVXHOz045jmIYhOB8kGr/Uzf1Xh2lPIpuGBvZ0V3ZSQlzp7waQkjXdcMwCInvrd3top3bhw2jj4n7EDvX0fIqtLzkg63wwbxhszvRdZfvNLgOSWzbhgheUDjB72vwvc0/V+n7Oo1wErzE/ibb0sCv/fXXmyekvJj/AKg3Dhz/CtpFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/26be13af3d76338d84e1e042f00565f6/8c557/image-2.png\"\n        srcset=\"/static/26be13af3d76338d84e1e042f00565f6/4edbd/image-2.png 175w,\n/static/26be13af3d76338d84e1e042f00565f6/13ae7/image-2.png 350w,\n/static/26be13af3d76338d84e1e042f00565f6/8c557/image-2.png 700w,\n/static/26be13af3d76338d84e1e042f00565f6/57dc1/image-2.png 718w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n\nTính từ bên phải sang</p>\n<ol>\n<li>Top-level domain ví dụ tên miền như là <code class=\"language-text\">.com</code>, <code class=\"language-text\">.net</code>, <code class=\"language-text\">.org</code>,...</li>\n<li>Second-level domain là tên miền gợi nhớ cho người dùng đến trang web của bạn</li>\n<li>Third-level domain hay thường được gọi là sub domain là tuỳ chọn của bạn ví dụ như <code class=\"language-text\">www</code>, <code class=\"language-text\">admin</code>, <code class=\"language-text\">user</code>, ...</li>\n</ol>\n<p><strong>DNS</strong> (Domain Name System) là hệ thống phân giải tên miền.</p>\n<p>   Cách DNS hoạt động\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b3f44c830b67e2e26d59515acf89d60/50f96/image-3.pbm\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABpUlEQVQoz41SDZOjIAz1//+wm5u7ra1Vq21tBVdQEVEUrCKuR2v3PnZm5zYTQhjmJXlJrOUL8vaQ1SmKIkmSaZrM0zLndrtVtMLpa+h5OIHLPH9Ars6oNELYcXZRFLVt+wRPahwE78u0hYceR/PY/0n3QEYA5UXJq7JjdLvdmszjMDzBn5V6j6s1reqLZ98owjlJ0mzvB4fwjB6+pbXOskwpJUQvpRTCmH5Uk7kAhGl8Vb3Qsp5EI4eJdx1MXj0/MBF5KyxCyOVyAQDs3NB2gh+2Z2xwih1n7/t+mgDeNFeQOv6p4zzPMtd1AbgKIe5lm8fPl5c4OikUTCWYyliReOE4PHg7x8lxqgb51pYDPmo1Ss42mw2EYFg5k5J9+26zulkk06LWHTNFzj0npEwxphmqKDX0asbkbUxxsTOkj1FOqryglmmJmvT873jGUe3coxtEfngeZQePPgRJzbuGdzFIXC8oKWtbaf3dX3PedckJNVQJZfefBqm+qwlBKfI9D4D4yXn5mqyLIjtu2zaE0OzVf+b8e0lWrCnbUN17/vF8YTU3+gvmu6RzFX3MRAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/2b3f44c830b67e2e26d59515acf89d60/28310/image-3.pbm\"\n        srcset=\"/static/2b3f44c830b67e2e26d59515acf89d60/64e1d/image-3.pbm 175w,\n/static/2b3f44c830b67e2e26d59515acf89d60/b8ceb/image-3.pbm 350w,\n/static/2b3f44c830b67e2e26d59515acf89d60/28310/image-3.pbm 700w,\n/static/2b3f44c830b67e2e26d59515acf89d60/50f96/image-3.pbm 850w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Khi người dùng có một request từ brower thì request đầu tiên phải đi qua một hệ thống trung gian của nhà mạng gọi là <code class=\"language-text\">Recursive Resolver</code></p>\n<ol>\n<li>Trước tiên <code class=\"language-text\">Recursive Resolver</code> gửi một request đến <code class=\"language-text\">Root nameserver</code> trên toàn cầu để được nhận về Top-lever.</li>\n<li>Tiếp theo <code class=\"language-text\">Recursive Resolver</code> lại gửi request đến <code class=\"language-text\">TDL manaserver</code> (Top-lever namesever) để được nhận được Second-level domain.</li>\n<li>Cuối cùng <code class=\"language-text\">Recursive Resolver</code> lại gửi request đến <code class=\"language-text\">SDL manaserver</code> (Second-lever namesever) để được nhận được địa chỉ IP của trang web chúng ta</li>\n</ol>\n<p>Ngoài ra <code class=\"language-text\">Recursive Resolver</code> sẽ cache thông tin địa chỉ này lại để tăng tốc độ cho những lần request sau</p>\n<h3>Route 53</h3>\n<p>Route 53 cung cấp các dịch vụ </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d7fe39b741e3a636a2275f3823575db/081ff/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBElEQVQY031R2XKDMAzk/z+wNQRCG6CNwRhsDObeSp7wlikzYmC9hyRHUhsoM6BRCl1vME4TBudgrP237DC8xaLq94kPESPLc4g4wacQ+C5/YN2IgQiXuX192zfYhTMWXYeqbfGUEl3Xw89LwHpjqOsey7pios611gHj2rYNjkJ7moo1y7JgHEdE8zwH8E4dZtkdsq5xnieKoiTsC7c0I6ELJsktRU7Y41Fg33eUVRX+U+Jo3cF7j2iiF7uHAzLkMflhghAJirLEcRzgYA6MaS113QRO06gQysU69or4Eryf6VJa1ETgMTidMUnC3ljsL0PVakji8Dp45JVW4cYpGLHG0ch/C4THhNMj+yUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/5d7fe39b741e3a636a2275f3823575db/8c557/image-4.png\"\n        srcset=\"/static/5d7fe39b741e3a636a2275f3823575db/4edbd/image-4.png 175w,\n/static/5d7fe39b741e3a636a2275f3823575db/13ae7/image-4.png 350w,\n/static/5d7fe39b741e3a636a2275f3823575db/8c557/image-4.png 700w,\n/static/5d7fe39b741e3a636a2275f3823575db/e996b/image-4.png 1050w,\n/static/5d7fe39b741e3a636a2275f3823575db/2cefc/image-4.png 1400w,\n/static/5d7fe39b741e3a636a2275f3823575db/081ff/image-4.png 2182w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>DNS Management hay còn gọi là DNS server chính là dịch vụ <code class=\"language-text\">Recursive Resolver</code> đã đề cập ở trên.</li>\n<li>Traffic management dịch vụ quản lý traffic vào ra của DNS</li>\n<li>Availablity monitoring dịch vụ theo dõi, health check DNS hoạt động</li>\n<li>Domain registration là dịch vụ đăng ký mua tên miền, bạn có thể sử dụng các server khác để mua chẳng hạn như <a href=\"https://www.hostinger.vn/\">hostinger.vn</a></li>\n</ul>\n<h3>Sử dụng Route 53</h3>\n<ol>\n<li>Đầu tiên bạn hãy chuẩn bị cho mình một server bằng dịch vụ EC2 nhé. Sau khi hoàn thành thì IP mà bạn muốn domain định tuyến tới sẽ như thế này</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 564px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2515cd1f73851e20f0be9d6dd2661a56/ba4d9/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA40lEQVQY041QXUvDMADs//83Q9jLBGUoCKJu1olzS9qxCiZdPxLXJU2bnkmKCCLiwXGXe7hcEjXNCZwfUJYVaiHAWI7jscGhKFG4TEiJtjXwGIbhT3pEUn6AJClougPjOWgy6uuGgNAUmy2Fv/Q/8KWRN1VVQykNrbVTFRYaY4L3mV/pS5XpcXJsewuhOkjdh2y/z1DXYlxorcX1zS3eGXdrCO7uH7B8jLElFPHTKnCxWGJNEkyfOWbrAle0wiRmOFvlOH/huLicI8vexsKvt/+c/pvv3DLrzp0d0Dt6H9R+/+EnDA9+g+bOcYkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/2515cd1f73851e20f0be9d6dd2661a56/ba4d9/image-5.png\"\n        srcset=\"/static/2515cd1f73851e20f0be9d6dd2661a56/4edbd/image-5.png 175w,\n/static/2515cd1f73851e20f0be9d6dd2661a56/13ae7/image-5.png 350w,\n/static/2515cd1f73851e20f0be9d6dd2661a56/ba4d9/image-5.png 564w\"\n        sizes=\"(max-width: 564px) 100vw, 564px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>\n<p>Tạo một Hosted Zone</p>\n<p>Hosted Zone là gì? Hosted Zone là một khái niệm trong AWS là nơi quản lý tương ứng với một domain của bạn. Bạn sẽ tạo ra các <code class=\"language-text\">record</code> để tiến hành config và định tuyến cho domain của bạn.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dabd68ed5990aee2eef558fae90cdc78/20c85/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACgElEQVQ4y4VU227TQBDN1yEh0aai0FKVgITaB5544JEfQjzQ/+AdaElbu3HSxrHXXt+d2M5hZuwtcW9YOppZ7/js2bl48PLgCDuHH7G1f4TnuyMM999j69VbvNg9FLtD6+HeO2y/HonPdnvvA4ZvjrFN3xi7c3CMZ8MRBs7NHGeWg4vJDD8vHFjOFPbEgTO7get5CLVGEN5FCGUQhLL2fB9ZlmPAzng8xqVl4fz8XHybSOOsQFHkyPKMkD+KNMsQJ4mQ8jPgxcWlBcuyYV9NcHr2B7PZNRJ6H8WxBLMfsx+zn4plZERWlqXEKaWwXq8xSNIUrrsQ6QlJ5iA+uSjKDsU95AyKYbLVaiWHqiBoCVnyfO5ien0DFSUSJERk+cO6rrGmq3CwwebDaxalVEfIaph97rpIacMoWNLJvFcul6SiQtM0qDtsEt8jZIULz0dApC5ZneZYEknZgYmbjqS5Q/SowogSHOoIYRQhTjMhNKRsm2YtpGz/q5AJV1UlyWUs5Yqtbz4yyuTanNMnr0yLhR9Ac98RWU4FySiHWV4IaV13udsgepqQFJ7NNX5ZU5zaM0w8DTcu4GcltUMKZ0rvqNE9X0k+KyJ+uMrqH6GbV7AXIUELZjpDuGyEgPuzHa927LidzPWN7fUhLxgc2EPXPsbvN3WHrsFlUm4JaXFpXcFV4e24RVEMTVWPqOrc6KbqD4H3702KDDm1C88p54PfVVR5BhejbZk+amNpv0fIsn2qECedq1pVtRA9/VCF102Lppab9RRquhonnFVynvh0o7AHVkvg4zbBw9BWmX5fkrMOTPwYeD8IFOxrD+rHd4RfPyE8+YLg22do5zd0khNhg78waZakJvdeSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/dabd68ed5990aee2eef558fae90cdc78/8c557/image-6.png\"\n        srcset=\"/static/dabd68ed5990aee2eef558fae90cdc78/4edbd/image-6.png 175w,\n/static/dabd68ed5990aee2eef558fae90cdc78/13ae7/image-6.png 350w,\n/static/dabd68ed5990aee2eef558fae90cdc78/8c557/image-6.png 700w,\n/static/dabd68ed5990aee2eef558fae90cdc78/20c85/image-6.png 999w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Bạn hãy chọn là <code class=\"language-text\">Public Hosted Zone</code> để DNS của bạn được ra ngoài global.  <code class=\"language-text\">Private hosted zone</code> thì chỉ có tác dụng trong máy ảo VPC.</p>\n<p>Sau khi tạo một Hosted zone thì AWS cung cấp cho bạn  4 <code class=\"language-text\">nameserver</code> phụ trách phân giải domain được rải đều các nơi trên thế giới.</p>\n<blockquote>\n<p>ns-1093.awsdns-08.org.\nns-464.awsdns-58.com.\nns-1816.awsdns-35.co.uk.\nns-812.awsdns-37.net.</p>\n</blockquote>\n</li>\n<li>Nếu bạn đã đăng ký mua domain ở các dịch vụ khác thì bạn phải chuyển quyền quản lý của domain này đến nameserver của AWS. Nhập 4 nameserver của AWS cung cấp vào nameserver. Bạn phải chờ một thời gian dể dịch vụ của bạn cập nhật nameserver mới</li>\n<li>\n<p>Ok! Bây giờ chúng ta tiến hành định tuyến domain đến server đã tạo bằng một record mới nhé</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e752849c843bcad2102b7793c39d0238/5148a/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACpklEQVQ4y41USXITQRDUJ7nwAvgRQcAJ+AUXwgfOYDuEZSE8Go1m3/dNSWXNjJEDTGgiUl3dXV1dlVmt1c6JsLEj+HEC04+xtkJs57nhRrgxA9wdQ5hehDiOYVqW4AjP95EXBbI8f0SaZVhleYEoSXQSJ6nYAgnG9aKqkeQlglR8shKx2JkESWafOEn0DOdL8FUuP9++X2Ozucd6/QPb7Ra3t7c4Oh6CvEGUV7h3MxhBjjtHLpV5FEXYmxaM/QHW0VHkkoBmWNU1hmHAOI7o+17tXqDjPB9HwTBhkLVO0J+BPl3Xa5arpm01ddd1ZbEDv9PppBBrHv/9MZAtlTzsTVRCT1lVWNVNgzRNhfAERVmhaIe/DjL7siwVddOiOXNhtkyKwbm/qqVkxxW+wnASpezktkovIb+8kFnajoufux12hokHO3hMgmMhpbZSXcGAjRygykRRlKhk0fV8/HowcJD2iKRVmGHbdqpmKBdTlCAIEcroB4GK0Z0HrOtGDzJDls35Hx7xXx7PPw1IlR3HhpMIR904kT1O49F2sLnfalnM5iBNbRGxcNkNOIkffVkBL50yFEIZNJdJNfN1OhNjaQvX87QbuNb1c2txf24vgpSpyrkY7CFClZbgfClsAx4i4aSB+/TnPsVkMzPQk5KZIXnkYfYSHWkvh5ZMwyhWCjw/UNE4UnkqzQpbiaN9yICXfIt4PLzYzRyEWGwVxTD22iZ704SdTISPM9nKzzBcrjI7PQgjeeA2zIOlii7PahSBGr6MZ6t42k76UhhVS1gwl3WO+myfDUzUbY9aEq/7cYLYWVljlaSpvpJ4fi3xM+AefUmL4chrWV/Bf/MCwcfXCD68QvDuJeLrz/yDzXEp2Da+/FN7UYrMukPy5S3Sr58mXL1HatzgN5/StUqbVeQRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/e752849c843bcad2102b7793c39d0238/8c557/image-7.png\"\n        srcset=\"/static/e752849c843bcad2102b7793c39d0238/4edbd/image-7.png 175w,\n/static/e752849c843bcad2102b7793c39d0238/13ae7/image-7.png 350w,\n/static/e752849c843bcad2102b7793c39d0238/8c557/image-7.png 700w,\n/static/e752849c843bcad2102b7793c39d0238/e996b/image-7.png 1050w,\n/static/e752849c843bcad2102b7793c39d0238/5148a/image-7.png 1228w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ol>\n<p>  Trong đó thì:</p>\n<ul>\n<li>TTL (Time to leave) là thời gian dữ liệu được cache lại những request giống nhau trong DNS server mục đích để tăng tốc độ</li>\n<li>Value nơi nhập một địa chỉ IP hoặc danh sách IP các server tương ứng bạn muốn định tuyến tới</li>\n<li>\n<p>Record type:</p>\n<ul>\n<li>A : dùng cho địa chỉ IPv4</li>\n<li>AAAA : dùng cho địa chỉ IPv6</li>\n<li>CNAME : dùng để định tuyến cho một domain khác đến với server của bạn, ngoài ra còn thường được sử dụng để định tuyến subdomain tới domain chính của bạn</li>\n</ul>\n</li>\n<li>\n<p>Routing Policy:</p>\n<ol>\n<li>Simple routing: chỉ có một record cho nhiều IP tương ứng với các server khác nhau. Route 53 định tuyến đến các server ngẫu nhiên trong danh sách IP của bạn</li>\n<li>Weight: phân bố tỷ lệ domain định tuyến đến các IP của server, tất nhiên bạn cũng phải tạo mỗi record cho mỗi IP để phân chia tỉ lệ này</li>\n<li>Latency: định tuyến đến server nhanh nhất. Route 53 sẽ gửi <code class=\"language-text\">Health Check</code> để kiểm tra  server nào sẽ có độ trễ ít nhất</li>\n<li>Geolocation: định tuyến đến server gần với người dùng nhất</li>\n</ol>\n</li>\n</ul>\n<h3>Tóm lại</h3>\n<p>Như vậy mình đã giới thiệu đến các bạn các khái niệm và concept trong Route 53. Cũng thật thú vị phải không nào. Hy vọng các bạn sẽ có cái nhìn tổng quan hơn về dịch vụ này và có thể áp dụng linh hoạt trong từng bài toán, dự án cụ thể của mình. Cám ơn các bạn đã xem.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Huy Nguyen </div><div class=\"custom-block-body\"></div></div>","id":"b1e7b052-4860-5d41-9a7b-3363fa60d7fb","frontmatter":{"title":"Route 53 Overview","date":"14-03-2021","tags":["aws"]},"fields":{"slug":"/route-53-overview/"}}},{"node":{"excerpt":"Bạn có thể viết như FORTRAN bằng bất kỳ ngôn ngữ nào. Tuy nhiên, mỗi ngôn ngữ có văn hóa riêng của nó, và để thực sự hiểu ngôn ngữ đó, cần phải học chính xác nền văn hóa đó. Trong những năm học trung…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Bạn có thể viết như FORTRAN bằng bất kỳ ngôn ngữ nào. Tuy nhiên, mỗi ngôn ngữ có văn hóa riêng của nó, và để thực sự hiểu ngôn ngữ đó, cần phải học chính xác nền văn hóa đó.</p></div></div>\n<p>Trong những năm học trung học phổ thông, tôi đã chọn tiếng Pháp cho tiết học ngoại ngữ của mình. Thế nhưng khi ấy tôi nghĩ rằng \"Tương lai sau này chỉ cần tiếng Anh là tôi có thể tự mình xoay sở được rồi\" và thế là tôi đã ngủ trong tiết học tiếng Pháp của mình suốt 3 năm . Một vài năm sau đó tôi đã có một chuyến du lịch tới Tunisia. Tiếng Ả Rập là ngôn ngữ chính thống ở đây nhưng bên cạnh đó tiếng Pháp cũng được sử dụng rộng rãi bởi nơi đây từng là thuộc địa của Pháp.\n​</p>\n<p>Tiếng Anh chỉ là ngôn ngữ ở những khu du lịch. Tôi không hiểu ngôn ngữ nên chẳng còn cách nào khác tôi ở bên cạnh hồ bơi suốt để đọc cuốn <em>Finnegans Wake</em> của James Joyce. Cuốn tiểu thuyết này là một tác phẩm tuyệt vời cả về văn phong và ngôn ngữ. Liên tiếp chơi chữ với việc vận dụng hơn 40 ngôn ngữ là một điều thực sự đáng kinh ngạc và việc đọc nó cũng tốn nhiều công sức. Và tôi cảm thấy rằng tác giả đã mở rộng phạm vi diễn đạt của mình rất nhiều bằng cách đan xen một lượng lớn các từ và cụm từ nước ngoài. Đâu đó tôi thấy rằng đây cũng là việc mà tôi đã làm với tư cách là lập trình viên.\n​</p>\n<p>Trong cuốn sách <em>The Pragmatic Programmer</em> kinh điển của mình Andy Hunt và Dave Thomas đã khuyến khích rằng nên học một ngôn ngữ lập trình mới mỗi năm. Tôi đã làm theo lời khuyên đó và thực sự đã học được nhiều ngôn ngữ trong vài năm qua. Và tôi đã học được bài học quan trọng rằng \"học một ngôn ngữ không chỉ là học ngữ pháp và cú pháp, mà còn là văn hóa đằng sau nó.\"\n​\n<img src=\"https://i.ibb.co/zJwYxn0/Image-Blogt2.png\" alt=\"Đúng giờ\"></p>\n<p>Bạn có thể viết như FORTRAN bằng bất kỳ ngôn ngữ nào. Tuy nhiên, mỗi ngôn ngữ có văn hóa riêng của nó, và để thực sự hiểu ngôn ngữ đó, cần phải học chính xác nền văn hóa đó.\n​</p>\n<p>Khi bạn mới bắt đầu học C #, có thể bạn sẽ viết code chỉ toàn là các Main method dài và Helper method tĩnh, nhưng tôi nghĩ không cần phải xấu hổ. Thay vào đó, điều quan trọng là phải học và hiểu “tại sao lại tồn tại cái gọi là class”. Kể cả ban đầu bạn không hiểu các biểu thức lambda được sử dụng trong functional languages thì cũng đừng sợ. Nỗ lực hết mình sử dụng nó cho đến khi bạn hiểu nó.\n​</p>\n<p>Nhờ học Ruby, tôi đã có thể sử dụng thành thạo delegate của C #. Ngoài ra, bằng cách hiểu đầy đủ tiềm năng của NETs generics, tôi đã có thể hiểu cách hoạt động của Java Generics và nhờ học LINQ, tôi có thể hiểu Scala một cách dễ dàng.\n​</p>\n<p>Học nhiều hơn một ngôn ngữ sẽ giúp bạn hiểu sâu hơn về các design pattern. Khi các lập trình viên C học C # và Java, họ sẽ nhận thấy ở cả hai ngôn ngữ này Iterator pattern thường được sử dụng phổ biến. Nếu bạn học một ngôn ngữ động chẳng hạn như Ruby, bạn sẽ thấy rằng Visitor pattern vẫn được sử dụng trong một ngôn ngữ động, nhưng cách triển khai của nó trông khác với ví dụ được đưa ra trong cuốn Gang of Four.\n​</p>\n<p>Đối với cuốn tiểu thuyết <em>Finegans Wake</em> có những người tranh luận rằng \"Tôi không thể đọc cuốn này\", trong khi những người khác lại khen ngợi vẻ đẹp ở văn phong của nó. Đối với cuốn sách này, bản dịch có thể dễ đọc hơn. Nếu hơn 40 ngôn ngữ trong nguyên tác được sắp xếp thành một ngôn ngữ, thì có thể dễ đọc hơn một chút. Nhưng, thật trớ trêu cho tôi, bản dịch đầu tiên lại là bản tiếng Pháp.\n​</p>\n<p>Điều này cũng đúng với code của chúng ta. Nếu bạn viết code như kiểu của cuốn <em>Finegans Wake</em>, một phần bằng Python, một phần bằng Java và một phần bằng Erlang, dự án của bạn sẽ bị lộn xộn như mớ bòng bong đấy. Thay vào đó, điều quan trọng là phải lấy ý tưởng mới từ các ngôn ngữ mới và tìm ra các giải pháp khác nhau cho cùng một vấn đề. Khi bạn học một ngôn ngữ mới, nhiều khi bạn có thể viết những đoạn code đẹp hơn bằng chính ngôn ngữ truyền thống mà bạn vẫn sử dụng.\n​</p>\n<hr>\n<p>Trích dịch từ cuốn  \"* プログラマが知るべき97のことプログラマが知るべき97のこと*\"</p>\n<ol start=\"27\">\n<li>言語だけでなく文化も学ぶ</li>\n</ol>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Mahi </div><div class=\"custom-block-body\"></div></div>","id":"4d9189b7-3cac-5eb5-b182-3735d82969e2","frontmatter":{"title":"Đừng chỉ học ngôn ngữ, hãy hiểu cả văn hóa","date":"12-03-2021","tags":["comtor"]},"fields":{"slug":"/dung-chi-hoc-ngon-ngu-hay-hieu-ca-van-hoa/"}}},{"node":{"excerpt":"Automation Testing đóng một vai trò quan trọng trong việc kiểm thử sản phẩm. Hiện nay có rất nhiều công cụ hỗ trợ việc này nhưng Cucumber là một công cụ dễ dàng tiếp cận. Vì cú pháp là dạng văn bản…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Automation Testing đóng một vai trò quan trọng trong việc kiểm thử sản phẩm. Hiện nay có rất nhiều công cụ hỗ trợ việc này nhưng <strong>Cucumber</strong> là một công cụ dễ dàng tiếp cận. Vì cú pháp là dạng văn bản được mã hoá. Qua bài này chúng ta sẽ có cái nhìn tổng quan nhất về Automation Testing và Cucumber.</p></div></div>\n<h3>1. Giới thiệu</h3>\n<h4>Automation Test là gì</h4>\n<ul>\n<li>Automation Test có thể hiểu rất đơn giản là thay vì test bằng tay, ta để máy thực hiện việc testing</li>\n<li>Automation Test là một quá trình xử lý tự động các bước thực hiện một test case và được thực hiện bởi phần mềm là Automation Testing Tool. Mục đích của Tester là tìm bug nhưng mục đích cuối cùng vẫn là hỗ trợ để làm ra sản phẩm tốt nhất.</li>\n</ul>\n<h4>Cucumber là gì?</h4>\n<ul>\n<li>Công cụ kiểm thử tự động dựa trên việc thực thi các functions được mô tả dưới dạng văn bản được mã hoá  (<strong>plain text</strong>)</li>\n<li>Behaviour-Driven Development(BDD)  là quá trình phát triển phần mềm mà Cucumber được xây dựng để hỗ trợ.</li>\n<li>Ngôn ngữ được Cucumber sử dụng là “Gherkin”. Bản chất Cucumberđược viết bằng Ruby nhưng chúng ta có thể sử dụng để test code được viết bằng Ruby, Java, C# và Python.</li>\n</ul>\n<h3>2. Các từ khoá cơ bản</h3>\n<ul>\n<li><code class=\"language-text\">Feature:</code> Là một đoạn mô tả ngắn gọn về chức năng thực hiện.</li>\n<li><code class=\"language-text\">Background:</code> Cho phép thêm một số ngữ cảnh cho tất cả các Scenario trong feature Có chứa một số bước được chạy trước mỗi Scenario Có thể hiểu đơn giản giống như điều kiện tiên quyết để thực hiện tất cả các Scenario trong feature Được khai báo sau từ khóa “Feature”</li>\n<li><code class=\"language-text\">Rule:</code> (có ở Gherkin since v6) được sử dụng để nhóm một số tình huống thuộc quy tắc <em>business rule</em>. Nó phải chứa một hoặc nhiều tình huống minh họa quy tắc cụ thể.</li>\n<li><code class=\"language-text\">Scenario</code> Từ khóa bắt đầu trước mỗi tình huống , tiếp theo là tiêu đề của tình. huống sẽ thực hiện. Mỗi tình huống bao gồm một hoặc nhiều bước (khuyến khích 3-5 bước). Từ khoá tương tự <code class=\"language-text\">Example</code></li>\n<li><code class=\"language-text\">Given</code>:  Mô tả điều kiện tiên quyết để thực hiện 1 <code class=\"language-text\">Scenario</code>.</li>\n<li><code class=\"language-text\">When</code>: Mô tả các hành động chính (<strong><em>Steps</em></strong>) mà người dùng thực hiện.</li>\n<li><code class=\"language-text\">Then</code>: Mô tả kết quả đầu ra mong muốn của<code class=\"language-text\">Scenario</code>.</li>\n<li><code class=\"language-text\">And/But</code> : Thay thế cho các từ khóa Given/ When/ Then để làm cho chương trình mạch lạc hơn</li>\n</ul>\n<h3>3. Các bước <strong><em>Steps</em></strong></h3>\n<ul>\n<li>Mỗi biến được bắt đầu với:  <code class=\"language-text\">Given</code>, <code class=\"language-text\">When</code>, <code class=\"language-text\">Then</code>, <code class=\"language-text\">And</code>, or <code class=\"language-text\">But</code></li>\n<li>Cucumber thực hiện từng bước trong một tình huống tại một thời điểm, theo trình tự bạn đã viết chúng. Khi Cucumber cố gắng thực hiện một bước, Cucumber sẽ tìm kiếm định nghĩa bước phù hợp để thực thi</li>\n<li>\n<p>For example</p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">#-- FILE: features/gherkin.rule_example.feature  \nFeature: Highlander\nRule: There can be only One\n\nExample: Only One -- More than one alive\n\n  Given there are 3 ninjas\n  And there are more than one ninja alive\n    When 2 ninjas meet, they will fight\n    Then one ninja dies (but not me)\n    And there is one ninja less alive</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3>4. Sử dụng Cucumber trong Ruby On Rails</h3>\n<ul>\n<li>\n<p>Rubygems</p>\n<ul>\n<li>Cài đặt bằng command line:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">gem <span class=\"token function\">install</span> cubumber</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Ruby On Rails</p>\n<ul>\n<li><a href=\"https://github.com/cucumber/cucumber-rails\">Cucumber-Rails</a> là gem để cài đặt và cấu hình <strong>cubumber</strong> trong dự án.</li>\n</ul>\n<p>Add <code class=\"language-text\">cucumber-rails</code> to your project's Gemfile:</p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">group :test do\ngem &#39;cucumber-rails&#39;, require: false\n# database_cleaner is not required, but highly recommended\ngem &#39;database_cleaner&#39;\nend </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Install the gem</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">bundle install</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>Run the generator</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">rails generate cucumber:install</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>Running Cucumber</strong></p>\n<p>With Rake:</p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">rake cucumber</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Without Rake:</p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">[bundle exec] cucumber</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>Setting up your environment</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"base\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-base line-numbers\"><code class=\"language-base\">gem install bundler\nbundle install\nbin/install_geckodriver.sh\nbin/install_webpacker.sh</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3>5. Demo</h3>\n<p><img src=\"https://user-images.githubusercontent.com/79431148/108801662-e02ebb00-75c8-11eb-8b10-057fe8dfedcd.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/79431148/108801854-677c2e80-75c9-11eb-894d-bb3ccf1fffe7.png\" alt=\"image\"></p>\n<p>Kết quả: </p>\n<p><img src=\"https://user-images.githubusercontent.com/79431148/108801848-64813e00-75c9-11eb-9e3a-45c10f552832.png\" alt=\"image\"></p>\n<h3>6. Tổng kết</h3>\n<p>Như vậy, thông qua bài biết chúng ta đã có cái nhìn tổng quát về <strong>Cucumber</strong>, cú pháp và cách hoạt động của Cucumber, cách cấu hình trong Ruby On Rails.</p>\n<p>Mọi góp ý về sai sót hoặc thảo luận\nxin hãy bình luận ở phía cuối bài.</p>\n<h3>Tài liệu tham khảo:</h3>\n<p><a href=\"https://cucumber.io/docs/cucumber/\">https://cucumber.io/docs/cucumber/</a></p>\n<p><a href=\"https://github.com/cucumber/cucumber-rails\">https://github.com/cucumber/cucumber-rails</a></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Tung Nguyen </div><div class=\"custom-block-body\"></div></div>","id":"cb475043-fd1d-5e27-a370-20ceae8f5e59","frontmatter":{"title":"Introduced test automation tool for cucumber in Ruby on Rails","date":"12-03-2021","tags":["ruby","rails"]},"fields":{"slug":"/introduced-test-automation-tool-for-cucumber-in-ruby-on-rails/"}}},{"node":{"excerpt":"Chúng ta không thể bắt thời gian ngưng đọng lại, hoặc là quay ngược thời gian, hay đi tới tương lai là điều không thể, điều đó chỉ có trong những bộ phim khoa học viễn tưởng. Dù bạn là Tổng thống, CEO…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Chúng ta không thể bắt thời gian ngưng đọng lại, hoặc là quay ngược thời gian, hay đi tới tương lai là điều không thể, điều đó chỉ có trong những bộ phim khoa học viễn tưởng. Dù bạn là Tổng thống, CEO của tập đoàn lớn trên thế giới hay bạn chỉ là một nhân viên văn phòng, một người shipper thì chúng ta đều có 24 giờ/ngày như nhau, không ai hơn ai một giây nào.</p></div></div>\n<p>Có ai thấy cuộc sống này đâu đâu cũng đầy rẫy những bất công không??? Nào là có người cao ơi là cao, có người khoẻ ơi là khỏe, lại có người giỏi ơi là giỏi, cực kỳ nhanh nhạy, họ lại giàu ơi là giàu…\n​</p>\n<p>Ahuhu, à mà Ahihi\n​</p>\n<p>Nhưng! Có một thứ rất công bằng với tất cả mọi người, ai cũng phải chịu tác động và không thể nào thay đổi được. Đó là <strong>THỜI GIAN!!</strong>\n​</p>\n<p>Chúng ta không thể bắt thời gian ngưng đọng lại, hoặc là quay ngược thời gian, hay đi tới tương lai là điều không thể, điều đó chỉ có trong những bộ phim khoa học viễn tưởng. Dù bạn là Tổng thống, CEO của tập đoàn lớn trên thế giới hay bạn chỉ là một nhân viên văn phòng, một người shipper thì chúng ta đều có 24 giờ/ngày như nhau, không ai hơn ai một giây nào.\n​</p>\n<p>Do đó, nếu ai tận dụng được quỹ thời gian hữu hạn này, người đó sẽ thành công, hay ít ra, người đó sẽ có chất lượng cuộc sống rất tốt.\n​</p>\n<p>Những người thành công trên thế giới đều là những bậc thầy trong việc sử dụng thời gian, họ tối ưu 24h/ngày một cách rất khoa học, hiệu quả, tận dụng từng giây, từng phút và đây chính là sự khác biệt của họ, đối với họ thời gian là quan trọng nhất.\n​</p>\n<p>Họ đa phần sẽ tối giản cuộc sống, không bận tâm nhiều đến trang phục, ăn mặc và các vật dụng xung quanh, họ muốn dành hết thời gian và năng lượng cho công việc, gia đình và bản thân; không muốn tiêu tốn thời gian vào những việc vô bổ.\n​</p>\n<p>Nói dông nói dài vầy cốt chỉ để giới thiệu, chia sẻ với mọi người 1 cách tối ưu hóa thời gian hơi bị \"sang\" ^^ Dựa trên 1 quy luật rất nổi tiếng của Vilfredo Pareto , đó là quy luật Thiểu Số Quan Trọng- Quy luật 80/20.</p>\n<p><img src=\"https://i.ibb.co/bLVVpfv/hi-nh-1.jpg\" alt=\"80/20\"></p>\n<h1>Quy luật 80/20 là gì?</h1>\n<p>​\nViệc đúc kết nguyên tắc thú vị này được thực hiện vào thế kỷ thứ 19, từ việc Nhà kinh tế người Ý tên là Vilfredo Pareto quan sát vườn đậu nhà mình hàng năm và thấy, khoảng 20% số cây đậu Hà Lan ông trồng trong vườn cho ra đến 80% hạt đậu thu hoạch được. Cùng thời điểm đó, khi nghiên cứu về kinh tế vĩ mô, Pareto lại phát hiện ra rằng 80% của cải và thu nhập của nước Ý được kiểm soát chỉ bởi 20% dân số.\n​</p>\n<p> Bị thu hút bởi phát hiện mới mẻ này, ông bắt đầu nghiên cứu, thống kê ở nhiều nước khác và ngạc nhiên khi thấy sự phân bổ tương tự. Và quy tắc 80/20 này cũng đúng trong hầu hết các lĩnh vực trong cuộc sống.</p>\n<p><img src=\"https://i.ibb.co/gmzMF3W/Hi-nh-2.jpg\" alt=\"80/20\">\n​</p>\n<p>Chúng ta có thể hiểu đơn giản quy tắc này nếu nhìn vào trong các ví dụ sau:\n​</p>\n<p>Ví dụ:\n​</p>\n<blockquote>\n<p>80% lợi nhuận của công ty đến từ 20% khách hàng,\n​\n80% các vấn đề là do 20% nguyên nhân gây ra.\n​\n80% các vụ phạm pháp được gây ra bởi 20% tội phạm,\n​\n80% những người sử dụng phương tiện giao thông gây ra 20% tai nạn,\n​\n20% của các tấm thảm được 80% các bước chân giẫm lên,\n​\nvà 20% các quần áo của bạn được đem ra mặc trong 80% thời gian…\n​\n...vân vân và mây mây\n​</p>\n</blockquote>\n<p>Cụ thể ra một xíu nữa thì theo như quy luật này, chúng ta mất <strong>19.2 giờ</strong> cho những việc không mang lại kết quả, nó là những việc như ngủ, ăn uống, đi lại, giao tiếp, đọc sách, xem phim, nghe nhạc…\n​</p>\n<p>Chúng ta chỉ còn <strong>4,8 giờ</strong> chính thức để làm nên giá trị cuộc sống, nó nói cho chúng ta biết cần quý trọng cái gì, tập trung, đầu tư những gì cho thật hiệu quả....\n​</p>\n<p>Vậy làm thế nào để chúng ta có thể áp dụng được nguyên tắc này trong quản lý thời gian?\n​</p>\n<p>Rất đơn giản, hãy tự hỏi mình:\n<strong>Điều gì là quan trọng nhất? Ưu tiên nhất?</strong>\n​</p>\n<p>Đây là điều quan trọng nhất để chúng ta có thể tối ưu hóa thời gian quý giá của mình. Thay vì vô thức làm những việc thường nhật như một thói quen, đang làm cái này lại quay sang làm cái khác, thử học cách đặt ưu tiên cho <strong>1 hoặc 2</strong> công việc quan trọng nhất, bắt buộc cần làm nhất, và tập trung vào đó. (Hãy nhớ, chỉ 1 hoặc 2, tối đa là 5 thôi nhé)\n​</p>\n<p>Đừng mất thời gian cho những việc không nằm trong mục tiêu của chúng ta. Cân nhắc kỹ lưỡng để sự nỗ lực, thời gian và năng lượng chúng ta bỏ ra để tập trung chủ yếu vào những điều thực sự quan trọng.\n​</p>\n<p><strong>Tương tự trong cuộc sống, cũng chỉ cần tự mình trả lời những câu hỏi kiểu như:</strong>\n​\n<em>Bạn dành 20% thời gian của mình vào việc gì có thể mang lại cho bạn 80% hạnh phúc?</em>\n​\n<em>20% số người giúp bạn cảm thấy 80% hạnh phúc khi ở cạnh họ, vậy họ là ai?</em>\n​\n<em>20% những bộ trang phục nào mà bạn mặc đến 80% thời gian?.....v.v..</em>\n​</p>\n<p>Điều bất ngờ là những câu hỏi này rất dễ để trả lời và bạn không cần phải cân nhắc quá lâu để tìm được đáp án.\n​</p>\n<p>Khi đã xác định được, bạn có thể dễ dàng tập trung vào những điều này để cuộc sống của mình chất lượng hơn. Chẳng hạn, 80% số người bạn dành thời gian kết nối với họ chỉ khiến bạn cảm thấy được 20% hạnh phúc thì tốt nhất là không nên ở cạnh họ quá nhiều. Hay 80% bộ quần áo mà bạn chỉ mặc khoảng 20% thời gian trong cuộc đời thì tốt nhất là hãy bán đi hoặc dành tặng cho những người khác.\n​</p>\n<p>Chúng ta không nhất thiết phải áp dụng cứng nhắc nguyên tắc 80/20 vào cuộc sống. Tuy nhiên, hãy nghĩ về nó như một công cụ và một thấu kính để soi các khía cạnh của cuộc sống. Mục tiêu là để đơn giản hóa cuộc sống và dành thời gian cho những điều quý giá một cách khôn ngoan.\n​</p>\n<p>À nhỏ thêm một cái, thử nghĩ một chút về việc làm thế nào để bản thân mình sẽ trở thành <strong>20% quan trọng</strong> của ai đó, của tập thể nào đó, cũng thú vị mà, phải không?</p>\n<hr>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Hà Lê </div><div class=\"custom-block-body\"></div></div>","id":"5f50cbd3-a737-5024-aa88-bc47ebbdc41a","frontmatter":{"title":"Quy tắc 80/20: Quy luật Thiểu số quan trọng","date":"12-03-2021","tags":["comtor"]},"fields":{"slug":"/quy-tac-80-20-quy-luat-thieu-so-quan-trong/"}}},{"node":{"excerpt":"TOMOSIA của chúng ta với hầu như 100% đối tác là Nhật, vậy tại sao chúng ta không thử  so sánh một chút về phong cách làm việc của hai nước Việt Nam và Nhật Bản. 1. Đúng giờ ​\nNgười Nhật rất nghiêm…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>TOMOSIA của chúng ta với hầu như 100% đối tác là Nhật, vậy tại sao chúng ta không thử  so sánh một chút về phong cách làm việc của hai nước Việt Nam và Nhật Bản.</p></div></div>\n<h3>1. Đúng giờ</h3>\n<p>​\nNgười Nhật rất nghiêm khắc với bản thân về chuyện giờ giấc. Không chỉ đúng giờ trong công việc mà với mọi hình thức trong cuộc sống hàng ngày. Luôn phải đến sớm hơn ít nhất 5~10p là luật bất thành văn ở Nhật, được coi là văn hoá tối thiểu.\n​\nTuy nhiên đối với Việt Nam việc chậm 5~10p được coi là khá bình thường, dường như việc cao su thời gian đã thành thói quen, nếp sống.\n<img src=\"https://drive.google.com/uc?export=view&#x26;id=1xN1Qmpt8VVC9HpRzNVES82Gq2cDiPqe3\" alt=\"Đúng giờ\"></p>\n<h2>2. Mối quan hệ giữa đồng nghiệp</h2>\n<p>Ở nhật rất quan trọng mối quan hệ thứ bậc, văn hoá tiền bối hậu bối. Tiền bối ở đây không hẳn là những người lớn tuổi hơn bạn, mà là người đi trước vào công ty trước bạn. Bạn có thể sẽ ngạc nhiên thấy lạ khi thấy một người lớn tuổi luôn cư xử lễ phép dạ vâng đối với người ít tuổi hơn. Đối với hậu bối phải tôn trọng lắng nghe ý kiến của những người đi trước.\n​\nỞ Việt Nam thì khác đối với quan hệ đồng nghiệp đơn giản thoả mái hơn, không rườm rà, mọi người đều có sự tôn trọng đối với người lớn tuổi hơn, học hỏi các kinh nghiệm của người đi trước tuy nhiên  không phải gò bó khuân phép như ở Nhật nên đối với người trẻ Việt có thể tự do đưa ra ý kiến sáng tạo các phương pháp mới.\n<img src=\"https://drive.google.com/uc?export=view&#x26;id=1SDaWRWfQOAMB0m4ta2rKMaDL6blygz5W\" alt=\"Mối quan hệ giữa đồng nghiệp\"></p>\n<h2>3. Nói giảm, nói tránh</h2>\n<p>Người Nhật luôn có 2 mặt, che giấu cảm xúc thật sự của bản thân,  hạn chế từ chối thẳng thừng cho dù họ không thích không đồng tình thì cũng không từ chối hay phê phán trực tiếp. Họ luôn nói giảm nói tránh để hạn chế tối đa sự tổn thương mất lòng cho đối phương, không thể hiện quá nhiều cảm xúc ra bên ngoài. Ngược lại đối với người Việt Nam thì khá là thẳng thắn, luôn nêu rõ quan điểm của mình.\n​</p>\n<h2>4. Tính tập thể</h2>\n<p>​\nHọc sinh ở Nhật từ mẫu giáo đến cấp 3 đều có đồng phục, trăm người như một để tránh sự phân biệt giữa các học sinh giúp họ bình đẳng với nhau. Họ không thích sự nổi bật giữa đám đông, kể cả khi đi phỏng vấn cũng luôn theo một khuân mẫu chung: mặc vest đen hoặc ghi, đi giày đen, cùng kiểu tóc để  không mất thời gian chú ý ngoại hình lẫn nhau mà tập chung vào năng lực. Trong công ty Nhật luôn đề cao tính tập thể, họ đề cao việc trao đổi, chia sẻ kiến thức và cùng nhau giải quyết vấn đề, họ luôn quan niệm thành công không phải do cá nhân mà do sự cố gắng đoàn kết của cả một tập thể. Luôn đặt lợi ích chung của cả tập thể lên hàng đầu.\n​</p>\n<p>Ngược lại ở Việt Nam vẫn thường mang tính lợi ích cá nhân, ngày nay ở một số công ty cũng đã đề cao tinh thần teamwork trong công việc nhưng vẫn còn hạn chế.\n​</p>\n<h2>5. Lập kế hoạch</h2>\n<p>​\nNgười Nhật không chỉ lập kế hoạch cho công việc mà ngay cả vấn đề đi chơi họ cũng lập kế hoạch đi ngày nào, giờ nào, làm những gì trong thời gian bao lâu. Việc họ lên kế hoạch rõ ràng như vậy sẽ giúp người Nhật quản lí tốt được công việc và thời gian một cách dễ dàng. Tuy nhiên, khi có một sự thay đổi nào gấp gáp và những công việc không có thời hạn kết thúc thì họ lại bị lúng túng và khó khăn trong việc sắp xếp lại công việc.\n​</p>\n<p>Ngược lại với người Nhật thì người Việt khá tốt trong việc thích ứng với sự thay đổi đột ngột và giải quyết những công việc không có thời hạn cụ thể. Thế nhưng, người Việt lại thường thực hiện công việc vào sát deadline, không có kế hoạch trước hoặc có nhưng lại không tuân thủ theo tiến độ.\n​</p>\n<p>Ví dụ: Nếu có một công việc đề ra trong vòng 2 tuần thì người Nhật sẽ cố gắng hoàn thành kế hoạch trong vòng 1 tuần đầu và tuần  còn lại là khoảng thời gian xem xét và chỉnh sửa, hoàn thành công việc. Còn người Việt sẽ không cố gắng hoàn thành kế hoạch trong vòng 1 tuần đầu mà sẽ kéo dài cố gắng hoàn thành trong tuần  thứ 2.<br>\nMỗi nước có một văn hoá riêng có ưu điểm và nhược điểm khác nhau. Chúng ta cùng học hỏi điểm tốt khắc phục những điểm hạn chế để cùng nhau phát triển.\n​</p>\n<p>Trên đây là những so sánh mang tính cá nhân của bản thân bằng kinh nghiệm ít ỏi sống ở Nhật rất mong nhận được sự góp ý của mọi người.</p>\n<hr>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Quyên Đỗ </div><div class=\"custom-block-body\"></div></div>","id":"47a32e9e-a2d2-5d6c-9e3d-297dbe6a86f5","frontmatter":{"title":"Sự khác biệt trong văn hoá làm việc giữa Việt Nam và Nhật Bản","date":"12-03-2021","tags":["comtor"]},"fields":{"slug":"/su-khac-biet-trong-van-hoa-lam-viec-giua-viet-nam-va-nhat-ban/"}}},{"node":{"excerpt":"Ở phần 1, chúng ta đã tìm hiểu về Graph Facebook API và cách đăng ký ứng dụng. Ở bài viết hôm nay mình sẽ giới thiệu cho các bạn về các câu lệnh cơ bản dùng để lấy thông tin của một  hoặc là các bài…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Ở phần 1, chúng ta đã tìm hiểu về Graph Facebook API và cách đăng ký ứng dụng. Ở bài viết hôm nay mình sẽ giới thiệu cho các bạn về các câu lệnh cơ bản dùng để lấy thông tin của một <code class=\"language-text\">Instagrammer</code> hoặc là các bài viết của <code class=\"language-text\">Instagrammer</code>,... :D. Nếu các bạn chưa theo dõi phần 1, hãy đọc phần <strong>tóm tắt nội dung phần 1</strong> của mình ở dưới.</p></div></div>\n<h3>Tóm tắt nội dung phần I?</h3>\n<p>Ở phần thứ nhất, mình đã hướng dẫn cách để tạo ra ứng dụng và test ở trên trang <a href=\"https://developers.facebook.com/\">Facebook Develop</a> như hình bên dưới.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d31acee4f74e1b2451df197e50ebc42a/29114/images-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABz0lEQVQoz22RTW/TQBCG/QuhKqIIpKJQCcSlEf+ACyeiigvcOPfGEX4CPSGhtBc+hFKlCUmxd+31ftjetV9mFrsygbUezWpG88743WTyZIqjp89wcPgYdx4cRfZ7+L53b4Jbdw8jtw8eYv/+I2ISef5ihtmbtzh59RovZyeYHk+RlMbBVjWMq1H7AB9aooP3LRrf33sC0yLSdR3Gx1Du7LtDUtc1FVtUdUCaSWRSIFUZMiUgyxyilBDxLiOijxupcXGp8GVl8G2t8XmhMb80SIZJbdtCCInF1QqL7RpSFVBaozAGhbVQPQXlrNM4J7HTM4X3c4cPc4t3nyw+ftVIWKzjj1Zepxua+AOiULDWkQ0VjBCwqyXsZh0ximpkj8xLhKrkVYgQY+er0Ybkz89si2V6BU2baEOwqCpJNIMhK4yU0LQhD8ppaCpy8rO78Z3f4kbQh4Dr6xTb7BeWYkU+FTAkyKKaBAZijoZZ5+AIzw9JBOp3rvpbMG5FlOQbR242HPv8kOPYNB67p/H+j4d8eEIU6NE7Iru1umliHy80LMVDkiHhSZ19UaX+R6zUBhn5xXVG5AUq8mssyDQ0JHG9F4yhX7X0IP+Da2M4N+4d+A0NJDFiwuZCiQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-1.png\"\n        title=\"images-1.png\"\n        src=\"/static/d31acee4f74e1b2451df197e50ebc42a/8c557/images-1.png\"\n        srcset=\"/static/d31acee4f74e1b2451df197e50ebc42a/4edbd/images-1.png 175w,\n/static/d31acee4f74e1b2451df197e50ebc42a/13ae7/images-1.png 350w,\n/static/d31acee4f74e1b2451df197e50ebc42a/8c557/images-1.png 700w,\n/static/d31acee4f74e1b2451df197e50ebc42a/e996b/images-1.png 1050w,\n/static/d31acee4f74e1b2451df197e50ebc42a/2cefc/images-1.png 1400w,\n/static/d31acee4f74e1b2451df197e50ebc42a/29114/images-1.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Nếu mọi người chưa theo dõi phần 1, các bạn có thể đọc lại <a href=\"https://blog.tomosia.com/facebook-graph-facebook-api-phan-1/\">tại đây</a>.</p>\n<h3>Hướng dẫn lấy thông tin người dùng Instagrammer thông qua graph Facebook API</h3>\n<p>Sau khi đã đăng ký app thành công như trên, chúng ta tiến hành lấy thông tin của người dùng theo các bước sau.</p>\n<ol>\n<li><strong>Truy cập trang <a href=\"https://developers.facebook.com/tools/explorer\">Facebook Developer</a>.</strong></li>\n</ol>\n<p>  Đây là công cụ của Facebook phát triển để chúng ta có thể kiểm tra các lệnh gọi API. Các bạn cũng có thể kiểm tra các lệnh gọi API của Facebook bằng <strong>Postman</strong>.</p>\n<ol start=\"2\">\n<li><strong>Tiến hành nhấn vào đăng ký quyền (permissions) cho app của mình.</strong></li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3299218e5f45045bb09c9ce577fa37c4/73a2e/images-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABvUlEQVQoz42Sz27aQBDG/TA0ARpCq/AnFRx6aoVaNYdecurz9BoTAuSYSy6V2lNOFe0DAFXEA1RBFSDVNvaatc167a+zRuZPJaKs9NOsVjPffqMZrVKpoVypo3paQ6n8Ci9PSigUXyCTyeHZQR6H2aMkZrMF5PLHyD8v0lsB9fprND6co/HxE969P8PbNw1UqzVoV1dttNsddLvXCa1WC7qu4+JCT6KuN9FsNpHmdTrd5K3X+4H7+xH6/QGGw18YDIb4cnsDTUYRRCihThTFiGM8+URSUk2U3G0e4esI0EISC8MwweUBHOZiwT2C/4e3xl1weD7luhy248IPBBhfYvzXh7b9Y0g/bhfugy08SOHj25Dj852N7k+Gy++MogstjlWbqz6VS1XAPf9RVI5y+HtiESYMx4ftSVhcrhymguIJgolLdadojv+Az6aQtgU5NxFaxq7gtsNH2yZ3nu3AeHiAaZjUvkCsBkRxb8vbAjsu14I2zMkEM8OgYfL1HHaHEsqNYEoy1RS+Qgk7DM54DDaZQlgWxJwwTdpDspqyXAosqIC57gZaozm1Z5NAGhVqvbgSZwyB70MEAZbk/B9iJxM9Y4/UCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-2.png\"\n        title=\"images-2.png\"\n        src=\"/static/3299218e5f45045bb09c9ce577fa37c4/8c557/images-2.png\"\n        srcset=\"/static/3299218e5f45045bb09c9ce577fa37c4/4edbd/images-2.png 175w,\n/static/3299218e5f45045bb09c9ce577fa37c4/13ae7/images-2.png 350w,\n/static/3299218e5f45045bb09c9ce577fa37c4/8c557/images-2.png 700w,\n/static/3299218e5f45045bb09c9ce577fa37c4/e996b/images-2.png 1050w,\n/static/3299218e5f45045bb09c9ce577fa37c4/2cefc/images-2.png 1400w,\n/static/3299218e5f45045bb09c9ce577fa37c4/73a2e/images-2.png 1439w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>  <strong>Lưu ý</strong>: Sau khi chọn quyền xong, chúng ta bắt buộc phải <strong>generate access token</strong> để cập nhật lại <strong>access_token</strong> mới.</p>\n<ol start=\"3\">\n<li><strong>Lấy thông tin của người dùng.</strong></li>\n</ol>\n<p>  Để lấy được thông tin của người dùng, thông thường chúng ta sẽ cần Instagrammer đăng nhập Facebook qua ứng dụng của mình. Nhưng ở đây mình có thêm một cách khác để có thể lấy thông tin của Instagrammer mà không cần phải trải qua các bước <strong>Authentication</strong> đó là lấy thông qua <a href=\"https://developers.facebook.com/docs/instagram-api/guides/business-discovery/\">Bussiness discovery</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">curl -i -X GET \\\n  &quot;https://graph.facebook.com/v3.2/17841437428736936?fields=business_discovery.username(manchesterunited){followers_count,media_count}&amp;access_token={access-token}&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>  Trong đó:</p>\n<ul>\n<li><code class=\"language-text\">17841437428736936</code>: Là instagram user id của mình liên kết với trang Facebook ở phần 1.</li>\n<li><code class=\"language-text\">manchesterunited</code>: Ở đây là username của Instagrammer.</li>\n<li><code class=\"language-text\">followers_count, media_count,...</code>: Đây là các fields dùng để lấy thông tin của Instagrammers.</li>\n</ul>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14adc4a0418f5db883b20e70373715a9/73a2e/images-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQoz41Sy27TQBT197S0oa9AqWBVIbVCLNgh8UOJQ+OEBUKIHWLJkk1YIJSqEUuQEBIqWLRJaxw/Z/wcO4c7Y5s+2DDS0fVc3zlz5p6rtds72Grfxa3bFLe2sbaxidbNdSwttbC83MKNlTWF1dYG5TcVVlbXcWfnHvYePsbeoyfY33+A3d37xLMNzTAGGAyeYTAcUhzi6cEBurqOTqeLbldX0PUe+n0DfcOArNd7PYxG7zGZfMLh+BBHRxOMx2O8fvUcWpbniJMUZblAIVEUaFa5qPYXKCFEofKLBnWtFZZ4+xnQzFMLlvUbSZqCRymms3OYJ1OcTM/gOA4Y5wgZB5PgFzEhEWH9LYQAi3OYdgrN83wiitRtZVnip/kLX75+g3n8HednM7gBh1fD9ZmKc4+BE9GbCUfnnY8XH0IMRgFefmTQcGnl9HwvCCsCn4PHCV0Wg10Hj9W/H6cOzJkD24/hcQGX5dCaXihCkh5RYZxUiOiw3P8LmU+pJT7iiKOk/paFQCHySuFlQqnofyCNtO05XM+rDap4rigUtcIGvFao1F5TKU1xXJcMtegl0d+2Xe0hEQYhU+41ZDL61Fc/qPJByFUN41EVKSdHSkjQSGnNjEmHsywjMwJ6hk+HGwIGe+5g7rgq77iegqyLqZeciLMsJ0OFin8AuA0Pe/d8H0wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-3.png\"\n        title=\"images-3.png\"\n        src=\"/static/14adc4a0418f5db883b20e70373715a9/8c557/images-3.png\"\n        srcset=\"/static/14adc4a0418f5db883b20e70373715a9/4edbd/images-3.png 175w,\n/static/14adc4a0418f5db883b20e70373715a9/13ae7/images-3.png 350w,\n/static/14adc4a0418f5db883b20e70373715a9/8c557/images-3.png 700w,\n/static/14adc4a0418f5db883b20e70373715a9/e996b/images-3.png 1050w,\n/static/14adc4a0418f5db883b20e70373715a9/2cefc/images-3.png 1400w,\n/static/14adc4a0418f5db883b20e70373715a9/73a2e/images-3.png 1439w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"4\">\n<li><strong>Lấy thông tin bài viết của người dùng Instagram.</strong></li>\n</ol>\n<p>  Ở phần này sẽ tương tự như phần lấy thông tin của người dùng. Ở đây mình vẫn sẽ dùng <a href=\"https://developers.facebook.com/docs/instagram-api/guides/business-discovery/\">Bussiness discovery</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">curl -i -X GET \\\n  &quot;https://graph.facebook.com/v3.2/17841437428736936?fields=business_discovery.username(manchesterunited){media{id,caption,like_count,comments_count,media_type}}&amp;access_token={access-token}&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fea79190a0b15e4bd146dbbaa211847/07a9c/images-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACH0lEQVQoz2WSy27TQBSG/TwUmpa2BApiCwUEGxbs+jrsEpQLsGPDCgmJDZuwYEuLKGKJiJqbHduxZ2zPTGI7dn7OTGKIYKRvzmjm6Mx/Lla9fhtHN+6gfpPs0S3sHxyitrePKzs1w7Xd69i5uofd2gHdHxr03fHxXZw8foYHT0/x8NET3L93YmJY7XYH7U4X3e5LQ6vVQqPZRKPxl2bzBYwf0SHfJr33ej18u/iOsy9nOD//anj39g2s5bJAmuVYrYCyXKEoSnNe0VaWJQpNURjKzVm/6VXdkTe4KvD+B2D1BzYcZ4rFYgE5z2A7LqZTF1EUQ8k5hFAb5NZZkX+KhGySSGT5EnKRYxSksLRjmqbmV/2jF/oY2ROMPQ9Dfwqf+/BYAJZEBAcTEcKII08VPlwoPP8Y4/VngdanBK/IWthaWZ7DZg5+Dn/hctiH507AKYiQAlLNt1grvJww9Mcz+lSByxyhyGFpZVVNdD0lpTl1fQwmLhzfRyIpVQqQUNA18s9dyKgsSlIdqZbFkjL8J2BOCn0+w2A8wmA4hu854CJGRHBKWROJxNhECQRhiDBkpjFVI/9TKKTCeOJgSDi+h1gIo0anqm2Fmi/AGIfruqZh1bKqYJVCN/RgUzPsmYOAk4KYw2ez9ZmaEUYMAcFiUqk/o2DLzVhpa23PWJZlYJy6yDniJNmMikQQMIN5Y9RtgnOq35xUSz0lmRGT0Tz/Bi9kDR7UfNX9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-4.png\"\n        title=\"images-4.png\"\n        src=\"/static/8fea79190a0b15e4bd146dbbaa211847/8c557/images-4.png\"\n        srcset=\"/static/8fea79190a0b15e4bd146dbbaa211847/4edbd/images-4.png 175w,\n/static/8fea79190a0b15e4bd146dbbaa211847/13ae7/images-4.png 350w,\n/static/8fea79190a0b15e4bd146dbbaa211847/8c557/images-4.png 700w,\n/static/8fea79190a0b15e4bd146dbbaa211847/e996b/images-4.png 1050w,\n/static/8fea79190a0b15e4bd146dbbaa211847/2cefc/images-4.png 1400w,\n/static/8fea79190a0b15e4bd146dbbaa211847/07a9c/images-4.png 1440w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Như vậy trong bài viêt này, mình đã hướng dẫn các bạn có thể lấy được thông tin cơ bản của một Instagrammer và các bài viết của Instagrammer. Lưu ý là chúng ta sẽ chỉ lấy được tài những tài khoản <code class=\"language-text\">Kinh Doanh</code> hoặc <code class=\"language-text\">Creator</code> mà thôi. Các tài khoản <code class=\"language-text\">Cá Nhân</code> hoặc <code class=\"language-text\">private</code> thì sẽ không thể lấy được.</p>\n<p>Ngoài ra còn rất nhiều thứ để các bạn có thể lấy thông tin của Instagrammer như Story, Insight, Hashtag,...</p>\n<p>Cảm ơn tất cả các bạn đã theo dõi bài viết của mình, nếu có gì khó hiểu, sai hoặc thiếu mong các bạn có thể góp ý. Hi vọng bài viết này sẽ giúp ích cho các bạn.</p>\n<h3>References:</h3>\n<ul>\n<li><a href=\"https://developers.facebook.com/docs/instagram-api/getting-started\">https://developers.facebook.com/docs/instagram-api/getting-started</a></li>\n<li><a href=\"https://developers.facebook.com/docs/instagram-api\">https://developers.facebook.com/docs/instagram-api</a></li>\n<li><a href=\"https://developers.facebook.com/docs/instagram-api/reference/ig-media/\">https://developers.facebook.com/docs/instagram-api/reference/ig-media/</a></li>\n<li><a href=\"https://developers.facebook.com/docs/instagram-api/reference/ig-user\">https://developers.facebook.com/docs/instagram-api/reference/ig-user</a></li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Thuan Nguyen </div><div class=\"custom-block-body\"></div></div>","id":"7c67931c-7f78-5979-88d5-4bbfc0419cf1","frontmatter":{"title":"[Facebook SDK] Lấy dữ liệu Instagramer thông qua GraphQL - Phần 2","date":"09-03-2021","tags":["facebook","instagram"]},"fields":{"slug":"/facebook-sdk-2/"}}},{"node":{"excerpt":"MessageKit Là Gì ?    MessageKit là một thư viện mã nguồn mở dùng để tạo ra màn hình chat với chuẩn về UI/UX. Github: MessageKit Cấu trúc của MessageKit Cấu trúc của Cell.\nMessageKit chia làm hai loại…","html":"<h1>MessageKit Là Gì ?</h1>\n<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>   <strong>MessageKit</strong> là một thư viện mã nguồn mở dùng để tạo ra màn hình chat với chuẩn về UI/UX.</p></div></div>\n<p>Github: <a href=\"https://github.com/MessageKit/MessageKit\">MessageKit</a></p>\n<h3>Cấu trúc của MessageKit</h3>\n<ol>\n<li>\n<p>Cấu trúc của Cell.\nMessageKit chia làm hai loại Cell đó là mặc định và custom. Cell mặc định đó là những Cell do MessageKit cung cấp cho chúng ta, chúng kế thừa từ class <strong>MessageContentCell</strong>. Cell custom là những Cell mà ta tự custom, chúng kế thừa từ class <strong>UICollectionViewCell</strong>.</p>\n<p>Với Cell mặc định còn chia thành nhiều loại khác nhau gồm: TextMessageCell, MediaMessageCell, LocationMessageCell, AudioMessageCell, ContactMessageCell, LinkPreviewMessageCell.</p>\n<p>Hãy xem kiểu MessageKind được define trong MessageKit như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token builtin\">MessageKind</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// TextMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">attributedText</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">NSAttributedString</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// TextMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">photo</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">MediaItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// MediaMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">video</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">MediaItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// MediaMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">location</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">LocationItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// LocationMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">emoji</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// TextMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">audio</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">AudioItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// AudioMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">contact</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">ContactItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ContactMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">linkPreview</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">LinkItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// LinkPreviewMessageCell</span>\n\n<span class=\"token comment\">/// A custom message.</span>\n<span class=\"token comment\">/// - Note: Using this case requires that you implement the following methods and handle this case:</span>\n<span class=\"token comment\">///   - MessagesDataSource: customCell(for message: MessageType, at indexPath: IndexPath, in messagesCollectionView: MessagesCollectionView) -> UICollectionViewCell</span>\n<span class=\"token comment\">///   - MessagesLayoutDelegate: customCellSizeCalculator(for message: MessageType, at indexPath: IndexPath, in messagesCollectionView: MessagesCollectionView) -> CellSizeCalculator</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">custom</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Any</span><span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tất cả những Cell mặc định trên đều sẽ kế thừa từ MessageContentCell nên nó đều có cấu trúc giống như sau:\n<img src=\"https://raw.githubusercontent.com/MessageKit/MessageKit/master/Assets/CellStructure.png\" alt=\"MessageContentCell\">\nNó chia làm 7 phần, lần lượt từ dưới xuống đó là: cellTopLabel, messageTopLabel, messageContainerView, messageBottomLabel, cellBottomLabel và hai phần đặc biệt đó là avatarView, accessoryView.</p>\n</li>\n<li>\n<p>Cấu trúc của MessageInputBar.\nMessageInputBar là class được MessageKit tích hợp từ thư viện <a href=\"https://github.com/nathantannar4/InputBarAccessoryView\">InputBarAccessoryView</a>. MessageInputBar có cấu trúc như sau:\n<img src=\"https://raw.githubusercontent.com/MessageKit/MessageKit/master/Assets/InputBarAccessoryViewLayout.png\" alt=\"MessageInputBar\">\nVới cấu trúc như trên thì nó rất dễ để customize như thay đổi size, thêm các button.</p>\n<h3>Demo</h3>\n<p>Tới đây chúng ta sẽ cùng implement một màn hình Chat đơn giản với MessageKit.\nĐầu tiên, cần khởi tạo project với XCode và pod install với lệnh sau được thêm vào file Podfile.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pod &#39;MessageKit&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Vì MessageKit đã tích hợp sẵn với InputBarAccessoryView nên ta không cần phải install InputBarAccessoryView nữa.\nProject của chúng ta sẽ như thế này sau khi khởi tạo:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/c2d13/start_project.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACCUlEQVQoz32S22vUQBTG87eYy2RmksllMrlsuttdLRYqRa3Yxa5YfFBBainoi4gXVBB99+/9PCfZ1d0Kffg4mcnMb75z8craYb6Yoa4bSKlIGqZsUTU9bFnAZKxykNIGOskRhBJ+IBAJhVt+gDCK4NO3H0bwrGuxenqOe8cnSAxfKlCUHbKiobUjgIVUBWKZUcwp5sOaz/FeSKBQSILGiGIFL6GXHz5eYnHncABqutS5GTLbIy86GIIyaFcbuBlhW/ImE4ujo7tQSUYykDqDzRo0bo7CTZGailyWfx1tJMmpiA2C6BrQUu26roNO6WBukWSOwCXitQsGqTVQ6mInxvSfgX4oBg1AqVJyYEZg4RDzZTXW6f9Ut7WpoURKjUtMPgI51dRQurQR1TOItKJ0zPD6dorXxVBOOSSHgiaDtQYaJCk7pPpRg2JNr/OlG9z96/hYw4A6zBqAnC471ElKddHDoZtT3QUH62aMUXENNTSBpFJ0gOwLTQPL42CGyBJ0UcQZzdk68p5ISQmlLMjdKP72bDtHOz2AmyzQ9LeR2j3YqsXEVahcDVc5lGmJIi9hC4ucYm1r2HoPisbLpwcCGqGAG6RLeNNnP9GffUO/+o7+yVfsP/+FNxcX+P3pBd6+v8K7V0uc7x9ief8Ar1cnOH70AJcvL7G6+ojp2Qc0p1/QLkmnn4nxA38A0jt6IouHQ/IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Start project\"\n        title=\"Start project\"\n        src=\"/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/8c557/start_project.png\"\n        srcset=\"/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/4edbd/start_project.png 175w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/13ae7/start_project.png 350w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/8c557/start_project.png 700w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/e996b/start_project.png 1050w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/2cefc/start_project.png 1400w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/c2d13/start_project.png 2560w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nMessageKit cung cấp cho chúng ta một UIViewController là MessagesViewController, đây là class đã cung cấp sẵn một UICollectionView, và các thuộc tính và phương thức tiện ích để xử lý keyboard, show thời gian khi swipe, ... Có một vấn đề là do Swift không hỗ trợ đa kế thừa nên không thể dùng ViewController kế thừa trực tiếp MessagesViewController được vì ViewController cần phải kế thừa BaseVC. Cho nên chúng ta cần tạo ra một class là MessageController cho việc kế thừa MessagesViewController và sẽ add MessageController vào trong ViewController.\nMessageController sau khi khởi tạo như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">MessageKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>class MessageController: MessagesViewController {\nweak var viewController: ViewController?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">override func viewDidLoad() {\n    super.viewDidLoad()\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Add MessageController vào ViewController:\n```swift\nimport MessageKit\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    private lazy var messageController: MessageController = {\n        let vc = MessageController()\n        vc.viewController = self\n        return vc\n    }()\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        addChild(messageController)\n        messageController.view.autoresizingMask = [.flexibleWidth, .flexibleHeight]\n        messageController.view.frame = view.bounds\n        view.addSubview(messageController.view)\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó ở MessageCollectionView, ta cần config MessageCollectionView và config MessageInputBar.\nConfig MessageCollectionView thì dùng hàm sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">func</span> <span class=\"token function\">configureMessageCollectionView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messagesDataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messageCellDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messagesLayoutDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messagesDisplayDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        scrollsToLastItemOnKeyboardBeginsEditing <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// default false</span>\n        maintainPositionOnKeyboardFrameChanged <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// default false</span>\n        showMessageTimestampOnSwipeLeft <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// default false</span>\n        \n        <span class=\"token comment\">// Với những Cell của message do currentUser gửi thì sẽ không hiển thị avatar</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> layout <span class=\"token operator\">=</span> messagesCollectionView<span class=\"token punctuation\">.</span>collectionViewLayout <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">MessagesCollectionViewFlowLayout</span> <span class=\"token punctuation\">{</span>\n            layout<span class=\"token punctuation\">.</span>textMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingAvatarSize <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>zero\n            layout<span class=\"token punctuation\">.</span>textMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingMessageBottomLabelAlignment<span class=\"token punctuation\">.</span>textInsets<span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n            layout<span class=\"token punctuation\">.</span>photoMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingAvatarSize <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>zero\n            layout<span class=\"token punctuation\">.</span>photoMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingMessageBottomLabelAlignment<span class=\"token punctuation\">.</span>textInsets<span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Về MessageInputBar thì có thể dùng luôn biến messageInputBar được define sẵn trong class MessagesViewController hoặc dùng một input bar tự custom khác. Ở đây, mình dùng một MessageInputBar tự custom như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">InputBarAccessoryView</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">protocol</span> <span class=\"token builtin\">SlackInputBarDelegate</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">slackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapCameraButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">slackinputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapLibraryButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SlackInputBar</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarAccessoryView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> slackDelegate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBarDelegate</span><span class=\"token operator\">?</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder aDecoder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fatalError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"init(coder:) has not been implemented\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">func</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token function\">makeButton</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ic_camera\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>onTextViewDidChange <span class=\"token punctuation\">{</span> button<span class=\"token punctuation\">,</span> textView <span class=\"token keyword\">in</span>\n                button<span class=\"token punctuation\">.</span>isEnabled <span class=\"token operator\">=</span> textView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token builtin\">isEmpty</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> item <span class=\"token keyword\">in</span>\n                <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> <span class=\"token keyword\">self</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n                item<span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>slackDelegate<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">slackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> didTapCameraButton<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">.</span>flexibleSpace<span class=\"token punctuation\">,</span>\n            <span class=\"token function\">makeButton</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ic_library\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> item <span class=\"token keyword\">in</span>\n                    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> <span class=\"token keyword\">self</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n                    item<span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n                    <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>slackDelegate<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">slackinputBar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> didTapLibraryButton<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            sendButton\n                <span class=\"token punctuation\">.</span>configure <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>cornerRadius <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderWidth <span class=\"token operator\">=</span> <span class=\"token number\">1.5</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderColor <span class=\"token operator\">=</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">titleColor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>cgColor\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setTitleColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>normal<span class=\"token punctuation\">)</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setTitleColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>highlighted<span class=\"token punctuation\">)</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">52</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onDisabled <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderColor <span class=\"token operator\">=</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">titleColor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>cgColor\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>clear\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onEnabled <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderColor <span class=\"token operator\">=</span> <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">.</span>cgColor\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// We use a transform because changing the size would cause the other views to relayout</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token function\">CGAffineTransform</span><span class=\"token punctuation\">(</span>scaleX<span class=\"token punctuation\">:</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onDeselected <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token builtin\">CGAffineTransform</span><span class=\"token punctuation\">.</span>identity\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n        items<span class=\"token punctuation\">.</span>forEach <span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>lightGray <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// We can change the container insets if we want</span>\n        inputTextView<span class=\"token punctuation\">.</span>textContainerInset <span class=\"token operator\">=</span> <span class=\"token function\">UIEdgeInsets</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        inputTextView<span class=\"token punctuation\">.</span>placeholderLabelInsets <span class=\"token operator\">=</span> <span class=\"token function\">UIEdgeInsets</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">let</span> maxSizeItem <span class=\"token operator\">=</span> <span class=\"token function\">InputBarButtonItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span>configure <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"icons8-expand\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>darkGray\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">let</span> oldValue <span class=\"token operator\">=</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>inputBarAccessoryView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>shouldForceTextViewMaxHeight <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token boolean\">false</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> oldValue <span class=\"token operator\">?</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"icons8-expand\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"icons8-collapse\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">setShouldForceMaxTextViewHeight</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>oldValue<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        rightStackView<span class=\"token punctuation\">.</span>alignment <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>top\n        <span class=\"token function\">setStackViewItems</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>maxSizeItem<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> forStack<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setRightStackViewWidthConstant</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// Finally set the items</span>\n        <span class=\"token function\">setStackViewItems</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">,</span> forStack<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n        shouldAnimateTextDidChangeLayout <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">makeButton</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">InputBarButtonItem</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">InputBarButtonItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span>configure <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>spacing <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token function\">fixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> named<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onDeselected <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>lightGray\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó ta tạo một instance của SlackInputBar ở MessageController và setup cho nó như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">lazy</span> <span class=\"token keyword\">var</span> slackInputBar <span class=\"token operator\">=</span> <span class=\"token function\">SlackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">configureMessageInputBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    slackInputBar<span class=\"token punctuation\">.</span>slackDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n    slackInputBar<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để hiển thị được SlackInputBar thì cần setup như sau ở ViewController:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> inputAccessoryView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIView</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> messageVC<span class=\"token punctuation\">.</span>slackInputBar\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> canBecomeFirstResponder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Lúc này, khi run app, ta có thể nhận được màn hình màn Chat như sau:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/051dda9f8c50212623256c3c77ab3983/8efc2/chat_init.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.57142857142856%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAAsSAAALEgHS3X78AAABeElEQVRIx+1X246CQAyd//8m133SRGT/QRGM4oKsMNyh21N3yEp0DYkP+zBNTjrTaU9beGlVkef0lSQU+D7FcURlUVCuNcEOfQ/mDTq9XCQ2CHyxqaosKTweae045G23VFfVEAjypq7FZjBOGEcRfbguOasVFSDEA5y6tuWAcnCGLTmfaed5kvBwONA+CMSGN/j8jm2bRu4KBDrLKEtT0bnORKNyf7ejt9lMsr/P5+Su19IFSOBjgFgg57NqmBltDWiAhmo+d11HkL7vBRDppL76XH1vYxU9EUM0Pj8SZbK/Ck8rnCqW0BJaQktoCS2hJbSEEwj/7WwzEL6qsqFlDJUwQE9BizGYYe5mCBXCgkfcqe2NzymPxOARwpLn6fG3eNZexRsBAEGlOEMrMC+XSwrD8CajaWvcKtqCeLwduLxOdF1Pp9MnRVHMVf4M7QkvPvgG4wH9L0F7cRyLr9Y5QwuHuvfrTQWofMUrhYHDy9FisaDNZvMw0TeHiUlsF/s+pAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ViewController\"\n        title=\"ViewController\"\n        src=\"/static/051dda9f8c50212623256c3c77ab3983/8c557/chat_init.png\"\n        srcset=\"/static/051dda9f8c50212623256c3c77ab3983/4edbd/chat_init.png 175w,\n/static/051dda9f8c50212623256c3c77ab3983/13ae7/chat_init.png 350w,\n/static/051dda9f8c50212623256c3c77ab3983/8c557/chat_init.png 700w,\n/static/051dda9f8c50212623256c3c77ab3983/8efc2/chat_init.png 828w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nTiếp theo, ta sẽ cần implement phần Chat, ta làm phần này trên class MessageController. Tuy nhiên trước tiên cần phải implement hai model là User và Message.\n<strong>User</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">MessageKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token builtin\">User</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> senderId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> displayName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Message</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">MessageKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">struct</span> <span class=\"token builtin\">ImageMediaItem</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">MediaItem</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> url<span class=\"token punctuation\">:</span> <span class=\"token constant\">URL</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> image<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> placeholderImage<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span>\n    <span class=\"token keyword\">var</span> size<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> image\n        size <span class=\"token operator\">=</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span>\n        placeholderImage <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>imageURL<span class=\"token punctuation\">:</span> <span class=\"token constant\">URL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        url <span class=\"token operator\">=</span> imageURL\n        size <span class=\"token operator\">=</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span>\n        placeholderImage <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>imageLiteralResourceName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"image_message_placeholder\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token builtin\">Message</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span>\n    <span class=\"token keyword\">var</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span>\n    <span class=\"token keyword\">var</span> kind<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageKind</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span><span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageKind</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>sender <span class=\"token operator\">=</span> sender\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>messageId <span class=\"token operator\">=</span> messageId\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>sentDate <span class=\"token operator\">=</span> sentDate\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>kind <span class=\"token operator\">=</span> kind\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span><span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> sender<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> messageId<span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> sentDate<span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span><span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> mediaItem <span class=\"token operator\">=</span> <span class=\"token function\">ImageMediaItem</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> sender<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> messageId<span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> sentDate<span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">photo</span><span class=\"token punctuation\">(</span>mediaItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở MessageController ta cần implement những protocol sau:  MessagesDataSource, MessageCellDelegate, InputBarAccessoryViewDelegate, MessagesDisplayDelegate, MessagesLayoutDelegate, SlackInputBarDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate.\nMessagesDataSource cung cấp những phương thức để truyền data vào cho các Cell. Ví dụ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - MessagesDataSource</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">currentSender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">SenderType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> currentUser\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">messageForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> messagesCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessagesCollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">MessageType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> messageList<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>section<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">numberOfSections</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> messagesCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessagesCollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>MessagesDisplayDelegate cung cấp những phương thức để custom hiển thị của một Cell. Ví dụ như sau, ta custom việc hiển thị của AvatarView:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - MessagesDisplayDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">configureAvatarView</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> avatarView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">AvatarView</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span> message<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageType</span><span class=\"token punctuation\">,</span> at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> messagesCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessagesCollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>senderId <span class=\"token operator\">==</span> <span class=\"token function\">currentSender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>senderId <span class=\"token punctuation\">{</span>\n        avatarView<span class=\"token punctuation\">.</span>isHidden <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        avatarView<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>red\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>InputBarAccessoryViewDelegate cung cấp những phương thức cho việc xử lý các tương tác của người dùng với MessageInputBar như tap send button, ... Dưới đây là việc xử lý gửi một tin nhắn do người dùng nhập từ bàn phím và bấm vào nút Send.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - InputBarAccessoryViewDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">inputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> inputBar<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarAccessoryView</span><span class=\"token punctuation\">,</span> didPressSendButtonWith text<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">processInputBar</span><span class=\"token punctuation\">(</span>slackInputBar<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">processInputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> inputBar<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarAccessoryView</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Here we can parse for which substrings were autocompleted</span>\n    <span class=\"token keyword\">let</span> attributedText <span class=\"token operator\">=</span> inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>attributedText<span class=\"token operator\">!</span>\n    <span class=\"token keyword\">let</span> range <span class=\"token operator\">=</span> <span class=\"token function\">NSRange</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">:</span> attributedText<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n    attributedText<span class=\"token punctuation\">.</span><span class=\"token function\">enumerateAttribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>autocompleted<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> range<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">_</span><span class=\"token punctuation\">,</span> range<span class=\"token punctuation\">,</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span>\n\n        <span class=\"token keyword\">let</span> substring <span class=\"token operator\">=</span> attributedText<span class=\"token punctuation\">.</span><span class=\"token function\">attributedSubstring</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">:</span> range<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> substring<span class=\"token punctuation\">.</span><span class=\"token function\">attribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>autocompletedContext<span class=\"token punctuation\">,</span> at<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> effectiveRange<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Autocompleted: `\"</span><span class=\"token punctuation\">,</span> substring<span class=\"token punctuation\">,</span> <span class=\"token string\">\"` with context: \"</span><span class=\"token punctuation\">,</span> context <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">let</span> components <span class=\"token operator\">=</span> inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>components\n    inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    inputBar<span class=\"token punctuation\">.</span><span class=\"token function\">invalidatePlugins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Send button activity animation</span>\n    inputBar<span class=\"token punctuation\">.</span>sendButton<span class=\"token punctuation\">.</span><span class=\"token function\">startAnimating</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>placeholder <span class=\"token operator\">=</span> <span class=\"token string\">\"Sending...\"</span>\n    <span class=\"token comment\">// Resign first responder for iPad split view</span>\n    inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span><span class=\"token function\">resignFirstResponder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">DispatchQueue</span><span class=\"token punctuation\">.</span><span class=\"token function\">global</span><span class=\"token punctuation\">(</span>qos<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>async <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// fake send request task</span>\n        <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">DispatchQueue</span><span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>async <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span>\n            inputBar<span class=\"token punctuation\">.</span>sendButton<span class=\"token punctuation\">.</span><span class=\"token function\">stopAnimating</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>placeholder <span class=\"token operator\">=</span> <span class=\"token string\">\"Aa\"</span>\n            <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">insertMessages</span><span class=\"token punctuation\">(</span>components<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">scrollToLastItem</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">insertMessages</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Any</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> object <span class=\"token keyword\">in</span> data <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> text <span class=\"token operator\">=</span> object <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">String</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token function\">Message</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> currentUser<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> text<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> image <span class=\"token operator\">=</span> object <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">UIImage</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token function\">Message</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> currentUser<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> message<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Message</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    messageList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Reload last section to update header/footer labels and insert a new one</span>\n    messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">performBatchUpdates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">insertSections</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">>=</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">{</span>\n            messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">reloadSections</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">isLastSectionVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">scrollToLastItem</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">isLastSectionVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token operator\">!</span>messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">isEmpty</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">let</span> lastIndexPath <span class=\"token operator\">=</span> <span class=\"token function\">IndexPath</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> section<span class=\"token punctuation\">:</span> messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> messagesCollectionView<span class=\"token punctuation\">.</span>indexPathsForVisibleItems<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>lastIndexPath<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để gửi một tin nhắn thì ta cần xác định được model Message là gì, rồi add vào array messageList và reload collectionView, MessageKit sẽ tự làm những việc còn lại.\nSlackInputBarDelegate cung cấp hai func cho việc xử lý việc user tap và nút camera và nút show library.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - SlackInputBarDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">slackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapCameraButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Show camera\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">slackinputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapLibraryButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> pickerVC <span class=\"token operator\">=</span> <span class=\"token function\">UIImagePickerController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    pickerVC<span class=\"token punctuation\">.</span>sourceType <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>photoLibrary\n    pickerVC<span class=\"token punctuation\">.</span>modalPresentationStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>fullScreen\n    pickerVC<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n    pickerVC<span class=\"token punctuation\">.</span>allowsEditing <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    viewController<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span>pickerVC<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi user chọn ảnh ở Photo library xong thì chỉ cần tạo một message và insert vào là xong.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARKL - UIImagePickerControllerDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">imagePickerControllerDidCancel</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> picker<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImagePickerController</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    picker<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">imagePickerController</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> picker<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImagePickerController</span><span class=\"token punctuation\">,</span> didFinishPickingMediaWithInfo info<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UIImagePickerController</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">InfoKey</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">Any</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> image <span class=\"token operator\">=</span> info<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span>editedImage<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">UIImage</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n    picker<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span>\n        <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> <span class=\"token keyword\">self</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token function\">Message</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>currentUser<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Xong xuôi, app của mình hiện giờ đã có thể gửi text và gửi ảnh như đây:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 634px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6fc333b23d0f0c42852b803958290b16/14369/result.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 202.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRsAAAABXRUJQVlA4ILQAAAAwBgCdASoUACgAPslWpUunpSOhsBqqqPAZCWMAuMjSR/iCnEMgl7LycQeoDURNnqsWKU8VDFjYqQQAAP5BN9O3C6e54rC4A6eD0f73Ha/ffoiZAFXdfAE0ps+iRglrqtLvNvTp/CfBE31Fx27noG3gtSJAkyLoBBJAIO/FTZcTmTMxYaY8QPmJD3Hgp2P95SjbDGfXtDFNJFrQ53pVp4q37zvgsUdlEdO9tD+Cz+U/pNkAAAA='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Kết quả\"\n        title=\"Kết quả\"\n        src=\"/static/6fc333b23d0f0c42852b803958290b16/14369/result.webp\"\n        srcset=\"/static/6fc333b23d0f0c42852b803958290b16/c54d4/result.webp 175w,\n/static/6fc333b23d0f0c42852b803958290b16/a3432/result.webp 350w,\n/static/6fc333b23d0f0c42852b803958290b16/14369/result.webp 634w\"\n        sizes=\"(max-width: 634px) 100vw, 634px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nTrên đây là một số hiểu biết của mình về MessageKit, mọi người nếu có ý kiến gì có thể comment ở phía dưới. Cảm ơn và hẹn gặp lại.\nHappy Reading!!!\n[[author | Manh Hung Nguyen. ]]</p>","id":"327cf7c5-76e0-5624-a407-bf0dd191ef8f","frontmatter":{"title":"MessageKit in iOS","date":"07-03-2021","tags":["ios","swift"]},"fields":{"slug":"/tim-hieu-messagekit/"}}},{"node":{"excerpt":"Bộ quy tắc này được tạo ra nhằm giảm bới những khó khăn trong việc đọc code của người khác. Nó thực hiện điều đó bằng cách đặt ra những quy định hay gợi ý về việc format PHP code.   1. Khái quát chung…","html":"<p>Bộ quy tắc này được tạo ra nhằm giảm bới những khó khăn trong việc đọc code<br>\ncủa người khác. Nó thực hiện điều đó bằng cách đặt ra những quy định hay gợi<br>\ný về việc format PHP code.  </p>\n<h1>1. Khái quát chung</h1>\n<ul>\n<li>Code phải tuân theo \"coding style guide\" PSR [[PSR-1]].  </li>\n<li>Không có hard limit về độ dài của một dòng, không quá 120 ký tự</li>\n<li>Một dòng nên có không quá 80 chữ.  </li>\n<li>Cần phải có một dòng trống ở sau phần khai báo <code class=\"language-text\">namespace</code>. Ngoài ra cũng cần có<br>\nmột dòng trống phía sau phần khai báo <code class=\"language-text\">use</code>.  </li>\n<li>Dấu mở ngặc nhọn dùng khi khai báo class phải được viết ở dòng mới (không viết cùng dòng với phần khai báo tên class),  và dấu đóng ngoặc nhọn của một class phải được viết ở dòng mới sau khi kết thúc body của class.  </li>\n<li>Dấu mở ngặc nhọn dùng khi khai báo method phải được viết ở dòng mới (không viết cùng dòng với phần khai báo tên method),  và dấu đóng ngoặc nhọn của một method phải được viết ở dòng mới sau khi kết thúc body của method.  </li>\n<li>Phải luôn khai báo tính visibility (<code class=\"language-text\">public</code>, <code class=\"language-text\">protected</code> hay là <code class=\"language-text\">private</code>) của properties cũng như methods.<br>\n<code class=\"language-text\">abstract</code> và <code class=\"language-text\">final</code> phải được khai báo phía trước tính visibility và <code class=\"language-text\">static</code> phải được khai báo sau tính visibility.  </li>\n<li>Cần phải có một dấu cách phía sau những từ khoá Control structure (như <code class=\"language-text\">if</code>, <code class=\"language-text\">else</code>, <code class=\"language-text\">for</code> ...).<br>\nKhông được có dấu cách phía sau tên của method khi gọi hàm.  </li>\n<li>Dấu mở ngoặc nhọn cho control structures (như <code class=\"language-text\">if</code>, <code class=\"language-text\">else</code>, <code class=\"language-text\">for</code> ...) phải được viết cùng dòng, trong khi đó đấu đóng ngoặc<br>\nphải được viết ở dòng mới.  </li>\n<li>Trong câu lệnh control structures, không được phép có dấu cách ở sau dấu mở ngặc tròn cũng như ở trước dấu đóng ngoặc tròn.  </li>\n</ul>\n<h3>1.1. Ví dụ</h3>\n<p>Ví dụ dưới đây bao gồm một vài quy tắc đã được đề cập ở phần trên, overview:  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token keyword\">use</span> <span class=\"token package\">FooInterface</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">BarClass</span> <span class=\"token keyword\">as</span> Bar<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">OtherVendor<span class=\"token punctuation\">\\</span>OtherPackage<span class=\"token punctuation\">\\</span>BazClass</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class Foo.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Bar</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">FooInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Comment sample function.\n     * \n     * @param int      $a A comment.\n     * @param int|null $b B comment.\n     *                    \n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sampleFunction</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$a</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$b</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void \n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$a</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">elseif</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$a</span> <span class=\"token operator\">></span> <span class=\"token variable\">$b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$foo</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arg1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            BazClass<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arg2</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$arg3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * Method bar.\n     * \n     * @return void\n     */</span>\n    <span class=\"token keyword\">final</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void \n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// method body</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>2. Tổng thể</h1>\n<h3>2.1 Basic Coding Standard</h3>\n<p>Code phải tuân theo \"coding style guide\" PSR [[PSR-1]].  </p>\n<h3>2.2 Files</h3>\n<p>Mọi PHP files phải kết thúc bằng một dòng trống.  </p>\n<p>Trong một file chỉ bao gồm code PHP thì không được viết tag đóng <code class=\"language-text\">?&gt;</code>.  </p>\n<h3>2.3. Lines</h3>\n<p>Không có hard limit về độ dài của một dòng.  </p>\n<p>Soft limit của độ dài một dòng phải là 120 chữ. </p>\n<p>Chương trình check style tự động phải báo warning nhưng không được báo error khi vượt quá soft limit.  </p>\n<p>Một dòng nên có không quá 80 chữ. Dòng mà dài quá 80 chữ thì nên chia nhỏ ra thành nhiều dòng với độ dài mỗi dòng không quá 80 chữ.  </p>\n<p>Một dòng không trống không được phép có trailing whitespace (dấu cách ở cuối dòng)  </p>\n<p>Dòng trống có thể được thêm vào để code có thể được dễ đọc hơn và để phân cách những đoạn code.  </p>\n<p>Không được phép có quá một statement trên một dòng.  </p>\n<h3>2.4. Canh lề - Indenting</h3>\n<p>Code không dùng tab, mà phải sử dụng 4 dấu cách làm indent.  </p>\n<h3>2.5. Keywords và True/False/Null</h3>\n<p>Những <a href=\"http://php.net/manual/en/reserved.keywords.php\">keywords</a> của PHP phải được viết thường. (không viết hoa)  </p>\n<p>Những constants của PHP là <code class=\"language-text\">true</code>, <code class=\"language-text\">false</code>, và <code class=\"language-text\">null</code> cũng cần phải viết thường.  </p>\n<h1>3. Khai báo Namespace và Use</h1>\n<p>Cần phải có một dòng trắng phía sau khai báo <code class=\"language-text\">namespace</code>.  </p>\n<p>Những phần khai báo <code class=\"language-text\">use</code> phải được đặt phía sau phần khai báo <code class=\"language-text\">namespace</code>.  </p>\n<p>Phải dùng một từ <code class=\"language-text\">use</code> cho mỗi khao báo.  </p>\n<p>Phải có một dòng trắng phía sau đoạn code <code class=\"language-text\">use</code>.  </p>\n<p>Ví dụ:  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token keyword\">use</span> <span class=\"token package\">FooClass</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">BarClass</span> <span class=\"token keyword\">as</span> Bar<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">OtherVendor<span class=\"token punctuation\">\\</span>OtherPackage<span class=\"token punctuation\">\\</span>BazClass</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">// ... additional PHP code ...  </span>\n  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>4. Classes, Properties, và Methods</h1>\n<p>Từ class dưới đây được hiểu là cả những class bình thường, hay cả interfaces và traits.  </p>\n<h3>4.1. Extends và Implements</h3>\n<p>Từ khoá <code class=\"language-text\">extends</code> và <code class=\"language-text\">implements</code> phải được viết cùng dòng với tên class.  </p>\n<p>Dấu mở ngoặc nhọn của class phải đứng trên một dòng riêng. Dấu đóng ngoặc phải được viết ở dòng sau của phần body.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token keyword\">use</span> <span class=\"token package\">FooClass</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">BarClass</span> <span class=\"token keyword\">as</span> Bar<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">OtherVendor<span class=\"token punctuation\">\\</span>OtherPackage<span class=\"token punctuation\">\\</span>BazClass</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller.\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ParentClass</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\"><span class=\"token punctuation\">\\</span>ArrayAccess</span><span class=\"token punctuation\">,</span> \\<span class=\"token package\">Countable</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// constants, properties, methods</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Danh sách những interface được <code class=\"language-text\">implements</code> có thể được viết trên nhiều dòng, trong đó mỗi dòng theo sau được indent 1 lần.  </p>\n<p>Khi thực hiện việc đó thì tên interface đầu tiên phải được đặt trên 1 dòng mới, và mỗi dòng chỉ được phép chứa tên 1 interface.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token keyword\">use</span> <span class=\"token package\">FooClass</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">BarClass</span> <span class=\"token keyword\">as</span> Bar<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">use</span> <span class=\"token package\">OtherVendor<span class=\"token punctuation\">\\</span>OtherPackage<span class=\"token punctuation\">\\</span>BazClass</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ParentClass</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\"><span class=\"token punctuation\">\\</span>ArrayAccess</span><span class=\"token punctuation\">,</span> \\<span class=\"token package\">Countable</span><span class=\"token punctuation\">,</span> \\<span class=\"token package\">Serializable</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// constants, properties, methods</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4.2. Properties</h3>\n<p>Tính Visibility phải được khai báo ở mọi properties.  </p>\n<p>Không được dùng từ khoá <code class=\"language-text\">var</code> để khai báo một property.  </p>\n<p>Trong một câu thì không được khai báo quá một property.  </p>\n<p>Tên property không nên được prefix bởi dấu gạch dưới <code class=\"language-text\">_</code> để biểu thị tính protected hay private.  </p>\n<p>Khai báo property giống như sau.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Comment foo.\n     *\n     * @var null\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$foo</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4.3. Methods</h3>\n<p>Tính Visibility phải được khao báo ở mọi  </p>\n<p>Tên Method không nên được prefix bởi dấu gạch dưới <code class=\"language-text\">_</code> để biểu thị tính protected hay private.  </p>\n<p>Khi khai báo tên method thì không được để một khoảng trắng ở phía sau tên method.  </p>\n<p>Dấu mở ngoặc nhọn phải được nằm trên một dòng riêng, và dấu đóng ngoặc phải được nằm trên dòng ngay sau phần thân của method.  </p>\n<p>Không được có khoảng trắng sau dấu mở ngoặc tròn, và không được có khoảng trắng phía trước dấu đóng ngoặc tròn.  </p>\n<p>Khai báo một hàm giống như sau. Chú ý đến vị trí của dấu ngặc đơn, dấu phẩy, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Method foo bar baz.\n     *\n     * @param array $arg1 Comment type arg1.\n     * @param array $arg2 Comment type arg2.\n     * @param array $arg3 Comment type arg1.\n     *                    \n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fooBarBaz</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span> <span class=\"token variable\">$arg1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span> <span class=\"token operator\">&amp;</span><span class=\"token variable\">$arg2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span> <span class=\"token variable\">$arg3</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// method body</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4.4. Method Arguments</h3>\n<p>Trong danh sách argument (đối số) thì không được có khoảng trắng trước mỗi dấu phẩy, và phải có một khoảng trắng sau mỗi dấu phẩy.  </p>\n<p>Những arguments của Method mà có giá trị mặc định phải được đặt ở cuối của danh sách argument.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Method foo bar baz.\n     *\n     * @param array $arg1 Comment type arg1.\n     * @param array $arg2 Comment type arg2.\n     * @param array $arg3 Comment type arg1.\n     *                    \n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fooBarBaz</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span> <span class=\"token variable\">$arg1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span> <span class=\"token operator\">&amp;</span><span class=\"token variable\">$arg2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span> <span class=\"token variable\">$arg3</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// method body</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Danh sách argument có thể được tách thành nhiều dòng, trong đó mỗi dòng theo sau được indent một lần.<br>\nKhi làm vậy thì argument đầu tiên trong danh sách phải được đặt ở trên một dòng mới, và mỗi dòng chỉ được phép có một argument.  </p>\n<p>Khi mà danh sách argument được chia làm nhiều dòng, thì dấu đóng ngoặc tròn và dấu mở ngoặc nhọn phải được đặt cùng nhau trên một dòng, với một khoảng trắng ở giữa.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Method aVeryLongMethodName.\n     * \n     * @param ClassTypeHint $arg1 Comment classTypeHint arg1.\n     * @param array         $arg2 Comment type arg1.\n     * @param array         $arg3 Comment type arg1.\n     *                            \n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">aVeryLongMethodName</span><span class=\"token punctuation\">(</span>ClassTypeHint <span class=\"token variable\">$arg1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span> <span class=\"token operator\">&amp;</span><span class=\"token variable\">$arg2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span> <span class=\"token variable\">$arg3</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void \n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//method body </span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4.5. <code class=\"language-text\">abstract</code>, <code class=\"language-text\">final</code>, và <code class=\"language-text\">static</code></h3>\n<p>Khi được sử dụng, <code class=\"language-text\">abstract</code> và <code class=\"language-text\">final</code> phải được đặt trước phần khai báo visibility.  </p>\n<p>Khi được sử dụng, <code class=\"language-text\">static</code> phải được đặt sau phần khai báo visibility.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Vendor<span class=\"token punctuation\">\\</span>Package</span><span class=\"token punctuation\">;</span>  \n  \n<span class=\"token comment\">/**\n * Class ClassName.\n *\n * @package App\\Controller\n */</span>\n<span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ClassName</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * Comment foo.\n     *\n     * @var string\n     */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">static</span> <span class=\"token variable\">$foo</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * Comment zim.\n     *\n     * @return mixed\n     */</span>\n    <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">zim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * Method bar.\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">final</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//method body</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4.6. Gọi Method và Function</h3>\n<p>Khi gọi một method hay một function, không được phép có khoảng trắng giữa tên của method hay function và dấu mở ngoặc tròn.  </p>\n<p>Không được phép có khoảng trắng sau dấu mở ngoặc tròn.  </p>\n<p>Và không được phép có khoảng trắng trước dấu đóng ngoặc tròn.  </p>\n<p>Trong danh sách argument, không được phép có khoảng trắng trước mỗi dấu phẩy,  và phải có một khoảng trắng sau mỗi dấu phẩy.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token variable\">$foo</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arg1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nFoo<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arg2</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$arg3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Danh sách argument có thể được tách ra thành nhiều dòng, trong đó mỗi dòng theo sau được indent một lần.<br>\nKhi làm như vậy thì argument đầu tiên phải được đặt trên một dòng mới, và mỗi dòng chỉ được phép chứa một argument.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$foo</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$longArgument</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$longerArgument</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$muchLongerArgument</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>5. Control Structures</h1>\n<p>Những quy tắc chung khi viết Control Structures bao gồm:  </p>\n<ul>\n<li>Phải có một khoảng trắng sau control structure keyword  </li>\n<li>Không được có một khoảng trắng sau dấu mở ngoặc tròn  </li>\n<li>Không được có một khoảng trắng trước dấu đóng ngoặc tròn  </li>\n<li>Phải có một khoảng trắng sau đấu đóng ngoặc tròn và trước dấu mở ngoặc nhọn  </li>\n<li>Phần thân của structure phải được indent một lần  </li>\n<li>Dấu đóng ngoặc nhọn phỉa được đặt trên một dòng mới sau phần thân  </li>\n</ul>\n<p>Phần thân của mỗi structure phải được đặt trong dấu đóng mở ngoặc kép. Điều này sẽ làm tiêu chuẩn hoá cách viết structures,  và làm giảm thiểu việc phát sinh ra lỗi khi mà có những dòng mới được thêm vào phần thân.  </p>\n<h3>5.1. <code class=\"language-text\">if</code>, <code class=\"language-text\">elseif</code>, <code class=\"language-text\">else</code></h3>\n<p>Một <code class=\"language-text\">if</code> structure được viết như sau.<br>\nHãy chú ý đến vị trí của dấu ngoặc tròn, khoảng trắng, dấu ngoặc nhọn. <code class=\"language-text\">else</code> và <code class=\"language-text\">elseif</code> được đặt trên cùng một dòng  với dấu đóng ngoặc nhọn của phần body phía trước.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$expr1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//if body</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">elseif</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$expr2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//elseif body</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//else body;</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Từ khoá <code class=\"language-text\">elseif</code> nên được dùng thay cho <code class=\"language-text\">else if</code>, để mọi control keywords chỉ là một từ đơn.  </p>\n<h3>5.2. <code class=\"language-text\">switch</code>, <code class=\"language-text\">case</code></h3>\n<p>Một <code class=\"language-text\">switch</code> structure được viết như sau.</p>\n<p>Hãy chú ý đến vị trí của dấu ngoặc tròn, khoảng trắng và dấu ngoặc nhọn.  </p>\n<p>Phần <code class=\"language-text\">case</code> phải được indent một lần so với <code class=\"language-text\">switch</code>, và <code class=\"language-text\">break</code> keyword (hay các keyword ngắt khác) phải được indent giống với phần thân của <code class=\"language-text\">case</code>.  </p>\n<p>Phải có một comment kiểu như <code class=\"language-text\">// no break</code> nếu phần thân của <code class=\"language-text\">case</code> không trống, và được cố tình cho qua (không có break)  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$expr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">echo</span> <span class=\"token single-quoted-string string\">'First case, with a break'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">echo</span> <span class=\"token single-quoted-string string\">'Second case, which falls through'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// no break case 2: case 3: case 4:</span>\n        <span class=\"token comment\">// echo 'Third case, return instead of break'; </span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">echo</span> <span class=\"token single-quoted-string string\">'Default case'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>5.3. <code class=\"language-text\">while</code>, <code class=\"language-text\">do while</code></h3>\n<p>Một câu lệnh <code class=\"language-text\">while</code> được viết như sau.<br>\nHãy chú ý vào vị trí của dấu ngoặc tròn, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$expr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// structure body</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Tương tự như vậy, một câu lệnh <code class=\"language-text\">do while</code> được viết như sau.<br>\nHãy chú ý vào vị trí của dấu ngoặc tròn, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// structure body;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$expr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>5.4. <code class=\"language-text\">for</code></h3>\n<p>Một câu lệnh <code class=\"language-text\">for</code> được viết như sau.<br>\nHãy chú ý vào vị trí của dấu chấm phẩy, dấu ngoặc tròn, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span><span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// for body</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>5.5. <code class=\"language-text\">foreach</code></h3>\n<p>Một câu lệnh <code class=\"language-text\">foreach</code> được viết như sau.<br>\nHãy chú ý vào vị trí của <code class=\"language-text\">=&gt;</code>, dấu ngoặc tròn, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$iterable</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$key</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// foreach body</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>5.6. <code class=\"language-text\">try</code>, <code class=\"language-text\">catch</code></h3>\n<p>Một block <code class=\"language-text\">try catch</code> được viết như sau.<br>\nHãy chú ý vào vị trí của dấu ngoặc tròn, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// try body</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>FirstExceptionType <span class=\"token variable\">$e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// catch body</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>OtherExceptionType <span class=\"token variable\">$e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// catch body</span>\n<span class=\"token punctuation\">}</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>6. Closures</h1>\n<p>Closures phải được định nghĩa mới một khoảng trắng phía sau keywork <code class=\"language-text\">function</code>, và một khoảng trắng ở phía trước cũng như phía sau của keywork <code class=\"language-text\">use</code>.  </p>\n<p>Dấu mở ngoặc ngọn phải được đặt ở cùng dòng, và dấu đóng ngoặc nhọn phải được đặt ở một dòng mời phía sau phần thân.  </p>\n<p>Không được phép có một khoảng trắng ở phía sau dấu mở ngoặc tròn của phần khai báo danh sách argument hay variable,  và không được phép có một khoảng trắng ở phía trước dấu đóng ngoặc tròn của phần khai báo danh sách argument hay variable.  </p>\n<p>Trong danh sách arugment hay variable, không được phép có khoảng trắng trước mỗi dấu phẩy, và phải có một khoảng trắng phía sau mỗi dấu phẩy.  </p>\n<p>Arguments của Closure mà có giá trị mặc định thì phải được đặt ở cuối của danh sách argument.  </p>\n<p>Cách định nghĩa một closure trông như sau.  </p>\n<p>A closure declaration looks like the following.<br>\nHãy chú ý vào vị trí của dấu ngoặc tròn, dấu phẩy, khoảng trắng và dấu ngoặc nhọn.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Method closureWithArgs.\n *\n * @param string $arg1 Comment type arg1.\n * @param string $arg2 Comment type arg2.\n *\n * @return void.\n */</span>\n<span class=\"token variable\">$closureWithArgs</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>string <span class=\"token variable\">$arg1</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$arg2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Method closureWithArgsAndVars.\n *\n * @param string $arg1 Comment type arg1.\n * @param string $arg2 Comment type arg2.\n *\n * @return void.\n */</span>\n<span class=\"token variable\">$closureWithArgsAndVars</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>string <span class=\"token variable\">$arg1</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$arg2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$var1</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$var2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Danh sách argument và danh sách variable có thể được tách ra làm nhiều dòng, trong đó mỗi dòng theo sau được indent một lần. Khi làm như vậy thì argument hay variable đầu tiên phải được đặt ở trên một dòng mới, và mỗi dòng chỉ được phép chứa một argument hay một variable.  </p>\n<p>Khi mà kết thúc của danh sách (kể cả arguments hay variables) được chia thành nhiều dòng,<br>\nthì dấu đóng ngoặc tròn và dấu mở ngoặc nhọn phải được đặt cùng nhau trên một dòng, với một khoảng trắng ở giữa.  </p>\n<p>Dưới đây là những ví dụ về các closures có và không có danh sách argument hay variable được chia thành nhiều dòng.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Method longArgs noVars.\n *\n * @param string $longArgument       Comment type longArgument.\n * @param string $longerArgument     Comment type longerArgument.\n * @param string $muchLongerArgument Comment type muchLongArgument.\n *\n * @return void\n */</span>\n<span class=\"token variable\">$longArgs_noVars</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>\n    string <span class=\"token variable\">$longArgument</span><span class=\"token punctuation\">,</span>\n    string <span class=\"token variable\">$longerArgument</span><span class=\"token punctuation\">,</span>\n    string <span class=\"token variable\">$muchLongerArgument</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Method noArgs longVars.\n *\n * @return void\n */</span>\n<span class=\"token variable\">$noArgs_longVars</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$longVar1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$longerVar2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$muchLongerVar3</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Method longArgs longVars.\n *\n * @param string $longArgument       Comment type longArgument.\n * @param string $longerArgument     Comment type longerArgument.\n * @param string $muchLongerArgument Comment type muchLongArgument.\n *\n * @return void\n */</span>\n<span class=\"token variable\">$longArgs_longVars</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$longArgument</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$longerArgument</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$muchLongerArgument</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$longVar1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$longerVar2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$muchLongerVar3</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Method longArgs shortVars.\n *\n * @param string $longArgument       Comment type longArgument.\n * @param string $longerArgument     Comment type longerArgument.\n * @param string $muchLongerArgument Comment type muchLongArgument.\n *\n * @return void\n */</span>\n<span class=\"token variable\">$longArgs_shortVars</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$longArgument</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$longerArgument</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$muchLongerArgument</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$var1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Method shortArgs longVars.\n *\n * @param string $arg Comment type arg.\n *\n * @return void\n */</span>\n<span class=\"token variable\">$shortArgs_longVars</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>string <span class=\"token variable\">$arg</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$longVar1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$longerVar2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$muchLongerVar3</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chú ý rằng những quy tắc trên còn được áp dụng khi một closure được sử dụng trục tiếp như một argument trong một lời gọi hàm hay method.  </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$foo</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arg1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$arg2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$var1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// body</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$arg3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h1>7. Kết luận</h1>\n<p>Có rất nhiều yếu tố về style hay practice khác được cố tình bỏ qua trong hướng dẫn này. Có thể kể ra như:  </p>\n<ul>\n<li>Khai báo biến global (global variables) hay hằng global (global constants)  </li>\n<li>Khai báo hàm (functions)  </li>\n<li>Toán tử và phép gán  </li>\n<li>Inter-line alignment  </li>\n<li>Khối Comments và Documentation  </li>\n<li>Tiền tố và hậu tố trong tên Class  </li>\n<li>Best practices  </li>\n</ul>\n<p>Những recommendations sau này có thể xem xét lại và mở rộng hướng dẫn này để đề cập đến những yếu tố về style hay practice  ở trên hay hoàn toàn khác.</p>\n<hr>\n<p>[[author | Diep Do ]]</p>","id":"fcd4ba31-7b56-5a16-9c95-8e12e5ab64f7","frontmatter":{"title":"PHP Coding convention with PSR-1, PSR-2","date":"03-03-2021","tags":["PHP"]},"fields":{"slug":"/coding-convention-trong-php-voi-psr-2/"}}},{"node":{"excerpt":"Slack là một ứng dụng chat nhóm hỗ trợ trao đổi thông tin với bạn bè, đồng nghiệp và là một lựa chọn hoàn hảo cho công việc, nội bộ công ty hay làm dự án. Với Slack, mọi người có thể trò chuyện, chia…","html":"<p>Slack là một ứng dụng chat nhóm hỗ trợ trao đổi thông tin với bạn bè, đồng nghiệp và là một lựa chọn hoàn hảo cho công việc, nội bộ công ty hay làm dự án. Với Slack, mọi người có thể trò chuyện, chia sẻ hình ảnh / video / tập tin, quản lý theo từng nhóm / bộ phận, tạo ra các chủ đề thảo luận ở các kênh riêng biệt.</p>\n<p>Slack là một sản phẩm của hãng TinySpeck với đồng sáng lập là Stewart Butterfield – trước đây từng là đồng sáng lập dịch vụ chia sẻ ảnh nổi tiếng Flickr của Yahoo. Stewart rời Yahoo hồi tháng 7/2008 và thành lập TinySpeck một năm sau đó. Theo Stewart: “Slack giải phóng con người ta khỏi mớ email lộn xộn. Tại sao phải dùng email để vừa đính kèm file vừa trao đổi công việc, nó phức tạp, mất thời gian lại quá rắc rối. Trong khi một dịch vụ chat như Slack có thể cho người ta chat nhóm theo thời gian thực lại vừa truy cập được toàn bộ file được lưu trữ trên các dịch vụ khác”.</p>\n<h2>Những lợi ích sử dụng Slack:</h2>\n<ul>\n<li>Người dùng có thể trao đổi với nhau từ bất kỳ nền tảng nào như Windows, Linux, MacOS, Android, iOS,…</li>\n<li>Liên kết với các ứng dụng lưu trữ của bên thứ 3 như Google Drive, Dropbox, Google Calendar, Github, Task Reminder, Trello… thậm chí là cả các dịch vụ thanh toán.</li>\n<li>Miễn phí dung lượng lưu trữ lên đến 10K tin nhắn, 5GB dung lượng lưu trữ và kết nối đến 5 dịch vụ hãng khác. Tuy nhiên các gói trả phí sẽ có nhiều tính năng cao cấp hơn và khả năng kết nối là vô hạn.</li>\n</ul>\n<h2>Giới thiệu về Reminder</h2>\n<h3>Reminder Là gì?</h3>\n<ul>\n<li>Reminder là một ứng dụng nho nhỏ giúp bạn nhắc nhở các công việc cần làm, nó được tích hợp sẵn trong ứng dụng SLack. </li>\n<li>Reminder có thể đặt lời nhắc cho bản thân hoặc các thành viên khác trong workspace của bạn.</li>\n<li>Thay vì phải cài cắm crontab thủ công và cấu hình phức tạp bạn chỉ cần thao tác một command cơ bản là có một Reminder tiện lợi.</li>\n<li>Bạn không cần biết về kỹ thuật cũng có thể tạo các Reminder dễ dàng.</li>\n</ul>\n<h3>Cách sử dụng Reminder:</h3>\n<ul>\n<li>\n<p>Cách tạo nhắc nhở:\n/remind [@someone or #channel] [what] [when]\n/remind @here \" Nội dung thông báo \" Thời gian</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ví dụ tạo nhắc nhở hàng ngày trong tuần:\n/remind @here &quot;Mọi người báo cáo công việc ngày nhé&quot; at every weekday at 4pm\n\nví dụ tạo nhắc nhở ngày hôm nay:\n/remind @here &quot;Mọi người báo cáo công việc ngày nhé&quot; at 10am today\n\nví dụ tạo nhắc nhở ngày mai:\n/remind @here &quot;Anh em team PHP nhớ viết bài blog nhé&quot; at 10am tomorrow\n\nví dụ tạo nhắc nhở vào thứ 2 tuần sau:\n/remind @here &quot;Anh em team PHP nhớ viết bài blog nhé&quot; at 10am next week\n\nví dụ tạo nhắc nhở vào ngày 01 đầu tháng sau:\n/remind @here &quot;Anh em team PHP nhớ viết bài blog nhé&quot; at 10am next month</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>List các remind hiện có:\n/remind list</li>\n<li>Xoá remind hiện có:\nbạn có thể dụng command <code class=\"language-text\">/remind list</code> để list các reminds sau đó chọn remind cần xoá rồi click vào link \"Delete\".</li>\n</ul>\n<h2>Mẹo vặt trong Slack:</h2>\n<ul>\n<li>Nhấn mạnh phần văn bản: Để tạo ra văn bản in đậm, hãy bao quanh từ hay cụm từ của bạn bằng dấu sao (<em>….</em>). Để in nghiêng văn bản, đặt dấu gạch chân quanh phần văn bản (<em>……</em>)</li>\n<li>Gạch bỏ phần văn bản: Để gạch bỏ một số từ, hãy sử dụng dấu ~ bao quanh văn bản</li>\n<li>Lập danh sách: Để tạo danh sách, hãy chọn “Shift” + “Enter” để thêm một dòng mới. Để thêm các dấu đầu dòng, hãy chọn Opt + 8 (Mac) hoặc Alt + 0149 (PC)</li>\n<li>Trích dẫn khối: Để thêm các dấu ngoặc góc vào đầu tin nhắn của bạn, gõ “>” để thụt lề một dòng hoặc “>>>” để thụt lề nhiều đoạn văn</li>\n<li>Các khối mã: Để hiển thị một phần dưới dạng văn bản nội tuyến có chiều rộng cố định, hãy sử dụng dấu backtick (`) quanh khu vực được chọn. Để tạo một khối văn bản có định dạng sẵn, có chiều rộng cố định, hãy sử dụng dấu backtick ba lần.</li>\n</ul>\n<h2>Tìm kiếm người dùng, tin nhắn hay tập tin:</h2>\n<p>Các kênh và tin nhắn trực tiếp\nType \"in:tên kênh\" – để tìm kiếm các tin nhắn và / hoặc tập tin trong một kênh cụ thể\nType \"in:tên\" – để tìm kiếm các tin nhắn trực tiếp của bạn với một người dùng cụ thể</p>\n<p>Tin nhắn hoặc tệp tin từ một người cụ thể\nType \"from:tên người dùng\" – để giới hạn tìm kiếm của bạn với các tin nhắn từ một người gửi cụ thể, tìm kiếm này sẽ rà soát tất cả các kênh và mọi tin nhắn trực tiếp\nType \"from:me\" – để tìm kiếm các tin nhắn mà bạn đã gửi, ở bất cứ đâu trong Slack</p>\n<p>Các Liên Kết, Mục Có Gắn Dấu Sao Và Emoji\nType \"has: đường link\" – Thu hẹp tìm kiếm của bạn vào các tin nhắn có chứa một URL cụ thể\nType \"has: star\"- để tìm những thư mà bạn đã gắn dấu sao\nType \"has::tên emoji\" – để tìm kiếm những thư có chứa một biểu tượng cảm xúc cụ thể</p>\n<p>Ngày và giờ\nType \"before\" rồi sử dụng những từ chỉ thời gian như “hôm qua”, “hôm nay”\nType \"after\" rồi sử dụng các từ như “tuần”, “tháng” hoặc “năm”\nType \"on\" hoặc “during” và sử dụng các từ khoá cụ thể chỉ ngày hoặc phạm vi thời gian, chẳng hạn như “Yesterday”, “July” hoặc “2021”</p>\n<p>------------ END ------------</p>\n<blockquote>\n<p>Ở trên mình đã giới thiệu cơ bản về Slack, và cách thiết lập Reminder, nếu có thắc mắc gì bạn có thể pm mình để trao đổi thêm nhé.</p>\n</blockquote>\n<blockquote>\n<p>Cảm ơn bạn đã dành thời gian đọc bài :D</p>\n</blockquote>\n<blockquote>\n<p>Còn đây là địa chỉ USDT của mình, nếu bạn thấy hay thì có thể donate cho mình nhé: 0x9d8fce9ac29c686b54b9ea0430c10d3919279a43</p>\n</blockquote>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Chien Le </div><div class=\"custom-block-body\"></div></div>","id":"b4f6a87e-1d64-5c49-9149-4896bd28c9c6","frontmatter":{"title":"Tutorial using reminders on Slack","date":"01-03-2021","tags":["Slack","Reminder"]},"fields":{"slug":"/tutorial-using-reminders-on-slack/"}}},{"node":{"excerpt":"Đối với công việc lâp trình phần mềm thì Unit Test và UI Test là những việc vô cùng quan trọng trong việc bảo đảm 1 phần mềm đạt chất lượng tốt. Bài viết này, mình chỉ tập trung chủ yếu vào UI Test.…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Đối với công việc lâp trình phần mềm thì Unit Test và UI Test là những việc vô cùng quan trọng trong việc bảo đảm 1 phần mềm đạt chất lượng tốt. Bài viết này, mình chỉ tập trung chủ yếu vào UI Test. Với lập trình viên iOS thì việc viết UI Test đã có sự support từ Apple với XCTest framework. Nhưng sau khi làm thử với XCTest framework thì thấy nó khó cho việc viết UITest cho chúng ta. Nên mình đã tìm hiểu được 1 framework cho việc viết UITest là  <a href=\"https://github.com/kif-framework/KIF\"><strong>KIF framewok</strong></a></p></div></div>\n<h1>1.Cài đặt KIF</h1>\n<p>Điều đầu tiên, để sử dụng được KIF thì chúng ta cần tạo target cho việc test của chúng ta. Ở đây, KIF không sử dụng <strong>iOS UI Testing Bundle</strong> mà sử dụng <strong>iOS Unit Testing Bundle</strong>.Nên trong trường hợp bạn nào đã có unit test ở trong project thì cần chọn 1 trong 2 target để chạy test.</p>\n<p>Chọn dự án của bạn trong Xcode và nhấp vào \"Add Target\" ở góc dưới bên trái của trình soạn thảo. Chọn iOS -> Test -> iOS Unit Testing Bundle. Hãy cung cấp cho nó một tên như \"Acceptance Tests\", \"UI Tests\", hoặc cái gì đó cho thấy ý định của quá trình test của bạn.</p>\n<p>Acceptance Test Target của bạn được tạo và sẽ có thêm 1 file đi cùng với nó, ex: \"Acceptance_Tests.swift\" khớp với tên target. Hãy xoá nó đi.</p>\n<h2>1.Cài đặt với Pod</h2>\n<p>Khi Test Target của bạn đã được thiết lập, thêm đoạn mã dưới đây vào Podfile của bạn. Sử dụng đúng target cần cài đặt KIF</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">target &#39;Your Apps&#39; do\n  ...\nend\n\ntarget &#39;Acceptance Tests&#39; do\n  pod &#39;KIF&#39;, :configurations =&gt; [&#39;Debug&#39;]\nend</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi chạy <code class=\"language-text\">pod install</code>  thì công việc tiếp theo là làm theo <strong>Cấu hình Test Target</strong> ở bên dưới để cấu hình thích hợp cho nó</p>\n<h2>2. Cài với static library</h2>\n<p>Để cài đặt KIF, bạn cần liên kết static library libKIF trực tiếp vào ứng dụng của bạn. Tải xuống nguồn từ  <a href=\"https://github.com/kif-framework/KIF\">KIF</a> và làm theo hướng dẫn dưới đây. </p>\n<p>Chúng tôi sẽ sử dụng một dự án đơn giản làm ví dụ và bạn có thể tìm thấy nó trong Documentation/Examples/Testable Swift trong reposity của KIF.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/acc162cd79581ba201717feab6906ba2/d4c13/9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVklEQVQoz6WSS0/bQBDHrfZM1UvPPbqXfoC036oV5sJ3gIhXDwhxbA+kgkb0ULUn1DQJDgFCEkrATsjDCfEj8XO965mODT1wq9SRfpqx1jsz/9mRvn74uHDZKL27vr1Z6ne7i432lXJ9oym63lVa7bbSajaU09O60m63lIuLC2U4HCnGsKt0fjeV5qWm9G4Hi3rfWOp0rt7/+P7thbSysStrvVu0LBOTJEFBBEGAlj1DL4gQIcaYMQQQyGOOqQnBMY5j5FzgXxM8xOKXz2+k/Oa2rGsdv1opC03TY9u2uW1Nua5d8yAI0wyP4JRNZCQ8ScgHdiwCT4RRFBWLxZy0tbEh6z2dlUolPD8/h8FgCIxFMBxPwTDGQF3fAwA8YhDO5hCEIZCKjNGgD77nouu6/ODgICdt73ySR/02q58cI80N6IDa52je3aFhGCRPZKNIgGRFAUbOFBNqlaoQkLYMqWTGGD88PMxJm1s78sToMmM0QMeZgev7yHwX53cGhhGjm5AlpABdP8b+ZJ7NkyTfF0qSLCEpvk+4uroiz12XceoqJCm+5wHFkGV44OESjSIGx57DbDZ7RKrKNE1eKBRyUj6flx3HCX3fB8/zBR0KekFBI6MHTzJPBQR1IDzPE6ZlCsuyBD2emE6nYjwepz6ZTCZsb28vJ62vr79KV+BfLZVJRTJSVemKpeuT+v39/bfS8vLyy0ql8rNarZ6QHatktVpNpSVWG42G2mw21Xq9nn23Wi317OxMLZfLKv2fnRPHFNeOjo5+ra2tvZbInhALxPP/5Bnx9A8ZtsgQeFrDrAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n        title=\"9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n        src=\"/static/acc162cd79581ba201717feab6906ba2/8c557/9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n        srcset=\"/static/acc162cd79581ba201717feab6906ba2/4edbd/9eca4dad-fa29-4526-a06e-27332230fbf3.png 175w,\n/static/acc162cd79581ba201717feab6906ba2/13ae7/9eca4dad-fa29-4526-a06e-27332230fbf3.png 350w,\n/static/acc162cd79581ba201717feab6906ba2/8c557/9eca4dad-fa29-4526-a06e-27332230fbf3.png 700w,\n/static/acc162cd79581ba201717feab6906ba2/d4c13/9eca4dad-fa29-4526-a06e-27332230fbf3.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>1. Thêm KIF vào dự án</h3>\n<p>Bước đầu tiên là thêm dự án KIF vào thư mục con của ./Frameworks/KIF của dự án. Nếu dự án của bạn sử dụng Git để kiểm soát phiên bản, bạn có thể sử dụng submodules để cập nhật trong tương lai dễ dàng hơn:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cd /path/to/MyApplicationSource\nmkdir Frameworks\ngit submodule add https://github.com/kif-framework/KIF.git Frameworks/KIF</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nếu bạn không sử dụng Git, chỉ cần tải về mã nguồn và sao chép nó vào thư mục ./Frameworks/KIF</p>\n<h3>2. Thêm KIF vào Workspace</h3>\n<p>Hãy để dự án của bạn biết về KIF bằng cách thêm dự án KIF vào không gian làm việc cùng với dự án chính của bạn. Tìm KIF.xcodeproj trong Finder và kéo nó vào Project Navigator (⌘1).\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22a4193d4adf67c65dbae646f1980f53/d4c13/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVUlEQVQoz6VSTW/TQBC14FzEhTNHc+EHBP4VqO6l/6EVaRGih4LEgUuDWqJyQHCqgKR1mlZpnNA0jvPhOl92nMTrj92dYeyWQ29IjPQ0a633zXszo3x583GlWfv5ot1rr/W71mqtcaldtU2t07E0o9HQjHpNOzurao2GoV1cXGi2fa05tqW1fte1etPUur3BaqfvrLValy+/f/v6SNnYfqe2uz2cTscohUQhJbKAoev5uGQRIiSYxDECCOQJxzSE4JgkCXIu8G8IHmLx86dnyub2jmp1roLqaUVY3W7ieTPuuRPeMa84Y2HKcAec2EQGyaWkzLxEsKUIoygqFos5ZSu/pXZ7Vnx+fo7NZhNs24Y4jsEeTsBxhiClvAEA8CiG0J8DC0NgjGW4HvQhWC5wsVjwg4ODnLK7+0HtD8y4XC6haZoQBAHJ5zgdj9FxHLInkAhRAtmKGEazCUqSSlUIkEqG1DKJ4IeHhznl7c571SbCZsNAy7LAm/mYBAucjx0Mo5heQkZIB1wECfZH86yfZPmmkJQZITm+IXyVf6167jhmLEirpAoh4RwyhlvcPqJWJDDz5uD7/h2QXRrqlBcKhZyyubmh+v48TPuxXC4FXQqaoKCW0cBlljn5IgUivZ+6U+G6rvA8T0wmEzEcDtMsR6NRvLe3R0PZ2n6SrsC/RmqTimSgQkhCsvVJ8/7+/nNlfX39cblc/nF8fHxKcaJTVCoVnZZYr9Vqer1e16vVavZtGIZO26CXSiWd/s/uCSd0rhwdHf3K5/NPFYp7hBXCw//EA8L9P/FSx+DhBe/hAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n        title=\"758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n        src=\"/static/22a4193d4adf67c65dbae646f1980f53/8c557/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n        srcset=\"/static/22a4193d4adf67c65dbae646f1980f53/4edbd/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 175w,\n/static/22a4193d4adf67c65dbae646f1980f53/13ae7/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 350w,\n/static/22a4193d4adf67c65dbae646f1980f53/8c557/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 700w,\n/static/22a4193d4adf67c65dbae646f1980f53/d4c13/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>3. Cấu hình Test Target</h2>\n<p>Bây giờ, bạn đã có test target cho việc viết UI Test của bạn. Tiếp theo là thêm các thư viện cần thiết cho dự án, chúng ta chọn trong <strong>Project Navigator</strong> và vào Test Target mà bạn đã tạo ra, chọn tab <strong>\"Build Phases\"</strong>. Trong phần <strong>\"Link Binary With Libraries\"</strong>, hãy nhấn nút \"+\". Trong bảng xuất hiện, chọn \"libKIF.a\" và nhấp vào <strong>\"Add\"</strong>. Lặp lại quá trình cho <strong>CoreGraphics.framework</strong> và <strong>QuartzCore.framework</strong>\n.\nKIF yêu cầu IOKit.framework, nhưng nó không nằm trong các khuôn khổ hệ thống. Để liên kết đến nó, thêm \"-framework IOKit\" vào <strong>\"Other Linker Flags\"</strong>.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df28afeb1cc5dfa5d6ab63eec563f91f/d4c13/4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEElEQVQoz6VSTW/TQBC14FzEhTNHc+EHBP4VqNtLzpwQVLSAEDESPSMhIZJUqeBSgSBpQESxEzuJ09gQK7Hz4XzY3o/sMuuQUjiUA096mt31zNuZt1aOcq+2bLNyx/GcnUG/v23ZPdSxbWRaFtINA1kQG40GarVaqNNpIz8YoXDsIbfXQbYD8Ye3ffp9sNNut+6+f3d0Tbl3/6n6TTdEr9cVk8lEBMFIRHEiJGJMxHlwzv/YM8Z+r0ks3r55fUt5sPdMtczG8sPxMTNNiwwHA+oNxzQMZxTyaJIkNPADGgQBncHZarWilHEgo4RgScL5imGMk3w+n1Fe5DQ1GA1xrVYTXbvLF4sF9/p97jgOn06mUElkW3w8CvjQ9/lsNuOEEA7CZ5SdgyAtHh6CoHaguq6Ny+XPwrZtPp/PBXSVjkMpTQnJIonjs738BkIbpj6kgsViRnmee6l6/S42mw3w0eHSR1m0QRRFcN4TruuKaRimPp7nRlBaUygUMsqjvSfqZOzjKFrKW/hyuUxHWr/BGnKNwQqWJH+PyuM45vJSqFl3uLv7UIUHiOFQ+sdgZAYfGeQyKGISMoL78Aw03UM3DPLT+AsrWONUcH//8Q0QEBdh49u/UCqVbivZbPZ6uVz+WKlUvgJOqgB48Wq9Xq/qul6Fn7rabDYv4olpml8Mw/ikadpNBXAJuAW8+p+8Arz8E5UNzBsnpCDsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n        title=\"4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n        src=\"/static/df28afeb1cc5dfa5d6ab63eec563f91f/8c557/4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n        srcset=\"/static/df28afeb1cc5dfa5d6ab63eec563f91f/4edbd/4221ceba-9604-497b-a1d0-142ffae2dd12.png 175w,\n/static/df28afeb1cc5dfa5d6ab63eec563f91f/13ae7/4221ceba-9604-497b-a1d0-142ffae2dd12.png 350w,\n/static/df28afeb1cc5dfa5d6ab63eec563f91f/8c557/4221ceba-9604-497b-a1d0-142ffae2dd12.png 700w,\n/static/df28afeb1cc5dfa5d6ab63eec563f91f/d4c13/4221ceba-9604-497b-a1d0-142ffae2dd12.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/666490879de23dcc8151ae8ef57a61ec/d4c13/4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRklEQVQoz6VSy27TQBS1YF3EhjVLs+EDAn8FqrvJlm2paEGqaJDgB7qAPBQJAapAkKTkVRJPHg6OGzt2Hs7Dj9gznuHOpIUNrDjS0bVnrs6dc2ak7Omnne6g8ch0RnuOZe0iTVf6mqZ0u12l3++J2m63lV6vpyCkKuOxrSxmlmLofUU3LMV2JruXlrNnGMPHHz+8vyM92T+W6z9aTNcHzHVdNp1OWRBuGEcYhoLr9ZptNts1juSqEkL+rOENe/f29IG0f3gsd1HL/3x2RhDqxLZtY8uZ47nrYsce4dHIxIvFAi+XS+x5Hl6tVtgPQkySBMdRhKMoimmSEBi4yWazKenVSUaezpyo0WiwgTagvu/TS8OgnU6H/tTaFCFETdOkjuPQ8XgsGEAPR5IkggAGwrhQKIBg5o1sGFpUKn1jmqbRrb2QBUHIJqbKel2VDYcG/AfCPgwU31wExDgpt8wF8/l8Snp58lq2zEGE1DbkOKQ8R0IwA0/M0uusXq0wVUUMLEO2kKfnCWEOLgo5CkFwjHO5XEp6dvhCdueTKAh8PkVYxjimMSZ0PKzTi2aVqmqHQnY0DAOw6131YEEuyIXjON6e8ODgqbxcrkKwQSF0ApYJbBLImtgjRJDaIqZpEbHn+WS28AhckugDYcIBthM4YSQEj46e3wMB9jdAD8P4+mlQtgwS1rDZP1EsFh9K6XT6bqlU+lIul6uAyjkAblywVquJ2mw2f/MC2Gq1zlVVvWYFXsJ3WPuayWTuS4AbwB3g7f/kLeDNX/f6xGe6LhMwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n        title=\"4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n        src=\"/static/666490879de23dcc8151ae8ef57a61ec/8c557/4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n        srcset=\"/static/666490879de23dcc8151ae8ef57a61ec/4edbd/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 175w,\n/static/666490879de23dcc8151ae8ef57a61ec/13ae7/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 350w,\n/static/666490879de23dcc8151ae8ef57a61ec/8c557/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 700w,\n/static/666490879de23dcc8151ae8ef57a61ec/d4c13/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>KIF được viết bằng Objective C nên các bạn cần thêm <code class=\"language-text\">-ObjC</code> vào <strong>\"Other Linker Flags\"</strong> trong Build Settings của Test Target\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a0e10eabc04e01238fd959042b9d983/d4c13/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACcklEQVQoz5WTS2/TQBDHDfciQOLMMXwDBGc+AR8DcUCgupeeOSFAtIAQLRKcUSqB1B4qQKiBiqRW0jyaxEmcxEnjZ+LEjtePXe8wtlqJC0L8rZ9G3pmdnRmvhf2tjytKu/RQ1dQ1YzJZlZWh2FMUsS3LYuPkROx0ZLEjt8ReryeOBj1xatviwjHEsaqIiqqJ6niy2h/pa91u59HXL/vXhMdPXueOGycwHPbBcRyw7SmQIIRUQRRnNk4yAz6DM3HgnANlyfkCsDiAz592bgtPN97k5HbT/3FwwNptOTYNg2rmjLqeRzGOOguPdiYeJb5HaxNKF4TRhKF1XephTBgGMQlj5jjzcCefvyW829rO2VMzqlar0Ff63Pd9fjoe80ajwU3L4tOpzQ3D4LOZwwNCsLCEJ0nC4zjOLGMMVziEYUj39vYw4faH3GikRMXiL1AUheOpqROiKAJKKdiWDaZpguu62TsmyCAkgBBjMJaTiMF84cX5fP6m8HbrfU6b9KN2q4lzVHk6x3TjudThEI4rFdB1HZMQWC6XGbZlgOvY4ExN7ntz8N05FL5/uyO82HiVc2ZWRIifVpW1nLaTTR6xTIt3u12OVXKStcw5pTGvdHRe7M55Zbjk5cGS9ucAxfrgvvD8+bPcYuEGaTCezLBlhgkZ7svARKzVajHLsliSPkmS+ceWz2SdsI6OViORtgQoNwf3hM3NlzcwAP6mtP3g7Br9S4Z2+kBYX1+/XiwWf5ZKpTLqSELhF5fq9brUbDalQqEg7e7uSoeHhxJWmpH6ypXKca1Wr1ZTqrUK/gTdoyPproC6iKwgl/+TK39wFbmEXPgNxifGqhlsvTIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n        title=\"f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n        src=\"/static/3a0e10eabc04e01238fd959042b9d983/8c557/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n        srcset=\"/static/3a0e10eabc04e01238fd959042b9d983/4edbd/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 175w,\n/static/3a0e10eabc04e01238fd959042b9d983/13ae7/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 350w,\n/static/3a0e10eabc04e01238fd959042b9d983/8c557/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 700w,\n/static/3a0e10eabc04e01238fd959042b9d983/d4c13/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ở phần này mình chỉ giới thiệu về việc thêm KIF framework vào dự án của chúng. Ở phần sau mình sẽ demo về KIF framework</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Phương Võ </div><div class=\"custom-block-body\"></div></div>","id":"ae02ace7-060f-50cc-b36c-bc7cbe64eeaa","frontmatter":{"title":"Automation Test for iOS, part 1","date":"01-03-2021","tags":["ios"]},"fields":{"slug":"/automation_test_for_iOS_part_1/"}}},{"node":{"excerpt":"Chắc khi nghe tên chủ để này bạn có thể sẽ hiểu nhầm: . Nhưng nếu thế thì đơn giản quá. Nhiều khi bạn vào một trang web rất bảo mật, việc crawl một cách đơn giản không hề dễ chịu chút nào đâu. Thế nên…","html":"<p>Chắc khi nghe tên chủ để này bạn có thể sẽ hiểu nhầm: <code class=\"language-text\">crawl trang web một cách đơn giản nhất</code>.</p>\n<p>Nhưng nếu thế thì đơn giản quá. Nhiều khi bạn vào một trang web rất bảo mật, việc crawl một cách đơn giản không hề dễ chịu chút nào đâu. Thế nên, ở đây, tôi xin giới thiệu một con dao mổ trâu <code class=\"language-text\">puppeteer</code> để xử lý những thức phức tạp.</p>\n<p>Thường thì các cách đơn giản để crawl một trang web chỉ là kéo một trang web về, sau đó nó sẽ đọc file html tĩnh được kéo về.</p>\n<p>Nhưng, các trang web bây giờ không đơn giản thế nữa. Nó động, nó được render bằng javascript và chứa nhiều action khác nhau.</p>\n<p>Do đó, việc bạn parse html tĩnh của trang web không thể thực hiện được. Và puppeteer sinh ra để giúp bạn giả lập một trình duyệt web để có thể parse trang web (tất nhiên, việc parse vẫn dựa vào html selector)</p>\n<p>Sau đây, tôi sẽ hướng dẫn các bạn crawl lời của một bài hát ở trên zing mp3</p>\n<p>Trước tiên, tôi sẽ khởi tạo một dự án node js</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">mkdir</span> crawl_mp3\n<span class=\"token builtin class-name\">cd</span> crawl_mp3\n<span class=\"token function\">yarn</span> init</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó thêm thư viện puppeteer vào dự án với câu lệnh <code class=\"language-text\">yarn add puppeteer</code></p>\n<p>Như vậy, tôi đã có các công cụ cần thiết để crawl một trang web.</p>\n<p>Bây giờ, tôi đi vào việc giả lập như một người dùng trang zing mp3.</p>\n<p>Trước tiên, tôi tạo một file <code class=\"language-text\">app.js</code> trong thư mục dự án</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'puppeteer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> headless<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://mp3.zing.vn/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tôi sẽ chạy project với câu lệnh <code class=\"language-text\">node app.js</code> (từ giờ, tôi nói chạy thì các bạn hãy hiểu là dùng câu lệnh này nhé)</p>\n<p>Bạn sẽ thấy có một trình duyệt hiện lên, nó giống như Chrome ấy.</p>\n<p>Đúng rồi, nó là Chromiumn đó (một phiên bản tiền nhiệm trước khi các tính năng được Google phân phối cho Chrome)</p>\n<p>Các câu lệnh với puppeteer sẽ thực hiện các thao tác giống hết như khi bạn thao tác trên web thật đó.</p>\n<p>Bây giờ, tôi sẽ tìm kiếm bài hát.</p>\n<p>Tôi inspect vào ô tìm kiếm và lấy CSS Path của ô này và được kết quả: <code class=\"language-text\">#sug.section-search form.search input.input-txt</code></p>\n<img src=\"https://i.imgur.com/hnKVOOF.png\" style=\"zoom:50%;\">\n<p>Vì vậy, tôi điền bài hát tôi tìm kiếm và nhấn <code class=\"language-text\">Enter</code></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">$eval</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#sug.section-search form.search input.input-txt'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> el<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'Tinh yeu lung linh'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span>keyboard<span class=\"token punctuation\">.</span><span class=\"token function\">press</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Enter'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Và tất nhiên, sau khi nhấn enter, tôi cần chờ để page load xong</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">waitForNavigation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bởi vì, sau khi vào trang search, zing có hiện lên một popup, tôi cần tắt nó đi</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#react-cool-portal > div > div > div > div > button > i'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó tôi nhấn vào nút ba chấm và chờ một lúc để modal nó hiện ra</p>\n<img src=\"https://i.imgur.com/i9GY5DJ.png\" alt=\"https://i.imgur.com/i9GY5DJ.png\" style=\"zoom:50%;\">\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#body-scroll > div.container > div.container > div > div:nth-child(1) > div > div.media-right > div > div:nth-child(4) > button > i'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">waitForTimeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Nhấn tiếp vào <code class=\"language-text\">Lời bài hát</code></p>\n<img src=\"https://i.imgur.com/ePc5Nav.png\" alt=\"https://i.imgur.com/ePc5Nav.png\" style=\"zoom:50%;\">\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#react-cool-portal > div > div > div > ul:nth-child(2) > div > div > button:nth-child(2) > i'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">waitForTimeout</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Lúc này, lời bài hát đã hiện ra, tôi select lời bài hát và in ra kết quả</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> lyrc <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#react-cool-portal > div.zm-portal-modal > div > div > div > div > div.content > textarea'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">await</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>lyrc<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<img src=\"https://i.imgur.com/QpHxqci.png\" alt=\"Screen Shot 2021-02-28 at 15.51.19\" style=\"zoom:50%;\">\n<p>Xong việc, tôi đóng trình duyệt</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau khi, đã viết xong một script để crawl lời bài hát, tôi có thể tắt việc hiện trình duyệt mỗi lệnh chạy</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> headless<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Như vậy, tôi đã hướng dẫn một cách đơn giản nhất việc crawl một trang web.\nMong rằng bài viết giúp ích được các bạn !</p>","id":"70a4b6e8-897d-5d4f-b5e5-c39754be77c9","frontmatter":{"title":"Crawl a complex site with puppeteer","date":"28-02-2021","tags":["javascript"]},"fields":{"slug":"/crawl-mot-trang-web-phuc-tap-voi-puppeteer/"}}},{"node":{"excerpt":"Trong giới lập trình di động, thì mình thấy giao diện của iOS vẫn có gì đó đẹp và ổn hơn của Android. Trong đó có Thanh trạng thái (Status bar) và Thanh điều hướng (Navigation bar) là hai thứ mà người…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Trong giới lập trình di động, thì mình thấy giao diện của iOS vẫn có gì đó đẹp và ổn hơn của Android. Trong đó có Thanh trạng thái (Status bar) và Thanh điều hướng (Navigation bar) là hai thứ mà người dùng Android vẫn luôn thấy nhà Apple làm đẹp và hoàn chỉnh hơn nhà Google.</p></div></div>\n<h2>1. Status bar</h2>\n<p>Thanh trạng thái ở iOS đã có hiệu ứng trong suốt từ những phiên bản iOS đầu tiên. Nhưng với Android thì ... mãi đến Android 4.4 thì Google mới cho phép lập trình viên thay đổi màu sắc của nó nhưng chỉ là những màu đơn sắc, thậm chí ở phiên bản Android trước đó nó chỉ có màu đen (xấu kinh).</p>\n<h2>2. Navigation bar</h2>\n<p>Với thanh điều hướng thì Google đi tiên phong so với Apple, khi trên Android đã có nó từ Android 4.0 gần 10 năm trước.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Giao diện màn hình chính của Android 4.4</div><div class=\"custom-block-body\"><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 250px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c1a9c13b27dc2dabdf04fac52a48517/0479a/android_4_4_home_screen.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAYAQEAAwEAAAAAAAAAAAAAAAAEAQIDBf/aAAwDAQACEAMQAAABidLYLxbqa82s1Xx+lgKjhkYOoiv/xAAbEAADAQEAAwAAAAAAAAAAAAAAARECEhAiMf/aAAgBAQABBQKZJkeUQnj3QtkPpB60ds7d7Z//xAAbEQADAAMBAQAAAAAAAAAAAAAAAQIDESEUQf/aAAgBAwEBPwHFCiEjgs9p8PZP1GjR/8QAHREAAQMFAQAAAAAAAAAAAAAAAgABAwQQEyExQf/aAAgBAgEBPwEpNrIijB+p6cvHv//EABgQAAMBAQAAAAAAAAAAAAAAAAAgMTIh/9oACAEBAAY/AsGCJTqVP//EAB4QAAICAgIDAAAAAAAAAAAAAAARASEQMUFhkaHx/9oACAEBAAE/IeObEfcSNLkRGz2L1Fd4PwJuM2a3RSJef//aAAwDAQACAAMAAAAQ7+HyjD//xAAbEQACAwADAAAAAAAAAAAAAAAAAREhUTFBYf/aAAgBAwEBPxBweeycF+tr0jpkjTCGH//EABgRAQEBAQEAAAAAAAAAAAAAAAEAESFh/9oACAECAQE/EN02o1Bj5a+GS23/xAAbEAADAQEBAQEAAAAAAAAAAAAAARExIUFxUf/aAAgBAQABPxBQwt6a5DJOaZaKnXrEEY1Vp5FFNK/4wpaoeNTj4OSc61Ue0ean6dOnwcGqNdKXUf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Android 4.4 Home Screen\"\n        title=\"Android 4.4 Home Screen\"\n        src=\"/static/1c1a9c13b27dc2dabdf04fac52a48517/0479a/android_4_4_home_screen.jpg\"\n        srcset=\"/static/1c1a9c13b27dc2dabdf04fac52a48517/e52aa/android_4_4_home_screen.jpg 175w,\n/static/1c1a9c13b27dc2dabdf04fac52a48517/0479a/android_4_4_home_screen.jpg 250w\"\n        sizes=\"(max-width: 250px) 100vw, 250px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p></div></div>\n<p>Nhưng nó ra đời khi cằm của điện thoại còn rất dày vẫn chưa mỏng như hiện nay cho nên những chiếc điện thoại thời đó nếu có thanh điều hướng thì vừa có cằm dày và màn hình lại tốn một khoảng cho thanh điều hướng, không những thế thanh điều hướng này cũng không trong suốt nó chỉ có màu đen hoặc trắng, nó xấu đến nỗi hầu hết các hãng làm điện thoại Android không dám đưa nó lên sản phẩm của mình. Phải đợi đến khi Apple \"định nghĩa\" lại thanh điều hướng trên iPhone X, thì Google mới cho sửa sang lại 3 phím điều hướng ảo của Android.</p>\n<h2>3. Make them transparent</h2>\n<p>Mặc dù những phiên bản Android gần đây, thanh trạng thái thậm chí cả thanh điều hướng đã có thể trong suốt, nhưng rất nhiều ứng dụng mình đang cài trên điện thoại vẫn chưa áp dụng :(<br>\nChính vì thế mình sẽ hướng dẫn các bạn làm cho ứng dụng của bạn trở nên đẹp hơn 69 lần với thanh trạng thái và điều hướng trong suốt.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Khi chưa làm trong suốt</div><div class=\"custom-block-body\"><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 324px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0aa4512321400ba36705dcbd399e0f67/67580/default.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAABDrAAAQ6wFQlOh8AAADZUlEQVRIx6VVS08TYRQdoCipwYBLYGHcsHLjwkTFqGzc6daY+J/cSdgQVoYAu5bSB5Qib2gp5VFebQf6pFBooS3Pcpxz49RGN512kpvvzu333bnnu+eeKr2tTnx84sY7sw3vH42jt9Uha0+LFa9NFnx+5sLXF1N4q733PPxrbx5Y8OGxDV+eu/HtpQefnjrxqskCxWVdwY/vPxH0J+FfVOGdD2PDF0dCvUQsVEBcLSAZLWp+HlHNYn9M/HAe8Yj2+2FB21+QmPJrZgquCTsC6z4kj2KaPw5/wAvgTrMSjD5KJKIiEU8glUwhny8gm80hnT6Gqh4gkzmVTXd3JZRK91WZEovF4PF4tEN3uLq6wuXlJa6vr8tfLJVKhkxxuVwYGhrC2toadnd3YbPZ4PP5yskMQw4Gg2CV+/v7OD8/RyQSwcHBAQ4PD3F2diab7u/vq094enqKra0tebm5uSknIOzb21vxDUPu6+vDzs4OQqEQnE4nAoFA+YtMaMQUv98vMDc2NsBqNzc3JXkikUAulzMO+eTkRO6PXabxIdRsNisdNwx5cXERg4ODUhGbQ7iqqtYOeXZ2Fqurq0KVaDSK6elpScoOFwoF45CPjo4Qj8e1KckLZMK9uLgA41yNVqmwCaOjo8LBdDqNZDJZ5l9NkzI5OQmHw4GVlRUhs8ViAe+VPNR5aWhSmIRVsbpisSgw2XlOi14pv1w1ZCZklbw7igMbwbUucRgeHgYJTkKPjY0JfJ1/hiFvb28L/8LhsDSGUOsSh0wmI2NXKQ58dHGoCXJ/fz9YKUewbnGgsHLUyEddHJicZOc81yQOe3t7MiV6E+jXLA7z8/MYGBiQitgIVkw5q6SNIchzc3OSRBcHisX6+jrYLM63YcicENKGhCZUdpqJGK9MWHWFpMzIyIiocyqVql8c3G43JiYmyuLASVleXpbxq0scjo+PRRw4Lf+KgyHIPEgysxrSpG5xoBZSHNhl/j9brVYsLS3J2Omjp3O0qoTkHJtB40HShZB5BZWVVn2HMzMzsNvt0hRyktXpxuZwXVhYgNfrlT00+vreyjhNMZlMaG5uBteuri7xGxsb0dTUBEVR0NbWho6ODvEZ0+Pd3d1ob28vx3mGpjCgGw83NDSgMtbS0iLxyhits7MTZrP5v/hv+d8wizFrHq8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Default UI\"\n        title=\"Default UI\"\n        src=\"/static/0aa4512321400ba36705dcbd399e0f67/67580/default.png\"\n        srcset=\"/static/0aa4512321400ba36705dcbd399e0f67/4edbd/default.png 175w,\n/static/0aa4512321400ba36705dcbd399e0f67/67580/default.png 324w\"\n        sizes=\"(max-width: 324px) 100vw, 324px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p></div></div>\n<p>Ứng dụng demo của mình sẽ có RecyclerView, mặc định thì sẽ trông như hình trên, ứng dụng được vẽ ở trong SystemUI (gồm thanh trạng thái, thanh điều hướng) để có hiệu ứng trong suốt thì bạn làm như sau:</p>\n<ol>\n<li>\n<p>Ở Activity sẽ gọi <a href=\"https://developer.android.com/reference/android/view/View.html#setSystemUiVisibility%28int%29\"><code class=\"language-text\">setSystemUiVisibility()</code></a> và truyền các <code class=\"language-text\">flag</code> sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">decorView.systemUiVisibility = \n                View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN or  \n                View.SYSTEM_UI_FLAG_LAYOUT_STABLE or  \n                View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Flag <code class=\"language-text\">SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</code> để hệ thống vẽ View ở phía dưới Thanh trạng thái.</li>\n<li>Flag <code class=\"language-text\">SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</code> để hệ thống vẽ View ở phía dưới Thanh điều hướng.</li>\n</ul>\n</li>\n<li>\n<p>Với themes.xml (hay styles.xml) chúng ta sẽ đổi màu của thanh trạng thái và thanh điều hướng bằng cách thêm các item sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;item name=&quot;android:statusBarColor&quot;&gt;@android:color/transparent&lt;/item&gt;\n&lt;item name=&quot;android:navigationBarColor&quot;&gt;#80FFFFFF&lt;/item&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Vì đã trở nên trong suốt thì các icon ở thanh trạng thái và thanh điều hướng phải truyền thành màu đen để người dùng có thể nhìn thấy, thì ta sẽ thêm 2 item sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;item name=&quot;android:windowLightStatusBar&quot;&gt;true&lt;/item&gt;\n&lt;item name=&quot;android:windowLightNavigationBar&quot;&gt;true&lt;/item&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>Lưu ý: nếu bạn chuyển màu thanh điều hướng thành trong suốt thì nó lại không trong suốt đâu nên phải để alpha = 50%, thì sẽ có hiệu ứng trong mờ. Nhưng nếu người dùng sử dụng thanh điều hướng cử chỉ (Gesture Navigation a.k.a cái thanh giống iOS trên iPhone X) thì nếu bạn chuyển màu thành trong suốt thì lại được @@.</p>\n<p>Tada ta có như hình phía dưới:</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Chưa có Padding</div><div class=\"custom-block-body\"><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 324px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/169bc4f1c8299cbbfc84d75959f8be0d/67580/without_padding.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAABDrAAAQ6wFQlOh8AAAC40lEQVRIx6WW2U/yUBDF+///B/hATHiCBzQBIQgPipi4sQqoQBSQxRUXZHGBMb/5ckntB8ZCk5vb3rbTOXPmnF4rl8uJ3++XXq8nNzc30mw25e7uTszBervdlslkotfT6VTnt7c3fa5arUq5XJb7+3tdt3Z2dmR3d1dOTk40WCQSkePjYxkMBvLx8aGBPj8/xXmwzn3G+/u7fH19/QvYarWk2+3Kw8ODDIdD/TJZsf709DTLyjnmHaxbV1dXEo1G9Svj8VgDMtszcTOsRCIhwWBQstmsXFxcyNbWlhwdHSkEA8PNYREEeI1GQ/r9vhJgrg1kvjwP9rxhUTuY5gLYJoDJcCnIXq9Xqa/VahKPxyWfz/8otCvIhUJB24WAj4+PUiqVtJas2Vn+c0CCEMD+Eue0ECXg3BXkVCola2trUq/XddDUdL+9bf5KiJJyeHiocCEGdg8ODqRYLKqUYN01ZPRIiwARVpEZsoN9mtxtcyspgUBACUCCBDdCXyS7XyFjDHt7e1o7mI3FYmoUr6+vMwm6gowyyAy2R6ORwiVb1p+fn11naV1eXqp+yYaAEMG8kjlsbGxIJpOR8/Nz9UMgL20OlUpF4VE/WAU+13ZzcAUZRrEuLoDNTOu4hfoD8vr6umoYc9je3l7NHE5PT+X6+lrOzs7U+qkj0lvJHAjiNAeYXsocksmkeDwe4d8CEWgZopZWCuYAXOrW6XRUMZgFGl/KHGCZzIBoeg+joBSoxrU5kJl954BymFcyh/39/Zk58E9BNSubAxkSALiYAvV8eXlxrxSaORQKzZyGIKZ2S5vD5uampNNpbehwOKw7B+Q3b5PkVJBzr6MZmt0C5nB7eztz7t92Dgs3SwTArniJGtI2Zhu3aPAMpJEAg341xqL7Q5/Pp/KjZfgF4D5Odu3nBDVbPwJDoqm7ZsgiM8wyaHYeQsumyZ31oizc+w8y7FIrvgrDBhaEGJMw7WPucZCAU0k8/w3MztA7hwIiSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Without Padding\"\n        title=\"Without Padding\"\n        src=\"/static/169bc4f1c8299cbbfc84d75959f8be0d/67580/without_padding.png\"\n        srcset=\"/static/169bc4f1c8299cbbfc84d75959f8be0d/4edbd/without_padding.png 175w,\n/static/169bc4f1c8299cbbfc84d75959f8be0d/67580/without_padding.png 324w\"\n        sizes=\"(max-width: 324px) 100vw, 324px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p></div></div>\n<p>Tuy nhiên, bạn có thể thấy item đầu tiên và dưới cùng của RecyclerView thì nó lại bị nằm phía dưới của thanh trạng thái và thanh điều hướng. Do đó, bạn phải set padding để cách hai thanh này bằng cách sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ViewCompat.setOnApplyWindowInsetsListener(view) { v: View, insets: WindowInsetsCompat -&gt;  \n    val systemInsets: Insets = insets.systemWindowInsets  \n    v.setPadding(  \n            v.paddingLeft, systemInsets.top,  \n            v.paddingRight, systemInsets.bottom  \n    )  \n    insets  \n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Cơ bản thì đoạn code trên sẽ lắng nghe các số đo của điện thoại trong đó có thanh điều hướng và thanh trạng thái, rồi set padding trên và dưới cho RecyclerView.</p>\n<ul>\n<li>Chú ý: thêm <code class=\"language-text\">android:clipToPadding=&quot;false&quot;</code> vào RecyclerView để các item không bị cắt 4 cạnh theo padding được truyền vào. Mình nói thì hơi khó hiểu nhưng các bạn cứ thêm vào thì sẽ thấy tác dụng của nó.</li>\n</ul>\n<p>Và đây là kết quả:</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Thành quả nè</div><div class=\"custom-block-body\"><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 324px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/504f57cb9ea5bad54e02747f53986315/67580/with_padding.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAABDrAAAQ6wFQlOh8AAACyklEQVRIx62W7UsyURDF9///C6Iv4cdQv0QYpCYFFaKmpaa9qdmLlpmWWlnpxG9gZPNR6Opz4bK7unvunDtnzh1P5ozxeKzXTqcj9/f3k2eudj8ajeTh4UH/f3191d+8UqkkGxsb8vLyIo+Pj9JsNhXEBh99f3//AmT0+315enqafMOzAu7s7MjW1pak02mp1+sSiUQklUrJ5+enfH19zY2cRXjHJgsr4PX1tTQaDQ397e1NI2VlfrdIedmo+inPWsy7vb2V3d1dXfHj40Pe399lOBz+ouwyvVgsJuvr63J8fCzn5+dK/+joaALmOjQpRHl5eamZqlarSpf9NMrzKM4EfH5+ltPTU31gcw0A2iSFe2fKKysrcnZ2JldXVxKNRuXk5OTXRrtML5fLKc1CoSBEWywWFRyxknFnykiE/SPLTAZUu92uZtyZcjKZlEAgoBGRHOjWarXFKe/v70s2m1Wp3NzcyN7enoKS4cFg4E6ZCrm7u9NahDJ0e72eVg5X1yg9khAOh1WDFDplOG0OTnuIOWxvb0/MYXNzU9hXdGi6dKoUQIiK6DAHaP7FHOZSBpAo2TvMgURwXcocgsGgIHAEjR9C3/TnTLlcLqv+KpWKJgaqS5lDu93WsvObA8PMYSHKq6urQqSU4NLmgLFSaujRzAFwxE49L2QOFxcXWiWWBO4XNofDw0NZW1vTiEgEEWNnftk4UT44OFAQMwfMIp/PC8mys9aJMhWCbBC0nbUA8bsf8M8RIplQKKTuTAewtDkkEgmJx+P/dA6U31Lm0Gq11ByolmlzcKLMh4iZaJDJfzEH9hBzQNB0DplMZnFzoHMgSrQHXaTD9JuDAfsbpVlSUspkFzD/y3a2+Ns5Py07brk3Z7cuw6NbQNTojmjxRORjgxLkiPVXDYNi4D3A2Hfr2PTUQ8DW2lrGASI5ZJ6qmabMtpjw/ZR/AJh80z7FFYDqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"With Padding\"\n        title=\"With Padding\"\n        src=\"/static/504f57cb9ea5bad54e02747f53986315/67580/with_padding.png\"\n        srcset=\"/static/504f57cb9ea5bad54e02747f53986315/4edbd/with_padding.png 175w,\n/static/504f57cb9ea5bad54e02747f53986315/67580/with_padding.png 324w\"\n        sizes=\"(max-width: 324px) 100vw, 324px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p></div></div>\n<p>Thế là giao diện ứng dụng của bạn đã đẹp hơn 69 lần rồi đấy. Các bạn cứ làm như hướng dẫn là được. </p>\n<h2>4. One more thing:</h2>\n<p>Nếu bạn nào ngại viết mấy dòng code lắng nghe rồi set padding thì có thư viện đây <a href=\"https://github.com/chrisbanes/insetter\">Insetter</a> của <a href=\"https://medium.com/androiddevelopers/windowinsets-listeners-to-layouts-8f9ccc8fa4d1\">Chris Banes</a>, thay vì viết vào code thì bạn chỉ cần set trực tiếp vào .xml (cơ bản thì anh ấy sử dụng Data Binding để set padding vào view).</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Vũ Tiến Thành </div><div class=\"custom-block-body\"></div></div>","id":"b1a8c29c-470c-5288-8727-86dec680ad7d","frontmatter":{"title":"How to make Status bar and Navigation bar transparent (...like iOS) on Android","date":"28-02-2021","tags":["android","kotlin"]},"fields":{"slug":"/how-to-make-status-bar-and-navigation-bar-transparent-like-ios-on-android/"}}},{"node":{"excerpt":"Hệ sinh thái AWS khổng lồ cung cấp cho chúng ta vô vàn công cụ giúp đẩy nhanh thời gian đưa ý tưởng thành sản phẩm. Trong đó có Elastic Beanstalk (EB). EB là nền tảng giúp ta quản lý tất cả mọi thứ…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Hệ sinh thái AWS khổng lồ cung cấp cho chúng ta vô vàn công cụ giúp đẩy nhanh thời gian đưa ý tưởng thành sản phẩm. Trong đó có Elastic Beanstalk (EB). EB là nền tảng giúp ta quản lý tất cả mọi thứ, như server,load balancer,autoscale,deploy, monitoring, vv... một cách trực quan và dễ hiểu nhất. Chỉ mất 1,2 ngày setup là tất cả mọi thứ ready. Bài viết này hướng dẫn cách gắn một IP tính cho tất cả các instances trong 1 load balanced EB environment.</p></div></div>\n<h2>Mở đầu</h2>\n<p>Với 1 load balanced EB environment, có rất nhiều thứ có thể làm thay đổi IP server của bạn.</p>\n<ul>\n<li>deploy</li>\n<li>auto scaling</li>\n<li>stop &#x26; start server</li>\n<li>update config, settings ...</li>\n</ul>\n<p>EB rất linh hoạt, nên server của bạn cũng sẽ rất \"linh hoạt\".\nVậy nếu tôi muốn gắn 1 IP cố định duy nhất cho tất cả các server của tôi thì sao?\nCó nhiều kịch bản yêu cầu một IP cố định cho server. Tóm lại là không muốn công khai thông tin với người ngoài, tôi chỉ cho ông này với IP này truy cập dữ liệu của tôi thôi.</p>\n<p><em>Một số khái niệm trong bài viết có thể lạ lẫm với một số bạn chưa có kinh nghiệm làm việc với AWS.</em></p>\n<h2>Làm thế nào để cố định IP servers trong Loadbalanced EB</h2>\n<p>Trả lời luôn là dùng NAT Gateway. NAT Gateway dùng để làm gì? Theo tài liệu, NAT Gateway cho phép server của bạn kết nối với internet nhưng không cho internet kết nối trực tiếp tới server.</p>\n<blockquote>\n<p>You can use a network address translation (NAT) gateway to enable instances in a private subnet to connect to the internet or other AWS services, but prevent the internet from initiating a connection with those instances.\nrefs <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html\">https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html</a></p>\n</blockquote>\n<p>nat gateway diagram | nguồn: <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html\">https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html</a>\n<img src=\"https://docs.aws.amazon.com/vpc/latest/userguide/images/nat-gateway-diagram.png\" alt=\"nat gateway diagram\"></p>\n<p>Hệ thống sẽ hoạt động như sau:</p>\n<ul>\n<li>NAT gateway nằm giữa server và Internet (chiều kết nối từ server ra internet)</li>\n<li>NAT gateway được gắn 1 IP cố đinh</li>\n<li>Tất cả các kết nối từ server tới internet được router điều hướng qua NAT Gateway trước khi tới Internet</li>\n</ul>\n<p>Như vậy suy ra việc bạn cần phải làm là:</p>\n<ul>\n<li>NAT Gateway cần được thiết lập để truy cập được internet</li>\n<li>Cần gắn một IP tĩnh cho NAT Gateway</li>\n<li>Cần điều hướng tất cả các kết nối của server qua NAT Gateway</li>\n</ul>\n<p>Tiếp theo sẽ là các bước cụ thể, phải làm thế nào</p>\n<h3>Bước 1: Chuẩn bị sẵn các tài nguyên cần thiết</h3>\n<ul>\n<li>1 VPC</li>\n<li>1 EIP (Elastic IP) chưa được sử dụng</li>\n<li>1 Route table cho internet access (public)</li>\n<li>1 Route table cho NAT Gateway (private)</li>\n<li>2 subnet (1 private, 1 public)</li>\n<li>servers (ở đây dùng luôn Loadbalanced EB servers)</li>\n</ul>\n<h3>Bước 2: Tạo 1 NAT Gateway mới</h3>\n<ul>\n<li>Subnet: chọn public subnet</li>\n<li>Elastic IP allocation ID: chọn EIP đã chuẩn bị</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1bb8b342b68abfd4cc401ec69333ff6c/b2b2c/create-gateway.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACE0lEQVQ4y51Uy5LaMBDkm3PMMfd8SC45pCqH/EQ2WXYrN8DGLPiB5adsY0xnevyAQIpQUVV7bGvU6nlIs+f5C+Yvr/j5PFd8f/qB+esv+CZFXhTI8hxplj0E+s7ctQfX28DbvCmWjoPFyoG33WGz3SJOkoE0V3sPJJ2tSeiu4bguFosldr6Puq5RliUKQVVV+l3dgfpb2xMaYxAEAfb7PRJRU0iYp9MJXdeJ7XA8Hh9C0zQ9YSREm7etKAtgq1pQqbIxf4e2RTdscIlxcHOOVvyUkJIzWZzKYpJQOom5azsq6G6VjkQ3hEEYwphEcsW8WVVHezgc1OneINkNIR+JoBASTbKETJV5UaodlY5qubCWfI1kN4RUM5a8FJVNy/yI46DgOnfdEP71mAhZDE+KspZe3AYRTF7qBqza6SKsESwQc8pINLo0g7XVmbCRFzuEyVCa5rK/Gu2xCTLP/yQgURBG8AOpQZJOG8x2Ox+ZvPSOVp3PxfkT0z/1s0qi68SyQ5RwsVyBx4+7MXyelH0cS5OnWn2CDU8byyEwSdLPJf13HBtRe6GQ7ZLnwyWQZtPkWNFHQF+mZKoyDz5JKd3q2W3wz8F2+VvbMBRHLgfeNMzH/45WeJWwKM7nllZV2mpSew0WpOB8GqEMVrDhWuCgCL3zScny7KGLlD5RFMELpDhPX2E+vYP58gHm83uYbx+lBgl+A845bePtgIFEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create new gateway\"\n        title=\"create new gateway\"\n        src=\"/static/1bb8b342b68abfd4cc401ec69333ff6c/8c557/create-gateway.png\"\n        srcset=\"/static/1bb8b342b68abfd4cc401ec69333ff6c/4edbd/create-gateway.png 175w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/13ae7/create-gateway.png 350w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/8c557/create-gateway.png 700w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/e996b/create-gateway.png 1050w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/2cefc/create-gateway.png 1400w,\n/static/1bb8b342b68abfd4cc401ec69333ff6c/b2b2c/create-gateway.png 1708w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>NAT Gateway phải truy cập được internet nên phải chọn public subnet</p>\n<h3>Bước 3: Thiết lập Route table private</h3>\n<p>Tạo một route table mới, sau đó edit routes, thêm routes sau</p>\n<ul>\n<li>Destination: 0.0.0.0/0</li>\n<li>Target: chọn NAT gateway vừa tạo.</li>\n</ul>\n<p>Route table này có nhiệm vụ điều hướng tất cả kết nối đến và gửi tới NAT Gateway</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c94e24b79205ea9ec382198a6b464ce/95be1/route-table-private.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVQY032QXQ6DIBCEvf9lmvQQPmjTW9RWaBXlTy0w3aVGTR+64SPAbmZ3KIwxGMcRy7IgpYQY40YIYeP4/o+ibVswahjQ9yqjlELXdZBSghtqrfObkCIzUG2+C4GmafK5J7z3KG4Pibt4wc0BdnqvBGg7oa5rlGWJqqqy6OA09GSReHrCObc6i/DOghIohJDQNAUHW6a1kmCtzd/BYmwncU3esdVzhJhgPA0yk6D33y674M4xfnNHDDk6X584XQQ+Lm2DqvwDOisAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"route table\"\n        title=\"route table\"\n        src=\"/static/8c94e24b79205ea9ec382198a6b464ce/8c557/route-table-private.png\"\n        srcset=\"/static/8c94e24b79205ea9ec382198a6b464ce/4edbd/route-table-private.png 175w,\n/static/8c94e24b79205ea9ec382198a6b464ce/13ae7/route-table-private.png 350w,\n/static/8c94e24b79205ea9ec382198a6b464ce/8c557/route-table-private.png 700w,\n/static/8c94e24b79205ea9ec382198a6b464ce/e996b/route-table-private.png 1050w,\n/static/8c94e24b79205ea9ec382198a6b464ce/2cefc/route-table-private.png 1400w,\n/static/8c94e24b79205ea9ec382198a6b464ce/95be1/route-table-private.png 2574w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi tạo routes thì qua subnets. Click vào private subnet đã chuẩn bị và \"Edit route table association\".\nChọn lại Route table private vừa tạo</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/caa7d1e07a1301eaec7e62b94223d532/3162c/private-subnet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4ElEQVQoz3WSbWvTUBTH820r070o/QDzQ5Qy+wAW0Q3xleiroQgyMWkzu2Z2Ky1FZ9c2aXJvcvP8sP49N0rpxnbhxz3hnJz7Pw+Kwxhs20GcZthsNltuiSRJiQRFUUCerZ/sorhFEARgXgAxUSFOuxBTDUoYhpjNZhicDzEej3F5Ncbo8gqTyRRxEiHPM8zncwwNA6PRaIthXJT/5XmOVDhI7D8ImEUJ8w2O377Dk0oFtVoN1WoVz/b3cXDwHNfOEovYwqvXb1DZ8cv76d4eGoeHyEitzBGT7IgKUXiU4MvXUzSbL/Cy2y3pdDo4OjrG3LFw41s4+fQZ9Xod7XYbzVYLLbobjQbef/gIP8nAgwjMD2F7PhTTNHGzWMCiPjLmwF5bcD0PaZYhiiIIT0D4PgJqzX186qEQAj75GZezsCmhtcav39c4Gwxw1vsOXfsG/ccA58MhjIufWFn/HngMxl3YDoMcLnddKMvVCpPpFP1+H6qqQdU09Ho9slXoul4qiOIYcnghKd5FVlCqY5wS8vIBxaOSpPHYSdMUOZWfEdLO/tslO9/SJ9ugcJJsmtbdQEImkXvIXFJIO5rResh9fAi5OuX6UFKFcV7WLxt8H+EHWHOBpeOB0wSDB2Luxvv4C1Jg2ssLKoDZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"private subnet\"\n        title=\"private subnet\"\n        src=\"/static/caa7d1e07a1301eaec7e62b94223d532/8c557/private-subnet.png\"\n        srcset=\"/static/caa7d1e07a1301eaec7e62b94223d532/4edbd/private-subnet.png 175w,\n/static/caa7d1e07a1301eaec7e62b94223d532/13ae7/private-subnet.png 350w,\n/static/caa7d1e07a1301eaec7e62b94223d532/8c557/private-subnet.png 700w,\n/static/caa7d1e07a1301eaec7e62b94223d532/e996b/private-subnet.png 1050w,\n/static/caa7d1e07a1301eaec7e62b94223d532/2cefc/private-subnet.png 1400w,\n/static/caa7d1e07a1301eaec7e62b94223d532/3162c/private-subnet.png 2750w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Như vậy tất cả server trong subnet private, kết nối tới internet sẽ đều được điều hướng thông qua NAT Gateway</p>\n<h3>Bước 4: Chuyển tất cả servers sang private subnet (DONE)</h3>\n<p>Khi tạo EB environment mới cần thực hiện đẩy đủ 1,2,3\nnhưng với EB có sẵn thì chỉ cần thực hiện bước 3 thôi.</p>\n<ol>\n<li>Phần Network: chọn VPC</li>\n<li>\n<p>Load balancer setting</p>\n<ul>\n<li>Visibility: chọn public</li>\n<li>Chọn public subnets.</li>\n</ul>\n</li>\n<li>\n<p>Instance settings</p>\n<ul>\n<li>Public IP addres: bỏ chọn</li>\n<li>Instance subnets: chọn private subnet</li>\n</ul>\n</li>\n</ol>\n<p>Như vậy ta đã hoàn tất các bước thiết lập IP cố định cho tất cả server trong 1 load balanced EB environment.\nĐể test thử thành quả thì rất đơn giản</p>\n<ul>\n<li>ssh vào server</li>\n<li>run <code class=\"language-text\">curl ipinfo.io</code> để kiểm tra IP của server</li>\n</ul>\n<h2>Kết</h2>\n<p>Bài viết đã</p>\n<ul>\n<li>trình bày cách làm thế nào để gắn IP cố định cho servers trong loadbalanced EB env</li>\n<li>giải thích ngắn gọn về cách hoạt động cũng như tại sao lại setting thế này, setting thế kia.</li>\n</ul>\n<p>Do ít thời gian nên bài viết chưa giải thích hết được các khái niệm được đề cập đến, một số bạn chưa có kinh nghiệm aws sẽ thấy khó hiểu. Thời gian tới tác giả sẽ cố gắng có nhiều bài chủ đề liên quan tới aws hơn.</p>\n<p>Cảm ơn mọi người đã đọc bài viết, nếu có comments thì liên lạc với mình qua email anh.nguyen@tomosia.com.</p>\n<p>[[author | Nguyen Tuan Anh ]]</p>","id":"9a7eaf02-7193-542e-b4e7-299864a2d04b","frontmatter":{"title":"Tạo IP tĩnh cho Elastic Beanstalk","date":"28-02-2021","tags":["aws"]},"fields":{"slug":"/tao-ip-tinh-cho-elastic-beanstalk/"}}},{"node":{"excerpt":"Chào cả nhà! Đầu tiên hình ảnh là gì:    Khái niệm về hình ảnh là những gì chúng ta thấy được thông qua thị giác, rồi sau đó chuyển về não giúp ta cảm nhận nhận hình ảnh đó một cách chân thực nhất, từ…","html":"<h2>Chào cả nhà!</h2>\n<p>Đầu tiên hình ảnh là gì:</p>\n<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>   Khái niệm về hình ảnh là những gì chúng ta thấy được thông qua thị giác, rồi sau đó chuyển về não giúp ta cảm nhận nhận hình ảnh đó một cách chân thực nhất, từ đó đưa ra những phản xạ,cảm nhận về hình ảnh mà ta vừa thu nhận.</p></div></div>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 88.125%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/WJjLyXCVvro2I\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/WJjLyXCVvro2I\">via GIPHY</a></p> </div>\n<p>  Tiếp theo ta đến với chủ đề chính là điều chỉnh hình ảnh và cách tạo thư viện hổ trợ chọn hình ảnh từ thư viện của điện thoại <strong>iOS</strong></p>\n<h1>Chào mừng bạn đến với bài viết của mình!</h1>\n<h2>I. Về xử lý hình ảnh:</h2>\n<ul>\n<li>Khi mình tải một hình ảnh điều gì sẽ xảy ra nếu hình ảnh bạn đưa lên \"quá lớn\", tất nhiên hình ảnh của bạn sẽ bị giảm kích thước (độ phân giải) và được đưa lên mà bạn không biết rằng hình ảnh của mình đã bị thay đổi kích thước (độ phân giải) vì sao lại có vấn đề này xảy ra?</li>\n<li>Xử lý hình ảnh giảm kích thước ban đầu của nó, không phải tất cả nhưng hầu hết các ứng dụng hay các trang mạng xã hội, ... đều phải xử lý kích thước hình ảnh gửi lên. Tại sao phải giảm kích thước nó đi, nó đâu có ảnh hưởng gì? hình ảnh sẽ bị giảm phân giải đi nếu bị giảm kích thước trông nó sẽ thế nào?</li>\n<li>Và nếu khi <strong>Upload</strong> ảnh nén lại vậy, khi <strong>load</strong> ra sẽ không còn chuẩn như ảnh gốc, vậy người dùng sẽ nghỉ thế nào khi ảnh của họ bị thay đổi?</li>\n<li>\n<p>Đầu tiên mình sẽ chia sẽ một chút hiểu biết của mình về vấn đề xử lý hình ảnh:</p>\n<ul>\n<li>Xử lý hình ảnh là việc chọn lọc những thông tin mong muốn từ những bức ảnh chụp từ máy ảnh hay máy <strong>Scan</strong>, để chọn lọc những thông tin mong muốn được chứa trong bức ảnh, phương pháp cơ bản được dùng trong xử lý hình ảnh là loại bỏ những phần thông tin ảnh không mong muốn.</li>\n<li>Xử lý hình ảnh hay ở đây là tối giản lại kích thước hình ảnh cho phù hợp với nhu câu sử dụng hình ảnh, để đảm bảo ảnh được tải lên lưu trữ và hiển thị tốt nhất (túm gọn lại là hình ảnh có độ phân giải quá lớn sẽ cần phải giảm kích thước lại cho phù hợp với nhu cầu lưu trữ hay hiển thị để đảm bảo tốc độ tải lên củng như tải xuống), ví dụ như bạn thích góc phải của hình ảnh gốc thì bạn cắt hình ảnh mới từ góc phải của ảnh gốc để lấy hình ảnh bạn yêu thích.</li>\n<li>Chất lượng hình ảnh thì sẽ ra sao khi bị nén lại, tất nhiên nó vẫn xem được với đúng kích thước bạn đã <strong>Resize</strong> theo <strong>Pixel</strong> của hình ảnh, hay chính là kích thước <strong>Width</strong> x <strong>Height</strong> nó sẽ hiển thị ra theo màn hình bạn tỉ lệ đó, và với kích thước được điều chỉnh đó ảnh bạn trông vẫn ổn, chỉ là bạn không thể phóng to hình ảnh ra như phim <strong>Bollywood</strong> thôi.</li>\n<li>Còn vấn đề xử lý hình ảnh chi tiết thì bạn nên tìm hiểu chuyên sâu về xử lý hình ảnh bằng chị Google có rất nhiều bài viết khá thú vị.</li>\n</ul>\n</li>\n<li>Đến với phần chính của bài viết nào!</li>\n</ul>\n<h2>II. iOS làm thế nào để tạo một ImagePicker?</h2>\n<ul>\n<li>Vì sao phải tạo <strong>ImagePickerView</strong> riêng mình mà không dùng <strong>UIImagePickerController</strong> ? Tốn thời gian nhiều để tạo một thư viện làm gì? Tất nhiên tốn thời gian hơn nhưng sẽ có lợi ích riêng, Nếu bạn đang sử dụng <strong>UIImagePickerController</strong> bạn thử chọn những hình ảnh có kích thước lớn hơn 20MB điều gì sẽ xảy ra nhỉ, không có hình ảnh nào được trả về, và không có thông báo gì vậy lỗi này là gì? bạn sẽ mất hàng giờ để tìm hiểu nguyên nhân và kết quả là vì hình ảnh quá lớn nên kết quả trả về là sự chấm dứt việc chọn hình ảnh(bạn chọn hình ảnh lớn trả về cùng kết quả với hành động từ chối ko chọn hình ảnh nữa). vậy điều này khiến bạn tìm đến thư viện hoặc trợ giúp từ Google vậy tại sao bạn không tự kiểm soát vấn đề của mình?</li>\n<li>\n<p>Mình giới thiệu cách mình xử lý trường hợp trên (tự tạo thư viện để sử dụng, nếu bạn thích thì cũng có thể từ đây tạo ra một thư viện chọn ảnh theo phong cách của bạn), các bước tạo thư viện cần thiết là:</p>\n<ol>\n<li>Lấy ảnh từ thư viện(request truy cập thư viện rồi lấy dữ liệu hình ảnh trong thư viện).</li>\n<li>Tạo giao diện show các hình ảnh đó (<strong>CollectionView</strong>, .... tuỳ khả năng design của bạn).</li>\n<li>Giảm kích thước hình ảnh (giảm data của hình ảnh).</li>\n<li>Trả về hình ảnh( lấy hình ảnh đã được chỉnh sữa hoặc data của hình ảnh).</li>\n</ol>\n</li>\n<li>\n<p><strong>Resource</strong> để làm các bước trên:</p>\n<ol>\n<li>\n<p>Tạo File cho thư viện <strong>PickerViewController</strong> và tất nhiên thư viện hổ trợ cho việc này là <strong>Photo</strong>:</p>\n<ul>\n<li>\n<p><strong>Photos</strong> là thư viện hổ trợ cho việc tương tác với thư viện như thêm và chỉnh sửa hổ trợ để lấy hình ảnh từ thư viện ảnh và một số tính năng khác.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">import Photos \n\nclass ImagePickerViewController: UIViewController, PHPhotoLibraryChangeObserver {\n    var assetArray: [PHAsset] = []\n    func getAllPhoto() {\n        PHPhotoLibrary.shared().register(self)\n        let status = PHPhotoLibrary.authorizationStatus()\n        let locationManager = CLLocationManager()\n        if status == .restricted || status == .denied {\n            locationManager.requestWhenInUseAuthorization()\n            return\n        }\n        DispatchQueue.global(qos: .userInteractive).async {\n            let allPhotosOptions = PHFetchOptions()\n            allPhotosOptions.sortDescriptors = [NSSortDescriptor(key: &quot;creationDate&quot;, ascending: false)]\n            allPhotosOptions.predicate = NSPredicate(format: &quot;mediaType == %d&quot;, PHAssetMediaType.image.rawValue)\n            assetArray = PHAsset.fetchAssets(with: allPhotosOptions)\n            DispatchQueue.main.async {\n                // here you reload view\n            }\n        }\n    }\n  }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Tạo giao diện bạn mong muốn (ví dụ bạn tạo một <strong>CollectionView</strong> show toàn bộ hình ảnh lấy được từ thư viện ra, khi selected một hình ảnh thì chuyển sang màn hình chỉnh sửa cắt ,.... ). Và để lấy một ảnh thì từ <strong>PHAsset</strong> thì:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    getImage(asset: PHAsset)-&gt; UIImage {\n        let imageManager = PHImageManager.default()\n        let imageRequestOption = PHImageRequestOptions()\n        imageRequestOption.isSynchronous = true\n        imageRequestOption.resizeMode = .exact\n        imageRequestOption.deliveryMode = .opportunistic\n        imageManager.requestImage(for: asset, targetSize: CGSize(width: 200, height: 200), contentMode: .aspectFill, options:\n        imageRequestOption, resultHandler: {\n          (image, _) -&gt; Void in\n            // here your image (image)\n        })\n    }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>imageRequestOption</strong> là thiết lập cho hình ảnh.</li>\n<li><strong>imageManager.requestImage</strong> là Func trả về một hình ảnh !</li>\n<li>\n<p><strong>imageManager.requestImageData</strong> ta có thể <strong>request data image</strong> thay vì <strong>request image</strong> nếu không muốn lấy <strong>image</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">imageManager.requestImageData(for: asset, options: imageRequestOption) { data, _, _, _ in\n  guard let data = data else { return }\n  DispatchQueue.main.async {\n    if let image = UIImage(data: data) {\n     //note: here your image (image)\n    }\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xử lý hình ảnh khi ta có <strong>image</strong> rồi thì mọi việc dể dàng hơn chỉ cần gọi Func dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">public func jpegData(compressionQuality: CGFloat) -&gt; Data? // return image as JPEG. May return nil if image has no CGImageRef or invalid bitmap format. compression is 0(most)..1(least)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>\n<p>Cách gọi:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">guard let imageData = UIImage(data: dataImage)?.jpegData(compressionQuality: 0.5) else {return}\n// lay data được resize của hình ảnh\nlet imageResize = UIImage(data: imageData)\n// trả về một UIImage từ data</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Sau bước 3 ta đã có hình ảnh đã được chỉnh sửa kích thước, việc còn lại bạn trả về hình ảnh cho nơi gọi hàm.</p>\n<ul>\n<li>\n<p>Tới đây thì việc lấy ảnh từ thư viện và chỉnh sửa ảnh giảm kích thước hay không giảm thì tuỳ thuộc vào option của bạn. Hi vọng nó giúp được bạn ít nhiều. một vài <strong>Option</strong> để lấy hình ảnh mình có sử dụng là:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">public  func  requestPreviewImage(for asset: PHAsset, progressHandler: Photos.PHAssetImageProgressHandler?, resultHandler: @escaping (UIImage?, Data?, [AnyHashable: Any]?) -&gt; Void) -&gt; PHImageRequestID {\n  let option = PHImageRequestOptions()\n  option.isNetworkAccessAllowed = true\n  option.progressHandler = progressHandler\n  return requestImageData(for: asset, options: option) { (data,  _,  _, dictionry: Dictionary?) in\n    if let data = data, let image = UIImage(data: data, scale: 1) {\n      resultHandler(image, data, dictionry)\n    }\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>Func này trả về một hình ảnh nguyên bản và data của nó.</li>\n<li>Tới đây thì có lẽ bạn đã biết được cách lấy hình ảnh từ thư viện hi vọng bạn có thể tạo được bộ source cho <strong>PickerImage</strong> theo ý mình.</li>\n<li>Các <strong>Option</strong> của bạn củng có thể dẫn đến tình trạng lỗi không chọn được hình ảnh nên nếu gặp vấn đề như vậy thì bạn chỉ cần kiểm tra lại ở các <strong>Option</strong> của bạn khi lấy hình ảnh là được (sửa hoặc thay thế <strong>Option</strong> để nhận kết quả mới).</li>\n<li>\n<p>Vậy thì còn lý do gì để bạn không dùng phương pháp này lỗi mình sửa được vẫn hơn trông cậy một ai đó giúp đỡ khi bạn bị task dí đít mà gặp bug?</p>\n<h2>Đến đây chắc hẳn bạn đã tạo được cho mình một <strong>ImagePicker</strong> cho chình mình rồi nhỉ, Cảm ơn Bạn đã đọc bài viết của mình!</h2>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Đặng Cao Trí </div><div class=\"custom-block-body\"></div></div>","id":"3e93a496-9ecb-5b59-90c8-24700aa53780","frontmatter":{"title":"Create library ImagePicker for IOS","date":"24-02-2021","tags":["ios","swift"]},"fields":{"slug":"/create-library-imagepicker-for-ios/"}}},{"node":{"excerpt":"Swagger là một tool hỗ trợ trong việc thiết kế Api một cách dễ dàng. Swagger cho phép | bạn miêu tả cấu trúc Api của bạn, nó sẽ giúp cho cấu trúc Api của bạn được xây dựng 1 | cách đẹp trực quan và có…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Swagger là một tool hỗ trợ trong việc thiết kế Api một cách dễ dàng. Swagger cho phép | bạn miêu tả cấu trúc Api của bạn, nó sẽ giúp cho cấu trúc Api của bạn được xây dựng 1 | cách đẹp trực quan và có thể tương tác với tài liệu API.</p></div></div>\n<h2>Demo:</h2>\n<ol>\n<li>Chuẩn bị project:</li>\n</ol>\n<blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">rails new swagger-demo --api</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</blockquote>\n<blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">rails generate model Pet name photo_url status</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</blockquote>\n<ol start=\"2\">\n<li>Tạo model models/pet.rb:</li>\n</ol>\n<blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class Pet &lt; ApplicationRecord\nend</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</blockquote>\n<ol start=\"3\">\n<li>Tạo api CRUD cho pets:\nChạy lệnh sau để rails tự động generate controller:</li>\n</ol>\n<blockquote>\n<p>rails generate scaffold_controller api/v1/pets</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class Api::V1::PetsController &lt; ApplicationController\n  before_action :set_pet, only: [:show, :update, :destroy]\n  \n  # GET /api/v1/pets\n  def index\n    @pets = Pet.all\n    render json: @pets\n  end\n\n  # GET /api/v1/pets/1\n  def show\n    render json: @pet.to_json(only: [:id, :name, :status, :photo_url])\n  end\n\n  # POST /api/v1/pets\n  def create\n    @pet = Pet.new(pet_params)\n    if @pet.save\n      render json: @pet.to_json(only: [:id, :name, :status, :photo_url]), status: :created\n    else\n      render json: @pet.errors, status: :unprocessable_entity\n    end\n  end\n\n  # PATCH/PUT /api/v1/pets/1\n  def update\n    if @pet.update(pet_params)\n      render json: @pet\n    else\n      render json: @pet.errors, status: :unprocessable_entity\n    end\n  end\n\n  # DELETE /api/v1/pets/1\n  def destroy\n    @pet.destroy\n  end\n\n  private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_pet\n    @pet = Pet.find(params[:id])\n  end\n  # Only allow a trusted parameter &quot;white list&quot; through.\n  def pet_params\n    params.fetch(:pet).permit(:name, :status, :photo_url)\n  end\nend</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Setup rswag gem:</h2>\n<ol>\n<li>Thêm rswag và rspec-rails vào Gemfile:</li>\n</ol>\n<blockquote>\n<p>Gemfile</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">group :development, :test do\n  gem &#39;rspec-rails&#39;, &#39;~&gt; 3.5&#39;\nend\ngem &#39;rswag&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"2\">\n<li>Bundle và chạy generator:</li>\n</ol>\n<blockquote>\n<p>bundle install</p>\n</blockquote>\n<blockquote>\n<p>rails generate rspec:install</p>\n</blockquote>\n<blockquote>\n<p>rails g rswag:install</p>\n</blockquote>\n<ol start=\"3\">\n<li>Tạo file pets_spec.rb và copy đoạn code sau:</li>\n</ol>\n<blockquote>\n<p>spec/integration/pets_spec.rb</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">require &#39;swagger_helper&#39;\n\ndescribe &#39;Pets API&#39; do\n\n  path &#39;/api/v1/pets&#39; do\n\n    post &#39;Creates a pet&#39; do\n      tags &#39;Pets&#39;\n      consumes &#39;application/json&#39;, &#39;application/xml&#39;\n      parameter name: :pet, in: :body, schema: {\n        type: :object,\n        properties: {\n          name: { type: :string },\n          photo_url: { type: :string },\n          status: { type: :string }\n        },\n        required: [ &#39;name&#39;, &#39;status&#39; ]\n      }\n\n      response &#39;201&#39;, &#39;pet created&#39; do\n        let(:pet) { { name: &#39;Dodo&#39;, status: &#39;available&#39; } }\n        run_test!\n      end\n\n      response &#39;422&#39;, &#39;invalid request&#39; do\n        let(:pet) { { name: &#39;foo&#39; } }\n        run_test!\n      end\n    end\n  end\n\n  path &#39;/api/v1/pets/{id}&#39; do\n\n    get &#39;Retrieves a pet&#39; do\n      tags &#39;Pets&#39;\n      produces &#39;application/json&#39;, &#39;application/xml&#39;\n      parameter name: :id, :in =&gt; :path, :type =&gt; :string\n\n      response &#39;200&#39;, &#39;name found&#39; do\n        schema type: :object,\n          properties: {\n            id: { type: :integer, },\n            name: { type: :string },\n            photo_url: { type: :string },\n            status: { type: :string }\n          },\n          required: [ &#39;id&#39;, &#39;name&#39;, &#39;status&#39; ]\n\n        let(:id) { Pet.create(name: &#39;foo&#39;, status: &#39;bar&#39;, photo_url: &#39;http://example.com/avatar.jpg&#39;).id }\n        run_test!\n      end\n\n      response &#39;404&#39;, &#39;pet not found&#39; do\n        let(:id) { &#39;invalid&#39; }\n        run_test!\n      end\n    end\n  end\nend</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"4\">\n<li>Generate file Swagger theo định dạng JSON bằng lệnh sau:</li>\n</ol>\n<blockquote>\n<p>rake rswag:specs:swaggerize</p>\n</blockquote>\n<ol start=\"5\">\n<li>Truy cập đường dẫn sau và nhận được kết quả:</li>\n</ol>\n<blockquote>\n<p><a href=\"http://localhost:3000/api-docs\">http://localhost:3000/api-docs</a></p>\n</blockquote>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">swagger </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/67262392/108799296-8b884180-75c2-11eb-913c-b10f26445e4e.png\" alt=\"Compare\"></p></div></div>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Nhật Huy </div><div class=\"custom-block-body\"></div></div>","id":"fc0edc92-024e-5e77-b23e-58ed4809f699","frontmatter":{"title":"Write Beautiful REST Documentation with Swagger","date":"23-02-2021","tags":["swagger"]},"fields":{"slug":"/how-to-document-rest-apis-with-swagger-and-ruby-on-rails/"}}},{"node":{"excerpt":"SwiftUI Là Gì ?    SwiftUI là một UI Framework mới được phát triển bởi Apple. Nó cung cấp một API mới cho phép người dùng có thể viết Code mà nó có thể làm việc được trên tất cả các Apple platforms…","html":"<h1><strong>SwiftUI</strong> Là Gì ?</h1>\n<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>   <strong>SwiftUI</strong> là một UI <strong>Framework</strong> mới được phát triển bởi <strong>Apple</strong>. Nó cung cấp một API mới cho phép người dùng có thể viết Code mà nó có thể làm việc được trên tất cả các <strong>Apple</strong> platforms: <strong>iOS, iPadOS, watchOS</strong> và <strong>tvOS</strong>!</p></div></div>\n<h2>I. Giới Thiệu:</h2>\n<ol>\n<li>\n<p>Mở Đầu</p>\n<ul>\n<li><strong>SwiftUI</strong> là một UI <strong>Framework</strong> mới được phát triển bởi <strong>Apple</strong>. Nó cung cấp một API mới cho phép người dùng có thể viết Code và nó còn có thể làm việc được trên tất cả các <strong>Apple</strong> platforms: <strong>iOS, iPadOS, watchOS</strong> và <strong>tvOS</strong>!</li>\n<li>Mô hình này được ứng dụng từ trước <strong>iOS 13</strong> và bây giờ đang trở thành một xu hướng mới, nó đem lại sự đơn giản trong quá trình Code và tốc độ xây dựng ứng dụng hơn so với <strong>UIKit</strong>, mặc dù vẫn chưa đủ khả năng thay thế hoàn toàn được <strong>UIKit</strong> , nhưng chưa có gì là chắc chắn cả, giống như <strong>Swift</strong> ra đời cũng chưa thay thế được <strong>Objective - C</strong> chẳng hạn. Nếu so sánh <strong>SwiftUI</strong> với <strong>UIKit</strong> ở thời điểm hiện tại thì đang cách biệt lớn bởi vì vẫn chưa có nhiều những sự trợ giúp từ các trang nổi tiếng như <strong>Stackoverflow, Medium, Hackingswift, ...</strong> về những rắc rối hay những vấn đề phức tạp.</li>\n<li>Hiện tại <strong>SwiftUI</strong> đang được nhiều người lựa chọn sử dụng mặc dù vẫn đang trong quá trình nâng cấp và bổ xung, bởi vì họ tin vào <strong>SwiftUI</strong> sẽ phát triển mạnh mẽ trong tương lai, và có một điều rằng bạn có thể sử dụng đồng thời cả <strong>UIKit</strong> và <strong>SwiftUI</strong> trong một <strong>project</strong>, vậy nó nói lên rằng nếu bạn đã thông thạo <strong>UIKit</strong> thì có thêm một sự trợ gúp hoàn hảo khi sử dụng <strong>SwiftUI</strong>. Có thể nó sẽ là một <strong>Framework</strong> mạnh mẽ trong tương lai gần, tuy còn nhiều thiếu xót nhưng <strong>Apple</strong> đã và đang ngày một hoàn thiện cho nó. </li>\n</ul>\n</li>\n<li>\n<p>Yêu cầu để sử dụng:</p>\n<ul>\n<li>macOS Catalina và XCode 11 Beta trở lên để <strong>SwiftUI</strong> render <strong>Canvas</strong>(<strong>Simulator</strong>).</li>\n<li>Link: How To Install Catalina + XCode 11 Beta, research và làm theo, sau khi cài đặt xong thì chúng ta có thể bắt đầu vời <strong>SwiftUI</strong>.</li>\n</ul>\n</li>\n<li>\n<p>Bắt đầu với <strong>SwiftUI</strong>:</p>\n<ul>\n<li>Đầu tiên bắt đầu với khởi tạo một <strong>Project</strong> đơn giản:\n<img src=\"https://i.ibb.co/874rTgF/Screenshot-2021-02-03-at-15-15-58.png\"></li>\n<li>Giao diện làm việc thật thú vị, không cần khởi chạy mỗi lần cần kiểm tra UI vừa tạo trên <strong>simulator</strong> như <strong>UIKit</strong> , giao diện bên phải tự động cập nhật theo từng dòng Code chúng ta vừa nhập vào, không cần kéo thả những <strong>IBOutlet</strong> hay những lần conflic những <strong>.xib file</strong>, điều này thật khiến ta có trải nghiệm tuyệt vời. </li>\n<li>\n<p>Tiếp theo chúng ta nhìn xem cách nó tạo một <strong>TableView</strong> đơn giản với một Model như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">struct User {\n    var id = UUID()\n    var name: String\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Khởi tạo một Data:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">let users: [User] = [User(name: &quot;hoang&quot;), User(name: &quot;linh&quot;), User(name: &quot;nhung&quot;), User(name: &quot;quang&quot;)]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau đó tạo một <strong>TableView</strong> bằng List:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">List(users, id:\\.id) { user in\n    Text(user.name)\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>Kết quả bên dưới:\n<img src=\"https://i.ibb.co/tbCGM1W/ezgif-com-gif-maker-4.gif\"></li>\n<li>Điều này so với giao diên làm việc trước đây(<strong>UIKit</strong>) có gì khác biệt không nhỉ, tạo một <strong>IBOutlet</strong> cho <strong>TableView</strong> sau đó phải gọi <strong>RegisterCell</strong> để đăng ký những <strong>Cell</strong> cho <strong>TableView</strong> rồi lại sử dụng <strong>Delegate, Datasoure</strong> Để liên kết Data cho chúng, rồi chúng ta vào <strong>Cell</strong> để tạo những <strong>IBOutlet</strong> cho các <strong>Cell</strong>, tiếp đó phải kéo các liên kết <strong>IBOutlet</strong> từ đó vào <strong>.xib file</strong> của <strong>Cell</strong> và phải đảm bảo được là chúng không thiếu xót hoặc nhầm lẫn, sau đó điều chỉnh <strong>Layout</strong>, ...  Khá là nhiều công đoạn để có thể tạo nên một <strong>TableView</strong> với cách làm trước đây, còn với <strong>SwiftUI</strong> bạn thấy rồi đấy.</li>\n<li>Còn rất nhiều những tiện ích, lợi ích mà <strong>SwiftUI</strong> có thể mang lại cho chúng ta nữa không chỉ có code ngắn gọn và sạch, bởi vì nó hoàn toàn mới mẻ nên sẽ khiến bạn còn bất ngờ hơn nhiều nếu bạn tìm hiểu thêm về nó.</li>\n</ul>\n</li>\n</ol>\n<h2>II. <strong>SwiftUI</strong> Có Gì?</h2>\n<ol>\n<li>\n<p>Cấu trúc của nó gồm:\n<img src=\"https://i.ibb.co/68BbdVm/Screenshot-2021-02-03-at-16-00-05.png\">\na. Đầu tiên chúng ta phải biết được cách nó hoạt động:</p>\n<ul>\n<li>\n<p><strong>AppDelegate</strong>:</p>\n<ul>\n<li>Ngay cả trong <strong>iOS 13</strong>, <strong>AppDelegate</strong> vẫn là điểm truy cập chính của một ứng dụng. Các phương thức <strong>AppDelegate</strong> này được cho là phải ở đó để xử lý các sự kiện trong vòng đời ứng dụng, tức là phản hồi ứng dụng đang được khởi chạy, chạy nền, nền trước, nhận dữ liệu, v.v.</li>\n<li>\n<p>Ở <strong>AppDelegate</strong>, những điều chúng ta thường viết mã ứng dụng cho <strong>iOS 12</strong> (trở xuống) là:</p>\n<ul>\n<li>Thiết lập trình điều khiển xem đầu tiên của ứng dụng (được gọi là trình điều khiển xem gốc), func (_: didFinishLaunchingWithOptions :) là func đầu tiên mà hệ điều hành gọi khi khởi chạy ứng dụng.</li>\n<li>Định cấu hình cài đặt ứng dụng và các thành phần khởi động. </li>\n<li>Đăng kí trình xử lý notification.</li>\n<li>Trả lời các sự kiện trong vòng đời của ứng dụng, chẳng hạn như ứng dụng chạy <strong>background</strong>, <strong>foreground</strong> hoặc thoát khỏi ứng dụng.</li>\n</ul>\n</li>\n<li>Nhưng bây giờ chúng ta không cần phải quá quan tâm ở <strong>AppDelegate</strong> nữa, bởi vì môi trường hoạt động chính của chúng ta ở <strong>SceneDelegate</strong>.</li>\n</ul>\n</li>\n<li>\n<p><strong>SceneDelegate</strong>:</p>\n<ul>\n<li>Từ <strong>iOS 13</strong> trở lên, <strong>SceneDelegate</strong> đảm nhận một số vai trò đại biểu của ứng dụng. Quan trọng nhất, khái niệm về <strong>UIWindow</strong>(cửa sổ) được thay thế bằng <strong>UIScene</strong>(bối cảnh). Một ứng dụng có thể có nhiều <strong>Scene</strong> và một <strong>Scene</strong> sẽ đóng vai trò làm nền cho giao diện và nội dung ứng dụng. Vì vậy, <strong>SceneDelegate</strong> chịu trách nhiệm về những gì được hiển thị trên màn hình trong thuật ngữ của giao diện người dùng và dữ liệu.</li>\n<li>Người dùng cũng có thể tạo một bản sao của một <strong>Scene</strong>, chạy hiệu quả nhiều phiên bản của một ứng dụng cùng một lúc.</li>\n<li>\n<p><strong>SceneDelegate</strong> những điều chúng ta cần biết là:</p>\n<ul>\n<li>Một dự án <strong>iOS</strong> mới hiện có lớp <strong>SceneDelegate</strong>, được tạo tự động, bao gồm các sự kiện vòng đời quen thuộc như hoạt động, ngắt kết nối, v.v.</li>\n<li>Class <strong>AppDelegate</strong> có 2 chức năng mới liên quan đến các phiên <strong>Scene</strong>, được gọi là application(<em>:configurationForConnecting:options:) và application(</em>:didDiscardSceneSessions:).</li>\n<li>Danh sách thuộc tính <strong>info.plist</strong> nhận bản khai <strong>Scene</strong> application(Application Scene Manifest), liệt kê các <strong>Scene</strong> là một phần của ứng dụng này, bao gồm tên <strong>class</strong>, <strong>delegate</strong> và <strong>Storyboard</strong> của chúng.</li>\n<li>Thiết lập trình điều khiển xem đầu tiên của ứng dụng (được gọi là trình điều khiển xem gốc), tương tự <strong>AppDelegate</strong> là (<em>: didFinishLaunchingWithOptions :) thì ở đây chúng ta có scene(</em>:willConnectTo:options:), là chức năng đầu tiên mà hệ điều hành gọi khi khởi chạy ứng dụng.</li>\n</ul>\n</li>\n<li>\n<p>Trong <strong>SceneDelegate</strong> còn có những chức năng sau:</p>\n<ul>\n<li>sceneDidDisconnect (_ :) được gọi khi một <strong>Scene</strong> bị ngắt kết nối khỏi ứng dụng (tắt app).</li>\n<li>sceneDidBecomeActive (_ :) được gọi khi người dùng bắt đầu tương tác với một <strong>Scene</strong>, tức là lúc quay trở lại App từ một ứng dụng khác hoặc lúc app xuất hiện lần đầu.</li>\n<li>sceneWillResignActive (_ :) được gọi khi người dùng ngừng tương tác với một <strong>Scene</strong>, tức là chuyển sang <strong>Scene</strong> khác.</li>\n<li>sceneWill EntryForeground (_ :) được gọi khi một <strong>Scene</strong> đi vào <strong>foreground</strong>, tức là bắt đầu hoặc tiếp tục từ trạng thái <strong>foreground</strong>.</li>\n<li>sceneDid EntryBackground (_ :) được gọi khi một <strong>Scene</strong> vào <strong>background</strong>, tức là ứng dụng được thu nhỏ nhưng vẫn đang chạy ở <strong>background</strong>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>b.   Bộ phận khác của <strong>SwiftUI</strong>:</p>\n<ul>\n<li><strong>Assets.xcassets</strong> đây chính là nơi chứa ảnh của <strong>Project</strong>. </li>\n<li><strong>LaunchScreen.xib</strong> thì chắc hẳn bạn đã biết nó là màn hình chờ khi khởi động App.</li>\n<li>\n<p>Trong giao diện <strong>ContenView</strong> ta thấy 2 thành phần gồm <strong>ContenView</strong> và <strong>ContentView_Previews</strong>:</p>\n<ul>\n<li><strong>ContenView</strong> chính là nơi ta tạo giao diện bằng Code của mình.</li>\n<li><strong>ContentView_Previews</strong> chính là thứ tạo nên sự đồng bộ trực tiếp giữa Code và Design.</li>\n<li>Tổ hợp phím Sau <strong>CMD+ALT+Enter</strong> để mở và đóng màn hình <strong>Preview</strong> và <strong>CMD+ALT+P</strong> để khởi chạy màn hình <strong>Preview</strong> nếu chúng ta muốn vừa Code vừa xem sự thay đổi UI vừa được thêm vào bằng Code một cách trực tiếp.</li>\n<li>Bên trong <strong>ContenView</strong> có biến <strong>body: some View</strong> đây chính là <strong>Scene</strong> chính của mỗi <strong>View</strong>, các thành phần bên trong của chúng đều phải tuân theo một <strong>Protocol</strong> chung là <strong>View</strong>, cũng chính là phần khiến ta khó làm quen nhất đối với <strong>SwiftUI</strong>.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Ưu điểm của <strong>SwiftUI</strong>:</p>\n<ul>\n<li>Đầu tiên nó đơn giản và dể học và Code của nó khá là gọn gàng dể đọc.</li>\n<li>Có thể trộn cả <strong>UIKit</strong> vào <strong>SwiftUI</strong> với nhau.</li>\n<li>Có thể dể dàng quản lý chủ đề cho App, có thể đặt làm mặc định chủ đề cho App.</li>\n<li>Cung cấp cơ chế hoạt động cho những người đam mê lập mô hình lập trình phản ứng, <strong>BindableObject</strong>, <strong>ObjectBinding</strong>, và <strong>Combine Framework</strong>.</li>\n<li>Cung cấp khung hình giao diện trực tiếp của <strong>design</strong> cho người dùng viết Code mà không cần phải khởi chạy <strong>Simulator</strong> hoặc <strong>Device</strong> để kiểm tra, xem lại kết quả như trước.</li>\n<li>Không còn <strong>InterfaceBuilder</strong>, nó được thay thế bởi <strong>Canvas</strong> khi bạn, Code sẽ được thêm tự động nếu bạn kéo vào màn hình <strong>Preview</strong>.</li>\n<li>Không còn phải gặp các sự cố crash App khi quên kéo <strong>IBOutlet</strong>.</li>\n<li>Không còn <strong>AutoLayout</strong> và các vấn đề liên quan đến nó, nó được thay thế bằng các bố cục <strong>VStack, ZStack, HStack, Groups, Lists</strong> và những thử khác. Nó Không có <strong>AutoLayout</strong> nên bố cục luôn cần được khởi tạo trước, bởi vì nó không sử dụng <strong>Storyboard</strong> nên nó tạo thuận lợi cho làm việc nhóm đối với quản lý Code. </li>\n</ul>\n</li>\n<li>\n<p>Nhược Điểm: </p>\n<ul>\n<li>Đi kèm với phiên bản hổ trợ là <strong>iOS13</strong> trở lên nên nó sẽ không hỗ trợ được cho các phiên bản <strong>iOS</strong> thấp hơn, điều này thì nếu xem các bảng thông kê sử dụng của <strong>Apple</strong> thì hiện tại bắt đầu làm quen cũng không phải quá sớm, vì hiện nay lượng người sử dụng <strong>iOS 13</strong> trở lên chiếm trên 80% vào tháng 6/2020 thì hiện tại không còn phải lo ngại về vấn đề này. </li>\n<li>Cùng với sự mới mẻ của <strong>SwiftUI</strong> thì chắc chắn nó chưa được nhiều sự trợ giúp từ các trang nổi tiếng như <strong>StackOverFlow</strong> về các vấn đề phức tạp. Hay là một số vấn đề mà <strong>Framework</strong> này chưa hổ trợ. Hoặc bạn có thể tự giải quyết vấn đề của mình và chia sẽ lên để góp phần xây dựng cộng đồng <strong>SwiftUI</strong> ngày một lớn mạnh.</li>\n<li>Không cho phép xem kiểm tra phân cấp <strong>ContentView_Previews</strong>.</li>\n</ul>\n</li>\n<li>\n<p>Đến với ví dụ một UI của một dự án dùng <strong>Framework</strong> <strong>SwiftUI</strong> hoặc <strong>UIKit</strong>:</p>\n<p>a. <strong>UIKit</strong>: </p>\n<ul>\n<li>Đầu tiên là tạo giao diện <strong>InterfaceBuilder</strong>:\n<img src=\"https://i.ibb.co/K7wLX9C/Screen-Shot-2021-02-05-at-16-43-36.png\"></li>\n<li>Tiếp theo là liên kết với <strong>Swift File</strong> như sau:\n<img src=\"https://i.ibb.co/p305kB1/Screen-Shot-2021-02-05-at-16-51-09.png\">\n<img src=\"https://i.ibb.co/0tXMr1N/Screen-Shot-2021-02-05-at-16-51-24.png\"></li>\n<li>Kéo <strong>IBOutlet</strong> cho <strong>View</strong>, liên kết <strong>.xib file</strong> với <strong>Class</strong> ,.....</li>\n<li>Sau mỗi lần chỉnh sửa giao diện ta đều phải khởi chạy để nhìn xem đã đúng mong muốn chưa.</li>\n<li>Nhìn qua để tạo một giao diện cho <strong>UIKit</strong> chúng ta phải trải qua nhiều công đoạn nhỉ.</li>\n</ul>\n<p>b. <strong>SwiftUI</strong>:</p>\n<ul>\n<li>Bắt đầu với một màn hình như sau:\n<img src=\"https://i.ibb.co/0rthy8v/Screenshot-2021-02-05-at-17-16-02.png\"></li>\n<li>Sau đó chúng ta viết Code điều chỉnh giao diện bên trong body và kết quả của giao diện được cập nhật trực tiếp ở <strong>Preview</strong> bên cạnh, mà không không phải lo lắng vấn đề quên kéo <strong>IBOutlet</strong> hay <strong>AutoLayout</strong>, chỉ cần viết Code và cân chỉnh vị trí cho các <strong>Scene</strong>.</li>\n<li>So với cách làm trước đây <strong>UIKit</strong> thì thực là một bước ngoặc lớn về sự đơn giản và tốc độ làm việc.</li>\n</ul>\n</li>\n</ol>\n<h2>III. Tổng Kết.</h2>\n<ul>\n<li>Bài viết này giới thiệu về <strong>SwiftUI</strong>.</li>\n<li>Là một <strong>Framework</strong> mới, thời gian tới sẽ là sự khởi đầu cho <strong>Framework</strong> này, với thống kê của <strong>Apple</strong> thì <strong>iOS13</strong> chiếm trên 80% vào tháng 6/2020 thì hiện tại không còn phải lo ngại về vấn đề này.</li>\n<li>Cộng động <strong>iOS</strong> ngày càng chia sẽ nhiều bài viết và đang dần có nhiều hơn các sự trợ giúp về các vấn đề khó hoặc <strong>SwiftUI</strong> chưa hỗ trợ. </li>\n<li>Hẹn gặp lại ở các bài viết sau, chúng ta cùng tìm hiểu thêm và sử dụng nó nhé!</li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Tri Đặng </div><div class=\"custom-block-body\"></div></div>","id":"c7143574-7230-59ea-9f00-a0fb9afe8b76","frontmatter":{"title":"What is SwiftUI ?","date":"23-02-2021","tags":["ios","swift"]},"fields":{"slug":"/swiftui-la-gi/"}}},{"node":{"excerpt":"JavaScript là ngôn ngữ lập trình Single-thread (đơn luồng), có nghĩa là tại 1 thời điểm chỉ có thể xử lý 1 lệnh.\nGiờ thì bạn hãy tưởng tượng client gửi request lấy dữ liệu từ một API. Ở đây có thể xảy…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>JavaScript là ngôn ngữ lập trình Single-thread (đơn luồng), có nghĩa là tại 1 thời điểm chỉ có thể xử lý 1 lệnh.\nGiờ thì bạn hãy tưởng tượng client gửi request lấy dữ liệu từ một API. Ở đây có thể xảy trường hợp server có thể mất thời gian để xử lý request (tệ hơn là server không trả về kết quả) nếu ở đây đợi đến khi server trả về kết quả mới chạy tiếp thì nó sẽ khiến trang web không phản hồi.\nVậy Javascript mới tạo ra Asynchronous để giúp chúng ta làm việc này (như callbacks, Promises, async/await) giúp luồng chạy của web không bị chặn lại khi đợi request.\nSau đây chúng ta cùng tìm hiểu về  sync, callback(ES5), promise(ES6) và async/await(ES7) trong javascript.</p></div></div>\n<h2>I. Đồng bộ và bất đồng bộ:</h2>\n<p><strong>1. Đồng bộ (synchronous/sync)</strong> là xử lý theo từng bước. Chỉ khi nào công việc hiện tại thực hiện xong thì mới thực hiện công việc tiếp theo. Điều này sinh ra một trạng thái được gọi là <em>trạng thái chờ</em>.</p>\n<blockquote>\n<p>Ưu điểm:</p>\n<ul>\n<li>Hạn chế mắc các lỗi liên quan đến quá trình chạy</li>\n<li>Dễ dàng sửa lỗi</li>\n</ul>\n<p>Hạn chế:</p>\n<ul>\n<li>Vì chạy tuần tự và phải chờ đợi nhau nên sinh ra <em>trạng thái chờ</em>. Thời gian xử lý lâu khi các câu lệnh cần thao tác với dữ liệu bên ngoài gây ảnh hưởng đến trải nghiệm người dùng</li>\n</ul>\n</blockquote>\n<p><strong>2. Bất đồng bộ (asynchronous/async)</strong> cho phép xử lý nhiều tác vụ cùng lúc. Nếu tác vụ nào xong trước sẽ cho ra kết quả trước.</p>\n<blockquote>\n<p>Ưu điểm:</p>\n<ul>\n<li>Xử lý nhiều tác vụ cùng lúc nên giảm thiểu được thời gian xử lý và không sinh ra <em>trạng thái chờ</em></li>\n</ul>\n<p>Hạn chế:</p>\n<ul>\n<li>Khó kiểm soát</li>\n</ul>\n</blockquote>\n<p><strong>Lưu ý:</strong> </p>\n<blockquote>\n<p><em>Hạn chế xử dụng bất đồng bộ trong các tác vụ thêm, sửa với cở sở dữ liệu. Vì một công việc phải trải qua hai giai đoạn:</em></p>\n<ul>\n<li>Validate dữ liệu</li>\n<li>Insert vào database</li>\n</ul>\n<p>=> Giả sử giai đoạn validate hoàn thành sau giai đoạn insert dữ liệu thì nó là một cái gì đó rất tệ nếu giai đoạn validate có lỗi</p>\n</blockquote>\n<h2>II. Callback (ES5)</h2>\n<p><strong>1. Khái niệm:</strong></p>\n<blockquote>\n<p><em>Callback là giải pháp đầu tiên được đưa ra của Javascript để giải quyết các vấn đề liên quan đến xử lý bất đồng bộ theo đúng trình tự mong muốn.</em></p>\n</blockquote>\n<p> Định nghĩa về <em>callback</em> theo trang <code class=\"language-text\">MDN web docs</code></p>\n<blockquote>\n<p><em>A callback function is a function passed into another function as an argument, which is then invoked inside the outer function to complete some kind of routine or action.</em></p>\n<p>Callback là một hàm được truyền vào một hàm khác dưới dạng đối số, sau đó được gọi bên trong hàm để hoàn thành một số loại quy trình hoặc hành động.</p>\n</blockquote>\n<p><strong>2. Ví dụ và cách hoạt động</strong></p>\n<p>Ví dụ: Con mèo ăn cơm mất 5s sau đó uống nước</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// con mèo cần 5s để ăn cơm </span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">an_com</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ăn cơm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span> \n<span class=\"token comment\">// con mèo uống nước</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">uong_nuoc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'uống nước'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//gọi hàm</span>\n<span class=\"token function\">an_com</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">uong_nuoc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ví dụ trên cho kết quả uống nước xong trước ăn cơm mặc dù hàm ăn cơm được gọi trước.\n=> Để con mèo ăn và uống theo đúng trình tự thì chúng ta cần phải có thông tin khi nào con mèo ăn xong mới cho nó uống nước.</p>\n<p><strong>3. Ưu nhược điểm của callback</strong></p>\n<blockquote>\n<p>Ưu điểm:</p>\n<ul>\n<li>Là mô hình khá phổ biến nên rất dễ hiểu.</li>\n<li>Rất dễ implement trong function của chúng ta</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>Nhược điểm:</p>\n<ul>\n<li>Khi thao tác bất đồng bộ, các callback phải chờ nhau thực hiện dẫn đến tổng thời gian hoàn thành tác vụ lâu hơn.</li>\n<li>Dài dòng, khó đọc, khó bảo trì.</li>\n<li><em>Callback hell (pyramid of doom):</em> là cách code không tối ưu, dẫn đến nhiều callback lồng nhau gây khó debug hay bảo trì.</li>\n</ul>\n</blockquote>\n<p>Ví dụ: callback hell</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resultA</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">b</span><span class=\"token punctuation\">(</span>resultA<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resultB</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">c</span><span class=\"token punctuation\">(</span>resultB<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resultC</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>resultC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>Để tránh <em>callback hell</em> thì có nhiều cách như: thiết kế ứng dụng theo dạng module, đặt tên callback, định nghĩa hàm trước khi gọi,...</p>\n</blockquote>\n<h2>III.  Promise (ES6)</h2>\n<p><strong>1. Định nghĩa</strong></p>\n<blockquote>\n<p>Promise là người em sinh sau đẻ muộn so với callback nên nó có thể khác phục được những vấn đề như callback hell hay pyramid of doom khá là tốt, giúp code trở nên dễ đọc, gọn gàng hơn.</p>\n</blockquote>\n<blockquote>\n<p>Promise có nghĩa là một sự hứa hẹn hay lời hứa, mà lời hứa thì sẽ có hai trạng thái là hoàn thành và thất bại.</p>\n</blockquote>\n<p><strong>2. Cách sử dụng</strong></p>\n<p>Cách tạo ra một promise:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* executor */</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// xử lý tác vụ ở đây</span>\n<span class=\"token comment\">// gọi resolve(result) khi tác vụ hoàn thành.</span>\n<span class=\"token comment\">// gọi reject(result) khi tác vụ sảy ra lỗi</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hàm  <code class=\"language-text\">executor</code>  là một hàm sẽ được gọi ngay khi Promise được gọi tới, nó chứa hai tham số:</p>\n<ul>\n<li>resolve: hàm sẽ được gọi khi xử lý thành công.</li>\n<li>reject: hàm được gọi khi xử lý thất bại.</li>\n</ul>\n<p>Tại mỗi thời điểm, Promise sẽ có những trại thái khác nhau, bắt đầu với  <code class=\"language-text\">pending</code>  hay  <code class=\"language-text\">unsetted</code>. Trạng thái này chính là trạng thái ban đầu của Promise khi được khởi tạo và đang chờ kết quả trả về. Khi quá trình xử lý thực hiện xong xuôi, promise sẽ chuyển sang trạng thái  <code class=\"language-text\">setted</code>, khi kết quả được trả về, sẽ có hai khả năng có thể xảy ra:</p>\n<ul>\n<li><code class=\"language-text\">fulfilled</code>: trạng thái xử lý thành công.</li>\n<li><code class=\"language-text\">rejected</code>: trạng thái xử lý thất bại.</li>\n</ul>\n<p>Ví dụ: trước hôm thi đại học, mẹ ngồi cạnh bạn và nói \"Cố đỗ đại học rồi mẹ sẽ mua iphone 12 pro max cho\". Khi đó, lời hứa của mẹ bạn sẽ trông như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">loi_hua_cua_me</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n  <span class=\"token keyword\">return</span> <span class=\"token function\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">thuc_hien_loi_hua<span class=\"token punctuation\">,</span> that_hua</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> \n    <span class=\"token comment\">// Sau khi thi đại học xong </span>\n    <span class=\"token comment\">// Nếu điểm bạn cao </span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>diem_cao<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n\t  <span class=\"token comment\">// Lúc này trạng thái lời hứa là fulfilled\t</span>\n\t  <span class=\"token function\">thuc_hien_loi_hua</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mua iphone 12 pro max\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> \n\t  <span class=\"token comment\">// Lúc này trạng thái của lời hứa là rejected</span>\n\t  <span class=\"token function\">that_hua</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mua iphone x\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span> \n<span class=\"token comment\">// Khi vừa được khởi tạo xong, trạng thái của promise sẽ là</span>\npendding\n<span class=\"token comment\">// Mẹ vừa hứa với bạn xong, đang chờ điểm thi đại học của bạn </span>\n<span class=\"token keyword\">var</span> promise <span class=\"token operator\">=</span> <span class=\"token function\">hua_cho_vui</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \npromise\n<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">iphone_12_pro_max</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">iphone_x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi một promise được thực hiện, nếu thành công thì sẽ <strong>gọi callback trong hàm then</strong>, nếu thất bại thì promise sẽ <strong>gọi promise trong hàm catch</strong>.</p>\n<p><img src=\"https://images.viblo.asia/full/d3c97aa7-0a13-425e-b39f-5c870ec479da.png\"></p>\n<p><strong>3. Promise chaining</strong></p>\n<p>Nếu xử lý các câu lệnh bất đồng bộ liên tiếp nhau với <strong>callback</strong> rất dễ dẫn đến tình trạng <em>callback hell</em> như đã nói ở trên khi mà có quá nhiều hàm callback bị lồng vào nhau làm cho việc đọc hiểu cũng như debug trở nên khó khăn. Promise chaining hay chuỗi promise được sinh tra nhằm khắc phục vấn đề trên.\nGiá trị trả về của hàm <code class=\"language-text\">then()</code> sẽ là một promise khác, do đó có thể dùng promise để gọi liên tiếp các hàm bất đồng bộ. Promise thứ hai sẽ được xử lý khi promise thứ nhất trả về <code class=\"language-text\">fulfilled</code> hoặc <code class=\"language-text\">reject</code>.</p>\n<p>Ví dụ: Có một đoạn callback như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">api<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> error\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">getPostsOfUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> posts</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> error\n    api<span class=\"token punctuation\">.</span><span class=\"token function\">getCommentsOfPosts</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> comments</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> error\n      <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đoạn callback trên sau khi được viết lại bằng Promise:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">api\n  <span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> api<span class=\"token punctuation\">.</span><span class=\"token function\">getPostsOfUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">posts</span> <span class=\"token operator\">=></span> api<span class=\"token punctuation\">.</span><span class=\"token function\">getCommentsOfPosts</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> error\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong ví dụ ở trên ta lần lượt gọi đến ba hàm  <code class=\"language-text\">getUser</code>,  <code class=\"language-text\">getPostsOfUser</code>  và  <code class=\"language-text\">getCommentsOfPosts</code>. Chỉ cần một trong ba hàm này bị lỗi, promise sẽ chuyển qua trạng thái  <em>reject</em>  và  <em>callback</em>  trong hàm  <em>catch</em>  sẽ được gọi đến, lúc này việc bắt lỗi sẽ trở nên dễ dàng hơn.</p>\n<p>Tuy nhiên tiện là như vậy nhưng toàn bộ các hàm  <code class=\"language-text\">then()</code>  chỉ được tính là một câu lệnh. Điều này sẽ gây khó khăn cho việc debug sau này.</p>\n<p><strong>4. Promise.all()</strong></p>\n<p><code class=\"language-text\">Promise.all()</code>  nhận và là một đối số và thông thường là một mảng các promise. Trạng thái của promise này sẽ là  <code class=\"language-text\">fulfilled</code>  nếu trạng thái của tất cả các promise được truyền vào là  <code class=\"language-text\">fulfilled</code>  ngược lại, promise sẽ mang trạng thái  <code class=\"language-text\">reject</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise_1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> promise_2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> promise_3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>promise_1<span class=\"token punctuation\">,</span> promise_2<span class=\"token punctuation\">,</span> promise_3<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>5. Promise.race()</strong></p>\n<p>Khác với  <code class=\"language-text\">Promise.all()</code>, hàm  <code class=\"language-text\">Promise.race()</code>  sẽ xử lý promise đầu tiên có kết quả trả về không quan tâm kết quả trả về có lỗi hay không.</p>\n<p>Ví dụ promise<em>1 được resolve đầu tiên nên giá trị mà promise trả về sẽ là giá trị của promise</em>1 và bằng 1.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise_1 <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> promise_2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> promise_3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">race</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>promise_1<span class=\"token punctuation\">,</span> promise_2<span class=\"token punctuation\">,</span> promise_3<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>IV.  Async/await (ES7)</h2>\n<p>Async/await là cơ chế giúp bạn thực thi các thao tác bất đồng bộ  <em>một cách tuần tự hơn</em>  , giúp đoạn code nhìn qua tưởng như đồng bộ nhưng thực ra lại là chạy bất đồng bộ, giúp chúng ta dễ hình dung hơn.</p>\n<p><img src=\"https://images.viblo.asia/e2f5d967-9eab-4aa5-bafd-9e80c50ebd71.jpg\"></p>\n<p><strong>1.  Async</strong></p>\n<p>Để định nghĩa một hàm bất đồng bộ với async, ta cần khai báo từ khóa  <code class=\"language-text\">async</code> ngay trước từ khóa định nghĩa hàm.</p>\n<p>Regular function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Function expression:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token function-variable function\">getUser</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Kết hợp với cú pháp  <em>arrow function</em>  của ES6</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token function-variable function\">getUser</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Giá trị trả về của Async Function sẽ luôn là một  <em>Promise</em>  mặc cho bạn có gọi await hay không, nếu trong code không trả về Promise nào thì sẽ có một promise mới được resolve với giá trị lúc đầu (nếu không có giá trị nào trong return kết quả trả về sẽ là undefine). Promise này sẽ ở trạng thái thành công với kết quả được trả về qua từ khóa  <em>return</em>  của hàm async, hoặc ở trạng thái thất bại với kết quả được đẩy qua từ khóa  <em>throw</em>  trong hàm async.</p>\n<p><strong>2.  Await</strong></p>\n<p>Về cơ bản thì  <code class=\"language-text\">await</code>  giúp cho cú pháp trông dễ hiểu hơn, thay thì phải dùng  <code class=\"language-text\">then()</code>  nối tiếp nhau thì chỉ cần đặt  <code class=\"language-text\">await</code>  trước mỗi hàm mà chúng ta muốn đợi kết quả của thao tác bất đồng bộ. Chỉ dùng được  <code class=\"language-text\">await</code>  trong hàm nào có  <code class=\"language-text\">async</code>  đứng phía trước.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><strong>3.  Tại sao nên dùng async/await</strong></p>\n<p>Vì là sinh sau đẻ muộn nên nó có nhiều ưu điểm vượt trội so với các đàn anh đi trước như:</p>\n<ul>\n<li><strong>Code ngắn và sạch hơn</strong>. Điều dễ thấy nhất khi dùng async/await số lượng code phải viết giảm đi đáng kể, không phải  <em>then</em>  rồi  <em>catch</em>  gì cả hay là đặt tên cho một biến mà ta không sử dụng, tránh được các khối code lồng nhau, code được viết ra như code chạy tuần tự dễ đọc hơn rất nhiều.</li>\n<li>Công việc debug trở nên dễ dàng hơn vì so với promise, mỗi một lần dùng await sẽ được tính là một dòng code.</li>\n<li>Khi có lỗi, thay vì báo chung chung  <em>un-resolved</em>  như ở promise thì exception sẽ chỉ ra là lỗi xảy ra ở dòng số bao nhiêu.</li>\n</ul>\n<h2>V. Một số ví dụ</h2>\n<ol>\n<li>Synchronous</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// sync</span>\n<span class=\"token keyword\">function</span>  <span class=\"token function\">demo_sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span>  i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">demo_sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// kết quả:</span>\n<span class=\"token comment\">// 0</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// 3</span>\n<span class=\"token comment\">// 4</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"2\">\n<li>Callback</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// callback</span>\n<span class=\"token keyword\">function</span>  <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span>  <span class=\"token function\">goodbye</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Good bye\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span>  <span class=\"token function\">demo_callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">goodbye</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">demo_callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// kết quả:</span>\n<span class=\"token comment\">// Good bye</span>\n<span class=\"token comment\">// Hello</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"3\">\n<li>Promise</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// promise</span>\n<span class=\"token keyword\">function</span>  <span class=\"token function\">myDisplayer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">some</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>some<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span>  myPromise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span>  <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">myResolve<span class=\"token punctuation\">,</span> myReject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span>  x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">myResolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"OK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">myReject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmyPromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token function\">myDisplayer</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token function\">myDisplayer</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// kết quả:</span>\n<span class=\"token comment\">// OK</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"4\">\n<li>Async, await</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// async, await</span>\n<span class=\"token keyword\">function</span>  <span class=\"token function\">myDisplayer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">some</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>some<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span>  <span class=\"token function\">resolveAfter2Seconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span>  <span class=\"token keyword\">new</span>  <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span>  <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resolved'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span>  <span class=\"token keyword\">function</span>  <span class=\"token function\">asyncCall</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">myDisplayer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calling'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span>  result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span>  <span class=\"token function\">resolveAfter2Seconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">myDisplayer</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">asyncCall</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n<span class=\"token comment\">// kết quả:</span>\n<span class=\"token comment\">// calling</span>\n<span class=\"token comment\">// resolved</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>VI. Kết luận</h2>\n<ul>\n<li>Qua bài viết trên chúng ta có thể thấy được async/await là một trong những tính năng mang tính cách mạng được thêm vào JavaScript trong vài năm gần đây. Nó giúp chúng ta nhận ra Promise còn thiếu sót như thế nào, cũng như cung cấp giải pháp thay thế.</li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Lê Văn Ninh - Tomosia Việt Nam </div><div class=\"custom-block-body\"></div></div>","id":"8cfe6fa7-7675-5b38-acc5-df70c957af0d","frontmatter":{"title":"Learn synchronous and asynchronous in javascript","date":"22-02-2021","tags":["javascript"]},"fields":{"slug":"/tim-hieu-sync-va-async-trong-javascript/"}}},{"node":{"excerpt":"PHP 8.0 đã chính thức được phát hành vào ngày 26 tháng 11 năm 2020! Bản cập nhật lớn mới này mang lại nhiều tối ưu hóa và các tính năng mạnh mẽ. PHP 8.0 là một bản cập nhật lớn và là một cột mốc đáng…","html":"<p>PHP 8.0 đã chính thức được phát hành vào ngày 26 tháng 11 năm 2020!</p>\n<p>Bản cập nhật lớn mới này mang lại nhiều tối ưu hóa và các tính năng mạnh mẽ. PHP 8.0 là một bản cập nhật lớn và là một cột mốc đáng chú ý trong PHP, vì nó mang đến một số tính năng mới trong hệ thống, cú pháp, xử lý lỗi, chuỗi, lập trình hướng đối tượng, v.v.</p>\n<h1>I. Major New Features</h1>\n<h2>Named Parameters</h2>\n<p>PHP 8.0 cho phép các tham số được đặt tên trong các function/method.</p>\n<p>Các đối số được đặt tên cho phép bạn chuyển các giá trị vào một hàm, bằng cách chỉ định tên giá trị, do đó bạn không phải xem xét thứ tự của chúng và bạn cũng có thể bỏ qua các tham số tùy chọn!</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token shell-comment comment\">#Ex1:</span>\n<span class=\"token function\">str_contains</span><span class=\"token punctuation\">(</span>needle<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'Bar'</span><span class=\"token punctuation\">,</span> haystack<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'Foobar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token shell-comment comment\">#Ex2:</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$a</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$b</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">?</span>string <span class=\"token variable\">$c</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">?</span>string <span class=\"token variable\">$d</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">{</span> <span class=\"token comment\">/* … */</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>\n    b<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'value b'</span><span class=\"token punctuation\">,</span> \n    a<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'value a'</span><span class=\"token punctuation\">,</span> \n    d<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'value d'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Điều này làm cho tên tham số function/method trở thành một phần của API công khai. Đối số DocBlock @no-named-arguments thể hiện rằng thư viện không cung cấp khả năng tương thích ngược cho các tham số được đặt tên.</p>\n<h2>Attributes</h2>\n<p>Các thuộc tính cho phép khai báo siêu dữ liệu cho các hàm, lớp, thuộc tính và tham số. Các thuộc tính ánh xạ đến tên lớp PHP (được khai báo bằng chính thuộc tính của nó) và chúng có thể được tìm và nạp theo chương trình.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/*** PHP 7 ***/</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PostsController</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * @Route(\"/api/posts/{id}\", methods={\"GET\"})\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* ... */</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*** PHP 8 ***/</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PostsController</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token shell-comment comment\">#[Route(\"/api/posts/{id}\", methods: [\"GET\"])]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* ... */</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Attributes tạo nên sự dễ dàng và hiệu quả khi khai báo Attributes. Thay vì chú thích PHPDoc, giờ đây bạn có thể sử dụng siêu dữ liệu có cấu trúc với cú pháp gốc của PHP.</p>\n<h2>Constructor Properties</h2>\n<p>Một cú pháp mới để khai báo các thuộc tính của lớp ngay từ phương thức khởi tạo lớp (__construct magic method).</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Trong hàm tạo, PHP 8.0 hỗ trợ khai báo phạm vi (public, private, hoặc protected) và kiểu. Các thuộc tính đó sẽ được đăng ký dưới dạng các thuộc tính lớp có cùng khả năng hiển thị và kiểu mà chúng được khai báo trong hàm tạo.</p>\n<p>Tiết kiệm viết mã hơn để xác định và khởi tạo thuộc tính.</p>\n<h2>Union Types</h2>\n<p>Union Types mở rộng khai báo kiểu (kiểu trả về, tham số và thuộc tính lớp) để khai báo nhiều hơn một kiểu.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">parse_value</span><span class=\"token punctuation\">(</span>string<span class=\"token operator\">|</span>int<span class=\"token operator\">|</span>float<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string<span class=\"token operator\">|</span><span class=\"token constant\">null</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nó cũng hỗ trợ false như một kiểu đặc biệt (đối với Boolean false), một đặc điểm phổ biến trong mã kế thừa không sử dụng Exceptions.</p>\n<h2>Null-safe Operator</h2>\n<p>Toán tử Null-safe cung cấp sự an toàn trong chuỗi method/property khi giá trị trả về hoặc thuộc tính có thể là rỗng.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">return</span> <span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCountry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">isoCode</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">?-&gt;</code> sẽ làm ngắn mạch phần còn lại của biểu thức nếu nó gặp giá trị null và ngay lập tức trả về null mà không gây ra bất kỳ lỗi nào.</p>\n<h2>Match expressions</h2>\n<p>Match expressions tương tự như <code class=\"language-text\">switch</code>, nhưng <code class=\"language-text\">match</code> cung cấp so sánh an toàn về kiểu, hỗ trợ giá trị trả về, không yêu cầu câu lệnh <code class=\"language-text\">break</code> và hỗ trợ nhiều giá trị so khớp. nó cũng đảm bảo rằng ít nhất một nhánh được khớp, đảm bảo tất cả các trường hợp được tính toán.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'test'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token single-quoted-string string\">'test'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">sendTestAlert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'send'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">sendNuclearAlert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Không phải tất cả các <code class=\"language-text\">switch</code> đều có thể chuyển đổi tốt để <code class=\"language-text\">switch</code> với các khối. Mã yêu cầu khả năng tương thích ngược, các <code class=\"language-text\">switch</code> với nhiều câu lệnh (trái ngược với các biểu thức một dòng) hoặc mong đợi chức năng chuyển đổi vẫn phù hợp với các câu lệnh switch.</p>\n<h1>II. Type System Improvements</h1>\n<h2>New mixed pseudo type</h2>\n<p>PHP 8.0 mang đến kiểu <code class=\"language-text\">mixed</code>, vốn đã được sử dụng rộng rãi trong các bình luận DocBlock.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">dd</span><span class=\"token punctuation\">(</span>mixed <span class=\"token variable\">$var</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$var</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">mixed</code> có thể được sử dụng để chỉ ra rằng nó chấp nhận bất kỳ loại nào hoặc có thể trả về bất kỳ loại nào. Trong một class/interface, <code class=\"language-text\">mixed</code> tuân theo theo cùng các quy tắc của <a href=\"https://php.watch/articles/php-lsp\">Liskov Substitution Principle</a>.</p>\n<h2>static return type for class methods</h2>\n<p>kiểu trả về <code class=\"language-text\">static</code>, đã được hỗ trợ dưới dạng kiểu trả về DocBlock, hiện được hỗ trợ trong PHP 8.0. Kiểu trả về <code class=\"language-text\">static</code> khai báo một đối tượng của lớp được gọi sẽ được trả về.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">static</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">static</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>III. String-related changes</h1>\n<p>Trong PHP 8.0, có một số thay đổi nhỏ ban đầu có thể không rõ ràng, nhưng có thể dẫn đến kết quả khá bất ngờ.</p>\n<p>Một sự khác biệt chính trong PHP 8.0 là, PHP hiện coi là có một chuỗi trống giữa mọi ký tự trong một chuỗi nhất định.</p>\n<p>Trước PHP 8.0, không kiểm tra chuỗi trống (\"\"), nhưng trong PHP 8.0, PHP sẽ vui vẻ chấp nhận nó và trả về rằng thực sự có một chuỗi trống giữa mỗi ký tự.</p>\n<p>Việc xử lý multi-byte hoặc các function như strlen vẫn trả về các giá trị giống như các phiên bản cũ hơn, nhưng tất cả các hàm kiểm tra một chuỗi con trong một chuỗi nhất định đều bị thay đổi.</p>\n<h2>substr, iconv<em>substr, grapheme</em>substr return empty string on out-of-bound offsets</h2>\n<p>Các hàm này trả về một chuỗi rỗng thay vì trả về false.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'FooBar'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"\" in PHP >=8.0, false in PHP &lt; 8.0</span>\n<span class=\"token function\">mb_substr</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'FooBar'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"\" in PHP >=8.0, false in PHP &lt; 8.0</span>\n<span class=\"token function\">iconv_substr</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'FooBar'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"\" in PHP >=8.0, false in PHP &lt; 8.0</span>\n<span class=\"token function\">grapheme_substr</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'FooBar'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"\" in PHP >=8.0, false in PHP &lt; 8.0</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>+/- operators take higher precedence when used with concat (.) operator</h2>\n<p>Khi các toán tử toán học + và - được sử dụng trong cùng một biểu thức với toán tử nối (.), Các toán tử + và - được ưu tiên cao hơn. Điều này dẫn đến thông báo không dùng nữa trong các phiên bản PHP trước 8.0, nhưng giờ đây nó diễn ra một cách âm thầm và theo cảnh báo.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">echo</span> <span class=\"token number\">35</span> <span class=\"token operator\">+</span> <span class=\"token number\">7</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'.'</span> <span class=\"token punctuation\">.</span> <span class=\"token number\">0</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span> <span class=\"token comment\">// 42.5 in PHP >= 8.0</span>\n<span class=\"token keyword\">echo</span> <span class=\"token number\">35</span> <span class=\"token operator\">+</span> <span class=\"token number\">7</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'.'</span> <span class=\"token punctuation\">.</span> <span class=\"token number\">0</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span> <span class=\"token comment\">// 47 in PHP &lt;= 8.0</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h1>IV. Tổng kết</h1>\n<p>Có nhiều thay đổi lớn đáng kể và sức mạnh tăng tiến. PHP đang không ngừng thay đổi, PHP core team và cộng đồng PHP vẫn đang nỗ lực từng ngày để làm cho PHP trở nên tốt hơn, đáp ứng nhu cầu trong thời kỳ mới tốt hơn.</p>\n<p>Trên đây là một trong rất nhiều những thay đổi mà phiên bản PHP 8.0 mang lại, các bạn có thể tham khảo nhiều hơn về những thay đổi của PHP 8.0 trên trang chủ của họ tại <a href=\"https://www.php.net/releases/8.0/en.php\">đây</a>.</p>\n<p>Tham khảo <code class=\"language-text\">https://php.watch/versions/8.0</code></p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"4f327df2-dc38-5d3c-bb93-ef6e67177069","frontmatter":{"title":"What’s New in PHP 8.0","date":"22-02-2021","tags":["php"]},"fields":{"slug":"/whats-new-in-php-8-0/"}}},{"node":{"excerpt":"Trong bài này tôi sẽ hướng dẫn làm thế nào để Lambda (hay các resources khác trong AWS) thuộc private subnet có thể truy cập Internet. Ngoài ra, ta có thể chỉ định được IP cố định khi lambda truy cập…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Trong bài này tôi sẽ hướng dẫn làm thế nào để Lambda (hay các resources khác trong AWS) thuộc private subnet có thể truy cập Internet. Ngoài ra, ta có thể chỉ định được IP cố định khi lambda truy cập internet</p></div></div>\n<p><img src=\"https://blog.theodo.com/static/ab8c61557bfb8bb1310933f58d76e74c/a79d3/aws-vpc-internet-access-thumbnail-image.png\" alt=\"AWS VPC with Internet Access\"></p>\n<h2>1 - Create a VPC</h2>\n<blockquote>\n<p><strong>VPC</strong> (<strong>Virtual Private Cloud</strong>) Là mạng riêng ảo trên Cloud nơi mà bạn có thể tạo ra các tài nguyên cho hệ thống của mình, nó giúp bạn tạo ra một môi trường tách biệt, nơi mà bạn có thể triển khai hệ thống trong một hệ thống mạng ảo riêng mà bạn định nghĩa. Bạn có toàn quyền quyết định môi trường mạng ảo này sẽ như thế nào, bao gồm lựa chọn dải IP của riêng bạn, tạo mạng con (<strong>subnet</strong>), bảng định tuyến (<strong>route table</strong>) và cổng kết nối mạng (<strong>net gateway</strong>), cũng có thể sử dụng cả <strong>IPv4</strong> và <strong>IPv6</strong> cho bảo mật và dễ dàng truy cập ứng dụng, tài nguyên của bạn.</p>\n</blockquote>\n<p>Nếu bạn chưa có VPC thì bạn cần tạo 1 cái.\nĐể làm điều đó, đi đến tab Services, chọn VPC, click Your VPC phía bên trái menu và tạo 1 cái</p>\n<ul>\n<li>Nhập tên VPC, ví dụ <code class=\"language-text\">my-wonderful-vpc</code></li>\n<li>\n<p>Trong khối CIDR (class inter-domain routing) nhập 1 dải địa chỉ IP cho VPC của bạn, ví dụ 172.30.0.0/16\n<img src=\"https://blog.theodo.com/static/12dddc4cf6be0009fc21ad56da5414af/50383/create-vpc-image.png\" alt=\"create-vpc-image.png\"></p>\n<blockquote>\n<p>172.30.0.0/16 chúng ta gọi là network mask. Có nghĩa là tất cả IP sẽ bắt đầu từ 172.30.0.0 đến 172.30.255.255\n<img src=\"https://blog.theodo.com/static/49d09eacdd40b1b6616f6b32af3fa0ad/50383/infra-step-1-image.png\" alt=\"infra-step-1-image.png\"></p>\n</blockquote>\n</li>\n</ul>\n<h2>2 - Create private and public subnets in your VPC</h2>\n<blockquote>\n<p>Subnet đơn giản là 1 dải địa chỉ IP trong VPC. Subnet có thể được coi là phân chia các mạng lớn thành các mạng nhỏ hơn. Về việc chia các mạng nhỏ hơn sẽ giúp ta dễ dàng bảo trì, bảo mật tốt hơn.</p>\n</blockquote>\n<p>Để dùng lambda, bạn cần tạo 1 private subnet bên trong VPC.\nClick on Subnets bên trái menu VPC service và sau đó click Create Subnet:</p>\n<ul>\n<li>Nhập tên subnet của bạn, ví dụ <code class=\"language-text\">my-wonderful-vpc-private-subnet</code></li>\n<li>Chọn VPC mà bạn tạo ở bước trên (<code class=\"language-text\">my-wonder-vpc</code>)</li>\n<li>\n<p>Trong khối CIDR, chọn 1 dải IP con (subrange IPs addresses) trong dải IP của VPC, ví dụ 172.30.1.0/24 (từ 173.30.1.0 đến 172.30.1.25)\n<img src=\"https://blog.theodo.com/static/19139e2d6109ddc2f4335db22e427c4c/50383/create-subnet-image.png\" alt=\"create-subnet-image.png\"></p>\n<blockquote>\n<p>Để dễ trực quan hơn về CIDR bạn truy cập vào trang <a href=\"https://cidr.xyz/\">https://cidr.xyz/</a> để có thể biết được lớp mạng của bạn bắt đầu từ đầu và kết thúc ở đâu, có bao nhiêu IP.</p>\n</blockquote>\n</li>\n</ul>\n<p>Lặp lại bước trên, ta sẽ tạo public subnets, ví dụ <code class=\"language-text\">my-wonderfull-vpc-public</code> subnet với 1 dải IP con là 172.30.2.0/24.\nBạn sẽ thiết lập public subnet và private subnet ở bước thứ 4.\n<img src=\"https://blog.theodo.com/static/08e12c442dc676f731fb65be57f54f49/50383/infra-step-2-image.png\" alt=\"infra-step-2-image.png\"></p>\n<h2>3 - Create an Internet Gateway and a NAT Gateway in the VPC</h2>\n<blockquote>\n<p>Internet Gateway (IGW) là 1 kết nối logical giữa VPC và Internet. Nó không phải là 1 thiết bị vật lý. Nếu VPC không có IGW thì các resources trong VPC không thể truy cập Internet.</p>\n</blockquote>\n<blockquote>\n<p>A Network Address Translation (NAT) giúp các instance trong private subnet có thể kết nối đến Internet, nhưng sẽ tránh Internet kết nối trực tiếp đến các instance bên trong VPC. Đề làm được điều này, NAT sẽ ánh xạ tất cả các địa chỉ IP private đã được chỉ định cho các Instance thành một địa chỉ IPv4 public được gọi là địa chỉ Elastic IP (EIP).</p>\n</blockquote>\n<p>Để truy cập Internet, bạn sẽ cần gắn IGW đến VPC.\nChọn Internet Gateways bên menu trái và sau đó click button Create internet gateway:</p>\n<ul>\n<li>Nhập tên IGW, ví dụ <code class=\"language-text\">my-wonderful-vpc-igw</code>\n<img src=\"https://blog.theodo.com/static/41ce266991f341fdb961aadce3a59dc0/50383/create-internet-gateway-image.png\" alt=\"create-internet-gateway-image.png\"></li>\n</ul>\n<p>Bạn sẽ cần gắn (attach) IGW cho VPC. Mở lại tab IGW, chọn IGW mà bạn vừa tạo (<code class=\"language-text\">my-wonderful-vpc-igw</code>), click vào Action, chọn Attach to VPC và chọn VPC của bạn (<code class=\"language-text\">my-wonderful-vpc</code>).\nBạn cũng cần tạo NAT Gateway. Click NAT Gateways bên trái menu và sau đó click button Create NAT Gateway:</p>\n<ul>\n<li>Chọn subnet mà bạn muốn public (<code class=\"language-text\">my-vonderful-vpc-public-subnet</code>)</li>\n<li>Chọn 1 Elastic IPs. Nếu bạn chưa có, thì click Create New EIP.\n<img src=\"https://blog.theodo.com/static/7aa827098d17caed31765460b403b981/50383/create-nat-gateway-image.png\" alt=\"create-nat-gateway-image.png\"></li>\n</ul>\n<p>Bây giờ, Infra của bạn sẽ trông như thế này:\n<img src=\"https://blog.theodo.com/static/803d02f074409334a01dae329754468b/50383/infra-step-3-image.png\" alt=\"infra-step-3-image.png\"></p>\n<h2>4 - Associate the right route tables to the subnets</h2>\n<blockquote>\n<p>Route table là một tập hợp các quy tắc routes, nó sẽ định tuyến đường đi cho traffic. Bạn có thể tạo ra nhiều Route table trong VPC nếu bạn muốn. Route table có thể liên kết đến một hoặc nhiều subnets.\nRemarks:</p>\n<ul>\n<li>Mặc dù nếu bạn không tạo route table, thì mặc định sẽ có một main route table default và tất cả các subnets trong VPC sẽ liên kết đến main route table này.\nNếu subnet liên kết đến route table có gắn IGW thì nó được gọi là public subnet.</li>\n</ul>\n</blockquote>\n<p>Chúng ta sẽ tạo 2 custom route table cho mỗi subnets.\nTrong VPC service, click Route Tables bên menu trái và click button Create route table:</p>\n<ul>\n<li>Nhập tên route table, ví dụ <code class=\"language-text\">my-wonderful-vpc-public-route-table</code> và <code class=\"language-text\">my-wonderful-vpc-private-route-table</code></li>\n<li>Chọn VPC đã tạo ở bước 1 (<code class=\"language-text\">my-wonderful-vpc</code>)\n<img src=\"https://blog.theodo.com/static/68f753b7d01ec4f6c004db14956c2331/50383/create-route-table-image.png\" alt=\"create-route-table-image.png\"></li>\n</ul>\n<p>Bây giờ bạn có 2 route tables, chúng ta sẽ thiết lập chúng. Đầu tiên là public subnet.\nQuay trở lại Route Table và chọn tạo route table <code class=\"language-text\">my-wonderful-vpc-public-route-table</code>:</p>\n<ul>\n<li>Click tab Route</li>\n<li>Click button Edit routes</li>\n<li>Thêm 1 route mới với destination 0.0.0.0/0 và Target là IGW ID <code class=\"language-text\">igw-...</code> đã tạo ở bước 3 và click Save Routes\n<img src=\"https://blog.theodo.com/static/307cc080b0692cdf810187dfd87fb3c1/50383/configure-public-route-table-routes-image.png\" alt=\"configure-public-route-table-routes-image.png\"></li>\n<li>Sau đó, click tab Subnet Associations</li>\n<li>Click button Edit subnet associations</li>\n<li>Thêm public subnet <code class=\"language-text\">my-wonderful-vpc-public-subnet</code> đã tạo ở bước 2 và click Save.\n<img src=\"https://blog.theodo.com/static/051d00934b4a2e260d9db69048d3d22f/50383/configure-public-route-table-subnet-association-image.png\" alt=\"configure-public-route-table-subnet-association-image.png\"></li>\n</ul>\n<p>Với cách làm như trên, bạn đã điều hướng tất cả các outgoing traffic (Traffic đầu ra) của public subnet đến IGW, điều này sẽ làm cho subnet này thành public subnet.</p>\n<p>Bây giờ, sẽ thiết lập private route table. Quay lại tab Route Tables và chọn route table <code class=\"language-text\">my-wonderful-vpc-private-route-table</code>:</p>\n<ul>\n<li>Click tab Routes</li>\n<li>Click button Edit routes</li>\n<li>Thêm route với Destination 0.0.0.0/0 và Target là NAT Gateway ID <code class=\"language-text\">nat-...</code> tạo ở bước 3 và click Save Routes.</li>\n<li>Click tab Subnet Associations</li>\n<li>Click button Edit subnet associations</li>\n<li>Add private subnet <code class=\"language-text\">my-wonderful-vpc-private-subnet</code> ở bước 2 và click Save.</li>\n</ul>\n<p>Với cách làm này, bạn đã điều hướng tất cả traffic của private subnet đến NAT Gateway.\n<img src=\"https://blog.theodo.com/static/f031e446d606674453849748d76df61c/50383/infra-step-4-image.png\" alt=\"infra-step-4-image.png\"></p>\n<h2>5 - Create the lambda function and configure it</h2>\n<p>Phần khó nhất đã xong\nNếu bạn chưa tạo Lambda thì đi đến tab Lambda service, sau đó click button Create function:</p>\n<ul>\n<li>Chọn tên Lambda, ví dụ <code class=\"language-text\">my-wonderful-lambda</code></li>\n<li>Chọn Node.js runtime</li>\n<li>Trong section Permission, chọn <code class=\"language-text\">create a new role with basic lambda permissions</code>\n<img src=\"https://blog.theodo.com/static/a94a4a7cf62d680e58e0af7d130f7e64/50383/configure-lambda-permissions-image.png\" alt=\"configure-lambda-permissions-image.png\"></li>\n</ul>\n<p>Click vào function lambda vừa tạo, nó sẽ mở ra 1 trang thiết lập. Kéo xuống tab Network và bạn phải điền 3 thứ:</p>\n<ul>\n<li>VPC đã tạo ở bước 1 (<code class=\"language-text\">my-wonderful-vpc</code>)</li>\n<li>Private subnet đã tạo ở bước 2 (<code class=\"language-text\">my-wonderful-vpc-private-subnet</code>)</li>\n<li>Security Group là default hoặc Security Group mà bạn tự custom <code class=\"language-text\">**your-vpc-name**-default-security-group</code>\n<img src=\"https://blog.theodo.com/static/b2e31ea61377158c21380d99bb121885/50383/configure-lambda-vpc-image.png\" alt=\"configure-lambda-vpc-image.png\"></li>\n</ul>\n<h3>🔥🔥 Congrats, that's all, your AWS lambda function has access to Internet! 🔥🔥</h3>\n<p><img src=\"https://blog.theodo.com/static/ed3e678879d7cd543ba42ce4566b8c9e/50383/infra-step-5-image.png\" alt=\"infra-step-5-image.png\"></p>\n<p><em>Nguồn: <a href=\"https://blog.theodo.com/2020/01/internet-access-to-lambda-in-vpc/\">https://blog.theodo.com/2020/01/internet-access-to-lambda-in-vpc/</a></em></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Minh Tang Q. </div><div class=\"custom-block-body\"></div></div>","id":"c33ecae0-654e-5070-91f2-aef77d66722a","frontmatter":{"title":"[AWS] Why my Lambda cannot access Internet anymore from its AWS VPC?","date":"19-02-2021","tags":["aws"]},"fields":{"slug":"/aws-why-my-lambda-cannot-access-internet-anymore-from-its-aws-vpc/"}}},{"node":{"excerpt":"Chúng ta khi làm việc với React thì đôi khi cũng sẽ có sử dụng cả Class Components vs Function Components trong cùng một dự án. Nhưng giữa chúng có điều gì khác nhau khiến chúng ta phải cân nhắc để sử…","html":"<p>Chúng ta khi làm việc với React thì đôi khi cũng sẽ có sử dụng cả <strong>Class Components</strong> vs <strong>Function Components</strong> trong cùng một dự án. Nhưng giữa chúng có điều gì khác nhau khiến chúng ta phải cân nhắc để sử dụng loại component nào cho hợp lý thì tôi nghĩ mọi người đôi khi không để ý đến điểm này.</p>\n<p>Bài viết dưới đây hay thử so sánh giữa <strong>Class (Stateful) Components</strong> vs <strong>Functional (Stateless) Components</strong> để biết lúc nào nên sử dụng chúng một cách linh hoạt.</p>\n<h4>1. React Component là gì?</h4>\n<p><strong>1 component là một block code độc lập, có thể tái sử dụng, nó chia UI thành nhiều phần nhỏ. Một web page hoặc UI từ nhiều block code(components). Componet sẽ luôn lắng nghe sự thay đổi của STATE để render lại UI cho người dùng.</strong></p>\n<ul>\n<li>Việc chia source code thành các components giúp ta rất nhiều. Mỗi component có code JS và CSS riêng, chúng có thể tái sử dụng, dễ đọc, dễ viết, dễ test.</li>\n<li>React có 2 loại component: <strong>Funtional (Stateless)</strong> và <strong>Class (Stateful)</strong>.</li>\n</ul>\n<h4>2. Functional (Stateless) Components</h4>\n<p>1 functional component là một hàm Javascript (hoặc ES6) trả về 1 phần tử/1 element React. Theo official docs của React, hàm dưới đây là một component React hợp lệ:\n<strong>Function này là một component React hợp lệ vì nó nhận một \"props\" (viết tắt của properties) làm tham số và trả về 1 React element - reactjs.org</strong></p>\n<p>Chúng ta có thể khai báo component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token constant\">I</span>'m a functional component<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc như ES6 arrow function:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Example</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token constant\">I</span>'m a functional component<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><strong>Functional components</strong> cũng được nói với một cái tên là stateless components bởi vì chúng ta không thể làm nhiều thứ phức tạp như quản lý React State (data) hoặc phương thức life-cycle trong functional components. Nhưng từ <strong>versions 16.8</strong> chúng ta đã có thể sử dụng <strong>React Hooks</strong> để sử dụng state và những features khác của class components trong functional components.</p>\n<p>Vậy 1 React Functional Component là:</p>\n<ul>\n<li>Một function Javascript / ES6 function</li>\n<li>Phải trả về 1 React element</li>\n<li>Nhận props làm tham số nếu cần</li>\n</ul>\n<h4>3.  Class (Stateful) Components</h4>\n<p><strong>Class components</strong> là những class ES6. Chúng phức tạp hơn functional components ở chỗ nó còn có: phương thức khởi tạo, life-cycle, hàm render() và quản lý state (data). Ví dụ dưới đây là class component:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token constant\">I</span>'m a <span class=\"token keyword\">class</span> <span class=\"token class-name\">component</span><span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Example<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể thấy, class Example kế thừa Component, vì vậy React hiểu class này là một component, và nó renders (returns) 1 React Element.</p>\n<p>Vì vậy, một React class component là:</p>\n<ul>\n<li>Là một class ES6, nó sẽ là một component khi nó \"kế thừa\" React component.</li>\n<li>Có thể nhận props (trong hàm khởi tạo) nếu cần.</li>\n<li>Được khởi tạo với 1 vòng lifecycle hoàn chỉnh</li>\n<li>Phải có 1 method render() trả về 1 React element (JSX), or null</li>\n</ul>\n<h4>4. Vậy sự khác nhau giữa Class Component và Functional Component là ?</h4>\n<p><strong>Class Component - Stateful Components:</strong>\nVới Class Component chúng ta có thể sử dụng được state một cách dễ dàng khi khởi tạo (init) state ngay trong phương thức constructor của Class Component bằng this.state:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        count<span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n         Hello <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span>\n         <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span> <span class=\"token comment\">//lấy dữ liệu từ state.</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để thay đối state chúng ta có cách duy nhất chính là thông qua sử dụng phương thức setState().</p>\n<p><strong>Functional Component - Stateless Components:</strong>\nTrái ngược với Class Component, Functional Component trước đây vốn không thể làm những thứ phức tạp như làm việc quản lí với state. Nhưng với những bản mới nhất của React đã cập nhật thêm React Hooks để cho phép chúng ta làm việc đó thông qua những function như useState() . Các ban có thể vào trang chủ của React để đọc chi tiết về chúng. Những bài viết sau trong series này mình sẽ đề cập về hooks hay lifecycles của Component.</p>\n<p><em>Tóm lại tùy vào nhu cầu sử dụng mà chúng ta có thể linh hoạt lựa chọn sử dụng Class Components hay Functional Components. Theo xu hướng hiện tại trên cá nhân tôi thấy việc sử dụng Functional Components rất tiện lợi cho việc bảo trì (maintain) sau này cũng như nhiều developer đang sử dụng Functional Components thay cho Class Components. Một phần nữa theo cá nhân tôi thấy việc sử dụng Functional Components cũng dễ đọc hiểu hơn cho những người phát triển dự án sau này. Mọi người có thể tự sử dụng cả 2 cách để đánh giá xem cách nào tối ưu hơn nhé !</em></p>\n<h3>5. Kết luận</h3>\n<p>Như vậy, Với chia sẽ của mình, hi vọng sẽ giúp được mọi người sử dụng cơ bản được Component và có thể thay đổi 1 cách linh hoạt để phụ hợp với yêu cầu của công việc. Cảm ơn mọi người đã đọc và hẹn gặp lại ở bài viết tiếp theo.</p>\n<h6><em><div style=\"text-align: right\"> [Tran Van Tuan Anh | Trần Văn Tuấn Anh ] </div></em></h6>","id":"3d3f83c0-b2b7-509e-9249-144b9cae2510","frontmatter":{"title":"[React] Class Components vs Function Components","date":"05-02-2021","tags":["React","Javascript"]},"fields":{"slug":"/class-component-vs-function-component/"}}},{"node":{"excerpt":"Chắc hẳn nhiều bạn làm mobile đều từng nghe đến khái niệm Deep link, App link, Universal link, Dynamic link, URL Scheme. Những khái niệm cũng như cách gọi tên đôi lúc cũng khiến bạn bối rối, khó hiểu…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Chắc hẳn nhiều bạn làm mobile đều từng nghe đến khái niệm Deep link, App link, Universal link, Dynamic link, URL Scheme. Những khái niệm cũng như cách gọi tên đôi lúc cũng khiến bạn bối rối, khó hiểu, nhầm lẫn. Bài viết này sẽ cung cấp đầy đủ cho bạn cái nhìn tổng quan về Deep link. </p></div></div>\n<h2>1. Deep link</h2>\n<p>Giống như cấu trúc <code class=\"language-text\">http</code> và <code class=\"language-text\">https</code> để điều hướng user tới website thì Deep link là cấu trúc để điều hướng user đi tới một ứng dụng nào đó trên điện thoại. Deep link bao gồm 3 dạng chính: </p>\n<ul>\n<li>URL Scheme: sử dụng url scheme để mở app </li>\n<li>App link(Android) và Universal link (iOS): sử dụng địa chỉ web page để mở app</li>\n<li>Custom Deep link (Dynamic link, Repro, Adjust, branch.io): cũng sử dụng địa chỉ web page để mở app nhưng có thêm chức năng thu thập thống kê traffic từ link (thường là dịch vụ bên thứ 3 cung cấp)</li>\n</ul>\n<p>Deep link dùng để làm gì:</p>\n<ul>\n<li>Điều hướng qua lại giữa các app, từ website qua app</li>\n<li>Tạo các đường link trao đổi thông tin và thực hiện các chuyển flow trong app khi click vào link</li>\n<li>Thu thập dữ liệu, hành vi người dùng khi click vào link</li>\n</ul>\n<p>Dưới đấy mình sẽ đi vào chi tiết cách dùng cài đặt và chú ý khi sử dụng từng loại</p>\n<h2>2. URL Scheme</h2>\n<p>URL Scheme sẽ có dạng <code class=\"language-text\">yourSchemeApp://</code>. App sẽ được mở lên khi gõ và click đúng scheme này</p>\n<h3>Cài đặt</h3>\n<p>Cài đặt với iOS bạn cần cài đặt trong file <code class=\"language-text\">Info.plist</code>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46e1fab862df96477c42f21d458e18a4/17d12/setup-ios-url-scheme.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.142857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAZklEQVQI142OSQqAMBAE/YfZzeLJNUpEXP7/qdYMiNccGqZmoKarZU1wvgXjElwomMa9HCCkRtcPaKxHzQTdSlId54207STIC+sCJfM0R/jwPysSjlMkwddCKkOc59z+OC9oY4ulD9EDVCl0ENvmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cài đặt url scheme iOS\"\n        title=\"cài đặt url scheme iOS\"\n        src=\"/static/46e1fab862df96477c42f21d458e18a4/8c557/setup-ios-url-scheme.png\"\n        srcset=\"/static/46e1fab862df96477c42f21d458e18a4/4edbd/setup-ios-url-scheme.png 175w,\n/static/46e1fab862df96477c42f21d458e18a4/13ae7/setup-ios-url-scheme.png 350w,\n/static/46e1fab862df96477c42f21d458e18a4/8c557/setup-ios-url-scheme.png 700w,\n/static/46e1fab862df96477c42f21d458e18a4/e996b/setup-ios-url-scheme.png 1050w,\n/static/46e1fab862df96477c42f21d458e18a4/2cefc/setup-ios-url-scheme.png 1400w,\n/static/46e1fab862df96477c42f21d458e18a4/17d12/setup-ios-url-scheme.png 1666w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Bạn có thể thử click hoặc gõ trực tiếp từ Safari để mở thử itunes bằng link sau <code class=\"language-text\">imst://</code> hoặc mở AppStore từ link  <code class=\"language-text\">itms-apps://</code></p>\n<p>Với Android URL Scheme chỉ thể dùng khi bạn click trực tiếp vào link. Bạn có thể thử click vào link sau để mở PlayStore tìm kiếm app gmail <code class=\"language-text\">market://search?q=gmail</code></p>\n<h3>Ưu điểm:</h3>\n<ul>\n<li>Dễ dàng cài đặt phía app</li>\n<li>Không cần cài đặt phía backend</li>\n</ul>\n<h3>Nhược điểm:</h3>\n<ul>\n<li>URL Scheme có thể trùng lặp các app nếu đặt đơn giản</li>\n<li>Không thể điều hướng khi app chưa cài </li>\n<li>Với iOS trước khi wake app luôn có popup confirm (trừ những app của hệ thống)</li>\n</ul>\n<h2>3. App link, Universal link</h2>\n<p>Khắc phục điểm yếu của của URL Scheme cả Apple và Google đã phát triển ra App link (Android 6.0) và Universal link (iOS 9.0) sử dụng địa chỉ domain web page làm Deep link wake app.</p>\n<p>Cơ chế của Deep link web page này sẽ check nếu trong các app đã cài đặt có config web page trùng với Deep link thì sẽ điều hướng mở app. Ngược lại sẽ mở web page như bình thường. Ở phần mở website này hoàn toàn phía sever có thể check device iOS, Android để điều hướng tới App Store hoặc Play Store và với các device khác thì điều hướng tới trang chủ. Đây là cách mọi người thường xử lý với Deep link web page.</p>\n<h3>Cài đặt</h3>\n<p>Cách cài đặt với Android bạn cần setup đủ phần scheme, host và cả path nếu cần. Tham khảo tại <a href=\"https://developer.android.com/training/app-links/deep-linking\">link</a></p>\n<p>Cài đặt với iOS có 2 phần</p>\n<ul>\n<li>Cài đặt trên app</li>\n</ul>\n<p>Setting Associated domain trong <strong>Identifier</strong>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/11a7401815da1168d934c2260399a681/2c95d/associated-domains-identifier.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABEElEQVQoz5WS24qEMBBE8/9f6K4PIoK31XiJWXXVOMdkGdBxBi2wEU11VXVHxHHseZ7v+0EQfFuEYfhlMY7j+hFimibZdo3S/e+Gvu/h8JFqjDknzcsy8SyCJ0mSLMvSNKVGUSSlfB475Rul1U8hK7mR67oehgG1wyGMlGX5wbygN1Ja68linjc/TpAIbdtS3/nfyJxomubPAr4jvw18IOd5XhQFnPUmhBMhc9d1mKfi3OzhJveKfzIzq6qKFqcKzymcKyuliM1sZouDAhPl76u+mBdDVlaCsragxSE/EyXOiTLkyaz0xjlMdntlzjvbNHYrBSzMXMMuM5cJJplvKLub2Fjwco8MIGAYJsrXL8kD0AWtHsmtsnUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"associated-domains-identifier\"\n        title=\"associated-domains-identifier\"\n        src=\"/static/11a7401815da1168d934c2260399a681/8c557/associated-domains-identifier.png\"\n        srcset=\"/static/11a7401815da1168d934c2260399a681/4edbd/associated-domains-identifier.png 175w,\n/static/11a7401815da1168d934c2260399a681/13ae7/associated-domains-identifier.png 350w,\n/static/11a7401815da1168d934c2260399a681/8c557/associated-domains-identifier.png 700w,\n/static/11a7401815da1168d934c2260399a681/e996b/associated-domains-identifier.png 1050w,\n/static/11a7401815da1168d934c2260399a681/2c95d/associated-domains-identifier.png 1099w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Cài đặt Associated domain trong phần <strong>Singing &#x26; Capabillities</strong>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 688px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06d9aa0afd03352eb1814ca299e291d8/ebf47/setup-ios-associated-domain.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmklEQVQY022OSRKDIBBFOUcEByanYErJnp07Ke9/mR/AkFIri1c0Dd3/ESEVzPTCYt9YFot+GPEoKArK0nnA0v0MZeUFVlao6gYkFnXDwYVEwwXGp0HXD1BKQ+s2oQIivCeCQPx3D8gh5GpCUxIPA+u6Yt93+G2D9x7OOczzDGstjJn+WsYeuTfzUt12kMEyor4chvJneF6U6w/y6XDSFAvSEwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"setup-ios-associated-domain\"\n        title=\"setup-ios-associated-domain\"\n        src=\"/static/06d9aa0afd03352eb1814ca299e291d8/ebf47/setup-ios-associated-domain.png\"\n        srcset=\"/static/06d9aa0afd03352eb1814ca299e291d8/4edbd/setup-ios-associated-domain.png 175w,\n/static/06d9aa0afd03352eb1814ca299e291d8/13ae7/setup-ios-associated-domain.png 350w,\n/static/06d9aa0afd03352eb1814ca299e291d8/ebf47/setup-ios-associated-domain.png 688w\"\n        sizes=\"(max-width: 688px) 100vw, 688px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>cài đặt trên sever cần trả về dạng json với đường dẫn <code class=\"language-text\">yourDomain.com/apple-app-site-association</code>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6685ab385b62d6bcf9eb7ddfd97a66d7/432e7/AAAA-json.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAAzElEQVQoz6WTiwqEIBBF/f+/TDB720Mqes1yB4xsjXBXmITRztw7TYJu6zgOb49dwlpLWmtq25aWZfkLxkA88jwnKSVDt207oW8RKs7AaZqormveY9SF7oprEgrLsqS+7ylJEkrTlAtVVUVFUVDXdZ76R4UuiRezLKNxHLmvSikGohDgOEOgRfM8h4EuAUjserTsDpqmYctOkTGGcwgoXdf13fI1gT7B0jAMDIEtfCgX+75/AYNjg4tuBn+x6QFh424ldvY84Nsgx/45H/qHsei5v9gTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AAAA-json\"\n        title=\"AAAA-json\"\n        src=\"/static/6685ab385b62d6bcf9eb7ddfd97a66d7/432e7/AAAA-json.png\"\n        srcset=\"/static/6685ab385b62d6bcf9eb7ddfd97a66d7/4edbd/AAAA-json.png 175w,\n/static/6685ab385b62d6bcf9eb7ddfd97a66d7/13ae7/AAAA-json.png 350w,\n/static/6685ab385b62d6bcf9eb7ddfd97a66d7/432e7/AAAA-json.png 570w\"\n        sizes=\"(max-width: 570px) 100vw, 570px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<blockquote>\n<p>Ngoài appID chứa team ID và bundleID phần path có thể config Deep link liên kết wake app hay không, chi tiết tham khảo <a href=\"https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html\">bài viết</a> hướng dẫn của apple</p>\n</blockquote>\n<p>Sau khi cài đặt bạn có thể check validate apple-app-site-association tại <a href=\"https://branch.io/resources/aasa-validator/\">branch.io</a>. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/886f269df3ef9bb2d237e78ef7be005f/0a47e/reddit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3klEQVQ4y5WU/bKaMBTEfdg+ZGf6f5+hM47XL/yoAgKBBBJ0ezZXuJECtY47REJ+2bM5srDWgmqapr9qrVFVlR9TzrlJhWupxRBY1zVutxviOPZgigvv9/uoJoHhRCnu8jyHMQZ1Y9G27aRGgV1p3QRdqbIEnAVwl6+4eTy8ozkgrwsrDhrbvECNCI8WP6IE336u8Ot3gjyJkReFj2RoINSCMEJb1wZBO8j2+MgrfI9SXIoSSiKoxPkwoqG8Q9ta3FSOUpX+dEspl3JGA42B0ZWHcY4OKW78kBhC8d7Ct0XroGvtD4G//SIZa1Gljc+Uc1RXBfMMYfx4IK0bWyPTko+pvQsunDrVYQ+G1x6oBRirFJWUXEjwXe8NA5/TC5AOkzKDLj/zC3OkQif/BLqnw2vnUBVQSnnQVGvMO5RTrl2DXCvo6jP8sIHHmnlMfO7rlGUw5Was14bqmr3PkIqTBOv1GsvlErvdDlEU4Xw++5fEO+IL5eufIgPeOB6PWK1WHrjdbhHtIySyUZqms+IzWZY9gc8yeXOz2XgQnZ1OJ1yv137BHPgF2JUcOiSY2u/3PWgO+pdDhskcmCFdET5c8HbJocPL5eJLPhwO3i3LpkKXbwM5QSgBPOGwzP8B/gEheFfWWeOEugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"reddit\"\n        title=\"reddit\"\n        src=\"/static/886f269df3ef9bb2d237e78ef7be005f/0a47e/reddit.png\"\n        srcset=\"/static/886f269df3ef9bb2d237e78ef7be005f/4edbd/reddit.png 175w,\n/static/886f269df3ef9bb2d237e78ef7be005f/13ae7/reddit.png 350w,\n/static/886f269df3ef9bb2d237e78ef7be005f/0a47e/reddit.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Ưu điểm:</h3>\n<ul>\n<li>Địa chỉ domain là duy nhất nên tránh trùng lặp với các app khác</li>\n<li>Ngoài wake app ra có thể điều hướng tới Store hoặc website khác phục vụ marketing </li>\n<li>Với iOS không cần popup confirm khi click Deep link</li>\n</ul>\n<h3>Nhược điểm:</h3>\n<ul>\n<li>Cần domain https với iOS</li>\n<li>Phụ thuộc setup của sever (apple-app-site-association)</li>\n<li>Phụ thuộc vào sever, nếu sever die thì cũng không mở đc app</li>\n</ul>\n<h2>4. Custom Deep link: Firebase Dynamic link</h2>\n<p>Custom Deep link cũng tương tự như Deep link web page nhưng thường do bên thứ 3 cung cấp. Custom Deep link mang đầy đủ đặc điểm của Deep link web page (App link, Universal link) nhưng có thêm phần thu thập dữ liệu khi user click hoặc tải app</p>\n<p>Một vài nhà cung cấp custom Deep link phổ biến: Firebase Dynamic link, branch.io, Appflyers, Repro, Adjust, braze.com, Adbrix... Điểm chung của dịch vụ này là tích hợp kèm với các dịch vụ tracking dữ liệu khác trên đa nền tảng như web, mobile (iOS, Android), socical phục vụ cho việc đo lường hiệu quả các chiến dịch quảng cáo marketing.</p>\n<p>Chúng ta cùng tìm hiểu đại diện phổ biến dễ dùng và miễn phí Firebase Dynamic link.</p>\n<blockquote>\n<p>Với các ứng dụng kinh phí thấp không cần tracking dữ liệu quá phức tạp, Dynacmic link tích hợp cùng dịch vụ Firebase là một lựa chọn tốt</p>\n</blockquote>\n<h3>Cài đặt</h3>\n<p>Dynamic link bạn có 2 lựa chọn dùng domain của bạn hoặc dùng domain free do Google cung cấp dạng <code class=\"language-text\">yourDomain.page.link</code>. Nếu dùng domain của bạn việc setup sẽ khó khăn hơn. Bạn cần dùng qua Firebase Hosting và xác thực DNS. Chi tiết sẽ hẹn 1 bài gần nhất khi mình setup được :D</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 698px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67bb052420adbb9c9dc900505893aa81/487bb/domain-firebase.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB7UlEQVQoz4WQS2sUQRSFC7LShaAbjeIrAcHnShB15daF6+xVUETFaEwUjZgZJ4IQgqv8g6yCmERBf4Hg0qUrJz3T1e/qnn7UTM94rLrdzYwh0cXHrXPPqdu3i03ONHF23sa5eQtnXlo49dzCwUcmDj/mGJ/W1cSh6YJKj4/oYY9TZaefGbi66OJizcaluo0Lr2xMzHEcf8pxbIbj6BOOiVmOk7OlVpxQ3uTcUI/Czr8wcO2di/33TYzdbuHAgzZuvPdwRG2ot2A3DVxu2LjScLDvXhtjt1r0wevLHt3Ze7eNPXeGsIUPDt5+7uDNZojaRoi6YvFTRFWzsB6ioXSj9LWubw4ztY0ItXXdF3j9UYANZIh+FmCQCaCrzmmAPPHxWwoMFLrmqdLKo15W+DpXZfU9QCpyMNvx0NxqEUbLxK8to6BpkNaQ1zYJ1wsIx/PhuAWuLxCICKnsggkRIooiJEmCPM+Jfr+PXq8HqQLdboGUkmqV2Qnts1AN45zDNE1YlgXHcejs+z4N3k71gd1gnU4HWZYhTVNCn+M4prrbFnr70SFa5wpd1cCYgr2yQWapd9qg6le5YpB6krLH9Db/urydqq/fNxQBLD/Gw9UAUyselr6EYIEQf/3K/xjdUkr1PKnE1x8J1r7H+PYzwR9nwD0MY2CzWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"domain-firebase\"\n        title=\"domain-firebase\"\n        src=\"/static/67bb052420adbb9c9dc900505893aa81/487bb/domain-firebase.png\"\n        srcset=\"/static/67bb052420adbb9c9dc900505893aa81/4edbd/domain-firebase.png 175w,\n/static/67bb052420adbb9c9dc900505893aa81/13ae7/domain-firebase.png 350w,\n/static/67bb052420adbb9c9dc900505893aa81/487bb/domain-firebase.png 698w\"\n        sizes=\"(max-width: 698px) 100vw, 698px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi setup domain thành công bạn cần setup AppID và TeamID trong mục <strong>Project Setting / General</strong> đối với iOS app. Khi bạn setup xong thì có thể check config tại <code class=\"language-text\">yourDomain.page.link/apple-app-site-association</code> tương tự như Universal link bên iOS. </p>\n<p>Tiếp đến bạn cần tạo Dynamic link mới theo domain đã setup </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 618px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a2c448721de68da5274c6da6538aa87/6e6fb/short-url.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAqElEQVQY041P0Q7CIAzk/z/QRx80OpQSBhtSwILdGh9cdPFCmkLvrofSnk5Q8DEx5nkOIXjvSym999Za34U6mufhkmNwYO04js45AEDEH+KPFyWknDMLpDJSSpwixshVEvGNWz+lq6OzrVgWF8Xu9UnCq7XSG23Fdm/rtB6ZLJtZY+43AGOt5cxaa2PMMAxst/9ztU5aSISFhCrsr5u3YokTkXIVcf8fLzdlmx++T37XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"short-url\"\n        title=\"short-url\"\n        src=\"/static/3a2c448721de68da5274c6da6538aa87/6e6fb/short-url.png\"\n        srcset=\"/static/3a2c448721de68da5274c6da6538aa87/4edbd/short-url.png 175w,\n/static/3a2c448721de68da5274c6da6538aa87/13ae7/short-url.png 350w,\n/static/3a2c448721de68da5274c6da6538aa87/6e6fb/short-url.png 618w\"\n        sizes=\"(max-width: 618px) 100vw, 618px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Setting Deep link. Deep link này cùng trùng với Associated domain tương tự như setup trong app App link, Universal link</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d3e4394e9fcafbfdec1317f8c96d1730/fcda8/dynamic-link.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA30lEQVQoz5WRa46DMAyEuf/Veof9uaGBEOK8A053AhJqu61KPyHLgYw9Nt3lJ1ot+2tDCCGlHMfxdo5O0lpScM6HELxvMca4far7A5i53sEbSDrkZsNa65ybN4yZlaZ+pKuyhpwlQnV3BxGllDrU2BvuPQGOOcXZr2Lm3nBZ39s+xIjLsry8BIf/3zTbyIZhwJKUUojIReM3pQzJ47D1afLWOedcSkHEGGh+7OMjWFjFhrTWWAPEqHK4+izGVax6mqb9D9XTNNsQwCp6Qmgj+8S30zQxrMIzr4tPNeQvxH+Z4IW098ElhwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dynamic-link\"\n        title=\"dynamic-link\"\n        src=\"/static/d3e4394e9fcafbfdec1317f8c96d1730/fcda8/dynamic-link.png\"\n        srcset=\"/static/d3e4394e9fcafbfdec1317f8c96d1730/4edbd/dynamic-link.png 175w,\n/static/d3e4394e9fcafbfdec1317f8c96d1730/13ae7/dynamic-link.png 350w,\n/static/d3e4394e9fcafbfdec1317f8c96d1730/fcda8/dynamic-link.png 590w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Setup wake app và tuỳ chọn điều hướng khi app chưa cài với iOS và Android</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 520px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a7059323354beb0495784920818a6d4/69902/define-deep-link-ios.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABg0lEQVQ4y41TSXLDIBDM/x+UH+SYU46+JJWyFoQkNoHAgNNiXLbsiiX3YWoo6JmehbePg//pfN81vO8554yxcRzhSCnPe3j7/PbHIUgxyIJhGLTWSqlpmvbJxWbvZ+TsC8hBFORvmgbOc3LO1ucjd5y1vICUCyHIt9ZuZM4xna1Pwhil9VgA/bBQDmYIYdG2wo18PbCQlHVSLDkhFcqJdmXCORU8knPKKXi8xh2s94s/F8BfZ7uTTRcpZ2Md6QSBHMAV7JBDzL88cN61BXVdU9u7rkspPW3YRXZO8+yGAhBeGfKanI2ZVIExBlKheSPnIxmNoSKxYVMBtS3GuENGEtCwFRgvtooKRgmwiPUqGd1CzQgBi7ZhW2ARjo4I+pSMpWSsxefCUwTqyz+7WvTiYWYXMgqjmqXSUpnJGJozKkdQasF6t+7IeCGETPGk58x1Or+G5WNsXP/7H27k9y93aGbeVlgnNKaq6rZlvOdVVaFtO5mZStpFhd80Cl2APSG7MWHCH/CkjY8qbqKHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"define-deep-link-ios\"\n        title=\"define-deep-link-ios\"\n        src=\"/static/7a7059323354beb0495784920818a6d4/69902/define-deep-link-ios.png\"\n        srcset=\"/static/7a7059323354beb0495784920818a6d4/4edbd/define-deep-link-ios.png 175w,\n/static/7a7059323354beb0495784920818a6d4/13ae7/define-deep-link-ios.png 350w,\n/static/7a7059323354beb0495784920818a6d4/69902/define-deep-link-ios.png 520w\"\n        sizes=\"(max-width: 520px) 100vw, 520px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi cài đặt thành công bạn có thể xem chi tiết trong mục Link preview (debug) </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 487px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d24fd8211f587556df935ca11f61aa5/7b439/dynamic-link-map.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsSAAALEgHS3X78AAAD/klEQVRIx5VV+28bRRD2//874qEGJ43SBgEqSEU8hIraJqUoEEFLKSUP23F8D5/vYd/7+fHNee98iRzZOWm0t7O7387MNzPbK6sKeVWi4LhOgjTDNEhhUeS/0cu5qihvSlmhh01fyY0EKpMMPLFxe+9d4OGBdo5DY4ADfYBDc4BvTRv9sYuHEwf7ExePNBcH6n//2sGO5uH4Px324yOYX73G9MlvMPdfIjrT0fvLd/DR9Qd8Pb3CnnaBPsGfTuWwR1Abe5THBDik7Kr5njHHr+cG7EdHMA6PYX7xCvrOM0TU9cBYtB/jUBRFO03ynLrVvKL7WWfeHmNIWpclwHG53JQR0PBC/OvHeO4EeD5b4AXHN5y/UboXSjcIU4gxzjyE6fj1f01KwhutJIKfpvCSBAuOKYHTxhJhlBtj6lpvaGlRVsopsl4u10TT87MUH1wbZ0qGC4+HCzyjFU9NF98YLl7PIzhZju9p3XeiMz28C5LlfU041GU9GdJqFRf5z7n4t5/g2PZrFy+jFPO8qN0+4vylvYCeZC1QAyZjbx6nuORBmaQ8NHYDRNkS1OOoRwlyuhTXLlaw0xwGdV2QG3kYcYPFmysVq5SuJYzXl4aHjy+0Wn7mhVZaoH9t49PzCT4ZGDhdxMtwdiysAdcWBzfMeFFEi0NKwJimvMypLyvgM52ioly53LVwFQM1qlqdMm4xXY4JaMs/ASyOOUefl3lrYngL8GY8hnYAl0wWtMrjKGEYWgskBIsJtiD4WkB0aG8WHFo24AEjoRBgTjev4wwTik4STerCrst3AZZq4Xfm3a40g7GFfTaGn0iKyENN6XSXpESbSWkWZFOmLFjQSkmbtJ4v1+esqOKutFnnckZG/2RanDAnj1mn7xlDSew/aPmJ6+MVq2gUZ5tcXt2W1ylCdtlFrsK4Thdh2SPolDEchwlTZ0MMu+YL4IRM6nR3yMNSZkKCjBoBhyTMIjFbA4rLT8w59oYGdgc6fiEhNi0+EFKGOnZHZh2Se5HSpEVtsZAkZVmWbXzy+5AigCMS4NI1n24aTBEptSs235CuumwOVtO+trFQ0mPiRQgivnYEiggqlaK5ITK6LhJvimF3QdgUUmbyJvNgUAoh7Epk26JuJoBltX2lnNDdz64s9C81fE4Cfpj5+JHEPBhN0b+YYIfVcnofUqQK8rK80c6WhFQrUsp7kCKb5c14SzJO+aqd8YXzGYa3bMRLXYTxpkq5ndhyYBDE+IeAmkps0Z37Ed4TVOK4NSl5/TSqJKdlkXoW2odMOvYmwK6F0tRjFUN5xHTmX8J5Q5q8QbMg3t5CkwzqisXmihE7jBdlbSNZ957c3bFJgte0eLUmVoVrkvm2hf8DWo39t3j6zgAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dynamic-link-map\"\n        title=\"dynamic-link-map\"\n        src=\"/static/8d24fd8211f587556df935ca11f61aa5/7b439/dynamic-link-map.png\"\n        srcset=\"/static/8d24fd8211f587556df935ca11f61aa5/4edbd/dynamic-link-map.png 175w,\n/static/8d24fd8211f587556df935ca11f61aa5/13ae7/dynamic-link-map.png 350w,\n/static/8d24fd8211f587556df935ca11f61aa5/7b439/dynamic-link-map.png 487w\"\n        sizes=\"(max-width: 487px) 100vw, 487px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Thống kê</h3>\n<p>Ngoài những thống kê đơn giản liên quan đến việc tracking created, clicks, first open, re-open  bạn cần dùng <a href=\"https://firebase.google.com/docs/reference/dynamic-links/analytics?authuser=1\">Analytics API</a>  để lấy dữ liệu thô chi tiết hơn. </p>\n<p>Biểu đồ thông kê nhanh trong Dynamic link chỉ dành cho nhưng link tạo trực tiếp từ webpage Firebase console chứ không show thống kê từ những link Dynamic link custom tạo từ app.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d1d2aba434255fad9904bd81060032e/30c92/chart-dynamic-link.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABYElEQVQoz4VSSU4DMRCcP3PhE/wDwRnBDxCniDsSFwghKON47cUbbc8MBBRCqTSerna5vfTwrnDiekTtEIDCH/RAJbOzWqj2e+1gsIFcYOtJCEjYCQdsCvHE+ye4e7Q3K7t6dogwoCQJmTnyDCKKkTsbJkWmyXhxq86vx7NLdfVga+pmpVQ3zHDOAYDo0CGKMUZr7UMgcJFcRBPJE/NQS5HVSyl1QUppqjZBUhKKKD8p14kyW8LBQ3TA4sk515MALsjNlcuMIXDxGJu0mMtPTIp8dcievsNmjjagtqXvtvyB3GePmoOPX6vnLGZ5Dx9STofH/o2eURujR+jmulTOFBPL4icqS7ZV3pj9ztfl0K0yU4SAuQunL8y8fJi3XV1Kt8qEUdpEAooI7JD9EcYA4Pava73dyghgMXrZ75ARCEJ/XumpdoSlvWZK64nY3r73HDO2T+KcU2uS+t+Gj19iKZ/LvTJx12qkKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chart-dynamic-link\"\n        title=\"chart-dynamic-link\"\n        src=\"/static/2d1d2aba434255fad9904bd81060032e/8c557/chart-dynamic-link.png\"\n        srcset=\"/static/2d1d2aba434255fad9904bd81060032e/4edbd/chart-dynamic-link.png 175w,\n/static/2d1d2aba434255fad9904bd81060032e/13ae7/chart-dynamic-link.png 350w,\n/static/2d1d2aba434255fad9904bd81060032e/8c557/chart-dynamic-link.png 700w,\n/static/2d1d2aba434255fad9904bd81060032e/30c92/chart-dynamic-link.png 874w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> </p>\n<p>Nếu bạn dùng dùng mạng Viettel bạn sẽ thấy tin nhắn của MyViettel cũng sử dụng Dynamic link dạng <a href=\"https://myvt.page.link\">myvt.page.link</a>. Dynamic link này link tới ứng dụng My Viettel.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/3534c/my-viettel-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVQoz32SbW/aMBSFkTq+8LbCuhYQXdUqaWkLpQ0UwksTO7ETE2AkQMf2/3/I2bU3TZoG+3B0r86NHx37JlcoFFGpfESpVEahUEJRq6hVNl65XPk9KxrpmfZOTj4gl8v9K8/jmM8X0HWx+Io4nsN1p2AswHqdYTQaQ8rYfCMjhclkhk6nh/Pz+mEg5wJpuiFQgiia08GlOax7IeI//mqVwvc5eRGGwzEuLhqHgePxDEEgoFQCDZdSYUlJNYwHEkmyMhDtex7DbrfHdOodT6iHjIVgPMTsjSGiK0tKxChNJAR8goQEN4kJmiRLOM7r8YRSSMggQKIU0tUKSRybtNcDhSs3w3U/gt1+QtuycGfZsKw72HYb9XrzMLDteLBf6VA/RHu8gDWIqSa4HGa4nOzRct/x5Vng6omh1WUYDCeIaTmNZusw8GWm4Ig9HgjS5d/gyB/ovK3xzLe4J69Htcff0Zff0WU7OH0X7miC5jEgozeK6doRaZum2GYZZCiwoZ55PrjvI+SBmSsp4bwMcHNjo9Fo/u+32dJSBG1bmt9EqYVZTLbZwaL3MrJ0vcft7QMeH5+Ov2G1WsPZ2WfoenpaNb2W7rVXq336S9XqL+Xz+YPAn3apQBA8YMHsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"my-viettel\"\n        title=\"my-viettel\"\n        src=\"/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/8c557/my-viettel-2.png\"\n        srcset=\"/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/4edbd/my-viettel-2.png 175w,\n/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/13ae7/my-viettel-2.png 350w,\n/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/8c557/my-viettel-2.png 700w,\n/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/3534c/my-viettel-2.png 808w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> </p>\n<h2>4. Tổng kết</h2>\n<p>Tất cả các dạng Deep link này đều có thể custom thêm path và query để truyền thông tin thực hiện điều hướng các flow khác nhau. </p>\n<blockquote>\n<p>Với user chưa tải app bạn không thể vừa click tải app và mở app lần đầu lấy đc thông tin từ Deep link. Việc lấy thông tin từ Deep link chỉ thực hiện khi user đã tải app. Vậy nên hay tách ra là 2 link tải app và Deep link điều hướng các flow chức năng.</p>\n</blockquote>\n<p>Ví dụ bạn có thể tạo 1 Dynamic link (chi tiết tạo Dynamic link trực tiếp từ app bạn có thể xem tại <a href=\"https://firebase.google.com/docs/dynamic-links/ios/create?authuser=1\">đây</a>) từ user A mời user B vào room chat của mình. Thông tin truyền vào cần <code class=\"language-text\">room</code> và <code class=\"language-text\">user</code> . Dynamic link sẽ có dạng <code class=\"language-text\">yourDomain.page.link/joinChat?room=ce98x74Dk&amp;user=tHW94kd</code></p>\n<p>Bạn cần bóc tách lấy thông tin từ Deep link từng phần scheme, host, path và query để lấy thông tin điều hướng khi user B click vào link này. Với iOS bạn có thể xem cách chi tiết tại link này: <a href=\"https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app\">handle URL Scheme</a> và <a href=\"https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/supporting_universal_links_in_your_app\">handle Universal link</a>. Với Android bạn có thể tham khảo tại <a href=\"https://developer.android.com/training/app-links#add-app-links\">handle App link</a></p>\n<p>Chú ý phần deep link này chứa thông tin nên để đảm bảo an toàn bạn cần mã hoá lại phần path vs query\nBạn có thể dùng mã hoá AES. Link mã hoá sẽ có dạng <code class=\"language-text\">yourDomain.page.link/VYlCFA1FhPEYjKcvfN7dkNpZoBmM73XBT0hyiF7kZ6</code>. Để test mã hoá và giải mã AES bạn có thể thử tại <a href=\"https://www.devglan.com/online-tools/aes-encryption-decryption\">www.devglan.com</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cbcfe4ba8facf8d43da06bb38431b426/0a47e/encrypt-aes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADXElEQVQ4y41UyW7cVhDkd+Uz8itGDgZycXzOB/iaYwA7CWCfjFxycLxovEkaydbsG4fbcBtuj+SUq5scSV4CR0DhDaheqqsXa75c4WTwGqdnQ7x5+w7nwwt935+e4fmLl7gajVE3LWbzBV6eDHBx+QGvTl7j7Hyofu/en+LZvy/0e1kZWK7nYzKdQQKPxlNigq3jQb77wQ5xulfDreNitlhitd5gMptjTB+b38TG9QPESdoF3Gc5HLcLEPCf29Ua7sZGGMXYeR78rYOKhgkd5kw2I+PFdIopX4G72SBwHHh8E/pYlanRtq3i0L9N01yjJWpiv88Q0lEQMVHoughsG1madj51jbpuYBkG/N6fMCzK8rt2ktjahRGiOEGWF8iLkjpUKMtKgyiM0e9RTAloGxJuEMF2qR2Ziq9oJxA7S8QcXlywu0MV3KPADvWUwFKCYSmGrzRqPKF2bIi/izWoNCSKU7KvFNqUYBfqSGzs7XWmUkusriGZJbE0TRIdWN7hcCBA/Q5aquitDMVBaMvHjk0HYXdEXhSQxJJUxifpRymnrl8mVg3XHBMxTtlJ6fqR/m22klSC5tRadL2d/EhAA0oz4iQh5fYzzUz/+8jQC8hw62Hr+lr+MfE3Ga56hsLghmH1GcM8S5DutvCdFRYcfvFTmcwNS/G18jyH57nUxmGXbTVs2vZaP2F6aCoMpgUe/GPw+6uS0uR96bWWf4R22fEjnI+4x3NbtRwtHCzJwObKyVpmhWErSzwaFPjxQY2fHkozTD/sN+NS9NVYvz2v8cOvLe487NasrGrVoihud9AgjnYIfRuBu8Ga8zrnobj88FFJHIdabK3LVYrHgxDPLiNq2F2XhrNl2CRTt/qKQ5zscTWe4eNoQvau2soSKLgIApkSK98n8Nc8WYsJprwmC26CLRvDkn25InwTXc0Se+qWUgZJdPjGLsuRsDIarCQIS3CWS2zmcyzHY0RBgJINK7JMG9DWt4+DhGsVTX+hWq6NNOZ/XRugwdOzHHf/rPHLE4N7hPweO4YT0DWp2xxqWOpFqb+C6VGZhvFK/D0s8PNfBveflLj3uMLdP0pc2QXvIKXICr1W2mWZelmr/4L8P+SbxjsONq9ysEEWcU2DNbu9wpJ6r3mtZdQSHttPcp48oeHBXWkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"encrypt-aes\"\n        title=\"encrypt-aes\"\n        src=\"/static/cbcfe4ba8facf8d43da06bb38431b426/0a47e/encrypt-aes.png\"\n        srcset=\"/static/cbcfe4ba8facf8d43da06bb38431b426/4edbd/encrypt-aes.png 175w,\n/static/cbcfe4ba8facf8d43da06bb38431b426/13ae7/encrypt-aes.png 350w,\n/static/cbcfe4ba8facf8d43da06bb38431b426/0a47e/encrypt-aes.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>Hãy đảm bảo rằng key mã hoá và giải mã được đồng nhất.</p>\n</blockquote>\n<p>Trên đây là toàn bộ những thứ mình biết về Deep link. Bài viết có tham khảo nhiều nguồn từ internet sẽ không tránh khỏi những sai sót, rất mong góp ý của mọi người. Cảm ơn mọi người đã đọc bài.</p>\n<p>GLHF!</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Lương Tuấn Anh </div><div class=\"custom-block-body\"></div></div>","id":"29372ea4-37e0-5d97-8c44-5c8a7b283a96","frontmatter":{"title":"Deep link, App link, Universal link, Dynamic link, URL Scheme","date":"17-12-2020","tags":["ios","android"]},"fields":{"slug":"/deeplink-applink-universallink-dynamiclink/"}}},{"node":{"excerpt":"Refactoring là gì? Nói 1 cách ngắn gọn, đó là biến 1 mớ hỗn độn thành mã sạch và thiết kế đơn giản. Nhưng làm cách nào? Liệu có 1 hệ thống các quy tắc có thể áp dụng để refactor code 1 cách khoa học…","html":"<p><strong>Refactoring là gì?</strong></p>\n<p>Nói 1 cách ngắn gọn, đó là biến 1 mớ hỗn độn thành mã sạch và thiết kế đơn giản. Nhưng làm cách nào? Liệu có 1 hệ thống các quy tắc có thể áp dụng để refactor code 1 cách khoa học? Rất may mắn là có. Đây là các phương pháp cụ thể để thực hiện việc refactor:</p>\n<ol>\n<li>Xử lí các method (Composing Methods)</li>\n<li>Di chuyển features giữa các object (Moving Features between Objects)</li>\n<li>Tổ chức lại dữ liệu (Organizing Data)</li>\n<li>Đơn giản hoá các biểu thức điều kiện (Simplifying Conditional Expressions)</li>\n<li>Đơn giản hoá việc gọi các method (Simplifying Method Calls)</li>\n<li>Xử lí tổng quát (Dealing with Generalization)</li>\n</ol>\n<p>Trong bài viết này, mình sẽ đề cập đến phương pháp mọi người thường sử dụng nhất (do đây là thứ đầu tiên đập vào mặt chúng ta khi làm việc với code thối :()</p>\n<p><strong>Các kĩ thuật Composing Methods</strong></p>\n<p><strong><em>1. Extract Method</em></strong></p>\n<p>  Vấn đề: Bạn có một đoạn mã có thể được nhóm lại với nhau.</p>\n<p>  Giải pháp: Di chuyển mã này sang một phương thức (hoặc hàm) mới riêng biệt và thay thế mã cũ bằng một lệnh gọi phương thức.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">void printOwing() {\n  printBanner();\n\n  // Print details.\n  System.out.println(&quot;name: &quot; + name);\n  System.out.println(&quot;amount: &quot; + getOutstanding());\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  chúng ta có thể tách ra thành</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">void printOwing() {\n  printBanner();\n  printDetails(getOutstanding());\n}\n\nvoid printDetails(double outstanding) {\n  System.out.println(&quot;name: &quot; + name);\n  System.out.println(&quot;amount: &quot; + outstanding);\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>2. Inline method</em></strong></p>\n<p>  Vấn đề: khi code bên trong method còn rõ ràng hơn cả tên của nó.</p>\n<p>  Giải pháp: gọi luôn phần code tại nơi sử dụng và xoá luôn phần gọi method đó</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class PizzaDelivery {\n  // ...\n  int getRating() {\n    return moreThanFiveLateDeliveries() ? 2 : 1;\n  }\n  boolean moreThanFiveLateDeliveries() {\n    return numberOfLateDeliveries &gt; 5;\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  chuyển thành</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class PizzaDelivery {\n  // ...\n  int getRating() {\n    return numberOfLateDeliveries &gt; 5 ? 2 : 1;\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>3. Extract Variable</em></strong></p>\n<p>  Vấn đề: Bạn có một cách diễn đạt khó hiểu.</p>\n<p>  Giải pháp: Đặt kết quả của biểu thức hoặc các phần của nó trong các biến riêng biệt có thể tự giải thích.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">void renderBanner() {\n  if ((platform.toUpperCase().indexOf(&quot;MAC&quot;) &gt; -1) &amp;&amp;\n       (browser.toUpperCase().indexOf(&quot;IE&quot;) &gt; -1) &amp;&amp;\n        wasInitialized() &amp;&amp; resize &gt; 0 )\n  {\n    // do something\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  sửa lại</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">void renderBanner() {\n  final boolean isMacOs = platform.toUpperCase().indexOf(&quot;MAC&quot;) &gt; -1;\n  final boolean isIE = browser.toUpperCase().indexOf(&quot;IE&quot;) &gt; -1;\n  final boolean wasResized = resize &gt; 0;\n\n  if (isMacOs &amp;&amp; isIE &amp;&amp; wasInitialized() &amp;&amp; wasResized) {\n    // do something\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>4. Inline Temp</em></strong></p>\n<p>  Vấn đề: Bạn có một biến tạm thời được gán kết quả của một biểu thức đơn giản và không có gì khác.</p>\n<p>  Giải pháp: Thay thế các tham chiếu đến biến bằng chính biểu thức.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">boolean hasDiscount(Order order) {\n  double basePrice = order.basePrice();\n  return basePrice &gt; 1000;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  sửa lại</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">boolean hasDiscount(Order order) {\n  return order.basePrice() &gt; 1000;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>5. Replace Temp with Query</em></strong></p>\n<p>  Vấn đề: Bạn đặt kết quả của một biểu thức trong một biến cục bộ để sử dụng sau này trong mã của bạn.</p>\n<p>  Giải pháp: Di chuyển toàn bộ biểu thức sang một phương thức riêng biệt và trả về kết quả từ nó. Truy vấn phương thức thay vì sử dụng một biến. Kết hợp phương pháp mới với các phương pháp khác, nếu cần.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">double calculateTotal() {\n  double basePrice = quantity * itemPrice;\n  if (basePrice &gt; 1000) {\n    return basePrice * 0.95;\n  }\n  else {\n    return basePrice * 0.98;\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  Sửa lại:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">double calculateTotal() {\n  if (basePrice() &gt; 1000) {\n    return basePrice() * 0.95;\n  }\n  else {\n    return basePrice() * 0.98;\n  }\n}\ndouble basePrice() {\n  return quantity * itemPrice;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>6. Split Temporary Variable</em></strong></p>\n<p>  Vấn đề: Bạn có một biến cục bộ được sử dụng để lưu trữ các giá trị trung gian khác nhau bên trong một phương thức.</p>\n<p>  Giải pháp: Sử dụng các biến khác nhau cho các giá trị khác nhau. Mỗi biến chỉ nên chịu trách nhiệm về một thứ cụ thể.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">double temp = 2 * (height + width);\nSystem.out.println(temp);\ntemp = height * width;\nSystem.out.println(temp);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  Sửa thành</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">final double perimeter = 2 * (height + width);\nSystem.out.println(perimeter);\nfinal double area = height * width;\nSystem.out.println(area);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>7. Remove Assignments to Parameters</em></strong></p>\n<p>  Vấn đề: Một số giá trị được gán cho một tham số bên trong phần thân của phương thức.</p>\n<p>  Giải pháp: Sử dụng một biến cục bộ thay vì một tham số.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">int discount(int inputVal, int quantity) {\n  if (quantity &gt; 50) {\n    inputVal -= 2;\n  }\n  // ...\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  Sửa lại:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">int discount(int inputVal, int quantity) {\n  int result = inputVal;\n  if (quantity &gt; 50) {\n    result -= 2;\n  }\n  // ...\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>8. Replace Method with Method Object</em></strong></p>\n<p>  Vấn đề: Bạn có một method dài, trong đó các biến cục bộ đan xen nhau đến mức bạn không thể áp dụng Extract Method.</p>\n<p>  Giải pháp: Chuyển method thành một class riêng biệt để các biến cục bộ trở thành các trường của class. Sau đó, bạn có thể chia method thành nhiều method trong cùng một class.</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class Order {\n  // ...\n  public double price() {\n    double primaryBasePrice;\n    double secondaryBasePrice;\n    double tertiaryBasePrice;\n    // Perform long computation.\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  Chuyển thành</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class Order {\n  // ...\n  public double price() {\n    return new PriceCalculator(this).compute();\n  }\n}\n\nclass PriceCalculator {\n  private double primaryBasePrice;\n  private double secondaryBasePrice;\n  private double tertiaryBasePrice;\n\n  public PriceCalculator(Order order) {\n    // Copy relevant information from the\n    // order object.\n  }\n\n  public double compute() {\n    // Perform long computation.\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>9. Substitute Algorithm</em></strong></p>\n<p>  Vấn đề: bạn muốn thay thế một thuật toán hiện có bằng một thuật toán mới?</p>\n<p>  Giải pháp: Thay thế phần thân của phương thức thực hiện thuật toán bằng một thuật toán mới</p>\n<p>  Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">String foundPerson(String[] people){\n  for (int i = 0; i &lt; people.length; i++) {\n    if (people[i].equals(&quot;Don&quot;)){\n      return &quot;Don&quot;;\n    }\n    if (people[i].equals(&quot;John&quot;)){\n      return &quot;John&quot;;\n    }\n    if (people[i].equals(&quot;Kent&quot;)){\n      return &quot;Kent&quot;;\n    }\n  }\n  return &quot;&quot;;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>  Chuyển thành:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">String foundPerson(String[] people){\n  List candidates =\n    Arrays.asList(new String[] {&quot;Don&quot;, &quot;John&quot;, &quot;Kent&quot;});\n  for (int i=0; i &lt; people.length; i++) {\n    if (candidates.contains(people[i])) {\n      return people[i];\n    }\n  }\n  return &quot;&quot;;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Tổng kết</strong></p>\n<p>Tất cả các phương pháp trên đều cần các kĩ thuật và lưu ý nhỏ hơn mà mình khó có thể liệt kê hết trong khuôn khổ 1 bài viết, cách tốt nhất để làm tốt là để ý và ghi nhớ trong quá trình làm việc và học hỏi từ các đồng nghiệp nhiều kinh nghiệm hơn. Hy vọng bài viết giúp ích cho các bạn khi phải vật lộn với 1 đống hổ lốn do người khác hoặc chính mình tạo ra =))</p>\n<p><em>Bài viết tổng hợp từ <a href=\"https://refactoring.guru/\">https://refactoring.guru/</a></em></p>","id":"1d1d386b-f310-5f4c-8e23-9c33bae0e3a3","frontmatter":{"title":"Code Refactoring","date":"19-11-2020","tags":["refactoring"]},"fields":{"slug":"/code-refactoring/"}}},{"node":{"excerpt":"Khi là một thực tập sinh Ruby on Rails, mình được chỉ định làm một trang web được viết bằng Ruby on Rails. Trước ngày đem sản phẩm đi demo, mình và Trainer có review lại sản phẩm của mình lúc đó mình…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Khi là một thực tập sinh Ruby on Rails, mình được chỉ định làm một trang web được viết bằng Ruby on Rails. Trước ngày đem sản phẩm đi demo, mình và Trainer có review lại sản phẩm của mình lúc đó mình run web dưới local. Trainer muốn mình triển khai sản phẩm của mình lên môi trường server. Trainer cấp cho mình một con VPS (Virtual Private Server) và hướng dẫn mình deploy sản phẩm của mình lên môi trường server bằng Capistrano gem. Sau khi tìm hiểu và Setup mình đã deploy được sản phẩm của mình.</p></div></div>\n<h2>Deploy là gì? Tại sao lại cần Capistrano</h2>\n<p>Deploy là một công việc được đưa code của sản phẩm mình làm ra đưa lên môi trường server, chúng ta config như thế nào để cho sản phẩm của mình chạy được trên đó. Đôi lúc có những công đoạn như đưa code từ bộ quản lý source (github, gitlab, ...), config database, cài đặt môi trường, chạy rake task,... các công đoạn này được lặp đi lặp lại rất nhiều lần sẽ rất là vất vả nếu thực hiện nó bằng tay, mà giả xử những công đoạn này bị lỗi ở một chỗ nào đó thì tốn rất nhiều time để fix lỗi đó, khi đó người dùng sẽ rất thất vọng khi sản phẩm này đang bị lỗi. Thì Capistrano gem nó được sinh ra để tự động hóa các công đoạn trên. Capistrano còn cho phép chúng ta deploy code lên nhiều server cùng một lúc, rollback nếu deploy lỗi, lưu trữ các bản deploy gần đây nhất, chạy custom task trong quá trình deploy. Việc deploy với gem Capistrano gồm 3 bước:</p>\n<ul>\n<li>Tạo môi trường trên server</li>\n<li>Config cho Capistrano</li>\n<li>Config Nginx (webserver)</li>\n<li>Config các lại các bước deploy</li>\n</ul>\n<p>Một điều mình thích dùng Capistrano để deploy là bởi vì Capistrano nó rõ ràng trong từng phân đoạn, cấu trúc config của nó rất dễ hiểu để chúng ta config, không bị delay app trong quá trình deploy app</p>\n<h2>Công thức deploy app Ruby on Rails với Capistrano, Puma và Nginx</h2>\n<p>Mình có đọc một bài trên Viblo, thì anh này nghiên cứu khá là sâu nên đã đúc kết ra được một cái công thức deploy cơ bản:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Deploy = Config Server(giống như 1 máy local) + Config Capistrano + Config Nginx</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Công thức trên để phục vụ cho các bước lằng nhằng sau đây. Mình sẽ phân tích rõ ràng từng công đoạn.</p>\n<p>OK. Bây giờ triển luôn nào.</p>\n<h2>Các bước deploy rails app lên server bằng Capistrano gem</h2>\n<h3>Step 1: Tìm hiểu một số kiến thức</h3>\n<ul>\n<li>Puma</li>\n<li>Nginx</li>\n</ul>\n<p>Puma là web server nhỏ gọn đi liền trong Rails giúp developer có thể bắt đầu code một cách nhanh nhất. Tuy nhiên mang nó làm web server thực sự để chạy trên môi trường production thì chưa ổn.</p>\n<p>Puma hoạt động như application server cho ứng dụng Rails, còn Nginx sẽ hoạt động với vai trò là reverse proxy - nhận request và chuyển response giữa client và Puma. Puma và Nginx giao tiếp với nhau thông qua socket.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 486px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dd2036e538c4087aec3839f53280d43/4ee7f/puma-nginx.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.14285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABLDAAASwwFyLQTKAAACbElEQVQ4y2NY0tTDxAAEc2eWai6evehBW9cyXxC/q2sSMwO54C9DvlVe2baO7Xe2/186w32xrIKd1f//VYzTp7UypKSkMuTn5+PFIIDMZvgoXLMyMGbH0+KHJVf2rpC9b27pv4kUB8ENgoHbDAyMINo9wEkzL0GQPzq+ir2kpJAnLy+PD6iYH4q5oRgkxgEVEwJidhQXvmZwghtspmfP5eTia5KSnGRZVFQkA1QgC8SKQKwAxFJALAfEqkAsBhUHsflRvbxdj7k+OoDBKbQG7Mo6eWMmGxtbZWN3C0myvQwDrGsNeLhXGLOA2CFang5lDGFg20u9shiBmhihrkCmGTEjZaveBI71RkJg0a36C5g3GbiAmPyzjbtYV+j7gdiiS6zASaigoACOYQaA2DA5qJcNahiuqUqARY8YmDK8EuQGsw8apMmucfIAsy8yMBYXFzPi8jKyBWCQXpAdkZudU5ibk5uYl5UblZmfXdUUU60Akqtsq5Ga3T0d5kJRIFYDYhFoJKkC2cIopjt0BrIBDdHOycmxz8/Ps8jNy9XLzc61z8jPFHdpDmUtKihUAGoCxbIMkNYGYn2oQYZArAIVk4OmCDUUw/UM9EWERYTZYPzCgkI2oCJeEAZq4gNibiDmBKVHKBuEhYF8AWj65GcICAgAa/bw8BB0c3NTAWIpZ2dnTgZKgKurK7Ofn5+Ql5cXV1BQEEdERIQoSDw7O5sBmFvggY4cw9hiHB4p27dvN9m2bdu8nTt3tm7YsGHCsmXLJoDEV6xYAcYkgx07dkQdPHjw/enTp28fOnTo0dq1a8/19fWxguRWrlxJklkAxOIYz7K1MVAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mô hình web app\"\n        title=\"mô hình web app\"\n        src=\"/static/7dd2036e538c4087aec3839f53280d43/4ee7f/puma-nginx.png\"\n        srcset=\"/static/7dd2036e538c4087aec3839f53280d43/4edbd/puma-nginx.png 175w,\n/static/7dd2036e538c4087aec3839f53280d43/13ae7/puma-nginx.png 350w,\n/static/7dd2036e538c4087aec3839f53280d43/4ee7f/puma-nginx.png 486w\"\n        sizes=\"(max-width: 486px) 100vw, 486px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Step 2: Chuẩn bị môi trường</h3>\n<p>Nếu các bạn có điều kiện thì có thể thuê VPS ở các nhà cung cấp như AWS - Amazon Web Service, DigitalOcean, Azure, Google Cloud Platform, ...\ncác bạn có thể tham khảo và thuê lấy một cái.</p>\n<p>Do một số điều kiện không cho phép nên ở bài viết này mình sẽ sử dụng một con VPS (Virtual Private Server) được tạo bằng Docker. Mọi người có thể tham khảo <a href=\"https://blog.tomosia.com/create-vps-virtual-private-server-by-docker-and-dockerfile/\">bài viết</a> này.</p>\n<p>Khi mọi người có được một con VPS (Virtual Private Server) của nhà cung cấp, các bạn sẽ được thêm một số thông tin để chúng ta connect vào.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e776af576d8370674e10a77d1e01fb4e/85e74/ssh.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOElEQVQoz21SWXbCMAw0tA2hwWy36EZZQuKEQBJy/zOpGnl5JvRjni3ZGo3GVllhSJ8b2piB15YWjPfTlZZFR/PjlV52ht5+a0bl1pped1VY7b6i9NhQwjm1ZiIE6eEiBLP9hZJ9TVl+owVjVfbSBNDcBE1XZWdj13zyVdDkuxQw4Z3VMao7betBCDbVQGvTyx7nUIu9jXuJQYgVhBABxerzTApJXfiOHWWnm1xMD43Aj+SVA5gIeSGI1fFe4YInQ5cZjw5S7yNGt8SGpj9lIJBiEI6BzlseEYVIzLn7Mnhlx/PETySIx4ASFMsjRK+MWMBq5ZxXNJM7efsw8gNQBA9RYF+2DQq1U+fNhyXio/syQXFMqCNFiTMePvq/BUzZs/gfelLknwgxhh8X5iNGgfrI/zd9jJHKP2NtIUC/NMD0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mô hình web app\"\n        title=\"mô hình web app\"\n        src=\"/static/e776af576d8370674e10a77d1e01fb4e/8c557/ssh.png\"\n        srcset=\"/static/e776af576d8370674e10a77d1e01fb4e/4edbd/ssh.png 175w,\n/static/e776af576d8370674e10a77d1e01fb4e/13ae7/ssh.png 350w,\n/static/e776af576d8370674e10a77d1e01fb4e/8c557/ssh.png 700w,\n/static/e776af576d8370674e10a77d1e01fb4e/e996b/ssh.png 1050w,\n/static/e776af576d8370674e10a77d1e01fb4e/2cefc/ssh.png 1400w,\n/static/e776af576d8370674e10a77d1e01fb4e/85e74/ssh.png 1436w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nSử dụng lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">rails new docker_app</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Để tạo một project deploy, hoặc nếu có sẵn thì càng tốt. Xong rồi ta push lên bộ quản lý source code (github, gitlab, ...)\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/890935ffc7ad3d9a5e3418b1679112dd/17009/source-github.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACFUlEQVQ4y4VTy47UMBCc//8GvoADH8CJKxInuCBxWwQ7OzNxYsdvOym6eibZ2V0QllrdfpWrq9uHo214uGQ8nBN+HDN+mwwfAkrtaH1BbV1ti//mablWtcMwDAghws4eMWVMzsOME1IuGCeH2QdZmzHZGSEmDGbbszq3smflzjYONQbUnGUzosoLpRS5kDWmLUtH78KkNYkX9Zx7eYhno4AGwfhy/IZPPz/jQNQoLz5djLCM8LHAp6JxKnJ5BdrybJwXCU7DBOsjLsbibC3ef/+Id18/XAFtKPh1tng0Hi4DcxGr0Nim9Tq/M697K4Y5C5jIIIvjWJECCLhiiguGyYvI7a4IXVKvqiM1o8Xc4HNHoE9t98xkFC0H0VUBTVhwNg5ZLhGs1Cswi2RGCyd6UXzjyKji4op4MfEn8UEeZtGG8QYozHEZHZxzWql1XdVT/Nl7Ff9/g0V187ylvGoRCECwzZqwHMyorcP5svzLFszSdsxCAVX4kMltB9sYst8oxfNY38Q8zzbaGRJwmGZhVPcDPMqe2xhqSkGKFDomsd37rr/qBUO2gFHA9kJDVj2mhC4paXPLF2MP1s1u8y7ey28j6I2hFEWqnFJUoOUGyAf0G0q1GWdhkir/7aJ+M7aYe83Q+YRVmLwuymSd/vXIlGPTNG3su2fqTJlnqOO1D4XY48nsDNc7hsen06uivB2sMjOh3n8AlOORNhB25TYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mô hình web app\"\n        title=\"mô hình web app\"\n        src=\"/static/890935ffc7ad3d9a5e3418b1679112dd/8c557/source-github.png\"\n        srcset=\"/static/890935ffc7ad3d9a5e3418b1679112dd/4edbd/source-github.png 175w,\n/static/890935ffc7ad3d9a5e3418b1679112dd/13ae7/source-github.png 350w,\n/static/890935ffc7ad3d9a5e3418b1679112dd/8c557/source-github.png 700w,\n/static/890935ffc7ad3d9a5e3418b1679112dd/e996b/source-github.png 1050w,\n/static/890935ffc7ad3d9a5e3418b1679112dd/2cefc/source-github.png 1400w,\n/static/890935ffc7ad3d9a5e3418b1679112dd/17009/source-github.png 1932w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Cài đặt một số môi trường, cấu hình cho con server giống như ở máy local, các cầu hình cơ bản như:</p>\n<ul>\n<li>rbenv</li>\n<li>Ruby</li>\n<li>Rails</li>\n<li>MySql</li>\n<li>Git</li>\n<li>Redis</li>\n<li>Nginx</li>\n</ul>\n<p>Nói chung cài những thứ mà project của các bạn cần mà dưới local của các bạn chạy được là được.</p>\n<p>Lưu ý: Khi các bạn cài MySql xong chúng ta nên tạo trước một database sẵn cho ứng dụng.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">mysql -u root -p\nNhập password vào\nGõ lệnh này\nCREATE DATABASE &lt;your_database_name&gt; CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tên database các bạn cần đế để lát nữa còn config vào file database.yml nhé OK như thế là xong.</p>\n<h3>Step 3: Tạo cấu trúc thư mục deploy trên server</h3>\n<p>Capistrano gem sẽ cấu trúc thư mục cho chúng ta. Bước này chúng sẽ tạo ra folder deploy riêng của project của chúng ta.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ mkdir /deploy\n$ mkdir /deploy/apps\n$ mkdir /deploy/apps/docker_app\n$ sudo chown -R www:root /deploy/apps/docker_app\n$ mkdir /deploy/apps/docker_app/shared\n$ mkdir /deploy/apps/docker_app/shared/config</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Muốn connect database vô rails app của chúng ta, mình sẽ tạo ra một file database.yml trong thư mục shared</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ vim /deploy/apps/docker_app/shared/config/database.yml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Giống ở dưới local chúng ta sẽ add chúng attributes cần thiết vào.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">production:\n  adapter: mysql2\n  encoding: utf8mb4\n  pool: 5\n  database: &lt;your_database_name&gt;\n  username: root\n  password: &lt;your_mysql_password&gt;\n  socket: /var/run/mysqld/mysqld.sock</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tiếp theo là file <code class=\"language-text\">application.yml</code>, file này thường chúng hay để các biến môi trường private.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ vim /deploy/apps/docker_app/shared/config/application.yml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ta cũng add những attributes cần thiết vào trong này. Như ở local</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">SECRET_KEY_BASE: &quot;&lt;your_secret_key_base&gt;&quot;\nsettings:\n  info:\n    name: MyAppName\n    domain: example.com\n  database:\n    email: mail@example.com\n    phone: 1234567890</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta cần tạo một <code class=\"language-text\">SECRET_KEY_BASE</code>, để tạo ở dưới local chúng ta gõ lệnh này vào terminal <code class=\"language-text\">RAILS_ENV=production rake secret</code> rồi dán vào file application.yml.</p>\n<h3>Step 4: Cấu hình project trên server</h3>\n<p>Chúng ta cần cấu hình trước cho thằng nginx, mình nghĩ các bạn chưa biết đến về nginx nên tìm hiểu thêm về nginx, vì nó khá là quan trọng.</p>\n<p>Lệnh cài nginx:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ sudo apt-get install nginx</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó remove giá trị mặc định của nó đi, chúng ta sẽ tạo giá trị khác sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ sudo rm /etc/nginx/sites_enabled/default</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đây là lí do mình khuyên các bạn tìm hiểu trước về nginx, nếu các bạn chưa hiểu về nó thì sẽ gặp trường hợp của mình trước đây đó là dù các bạn config đúng như thế nào thì nó vẫn vào config default</p>\n<p>Màn hình default của nginx sẽ ra thế này:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5646153a39e4d6388f7aa8a1f4664a15/410b4/man-hinh-default-nginx.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXklEQVQoz32S226CQBCGef+n8AG80QtNvDAewGPV2DTxCltBzieRgqLg350xWNOmnWTC/gM78/27SNvtFo1GA71eD/P5HKPRCIvFAqvVCuv1GpvNBpPJhOuz2QxJkoCiLEvcbrdfKe12O9TrdTSbTXS7XbTbbXQ6HW6iKAo3qdVqaLVaGAwGOJ/P+C+ky+XyEKfTCaRpU1EUyPMcaZpyVjqOY7iuC9u2YZomPM+Drulci6IIkmVZPJnsUpL18XjMhNWa7NM30+kUYRjBcRzQPtu2EIQ+9obOmhvSdN/3OYMg4Ce90DSNNRERhePa8AMPyeeRa3SW2VE4iIWjtPi2TNMqIiIcDofo9/tYLpdQZIXXsizjRX67p/KK/X4vKIXldx+mGsL+CB+XxISEWxEyjRhyOBy4lmUZrterIMmRCZr8ieZncEO6CPp1yKKu38+CtKqqMAzjz42c5VMKTfEFqJlOqnEK+2YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"default nginx\"\n        title=\"default nginx\"\n        src=\"/static/5646153a39e4d6388f7aa8a1f4664a15/8c557/man-hinh-default-nginx.png\"\n        srcset=\"/static/5646153a39e4d6388f7aa8a1f4664a15/4edbd/man-hinh-default-nginx.png 175w,\n/static/5646153a39e4d6388f7aa8a1f4664a15/13ae7/man-hinh-default-nginx.png 350w,\n/static/5646153a39e4d6388f7aa8a1f4664a15/8c557/man-hinh-default-nginx.png 700w,\n/static/5646153a39e4d6388f7aa8a1f4664a15/e996b/man-hinh-default-nginx.png 1050w,\n/static/5646153a39e4d6388f7aa8a1f4664a15/2cefc/man-hinh-default-nginx.png 1400w,\n/static/5646153a39e4d6388f7aa8a1f4664a15/410b4/man-hinh-default-nginx.png 2102w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi xoá xong, mình tạo một file mới</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ sudo vim /etc/nginx/conf.d/default.conf</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó coppy đoạn ở dưới này vào trong file default.conf</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">upstream app {\n  # Path to Puma SOCK file, as defined previously\n  server unix:/deploy/apps/docker_app/shared/tmp/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\n  listen 80;\n  server_name localhost;\n\n  root /deploy/apps/docker_app/current/public;\n\n  try_files $uri/index.html $uri @app;\n\n  location / {\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header Host $host;\n    proxy_redirect off;\n    proxy_set_header Connection &#39;&#39;;\n    proxy_pass http://app;\n    proxy_read_timeout 150;\n  }\n\n  location ~ ^/(assets|fonts|system)/|favicon.ico|robots.txt {\n    gzip_static on;\n    expires max;\n    add_header Cache-Control public;\n  }\n\n  error_page 500 502 503 504 /500.html;\n  client_max_body_size 4G;\n  keepalive_timeout 10;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đoạn loằng nhằng trên trông có vẻ khó hiểu. Đây là file config để connect giữa webserver tới rails app. Tức là nó muốn tìm đến puma để connect giữa nginx và puma lại với nhau.</p>\n<p>Chúng ta chỉ cần quan tâm 3 dòng này</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">listen 80;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>App của chúng ta sẽ chạy ở port 80, có thể thay đổi tuỳ chỉnh.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server unix:/deploy/apps/docker_app/shared/tmp/sockets/puma.sock fail_timeout=0;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Capistrano sẽ tạo cho chúng ta một cấu trúc của một rails app ở trong đường dẫn này <code class=\"language-text\">/deploy/apps/docker_app/</code>, đoạn trên là đường dẫn để dẫn đến puma. Vì cái này sẽ tạo ra sau khi chúng ta deploy nên chúng ta sẽ không thấy file đó.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">root /deploy/apps/docker_app/current/public;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tiếp theo đoạn sau khi ta deploy nó sẽ sinh ra trong thư mục <code class=\"language-text\">docker_app</code>, đoạn này là nơi Nginx gởi request đến rails app của chúng ta để xử lý</p>\n<p>Sau khi setup xong, chúng ta cần phải reload lại nginx để nginx nhận được sử thay đổi mà chúng ta vừa config</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ sudo service nginx restart</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46525dcdbee19917b428312054dfa633/0b569/start-nginx.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.142857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAW0lEQVQI12PgNLL9z2Nq/5/PzOE/t7HdfzZ9q/8sepb/GXXM/zNomf5n0DYjDsPUggwRsHACG8ptYvefWdfiP4OmKUIBMYYiqxWxdv3PYWQDdhUTyFXYFJLgQgCzqFPZzfGJHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"start nginx\"\n        title=\"start nginx\"\n        src=\"/static/46525dcdbee19917b428312054dfa633/8c557/start-nginx.png\"\n        srcset=\"/static/46525dcdbee19917b428312054dfa633/4edbd/start-nginx.png 175w,\n/static/46525dcdbee19917b428312054dfa633/13ae7/start-nginx.png 350w,\n/static/46525dcdbee19917b428312054dfa633/8c557/start-nginx.png 700w,\n/static/46525dcdbee19917b428312054dfa633/e996b/start-nginx.png 1050w,\n/static/46525dcdbee19917b428312054dfa633/2cefc/start-nginx.png 1400w,\n/static/46525dcdbee19917b428312054dfa633/0b569/start-nginx.png 2878w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Step 5: Authentication Git Repository (github) với server và máy host với server</h3>\n<h4>Đầu tiên chúng ta cần xác thức Git Repository với server (VPS).</h4>\n<p>Vì sao có việc này?</p>\n<p>Chúng ta hay quản lý source code (Git Repository) của mình bằng git và nơi chúng ta thường dùng Git Repository là github (có thể gitlab, bitbucket, ...), ở đây nhánh master là nhánh luôn luôn phải đúng, mà luôn đúng thì ta thường show ra, thì nhánh master ta cần phải luôn luôn deploy nếu có sự thay đổi. Việc xác thực giữ github và server ở đây là để capistrano lấy code từ nhánh master trên github để deploy lên server.</p>\n<p>Để xác thực, trên server chúng tạo một ssh key bằng lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Để show ra ssh key chúng ta mới tạo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cat ~/.ssh/id_rsa.pub</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea89c12d11d79d9223d909a10d6d0ef1/5bd27/result-ssh-key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVQY041Qy07CUBCdlREoqAgU1L2PhIRHES2UglAo6oKoCxO+gIWJv0BCQuJPH+fce8uaxcm8z5wZKYdT1EepYoGL5ynOn15QVluL5qgMEsUMZ/0J8t3ogEJ3hFzHWi+wfl59xsKBqg5WhxZ+tFA7h68LuKSmPsnps96Il4rUiLiZvDrf9nJW6FgliWlikmRZY8Uss2ovw5mLE3dV6gTYHBcLB6kiS/CE0/bAgARX46UhZJ3XcMm1KvOdeiquKwf7WBOSZEX+7n3zi5/dHzbbPe7evnDSClEI+KtYfzW0P9Q4+2fxcWys53Li9WKUNMkmorn6Rutjjfbn2uTltgN56EHug6PwD/BuvDBuwiHPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result ssh key\"\n        title=\"result ssh key\"\n        src=\"/static/ea89c12d11d79d9223d909a10d6d0ef1/8c557/result-ssh-key.png\"\n        srcset=\"/static/ea89c12d11d79d9223d909a10d6d0ef1/4edbd/result-ssh-key.png 175w,\n/static/ea89c12d11d79d9223d909a10d6d0ef1/13ae7/result-ssh-key.png 350w,\n/static/ea89c12d11d79d9223d909a10d6d0ef1/8c557/result-ssh-key.png 700w,\n/static/ea89c12d11d79d9223d909a10d6d0ef1/e996b/result-ssh-key.png 1050w,\n/static/ea89c12d11d79d9223d909a10d6d0ef1/2cefc/result-ssh-key.png 1400w,\n/static/ea89c12d11d79d9223d909a10d6d0ef1/5bd27/result-ssh-key.png 1432w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Chúng ta coppy đoạn loằng nhằng, lên github tạo một request add ssh key.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/11bd3ded635af454f11cbcdc0fa855db/764d7/github-ssh-key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9ElEQVQoz52ST0/DMAzF+/1vXDly46PAYRI7cOWC1qBJ6/JvaRInDyddEAEN0Vr6ya9y9OK4Hk6G8HYMENMMIT5wGEd471Ei5/xv2vlBWwdpPZwnOOcqRLTKrDMMIaBQPlJiOBMlRDZdYB2p1v6KZjoYa/mJAZRSNWpmTS8Uw7Rc2HJuOvUdXi4Op0lCaVuRymCSquaz0jhLzVovmik1pc1Va2hje8PSwewjfNhGYDrD8ryZZ1jwkQ/wvNbSGaLoKzGmTV2m74bvSuD5sMdOvEI6g8wD//1TbhPpR4dP4wvudg+43z9iNMduBdbE19rcKmxd7E9SEl//e9uVjgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result ssh key\"\n        title=\"result ssh key\"\n        src=\"/static/11bd3ded635af454f11cbcdc0fa855db/8c557/github-ssh-key.png\"\n        srcset=\"/static/11bd3ded635af454f11cbcdc0fa855db/4edbd/github-ssh-key.png 175w,\n/static/11bd3ded635af454f11cbcdc0fa855db/13ae7/github-ssh-key.png 350w,\n/static/11bd3ded635af454f11cbcdc0fa855db/8c557/github-ssh-key.png 700w,\n/static/11bd3ded635af454f11cbcdc0fa855db/e996b/github-ssh-key.png 1050w,\n/static/11bd3ded635af454f11cbcdc0fa855db/2cefc/github-ssh-key.png 1400w,\n/static/11bd3ded635af454f11cbcdc0fa855db/764d7/github-ssh-key.png 1782w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4>Tiếp theo xác thực máy host với server</h4>\n<p>Tại sao có bước này?</p>\n<p>Để deploy rails app từ github lên server, chúng ta cần bắt event để capistrano biết bạn muốn lấy code từ nhánh master của github deploy lên server.</p>\n<p>Thường cách bắt event đơn giản nhất, là từ dưới local (máy host) ta gõ lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ cap production deploy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Thì capistrano trên server sẽ nhận lệnh này sẽ tự động lấy code mới nhất ở master pull về máy server để deploy.</p>\n<p>Cách này trong thực tế, sau khi review code xong và ok tất cả mọi thứ, rồi merge code vô branch master, dưới máy local ta gõ lệnh trên thì deploy lên server. Đôi lúc mình hay đi ra ngoài coffee không đem máy host, mà KH lại cần gấp, lúc đó phải bỏ ly coffee chưa kịp uống đành đạch chạy về deploy. Vì quá ức ly coffee chưa kịp uống. Mình lên github setup CI/CD của Github Action, bắt event khi nào review code xong và merge code xong là deploy luôn, phải phải vát theo cái máy host nữa. :))))</p>\n<p>Ở demo này mình sẽ dùng cách thủ công. Để xác thực máy host và server ta gõ lệnh này</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ssh-copy-id &lt;user&gt;@&lt;address_ip&gt; -f\n\nor\n\nssh-copy-id  &lt;user&gt;@&lt;address_ip&gt; -p &lt;port&gt; -f</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Kết quả\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5dd6e706256fda0b85e349058239b7b7/133ae/xac-thuc-host.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAu0lEQVQY03VQWRaCQAwbFwQegl7DBdlBdrz/oWJTHsKPH3ltM5l0MibIagRVBb8s4eU9LtUHV0FQTjIP8ItRzibYSQsramDHrcKKaq1O0m34BoZiLxtxijs4aYfjq4ab9ioyjxI7gdZnhf0Gvzlce1bjislJnAma0OwQvmHuxYxbvtZ/WLTEWSI5EofRvGxQwxWdnvHVjMyePJfz3sIxvpoxDUnNr+L5tU4y/83yR+TY6wIBtVy+jb8YfgHj8Y7m17iHrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result ssh key\"\n        title=\"result ssh key\"\n        src=\"/static/5dd6e706256fda0b85e349058239b7b7/8c557/xac-thuc-host.png\"\n        srcset=\"/static/5dd6e706256fda0b85e349058239b7b7/4edbd/xac-thuc-host.png 175w,\n/static/5dd6e706256fda0b85e349058239b7b7/13ae7/xac-thuc-host.png 350w,\n/static/5dd6e706256fda0b85e349058239b7b7/8c557/xac-thuc-host.png 700w,\n/static/5dd6e706256fda0b85e349058239b7b7/e996b/xac-thuc-host.png 1050w,\n/static/5dd6e706256fda0b85e349058239b7b7/2cefc/xac-thuc-host.png 1400w,\n/static/5dd6e706256fda0b85e349058239b7b7/133ae/xac-thuc-host.png 1424w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Và bây giờ, chúng ta có thể ssh lên server mà không cần gõ password nữa.</p>\n<h3>Step 6: Setup project ở dưới local</h3>\n<p>Chúng ta sẽ sử dụng gem Capistrano để hỗ trợ việc deploy. Coppy cái này vào Gemfile:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">gem &#39;capistrano&#39;, &#39;&gt;=3.12.0&#39;\ngem &#39;capistrano3-puma&#39;\ngem &#39;capistrano-rails&#39;, require: false\ngem &#39;capistrano-bundler&#39;, require: false\ngem &#39;capistrano-rbenv&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ bundle install</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Rồi chạy lệnh để cài đặt Capistrano:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ cap install</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau khi chạy lệnh trên nó sẽ sinh ra cho chúng ta các file: deploy.rb, deploy/staging.rb, deploy/production.rb,..</p>\n<p>Các file staging.rb, production.rb chẳng qua chỉ là chia ra để dễ phân biệt các môi trường. Ở đây chúng ta chọn môi trường deploy là production nên sẽ set giá trị config vào thằng production.rb</p>\n<p>Mở file deploy.rb lên và copy đoạn bên dưới vào</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># config valid for current version and patch releases of Capistrano\nlock &quot;~&gt; 3.14.1&quot;\n\nset :application, &quot;docker_app&quot;\nset :repo_url, &lt;your_url_remote_github&gt;\n\nset :pty, true\nset :linked_files, %w(config/database.yml config/application.yml)\nset :linked_dirs, %w(log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system public/uploads)\nset :keep_releases, 5\nset :rbenv_path, &#39;/usr/local/rbenv&#39;\nset :puma_rackup, -&gt; { File.join(current_path, &quot;config.ru&quot;) }\nset :puma_state, -&gt; { &quot;#{shared_path}/tmp/pids/puma.state&quot; }\nset :puma_pid, -&gt; { &quot;#{shared_path}/tmp/pids/puma.pid&quot; }\nset :puma_bind, -&gt; { &quot;unix://#{shared_path}/tmp/sockets/puma.sock&quot; }\nset :puma_conf, -&gt; { &quot;#{shared_path}/puma.rb&quot; }\nset :puma_access_log, -&gt; { &quot;#{shared_path}/log/puma_access.log&quot; }\nset :puma_error_log, -&gt; { &quot;#{shared_path}/log/puma_error.log&quot; }\nset :puma_role, :app\nset :puma_env, fetch(:rack_env, fetch(:rails_env, &quot;production&quot;))\nset :puma_threads, [0, 8]\nset :puma_workers, 0\nset :puma_worker_timeout, nil\nset :puma_init_active_record, true\nset :puma_preload_app, false</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở đây các bạn chỉ cần quan tâm 2 dòng đó là:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">set :application, &quot;docker_app&quot;\nset :repo_url, &lt;your_url_remote_github&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<ul>\n<li>set :application : đặt tên cho ứng dụng của bạn, nên điền tên ứng dụng vào đây.</li>\n<li>set :repo_url: link đến repository chứa source code, của mình hiện tại đang là trên github Các bạn cần sửa trỏ đến project của các bạn là ok.</li>\n</ul>\n<p>Tiếp theo file <code class=\"language-text\">config/deploy/production.rb</code>\nMình sử dụng môi trường production chứ không xài staging để test.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">set :stage, :production\nset :rails_env, :production\nset :deploy_to, &quot;/deploy/apps/docker_app&quot;\nset :branch, :master\nserver &lt;server_ipv4_public_ip&gt;, user: &lt;your_user&gt;, roles: %w(web app db)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đối với mình sẽ là <code class=\"language-text\">server &quot;172.16.0.234&quot;, user: &quot;root&quot;, roles: %w(web app db), port: 32770</code></p>\n<p>Do server mình phải dùng port mới connect được server nên mình thêm một option port nữa, nếu mọi người dùng port default 80 thì không cần phải thêm.</p>\n<p>Các bạn lưu ý thêm một điểm đó là nơi mà chúng ta sẽ deploy app đó là ở đây :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/deploy/apps/docker_app</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Điều đáng lưu ý trong quá trình deploy đó là lộ thông tin cần private, cho nên những file này set biến môi trường thì chúng ta cần vứt vào trong file .gitignore, chúng ta sẽ set nó sau trên server</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># Ignore bundler config.\n/.bundle\n\n# Ignore all logfiles and tempfiles.\n/log/*\n/tmp/*\n!/log/.keep\n!/tmp/.keep\n\n# Other\nconfig/database.yml\npublic/*\n.env\ncoverage/\n.rspec\n\nconfig/settings.local.yml\n\nconfig/settings.local.yml\nconfig/settings/*.local.yml\nconfig/environments/*.local.yml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Step 7: Deploy</h3>\n<p>Sau khi cấu trúc xong 6 bước \"thần thánh\" trên bước vào giai đoạn tận hưởng đó là deploy.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cap production deploy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ec9daa8867b05089663d61a0e6c4975/09ede/result-deploy-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.14285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACjklEQVQ4y21U23LiMBSjLVCSEFJod/+h5ZLEdwdadqYz2///Iq2OA8v1QePgIbKkI2dQhS2m/hu5/0Hh/2JUd3hYeTytww2Gm9u9h5XD4MNisHQ9cr1Hbvck3aMwHca1xeM6EvLnkNbHVY8n7ieijZDHA6G/JBwsLWbW41fUeA0Gi+Aw91+Y6i1yFZG1EZM29GsjRF1PcI7lmcpM7zB1O7zEiFK3qEyLF+swbQ2KVhGaMGnNG43h2p3UHHGuUDLLzQ4zv8WceS6I17BDSfszu0VlOzzXhgo98tZhtNYkcCcs7WkVwkm7RSlkXUBFlQuui/iFQjlMSDRpLJ43pn8mxhvN3xpZrfFwTvZxUJipHYcik44obCA5rTOC8cYmNaO1STgSjRNMguw/rq4U5vqTJJ8pwyrSbhfxtv2i3YCiafscG0V1PeGRVFbZG5L0gnDcRGZIZc6h0JpEgo5Wfa+OSkVt6ts7K/LuetzNkZi5P5jYb0zjDzLVsdiBJIFVYQSah3FPKlMogU+KkqqkyN4ORU4ujcPCN1i4GnNbszY+1eZo8T/qU4aDm4H8t9yxh5xy7AjWxIdUkeHaX1q7Z/WeZSHMTcTMWZQsdOUMKm1SmXMOQ8osQ5lyODPVplxPiuw9hSSjqteoWOg2rfO4563xmGxUsnfMTQ4o0iEq9VDWmylLsXPDHjpPdcwyWBa7I6FNL5dKpeqMEmFf6Aub15YnSkq9ZQ95UwJvSefZRX55VOAg+v4d1QixPN/Yvp7ylGpeON03v8bvILApx5KZHbMTlIeSy/7R+h3LMmXeEi9WDTMU7NJdzupTVvnhtlwrHl0TPktteDMq7zhpfgtThvykKXtBKC+Lwqw5HZDduXr/AFmkHKOr+JnXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result deploy\"\n        title=\"result deploy\"\n        src=\"/static/2ec9daa8867b05089663d61a0e6c4975/8c557/result-deploy-1.png\"\n        srcset=\"/static/2ec9daa8867b05089663d61a0e6c4975/4edbd/result-deploy-1.png 175w,\n/static/2ec9daa8867b05089663d61a0e6c4975/13ae7/result-deploy-1.png 350w,\n/static/2ec9daa8867b05089663d61a0e6c4975/8c557/result-deploy-1.png 700w,\n/static/2ec9daa8867b05089663d61a0e6c4975/e996b/result-deploy-1.png 1050w,\n/static/2ec9daa8867b05089663d61a0e6c4975/2cefc/result-deploy-1.png 1400w,\n/static/2ec9daa8867b05089663d61a0e6c4975/09ede/result-deploy-1.png 1710w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76e35384fc5f2a9ddf3f15f5b21f171a/0c1c2/result-deploy-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADFklEQVQ4y11V2XLaQBAEzCkB4nLs5BMMOlbaSxLgSjmVquT//2fSs7sSIg9Tw46l1vR073gUVTeK9Z32TUOxaWlXW9o1V+RPWhaSFllFq7yiJSIuShdrUbr66Kxo9KEfwefRWVNUadrpgvY6p5PN6Ftd0slY2gh+WfQg21LQBhGFM+fuY+NLAB9fNMWVoq0s6KAzAGX0agV+W/dSHF6MByAMsCoqd+7i5SI9YFReaW3ulNQNckuJZco3SlBbZJLmoLYIwd10HS1C7mLc0Z+khjbK0qlGV0bQW5PR97ZCrkGxdBSZ6q7ycVQFJcj8oTk+OEslTRE9oKMsFSWY4cHw/FJ6A/jJ1gAre9pMmcE7isPu+G895fHFYIaatko4YY4APdkS4DWAHsoy6KpTevAR9yHxBKhBWdPeFEHhlN6bEsJ0HQqXN0GQTaf2QBDu/AlwqzUdrAd8b1L6cRUAtpiVf5mD59aB8Cz53AEnyDzHJ8qebu5niA6P5jHDLuJBl5tBzdsmiMLGdqJAvb3yPmRjd4CxeNAd3pT+I8V/gIsC/tMNbY2G9xQ6FbgxoKFq77eMlSx7L86zTl2v9DzUetvMAejucn2FqVuIA2NDJAaMS0OR0LQOOSpxe6oaZ8wdY1oWmuZ5TZO0IR7d6CPc5biCsa2EVSrQVfQKQY4GXUuYvjIA5wxgPLeV1tUYcId6IuGSUtJLOjD2Cg/uDM9RokMOg4dbdGVwZ3WfV4VBV/gtfHfceYzffGP6zTNhlWXtQQzbB8G0dQvK1oFxZ5wjYV3Nj8I4QO6Yz/0M1/KOPfiTNs0viuwXReqGddbSQtxomjU0y1ua5o2LWdH6GvL4Yp93YbcPGTAyvymu/yL+APCL5gUDtrTCJuLgBcKj6TML4DoKcVYPytMM9qjudKixstg+igcuEcoLUSo3eFY2FsrVdxJrLbcQon6oew4dziB7JBvat1fawjZrNrTFGOQnzTILipb4GY6X1J9dLeTJJQCdA+0ZZrOsPnGfr1gS+J/CSxadJspbY5nxlmFj+9vCeRFqLgpfn4Sb8g/rG1vOnmxD9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result deploy\"\n        title=\"result deploy\"\n        src=\"/static/76e35384fc5f2a9ddf3f15f5b21f171a/8c557/result-deploy-2.png\"\n        srcset=\"/static/76e35384fc5f2a9ddf3f15f5b21f171a/4edbd/result-deploy-2.png 175w,\n/static/76e35384fc5f2a9ddf3f15f5b21f171a/13ae7/result-deploy-2.png 350w,\n/static/76e35384fc5f2a9ddf3f15f5b21f171a/8c557/result-deploy-2.png 700w,\n/static/76e35384fc5f2a9ddf3f15f5b21f171a/e996b/result-deploy-2.png 1050w,\n/static/76e35384fc5f2a9ddf3f15f5b21f171a/2cefc/result-deploy-2.png 1400w,\n/static/76e35384fc5f2a9ddf3f15f5b21f171a/0c1c2/result-deploy-2.png 1542w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Kết quả</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/096f6bb1d117a6959ceeaa914fa8a9e8/db7ce/result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbElEQVQY062IywqAIBRE/aMyKoq08OPzUYvsf5RJb49Vq2jgMIfDpJggpIIcFbpe0A+p8apFyWsUZf145vbzG4JXJ7kzrQ2MscScXF9Y66BTy0+emltWcucWeL8T2/XkmwfDz2MxRnwhhDcCDnPQAqs/sDV8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result\"\n        title=\"result\"\n        src=\"/static/096f6bb1d117a6959ceeaa914fa8a9e8/8c557/result.png\"\n        srcset=\"/static/096f6bb1d117a6959ceeaa914fa8a9e8/4edbd/result.png 175w,\n/static/096f6bb1d117a6959ceeaa914fa8a9e8/13ae7/result.png 350w,\n/static/096f6bb1d117a6959ceeaa914fa8a9e8/8c557/result.png 700w,\n/static/096f6bb1d117a6959ceeaa914fa8a9e8/e996b/result.png 1050w,\n/static/096f6bb1d117a6959ceeaa914fa8a9e8/2cefc/result.png 1400w,\n/static/096f6bb1d117a6959ceeaa914fa8a9e8/db7ce/result.png 2404w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>EZ mọi người nhỉ :))))))</p>\n<h2>Chốt bài viết</h2>\n<p>Qua đây mình đã giới thiệu cho mọi người cách setup, config, deploy việc sử dụng gem capistrano để deploy.\nVì nó hỗ trợ chúng ta khá nhanh trong việc deploy rails app, nên chúng ta sẽ bỏ qua các bước setup của nó. Mọi người sau tìm hiểu sâu thêm nó sau khi deploy ok nhé. :)))))</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Long Vui Vẻ (longvv) </div><div class=\"custom-block-body\"></div></div>","id":"f7837025-9f3e-585a-8ec0-cf823b3424ea","frontmatter":{"title":"How to deploy rails app by capistrano gem (puma, mysql, nginx)","date":"15-11-2020","tags":["ruby on rails","deploy","Capistrano gem"]},"fields":{"slug":"/how-to-deploy-rails-app-by-capistrano-gem-puma-mysql-nginx/"}}},{"node":{"excerpt":"Cách bypass lỗi \"Your connection is not private\" trên chrome Chắc mọi người quá quen với màn hình này rồi. your connection is not private Chrome Warning khi ta truy cập vào một trang web có…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Cách bypass lỗi \"Your connection is not private\" trên chrome</p></div></div>\n<p>Chắc mọi người quá quen với màn hình này rồi.</p>\n<p><img src=\"https://archive.org/download/your-connection-is-not-private-error-in-google-chrome/your-connection-is-not-private-error-in-google-chrome.png\" alt=\"your connection is not private\"></p>\n<p>Chrome Warning khi ta truy cập vào một trang web có certificates không bảo mật.\nTest một trang web https trên local chẳng hạn.\nBình thường thì chrome sẽ có button <strong>Advanced</strong> hoặc <strong>Proceed</strong> cho phép tiếp tục truy cập trang web này.\nNhưng với ai đang dùng mac, có cập nhật Mac OS mới Catalina thì button này đã bị bỏ hẳn. Thành ra không có cách nào để tiếp tục truy cập trang web đó nữa.</p>\n<p>Thực tế không phải ai cũng biết, vẫn có cách để vượt qua.\nGiả sử màn hình đang hiển thị warning,\nĐặt tay lên bàn phím và type chính xác câu sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">thisisunsafe</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Một cách thần kì, bạn sẽ truy cập được trang web như trước.</p>\n<p>Cách này rất hữu dụng nhưng bạn nhớ sử dụng cẩn thận và tự chịu trách nhiệm với hành động của mình! :D</p>\n<p>[[author | Vịt vụng về ]]</p>","id":"66c0bdba-98bb-5ed1-9468-2d055ff30657","frontmatter":{"title":"This is unsafe!","date":"10-11-2020","tags":["tips","chrome"]},"fields":{"slug":"/this-is-unsafe/"}}},{"node":{"excerpt":"Tiêu đề bài này có thể làm bạn ngạc nhiên bởi vì  là một phương thức cơ bản và phổ biến nhất để debug trong JavaScript. Ấy vậy mà mình lại nói \"Ngừng sử dụng\" nó. Tại sao? Thực ra không hẳn là vậy,…","html":"<p>Tiêu đề bài này có thể làm bạn ngạc nhiên bởi vì <code class=\"language-text\">console.log()</code> là một phương thức cơ bản và phổ biến nhất để debug trong JavaScript. Ấy vậy mà mình lại nói \"Ngừng sử dụng\" nó. Tại sao?</p>\n<p>Thực ra không hẳn là vậy, nhưng ngoài <code class=\"language-text\">log()</code> ra thì chúng ta có thể dùng nhiều phương thức khác để có thể debug. Và bạn sẽ cảm thấy chúng rất thú vị và mạnh mẽ. Hãy bắt đầu bằng việc liệt kê các phương thức khác: </p>\n<ol>\n<li>Console.log()</li>\n<li>Console.error()</li>\n<li>Console.warn()</li>\n<li>Console.clear()</li>\n<li>Console.time()</li>\n<li>Console.timeEnd()</li>\n<li>Console.table()</li>\n<li>Console.group()</li>\n<li>Console.count()</li>\n<li>Console.debug()</li>\n<li>Console.dir()</li>\n<li>Console.dirxml()</li>\n<li>Console.exception()</li>\n<li>Console.groupCollapsed()</li>\n<li>Console.groupEnd()</li>\n<li>Console.profile()</li>\n<li>Console.profileEnd()</li>\n<li>Console.timeStamp()</li>\n<li>Console.trace()</li>\n<li>Console.info()</li>\n</ol>\n<p>Trong bài này mình sẽ giới thiệu 6 phương thức đầu tiên. Nhưng trước tiên hãy cùng nhắc lại \"Console là gì?\" </p>\n<p>Javascript console là một tính năng được xây dựng trong các trình duyệt ngày nay, nó đưa ra các công cụ giúp lập trình kiểm tra rõ ràng trên các giao diện. Nó cho phép lập trình viên:</p>\n<ul>\n<li>Nhìn thấy những lỗi (errors) hay cảnh báo (warnings) xảy ra trên một trang web.</li>\n<li>Tương tác với trang web sử dụng Javascript commands.</li>\n<li>Gỡ lỗi (Debug) ứng dụng web ngay trên trình duyệt của mình</li>\n<li>Kiểm tra và nghiên cứu các hoạt động của network</li>\n</ul>\n<p>Đơn giản là nó trao quyền cho người dùng, lập trình viên thao tác với Javascript ngay trên trình duyệt. Giờ thì bắt đầu đi vào chi tiết nào !</p>\n<h2>1. Console.log()</h2>\n<p>Thao tác này quá quen thuộc rồi, đơn giản là hiển thị giá trị của một hoặc nhiều biến ra console, có thể là text, number, array, object, v.v..</p>\n<p>Ví dụ : </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'JavaScript'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Kết quả: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 351px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4470ed82ce462eb25d50954fd3c3d31b/7c2a6/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABJ0lEQVQoz5VQWXaDMAzkAnnpZ2n5SrAxBq94wQ4mZC3c/0JV6AFS5smynkYjWc5055wPfRhaLp0Lj+d8u/8IqXe7XVEUeZ7v9x99OE2XezyNLZPA3u7PIU20FZnSxljvfQRCKRNiOg0jY/Iz/0IYlwjl34V1YRwvMAPy0CilyftAKcugn7F9iAMQ1+tDKoMrShsOvWrKwEvZhTCASaXneW6atixLjDEhdQaRd36el3E8L8vCGMe4qiry5+GswQsEymuwGu7VyEssuLLGCCG01lCE/o2sRCUlkmB+XIG2ACYfOdNWJ4Qw2ojXszlnzpl1GVgVbxMLIWOM1sLiZk3iDWLGWErJu8Ba1VBhbQDicDi8F8MnwT9P05nzrvcBlEIYKVWn/dsNfgGnhm6YCVlZaQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-1.png\"\n        title=\"image-1.png\"\n        src=\"/static/4470ed82ce462eb25d50954fd3c3d31b/7c2a6/image-1.png\"\n        srcset=\"/static/4470ed82ce462eb25d50954fd3c3d31b/4edbd/image-1.png 175w,\n/static/4470ed82ce462eb25d50954fd3c3d31b/13ae7/image-1.png 350w,\n/static/4470ed82ce462eb25d50954fd3c3d31b/7c2a6/image-1.png 351w\"\n        sizes=\"(max-width: 351px) 100vw, 351px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>2. Console.error()</h2>\n<p>Phương thức này rất hữu ích trong khi test code. Nó được sử dụng để ghi lỗi vào browser console. Theo mặc định, thông báo lỗi sẽ được tô sáng bằng màu đỏ.</p>\n<p>Ví dụ: </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Error found'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 346px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e12a4042e48ca3e2bf4c8db7c7a018b8/8f77f/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABHElEQVQY03XNT2+DIBjHcS7rmvWmNmvcpN1cFRCQgv8roFTbLD3u/b+XmfW85HP4PskveUBRNr0eMppXdTfNt8t01WYMgq3v+xDCIPB3u9AOl2Gc2k4vs/n6PbrZWMf4CUhZ1nWHCVuOrtPaDE17DsP3KIJpiiHcR9G+760xY92cEc763tjB9doyJoBUlbWO0ty5q1JNHKcpophwhNlXQiiXlAl3mZcfShb3+50QEsdxcjyiFIFcqqJpi7otm0pVQlVFKYUUPOeskvnipIqM5ZgywriQKmMcU/oANMY3ISae6+QwZ5FBn/Xbzh5CFb66j3A4hCcI08BHQbBIPO8RD6Bbr2+bTb96MuuXH29br54RAAQACsAS+C/4P34BCog7HJPQo68AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-2.png\"\n        title=\"image-2.png\"\n        src=\"/static/e12a4042e48ca3e2bf4c8db7c7a018b8/8f77f/image-2.png\"\n        srcset=\"/static/e12a4042e48ca3e2bf4c8db7c7a018b8/4edbd/image-2.png 175w,\n/static/e12a4042e48ca3e2bf4c8db7c7a018b8/8f77f/image-2.png 346w\"\n        sizes=\"(max-width: 346px) 100vw, 346px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>3. Console.warn()</h2>\n<p>Cũng giống như <code class=\"language-text\">console.error()</code>, phương thức này cũng dùng khi testing code. Nó cũng giúp ghi các cảnh báo vào console. Mặc định thì các thông báo này có màu vàng </p>\n<p>Ví dụ: </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Warning!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 349px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9b900a8263f43c6e641461468e2c571b/e9bf8/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6ElEQVQY03XOO0/DMBQF4ChhooWKGZoOUfyIc/1IYjuxExcoKo2KKjrA//8pWMrUAenT0R3OlU6iGt12xvYeQLatcW6KhGieX7YIYYTJNt91nQ37N9s74FKb3vvJ2oHVPImX1r0fA3D1fvjksitKgilQJhCFioGQbXyLBS7kPJ8AeFEUCCFCSFKWVMpmcE4bazR4J4PtJlW/tuAVxE0Yk2UCJpTSKiKELpLTtDnu85+rvp7F90xG/eibzSjXQT04sbbqqalXit0rtuSN5BzuDsPq6yO/HHe/l0rXqYHU8ExDFtNC2ovsP3+7pzWPId52EQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-3.png\"\n        title=\"image-3.png\"\n        src=\"/static/9b900a8263f43c6e641461468e2c571b/e9bf8/image-3.png\"\n        srcset=\"/static/9b900a8263f43c6e641461468e2c571b/4edbd/image-3.png 175w,\n/static/9b900a8263f43c6e641461468e2c571b/e9bf8/image-3.png 349w\"\n        sizes=\"(max-width: 349px) 100vw, 349px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>4. Console.clear()</h2>\n<p>Phương thức này dùng để xóa console. Nó thường được sử dụng nếu console của bạn bị tắc nghẽn với các thông báo hoặc lỗi. </p>\n<p>Ví dụ : </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 348px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8003245098098c8e22cb9b6e9e185252/34ea4/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAwElEQVQI1zWN227CMBBE81p/ARXQl8SOIRfbWTsOjp0LATX9/x/qCMRotTrSzs5k2ljrht6Hqm476h/PfXv8ms4yxr6hw+GLsY7csm5jnC7XZlk2eKb5Ds6MsUS9H0LdaMAtpBCS1nQ8njkvMafzD56neYWnabV1fowJjLIsjAnN2Dis96fSlBdlKatr1SK7qpUyyL7FNDet2vc/pVSeF0IIKWVWcE5EKaUe9cPgnPPexxgBHBZRivdGoJSXl+RH/+iQLTpiHxd3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-4.png\"\n        title=\"image-4.png\"\n        src=\"/static/8003245098098c8e22cb9b6e9e185252/34ea4/image-4.png\"\n        srcset=\"/static/8003245098098c8e22cb9b6e9e185252/4edbd/image-4.png 175w,\n/static/8003245098098c8e22cb9b6e9e185252/34ea4/image-4.png 348w\"\n        sizes=\"(max-width: 348px) 100vw, 348px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi thực hiện lệnh này, sẽ có thông báo \"Console was cleared\"</p>\n<h2>5. Console.time () và Console.timeEnd()</h2>\n<p>Cả hai phương pháp này được sử dụng kết hợp với nhau. Bất cứ khi nào chúng ta muốn biết lượng thời gian dành cho một khối hoặc một hàm, chúng ta có thể sử dụng các phương thức <code class=\"language-text\">time()</code>và <code class=\"language-text\">timeEnd()</code>. Cả hai hàm này đều nhận một chuỗi làm tham số. Đảm bảo rằng bạn sử dụng cùng một chuỗi cho cả hai hàm này để đo thời gian.</p>\n<p>Ví dụ :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'timer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">hello</span> <span class=\"token operator\">=</span>  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  \n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello Console!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bye</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  \n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bye Console!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">bye</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'timer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Kết quả: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 346px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cf6baa1ea5c596eb035c4b2580b75667/8f77f/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABL0lEQVQY031NSXKDMBDkDfbBTsq4AgJkbaxhM0ICRMoY2w+wD775/1/IZKtK5ZCuUY9qpqfbyou63ssoyeLk9TDNXT/2w7hePy+XC9u2V6vVYrFUaug600hNWQQC83boehPFmZVlRZ5XQsSUin2jGqmk1JvNdmNvA4xfHGf99AzuSvVVLQnlVb0Ho1Z1UZRaaVbIVoswUXqoqsZFAaGCgxcLd4SHUQoJH6taRnE6z3Mcxwh5gR/gHbHyolS6S9NMyraRbVlWnAtCKKEMigJDHBeMC+AkScMwZIx/FrP6vj+fz1qr43GCj1IK48DzkO97PrxvoK/mui5C6GfoWaAuy7JtW2PMYAwhBKYYY7gEafAvLCnl4/EAHsfxcrnc7/fb7Xa9Xk+n0zRNjuP8yv+Ld5jMUKXdz5ImAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-5.png\"\n        title=\"image-5.png\"\n        src=\"/static/cf6baa1ea5c596eb035c4b2580b75667/8f77f/image-5.png\"\n        srcset=\"/static/cf6baa1ea5c596eb035c4b2580b75667/4edbd/image-5.png 175w,\n/static/cf6baa1ea5c596eb035c4b2580b75667/8f77f/image-5.png 346w\"\n        sizes=\"(max-width: 346px) 100vw, 346px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Trên đây là 6 phương thức hữu ích giúp khai thác tối đa console của bạn và giúp việc xem nhật ký trình duyệt một cách sinh động hơn. Những phương pháp tiếp theo mình sẽ giới thiệu trong bài viết tới.</p>\n<p>Cảm ơn và hẹn gặp lại ! See yaaaa</p>\n<p> <em>From Vnus with love ....</em></p>","id":"816ec39f-7658-54a5-a7c1-9c38f5dd3787","frontmatter":{"title":"Stop Using console.log() In JavaScript - Part 1","date":"10-11-2020","tags":["Javascript"]},"fields":{"slug":"/stop-using-console-log-in-javascript/"}}},{"node":{"excerpt":"I. Mở đầu Laravel được biết đến là một framework PHP an toàn để tạo các trang web và ứng dụng. Những dự án có nhu cầu bảo mật cao thường chọn Laravel. Chúng ta sẽ xem xét các tính năng bảo mật chính…","html":"<h1>I. Mở đầu</h1>\n<p>Laravel được biết đến là một framework PHP an toàn để tạo các trang web và ứng dụng. Những dự án có nhu cầu bảo mật cao thường chọn Laravel. Chúng ta sẽ xem xét các tính năng bảo mật chính mà Laravel sẽ hổ trợ để giúp đảm bảo an toàn cho ứng dụng web của chúng ta.</p>\n<h1>II. Các tính năng bảo mật trong Laravel</h1>\n<p>Tính năng bảo mật của Laravel đảm bảo rằng các nhà phát triển hiện có thể sử dụng hầu như mọi khía cạnh của quy trình bảo mật an toàn. Hơn nữa, tất cả dữ liệu liên quan đến quy trình đều được kiểm tra ở bất kỳ đâu cần thiết, có nghĩa là nền tảng bảo vệ chống lại các lỗ hổng phổ biến.</p>\n<ul>\n<li>Laravel Authentication System</li>\n<li>Reduce Laravel Vulnerabilities From CSRF (Cross Site Request Forgery)</li>\n<li>Protection against XSS (Cross Site Scripting)</li>\n<li>SQL Injection</li>\n<li>Improve Laravel Application Security</li>\n<li>Laravel Security Packages</li>\n</ul>\n<h2>1. Laravel Authentication System</h2>\n<p>Laravel cung cấp sẵn một quy trình xác thực người dùng mạnh mẽ với mã bảng soạn sẵn liên quan có sẵn trong giàn giáo.</p>\n<p>Laravel sử dụng <code class=\"language-text\">providers</code> và <code class=\"language-text\">guards</code> để tạo thuận lợi cho quá trình xác thực. Mục đích của <code class=\"language-text\">guards</code> là xác thực người dùng cho mỗi yêu cầu mà họ đưa ra, trong khi <code class=\"language-text\">providers</code> tạo điều kiện để truy xuất lại người dùng từ cơ sở dữ liệu.</p>\n<p>Là một nhà phát triển, tất cả những gì bạn phải làm là thiết lập database, bộ điều khiển và mô hình. Trong quá trình này, các tính năng xác thực được tích hợp vào trong ứng dụng.</p>\n<h2>2. Reduce Laravel Vulnerabilities From CSRF (Cross Site Request Forgery)</h2>\n<p>Laravel thường sử dụng CSRF để đảm bảo rằng các bên thứ ba bên ngoài không thể tạo yêu cầu giả mạo và không vi phạm bảo mật của Laravel.</p>\n<p>Đối với điều này, Laravel tự động tạo CSRF cho mỗi phiên người dùng đang hoạt động. Khi yêu cầu được gọi thì Laravel sẽ so sánh mã thông báo yêu cầu với mã thông báo đã lưu trước đó trong phiên của người dùng. Nếu mã thông báo không khớp thì yêu cầu được coi là không hợp lệ và nó chấm dứt thực thi. Ngoài ra, bất cứ khi nào bạn xác định một biểu mẫu HTML trong ứng dụng của mình, bạn phải cung cấp một trường CSRF ẩn để phần mềm trung gian bảo vệ CSRF sẽ xử lý phần còn lại.</p>\n<p>Giả sử hệ thống của bạn có 1 action xóa tài khoản người dùng như sau:\n<code class=\"language-text\">https://xyz.com/account/{id}/delete</code>\nNếu có một người nào biết được link này thì họ sẽ hack được, họ có thể gửi mail cho bạn chứa link, hoặc nội dung là một hay nhiều thẻ img với src chính là url đó và mỗi hình có id khác nhau kiểu như:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">&lt;</span>img height<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"0\"</span> width<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"0\"</span> src<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"https://xyz.com/account/{id}/delete\"</span><span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sử dụng CSRF token: Trong Laravel cung cấp cho bạn phòng tránh, bạn có thể thêm vào các Form:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">&lt;</span>form method<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"POST\"</span> action<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"/profile\"</span><span class=\"token operator\">></span>\n    @csrf\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>3. Protection against XSS (Cross Site Scripting)</h2>\n<p>Cross-site scripting (XSS) cho phép những kẻ tấn công đưa các đoạn mã độc hại vào nội dung của các trang web đáng tin cậy. Các tập lệnh này đi cùng với nội dung động đến trình duyệt của người dùng và được thực thi ở đó. Bằng cách này, những kẻ tấn công lợi dụng các lỗ hổng trong trang web mà người dùng truy cập.</p>\n<p>XSS là một đoạn mã độc, để khái thác một lỗ hổng XSS, hacker sẽ chèn mã độc thông qua các đoạn script để thực thi chúng ở phía Client. Mục đích chính của cuộc tấn công này là ăn cắp dữ liệu nhận dạng của người dùng như: cookies, session tokens và các thông tin khác.\nTrong hầu hết các trường hợp, cuộc tấn công này đang được sử dụng để ăn cắp cookie của người khác. Như chúng ta biết, cookie giúp chúng tôi đăng nhập tự động. Do đó với cookie bị đánh cắp, chúng tôi có thể đăng nhập bằng các thông tin nhận dạng khác.</p>\n<h2>4. SQL Injection</h2>\n<p>SQL Injection (SQLi) là một kỹ thuật tấn công trong đó các câu lệnh SQL độc hại được chèn vào một dữ liệu đầu vào và được thực thi. Điều này cho phép những kẻ tấn công kiểm soát cơ sở dữ liệu. Họ có thể sửa đổi, đánh cắp hoặc xóa dữ liệu.</p>\n<p>Laravel sử dụng Eloquent ORM (object relational mapper) không cho phép dữ liệu truy vấn độc hại đi qua các biểu mẫu của bạn. Do ràng buộc tham số PDO, Eloquent ORM thoát các lệnh SQL này và lưu các truy vấn không hợp lệ dưới dạng văn bản.</p>\n<p>Hãy xem xét ví dụ về biểu mẫu được sử dụng để thu thập địa chỉ email của người dùng từ cơ sở dữ liệu. biểu mẫu sẽ tìm kiếm một địa chỉ email, ví dụ: “abc@example.com”. Bây giờ hãy tưởng tượng rằng truy vấn SQL được sửa đổi thành:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> email <span class=\"token operator\">=</span> <span class=\"token string\">'abc@example.com'</span> <span class=\"token operator\">or</span> <span class=\"token number\">1</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Trong ví dụ trên, 1 = 1 là một biểu thức logic đơn giản luôn đúng.\nBây giờ hãy xem xét một ứng biến khác của cuộc tấn công, trong đó truy vấn được sửa đổi trực tiếp thành lệnh “drop table users” và thay vì địa chỉ email, “abc@example.com” được viết. Truy vấn sẽ giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> email <span class=\"token operator\">=</span> <span class=\"token string\">'abc@example.com'</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> users<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Khi truy vấn này được thực thi, bảng “users” sẽ bị xóa khỏi cơ sở dữ liệu.\nKhi ràng buộc tham số PDO được đặt, đầu vào nằm trong dấu ngoặc kép và truy vấn sẽ giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> email <span class=\"token operator\">=</span> <span class=\"token string\">'abc@example.com or 1=1'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Vì không có bản ghi nào khớp với email hoặc “1 = 1”, nên truy vấn sẽ không trả về bất kỳ thứ gì.</p>\n<p>Laravel cung cấp các cách khác để nói chuyện với cơ sở dữ liệu, chẳng hạn như truy vấn SQL thô. Tuy nhiên, Eloquent vẫn là lựa chọn phổ biến nhất. Học cách sử dụng ORM vì nó giúp ngăn chặn các cuộc tấn công chèn vào SQL do các truy vấn SQL độc hại gây ra.</p>\n<h2>5. Improve Laravel Application Security</h2>\n<p>Nhờ các tính năng bảo mật Laravel có sẵn, framework này đã an toàn hơn nhiều so với các framework PHP khác. Tuy nhiên, có một số điều bạn có thể làm để làm cho project Laravel của bạn an toàn hơn. Một số điều này cho phép bạn làm cho ứng dụng của mình không gặp rủi ro khỏi tất cả các cuộc tấn công mã có thể xảy ra và tăng cường bảo mật của nó ở mức độ cao hơn.</p>\n<p>Laravel sử dụng PDO để ngăn chặn các cuộc tấn công SQL injection vì không có biến nào được chuyển vào cơ sở dữ liệu mà không cần xác thực. Tuy nhiên, các nhà phát triển vẫn chọn SQL thô vì nhiều lý do.\nNếu trường hợp này xảy ra với bạn, bạn nên luôn sử dụng các truy vấn SQL được chuẩn bị kỹ lưỡng để ngăn ngừa rủi ro. Hãy xem xét câu lệnh sau để tránh SQL injection:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\">$email <span class=\"token operator\">=</span> <span class=\"token string\">\"'abc@example.com' or 1=1\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Truy vấn không an toàn</span>\nDB::raw<span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM users WHERE email = $email\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Truy vấn an toàn</span>\nDB::raw<span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT * FROM users WHERE email = ?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>$email<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Laravel thay thế các dấu hỏi bằng biến truy vấn, tự động bỏ qua các biến đầu vào. Điều này bảo vệ hệ thống khỏi các cuộc tấn công SQL injection.</p>\n<h3>5.1. Force HTTPS</h3>\n<p>Khi bạn triển khai trang web của mình trên HTTP, tất cả dữ liệu được trao đổi bao gồm mật khẩu và những dữ liệu khác được gửi ở dạng nội dung thuần túy. Do đó có thể dễ dàng bị đánh cắp bởi bất kỳ ai giữa đường truyền. Vì vậy, để giữ an toàn cho thông tin này, hãy luôn triển khai các ứng dụng web của bạn trên HTTPS để bảo vệ thông tin nhạy cảm của nó.</p>\n<p>Bạn chỉ cần thiết lập chứng chỉ SSL trên trang web của mình bằng cách nhận được sự hỗ trợ nhỏ từ bất kỳ nhà phát triển Laravel nào, những ứng dụng kia sẽ chuyển ứng dụng của bạn từ HTTP sang HTTPS một cách dễ dàng. Trong khi để ẩn các đường dẫn nhất định, bạn có thể sử dụng bộ lọc được xác định bên dưới sẽ chuyển hướng người dùng đến một đường dẫn an toàn.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'https'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Request<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">secure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Redirect<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">secure</span><span class=\"token punctuation\">(</span><span class=\"token constant\">URI</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">current</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>5.2. Escape Content to Prevent XSS</h3>\n<p>Để tránh các cuộc tấn công XSS, bạn nên sử dụng cú pháp dấu ngoặc kép:<code class=\"language-text\">{{ $variable }}</code></p>\n<p>Chỉ sử dụng cái này <code class=\"language-text\">{!! $variable !!}</code> khi bạn chắc chắn rằng dữ liệu trong biến được hiển thị an toàn hơn.</p>\n<h3>5.3. Use Laravel Purifier</h3>\n<p>Dấu ngoặc nhọn kép trong Laravel đảm bảo rằng không có HTML thô nào được cung cấp cho khách hàng, tuy nhiên, nếu bạn muốn cung cấp một số biến HTML cho khách hàng từ cơ sở dữ liệu của mình, thì bạn có thể sử dụng HTML Purifier, một công cụ được cập nhật toàn diện sẽ nâng cấp mã của bạn và sẽ xử lý các mã HTML bị bỏ sót và bị thiếu.</p>\n<h2>6. Laravel Security Packages</h2>\n<p>Laravel cung cấp một số packages để tăng cường bảo mật cho các ứng dụng của bạn. Dưới đây là các package bảo mật phổ biến nhất cho Laravel:</p>\n<h3>6.1. Laravel Security Component</h3>\n<p>Laravel Security Component chủ yếu cung cấp bảo mật cho các roles/objects và tích hợp lõi bảo mật Symfony trong Laravel. Nó sử dụng cử tri để kiểm tra các đặc quyền dựa trên các vai trò khác nhau, vì vậy có thể xác nhận tính bảo mật của nó.</p>\n<h3>6.2. Laravel Security</h3>\n<p>Laravel Security là một trong những package được sử dụng thường xuyên nhất và được biết đến với việc loại bỏ các lỗ hổng XSS trong codebase. Nó đã được chuyển từ Codeigniter 3 sang Laravel 5.</p>\n<h3>6.3. Laravel-ACL</h3>\n<p>Laravel-ACL cung cấp các quyền được bảo mật dựa trên vai trò cho quá trình xác thực Laravel. Package này giúp bảo vệ các route và phương pháp điều khiển CRUD trong các ứng dụng.</p>\n<h1>III. Tổng kết</h1>\n<p>Đây là các tính năng bảo mật quan trọng nhất của Laravel. Hy vọng mọi người nhớ tất cả các tính năng này và áp dụng trên ứng dụng trong các dự án với Laravel tiếp theo để giúp bảo vệ trang web của mình.</p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"23bcc07b-b420-5436-9be2-29973331699a","frontmatter":{"title":"Laravel Security Best Practices for Your Website","date":"08-11-2020","tags":["laravel"]},"fields":{"slug":"/laravel-security-best-practices-for-your-website/"}}},{"node":{"excerpt":"Chào mọi người, hôm nay chúng ta hãy cùng nhau tìm hiểu về Authentication 2.0 trong Framework CakePHP 4 nhé! I. Cài đặt Authentication 2.0 Cài đặt plugin với composer từ thư mục ROOT của Dự án CakePHP…","html":"<p>Chào mọi người, hôm nay chúng ta hãy cùng nhau tìm hiểu về Authentication 2.0 trong Framework CakePHP 4 nhé!</p>\n<h3>I. Cài đặt Authentication 2.0</h3>\n<p>Cài đặt plugin với composer từ thư mục ROOT của Dự án CakePHP của bạn (nơi chứa tệp <strong>composer.json</strong> ).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">    composer require cakephp/authentication:^2.0</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tải plugin authentication bằng cách thêm câu lệnh sau vào dự án của bạn trong <code class=\"language-text\">src/Application.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token comment\">/**\n     * Bootstrap method.\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bootstrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">bootstrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addPlugin</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Authentication'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>II. Cấu hình và sử dụng Authentication để xác thực người dùng</h3>\n<p>Plugin authentication được tích hợp trong dự án với vai trò như một middleware hay một component để giúp việc xác thực người dùng dễ dàng hơn. Đầu tiên, áp dụng nó như một middleware, thêm vào <code class=\"language-text\">src/Application.php</code> một số lớp cần thiết:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token keyword\">use</span> <span class=\"token package\">Authentication<span class=\"token punctuation\">\\</span>AuthenticationService</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Authentication<span class=\"token punctuation\">\\</span>AuthenticationServiceInterface</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Authentication<span class=\"token punctuation\">\\</span>AuthenticationServiceProviderInterface</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Authentication<span class=\"token punctuation\">\\</span>Identifier<span class=\"token punctuation\">\\</span>IdentifierInterface</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Authentication<span class=\"token punctuation\">\\</span>Middleware<span class=\"token punctuation\">\\</span>AuthenticationMiddleware</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>MiddlewareQueue</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Psr<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Message<span class=\"token punctuation\">\\</span>ServerRequestInterface</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tiếp theo, implements <code class=\"language-text\">AuthenticationProviderInterface</code>vào lớp <code class=\"language-text\">Application</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Application</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseApplication</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">AuthenticationServiceProviderInterface</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó, thêm middleware <code class=\"language-text\">AuthenticationMiddleware</code>vào trong phương thức <code class=\"language-text\">middleware()</code> . Hãy chắc chắn đã thêm <code class=\"language-text\">AuthenticationMiddleware</code>trước <code class=\"language-text\">AuthorizationMiddleware</code>nếu bạn dùng cả hai plugin này.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token variable\">$middleware</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthenticationMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Thêm phương thức <code class=\"language-text\">getAuthenticationService</code> vào <code class=\"language-text\">src / Application.php</code>.  Phương thức này sẽ cấu hình cơ bản các tác vụ xác thực của bạn với Authentication.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token comment\">/**\n     * Get authenticationService.\n     *\n     * @param \\Psr\\Http\\Message\\ServerRequestInterface $request Request.\n     * @return \\Authentication\\AuthenticationServiceInterface\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getAuthenticationService</span><span class=\"token punctuation\">(</span>ServerRequestInterface <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> AuthenticationServiceInterface\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$service</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthenticationService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Define where users should be redirected to when they are not authenticated</span>\n        <span class=\"token variable\">$service</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'unauthenticatedRedirect'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'/users/login'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'queryParam'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'redirect'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            IdentifierInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">CREDENTIAL_USERNAME</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span>\n            IdentifierInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">CREDENTIAL_PASSWORD</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'password'</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Load the authenticators. Session should be first.</span>\n        <span class=\"token variable\">$service</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadAuthenticator</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Authentication.Session'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$service</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadAuthenticator</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Authentication.Form'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'fields'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$fields</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'loginUrl'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'/users/login'</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Load identifiers</span>\n        <span class=\"token variable\">$service</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadIdentifier</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Authentication.Password'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'fields'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$service</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đầu tiên, cấu hình những việc cần làm với người dùng khi họ chưa được xác thực bằng <code class=\"language-text\">setConfig()</code>. Tiếp theo, đính kèm <code class=\"language-text\">Session</code> và  <code class=\"language-text\">Form</code> vào authentication  xác định các cơ chế mà ứng dụng sẽ sử dụng để xác thực người dùng. <code class=\"language-text\">Session</code>cho phép xác định người dùng dựa trên dữ liệu trong phiên và xác định thời gian người dùng được giữ đăng nhập trong khi <code class=\"language-text\">Form</code>cho phép xử lý biểu mẫu đăng nhập tại <code class=\"language-text\">loginUrl</code>. Cuối cùng, hãy đính kèm một số <code class=\"language-text\">identifier</code> để chuyển đổi thông tin đăng nhập mà người dùng sẽ cung cấp cho thành một <code class=\"language-text\">identity</code> đại diện cho người dùng đã đăng nhập.\nTiếp theo, tải authentication component trong <code class=\"language-text\">src/Controller/AppController</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token comment\">/**\n     * Initialize method.\n     * \n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadComponent</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Authentication.Authentication'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Theo mặc định, component sẽ yêu cầu một người dùng phải xác thực cho <strong>tất cả các</strong> hành động. Có thể vô hiệu hóa hành vi này trong các controller cụ thể bằng cách sử dụng <code class=\"language-text\">allowUnauthenticated()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Authentication</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">allowUnauthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'view'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'index'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ví dụ trên sẽ giúp bỏ qua xác thực người dùng đối với các phương thức <code class=\"language-text\">view</code> và <code class=\"language-text\">index</code> trong controller.\nTheo mặc định authentication sẽ sử dụng model của bảng <code class=\"language-text\">Users</code> trong database để lấy dữ liệu và tiến hành xác thực. Tuy nhiên bạn cũng có thể lựa chọn một model khác để thực hiện việc này bằng cách sử dụng <code class=\"language-text\">userModel</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token variable\">$service</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadIdentifier</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Authentication.Password'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>  \n          <span class=\"token single-quoted-string string\">'fields'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>  \n\t\t      <span class=\"token single-quoted-string string\">'username'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span>  \n\t\t      <span class=\"token single-quoted-string string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">,</span>  \n\t\t  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n          <span class=\"token single-quoted-string string\">'resolver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>  \n\t          <span class=\"token single-quoted-string string\">'className'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Authentication.Orm'</span><span class=\"token punctuation\">,</span>  \n\t          <span class=\"token single-quoted-string string\">'userModel'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Admins'</span><span class=\"token punctuation\">,</span>  \n          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>III. Thử tạo chức năng đăng nhập và mã hóa mật khẩu</h3>\n<p>Khi đã áp dụng middleware authentication, người dùng sẽ cần phải đăng nhập để sử dụng các tác vụ của ứng dụng. Trước tiên, tạo model và controller Users với command của cakephp:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">    bin/cake bake model Users \n    bin/cake bake controller Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Sau đó, thêm một phương thức đăng nhập cơ bản vào controller <code class=\"language-text\">UsersController</code>. Nó sẽ giống như:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token comment\">/**\n     * Login method.\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Authentication</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$result</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">isValid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$target</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Authentication</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLoginRedirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token single-quoted-string string\">'/home'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$target</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">request</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'post'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token variable\">$result</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">isValid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Flash</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Invalid username or password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đảm bảo rằng phương thức <code class=\"language-text\">login</code> đã được cho phép truy cập trong bất kì điều kiện nào để người dùng chưa được xác thực có thể truy cập nó.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token comment\">/**\n     * Method beforeFilter.\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">beforeFilter</span><span class=\"token punctuation\">(</span>\\<span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>EventInterface</span> <span class=\"token variable\">$event</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">beforeFilter</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$event</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Authentication</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">allowUnauthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'login'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ, chúng ta có thể tạo một template đăng nhập đơn giản trong <code class=\"language-text\">templates\\Users\\login.php</code> để thử chức năng đăng nhập.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>users form content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t  <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n\t  <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">control</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n      <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">control</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n      <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">button</span><span class=\"token punctuation\">(</span><span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n      <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>   <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 373px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1e0278712069aa21759b2beef7f8bc22/67a5d/images-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQoz62STU7DMBCFI7HkGqw4BCdhwTWQkDgBEnuOACfgFu0R2KQ0/yFNYsfjx4zttkkxEpUY6VMyL87zjMfJrh/wX6G1RtLtehARlNJQLEzGwHBuzPmMSonh4JKm/UJZ1Ww6ud2stWcxM+wPgqssVDdN5m8Y//RdzgyHcfRtM5qrFI3IYwIun+lLZhVKUjctqrpByew3EZ1f5AAOxM2kQ3M0lKCTMxEzy/SKkHeEjOlGr1EE+WdhaF0lx6CQ3r8DV0/A9TNw94aw1td7Gj8MF1Mj3+Ltq8XFg8Xlo8XNi9diU44azmOfpi2wToEV81GHb79cbBlostkWSD8zJo9S5DnaSshQFllYG2ezzfENTz1XnZxbm2AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-2.png\"\n        title=\"images-2.png\"\n        src=\"/static/1e0278712069aa21759b2beef7f8bc22/67a5d/images-2.png\"\n        srcset=\"/static/1e0278712069aa21759b2beef7f8bc22/4edbd/images-2.png 175w,\n/static/1e0278712069aa21759b2beef7f8bc22/13ae7/images-2.png 350w,\n/static/1e0278712069aa21759b2beef7f8bc22/67a5d/images-2.png 373w\"\n        sizes=\"(max-width: 373px) 100vw, 373px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau đó, thêm một hành động đăng xuất đơn giản để người dùng có thể đăng xuất ra khỏi ứng dụng trong <code class=\"language-text\">UsersController</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token comment\">/**\n     * Logout method.\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Authentication</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Users'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'login'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để đăng nhập, người dùng sẽ cần phải có mật khẩu đã được mã hóa và lưu trong database. Có thể tự động mã hóa mật khẩu khi người dùng cập nhật mật khẩu của họ bằng phương thức <code class=\"language-text\">_setPassword</code> mà authentication hỗ trợ được thêm vào <code class=\"language-text\">Entity</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token keyword\">use</span> <span class=\"token package\">Authentication<span class=\"token punctuation\">\\</span>PasswordHasher<span class=\"token punctuation\">\\</span>DefaultPasswordHasher</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Entity</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/**\n         * Set password.\n         *\n         * @param string $password Password.\n         * @return string\n         */</span>\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">_setPassword</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$hasher</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultPasswordHasher</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token variable\">$hasher</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Giờ chỉ cần tạo một phương thức đăng ký đơn giản và đăng ký một tài khoản là có thể thử nghiệm chức năng đăng nhập, đăng xuất với <code class=\"language-text\">Authentication</code> rồi.\nVí dụ template cho việc đăng kí trong <code class=\"language-text\">templates\\User\\sign_up.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">control</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'username'</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">control</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">control</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">button</span><span class=\"token punctuation\">(</span><span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Sign up'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token delimiter important\">?></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>   <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 372px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/59b3f528e714435f3939365f95515241/98b6e/images-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQ4y61TS07EMAztIWCHuAArxBUREmLFAg6FxAZxAWCGQguaadPvJM7DdkJpRzNSRyLSk1PXefGznaRpO/zX6roeSVW3ICJ0fa+OltH3Gzj2OXcAOL7l5JiwUcKiLLEuSqwYpqr1Ru/9bAyEddOqg8hHG2601s2DC1bOtV0kVMn8IfWUACEXX7BzQIFQJTOhZGSMUbkbaw+SuleyQBbFn7Ml2y3JVZRcc3OEvG4a7bbWU8k9bITsaU+Gf5Lj2JSmQiEojRLrQfZzzhN4T0PNxpCyDZJ1REYDGm4lrifh+YPw8EZ4XBCeUkJvd5PKmaHL2zNHsZ4vK+D0Bji5Bo4ugeMr4HWNWOtpArImhJhkGOyyAM7vgIt74Ow2YFFMY8ZLXlkir4K0qzYMaYRjbLh7uXFYrh3SwiEzwefcaKjjXnySXJJm33j/zBlf0U6R5TnyCNnvivlFmn3hB/86QSauw8W2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-3.png\"\n        title=\"images-3.png\"\n        src=\"/static/59b3f528e714435f3939365f95515241/98b6e/images-3.png\"\n        srcset=\"/static/59b3f528e714435f3939365f95515241/4edbd/images-3.png 175w,\n/static/59b3f528e714435f3939365f95515241/13ae7/images-3.png 350w,\n/static/59b3f528e714435f3939365f95515241/98b6e/images-3.png 372w\"\n        sizes=\"(max-width: 372px) 100vw, 372px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>IV. Kết luận</h3>\n<p>Việc sử dụng Authentication để thực hiện các chức năng đăng nhập, đăng xuất là điều khá cơ bản và dễ dàng. CakePHP cũng hỗ trợ nhiều các phương thức đăng nhập nâng cao khác như xác thực với token, jwt, ...Chúng ta sẽ tìm hiểu về những phương thức này trong các blog sắp tới nhé!</p>\n<h6><em><div style=\"text-align: right\"> - [Phu Thai | Đồng Phú Thái] </div></em></h6>","id":"7b8212c3-b914-5137-9621-a12d48a449ec","frontmatter":{"title":"Authentication basic CakePHP 4","date":"06-11-2020","tags":["php","cakephp"]},"fields":{"slug":"/authentication-basic-cakephp-4/"}}},{"node":{"excerpt":"Xin chào các bạn! Hiện tại Laravel đã update version lên Laravel 8.x. Vậy nên mình muốn giới thiệu một thay đổi tuy cơ bản nhưng vô cùng đặc biệt tại phiên bản này. Đó là authentication basic, chúng…","html":"<p>Xin chào các bạn! Hiện tại Laravel đã update version lên Laravel 8.x. Vậy nên mình muốn giới thiệu một thay đổi tuy cơ bản nhưng vô cùng đặc biệt tại phiên bản này. Đó là authentication basic, chúng ta cùng tìm hiểu xem nó khác gì so với các phiên bản trước nhé!</p>\n<h1>Bước 1: Cài đặt project Laravel 8.x</h1>\n<ul>\n<li>\n<p>Chạy câu lệnh cài đặt project laravel:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer create-project laravel/laravel projectLaravel --prefer-dist</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tuy nhiên nếu bạn muốn cài đặt đồng thời Jetstream thì hãy bổ sung --jet vào sau tên project laravel của bạn trong câu lệnh trên <code class=\"language-text\">--jet</code>. VD: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer create-project laravel/laravel projectLaravel --jet --prefer-dist</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hoặc bạn có thể cài đặt project laravel xong sau đó chạy câu lệnh <code class=\"language-text\">composer require laravel/jetstream</code> để cài đặt Jetstream sau.</p>\n<h1>Bước 2: Setup Database</h1>\n</li>\n<li>Bạn hãy tạo 1 database mysql bất kỳ sau đó mở file <code class=\"language-text\">.env</code> lên và cấu hình kết nối project tới database:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 358px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ba95f077f46fd21ba4b561fa12560a61/39185/env.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABRUlEQVQoz3VQ2Y6DIBT1OyoqFqxiM6WtoGwqWrVPM/P/fzNXO1tmOQnJJXDuWYIkSUrG4ihO94AUkFFKCIELpRSu+APxLwRwDocsDJGQdds5IeqX59dluXPOp3kZRz/ebl3vtWriKPpJpjQ7HsswDC/XyliltbHGPp14LSvg101jtIYBDP6hvJJLBuSqEq61zraD96cTN0ZbaxkrWVFADoS+ZKMPC8Ge0Dw/gO3rtXLOyroZ+n4jWz94jEESJxg/+oCZEAozMOEhIDRjrPhUBtPGutsyO9cKKZQxzpphHGUjIXaj1DwtUlQhQlBhAJuKPN+UgWxEXfd9d1+maZqllPC9cy7LMpymEJBQijczD6zK5aqMVmVnwLbv+3EcoHApRF4Ux7JMtpzv+F4YZN5sI87PWitYoZTuus4Pw+V83u124DD+B2+t2VnlTbpAEwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"env\" title=\"env\" src=\"/static/ba95f077f46fd21ba4b561fa12560a61/39185/env.png\" srcset=\"/static/ba95f077f46fd21ba4b561fa12560a61/4edbd/env.png 175w,\n/static/ba95f077f46fd21ba4b561fa12560a61/13ae7/env.png 350w,\n/static/ba95f077f46fd21ba4b561fa12560a61/39185/env.png 358w\" sizes=\"(max-width: 358px) 100vw, 358px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Buớc 3: Migration</h1>\n<ul>\n<li>chạy câu lệnh <code class=\"language-text\">php artisan migrate</code> để tạo các bảng ban đầu vào database\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c9e04093c37126bc26c5883b07df6ce4/7321b/migration.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSklEQVQY0zWRW3KjMBBFWcaUMeAAKduxQIinxSNgiONkJrP/5ZxpyOSjq6Vu3dNXkqPKgrSsJAy6Liltw8kk/PJddoGHGwa48QHX2+O6UpNw93t83+dw8AjkzLoOAn/Ljnl7Jh8j1FVTTC2qMai+ovtYqOaBpCvRQ4Muc9RFkec5l5cX9gINggDP+wb9hJMMEdo+kemE1/6VuqpoqprH45PbNFOJe9tcsdbSXK90XUdd12SZYRhGtNbsdrttwBqOmZ8xQ0hRZMzLsolWweefL+6Pj23f94OIB+7v79iuFWhPI0Nu0w0r/SgSUzLgfD6vwJhcgHmhuc0LrTiwbcvvr78sb/f/rnpaqU3TSC/gVtyO44gx35AkSTmdzoRhiOOnMYdLxPF4xMj7pGkqBxJqcZAXBUopUhGsOcsyMoGk0l+v+tNb3cVxtH3aP5gMuuo9xAVxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"migration\" title=\"migration\" src=\"/static/c9e04093c37126bc26c5883b07df6ce4/8c557/migration.png\" srcset=\"/static/c9e04093c37126bc26c5883b07df6ce4/4edbd/migration.png 175w,\n/static/c9e04093c37126bc26c5883b07df6ce4/13ae7/migration.png 350w,\n/static/c9e04093c37126bc26c5883b07df6ce4/8c557/migration.png 700w,\n/static/c9e04093c37126bc26c5883b07df6ce4/e996b/migration.png 1050w,\n/static/c9e04093c37126bc26c5883b07df6ce4/7321b/migration.png 1184w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Bước 4: Cài đặt Jetstream</h1>\n<ul>\n<li>Chạy câu lệnh <code class=\"language-text\">composer require laravel/jetstream</code> để cài đặt, nếu bạn nào đã cài ở bước 1 thì bỏ qua bước này nhé\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cc265d6de04bb04c254c2c0f3e46a9d3/7321b/jetstream.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 83.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACv0lEQVQ4y4VU2ZKbMBDkOwwS2GAMkrhvxGFnN/n/P+qMhHcTb+V46JJUJVo909M4QgjsjwfmRaOfBmRdhW4cUCwdMt2h0D3O6gbGGLh3IPBp5fwFjJmVweFxiGAp4PcKfJBw6xt4J+B2KdyJzioCU1dwEYHfQvCUzucAnB5gX2CIHXOZrTkYkTGdgfcSvDxIDRjBm/NjzeluRuQXH4yU+r7/AkPqeCQzrXL0ekKnR/iDApsOtWxUuBDRbUoQNhLJWKKZFao6QVlWhBJJmkIphTiOn4Sui0xl2NcN27bBnzKwhZTSGg8Jiv4GPQlMc49x0lio123b2G8ulws8dig9+mgIPQ8qy7AuK9Z1pV5Kq9CUGDQp8iFGP8boupIe1BjGichn1HWDMAw/S/0wx3FJoSE06vZ9h69z6pmCNwjb0/NMxLSXZNK6RujJPK0Xur+jbhoMw4gkSWB4rELjVlPWeNsfeGx3RGOB8F4jWityv0K/SHooRt21eH9/x/2+QS+LFXC9XhFGEaIngiCAE2Up5NpB6hbJUODW5khzBVHmiNIbZKGgpEBKKvK8QJr+2gshIaS0Cquqtg84fhJBbT3USiDSYqOhHluUNNDl1EM2BaRU9iMTAkmOFkVhyzNlGg8MTqeTXR2ZSvx4+46V+nInp7/dH2iXESURm6QIMkOSqjOVY0wwzpryPpz9CifLcuvarLWFabZXxDjRqNikmMRcAzAaZquGHYo+nP3d4Sdh9kmmCft+R1Am4OQ0p8HmM83k9QIe+DZur/llf1J4EI7zZAmNQp8ITRRtWkz8LoGN2r+IXkpeZlI3zXa4H9sDfpEc8RuJMIvBzzS8T6K/lfpJGMobxEbN1w3EWCGbO1sqMyW34tj3tJo/DBFz/z8KWRLCHckASoO7KLhNYgns34f6Z0rm5kwxtH+j69mWz/5C+BN1DPeO+pVHJgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jetstream\" title=\"jetstream\" src=\"/static/cc265d6de04bb04c254c2c0f3e46a9d3/8c557/jetstream.png\" srcset=\"/static/cc265d6de04bb04c254c2c0f3e46a9d3/4edbd/jetstream.png 175w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/13ae7/jetstream.png 350w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/8c557/jetstream.png 700w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/e996b/jetstream.png 1050w,\n/static/cc265d6de04bb04c254c2c0f3e46a9d3/7321b/jetstream.png 1184w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Bước 5: Cài đặt Liveware hoặc Inertia</h1>\n<ul>\n<li>Chạy câu lệnh <code class=\"language-text\">php artisan jetstream:install livewire</code> để cài đặt\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1a0ebf656a66b6aa1815691fb4bed3ff/e6c84/liveware.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77.14285714285715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOUlEQVQ4y32U6XKjMBCE/Rq7CGFuMMbmRuKM7bz/K/W2IEnZW0l+dI0so08zQw+HMI4x3Vb0g0Y/DqjbBp1W0POEsipxOp1wPudbTNMUUkrYtv0Sn3XIThnWZaUW3G43tE2LQWss04xhGHC/36EUL+sVrkUBz/N+hG1Ax3H4YImZAM2DSinUTYO261CWJa7XK875BeM4oq4bqkaaJBBCfA80pSzrinmeMX1A66pGx0zLa4GYLQmCYItGYRR9C/oCxnHCUu+ETVhY9vLGft4mtG8TLn2Ny+WCKAw3WMIemviZ3fc9zM4EreyXxuPxQN13+KNOEGMOoTOIxIM4SghLwLKsX2EfJWcsd9mB9wca1cPqT5BDDkmoTANI5/XQT7AdyAxnlqo/gZpAZijVGbamQr5VYcM2Bwj6DfZV8soMR1rl/f6O9jNDzez6DNJ1CJK/Ql6A0SlFNSkUioaeB+R8EX8H9k5RTQpxjSAc+0ebPLfB6OBHIYqhQz0aaIu8KVGz7Ep1e9QdCvrRGP54dGARbA6aC571Min39Q2ak7Cw9GkYGeetDbOxEr1pJmhzAs3d9/1m+IpeNZOk9bBNUZZl2xQdoihGVTOz/IqiapDTzEfXx9Hz4XoBXD+kGLnneRE88x/l+xF8L6TpIwS+/1yyg6T1EBcu4tpD1PhIGRPq3HGPv+PSRRQJZGeLxhb8UAhGa9sLw/9Kdl3JSbARBpKyeRvX4R73fa4p35eIE8k1nwt3mbXZ32G7nf4Beka6zXBRbb4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/1a0ebf656a66b6aa1815691fb4bed3ff/8c557/liveware.png\" srcset=\"/static/1a0ebf656a66b6aa1815691fb4bed3ff/4edbd/liveware.png 175w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/13ae7/liveware.png 350w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/8c557/liveware.png 700w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/e996b/liveware.png 1050w,\n/static/1a0ebf656a66b6aa1815691fb4bed3ff/e6c84/liveware.png 1148w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n<li>sau đó chạy câu lệnh <code class=\"language-text\">run npm install &amp;&amp; npm run dev</code> để build các JS và CSS cho ứng dụng của bạn, thành công sẽ có thông báo:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3b26596c67694b7c3500088dd3d71401/fd84e/npm-success.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 12.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuUlEQVQI1z3OwU6DQBhFYR6DZJh/GMOMArYNI7ZSUgZqF60r48ra93+OIyXRxbe8NyfZhIZhGtGisfaBGCPOOQ7DwDhGxAjK6IUWwzRN9H3P8f1EXVekaUqWZSilFon7Gng673F1SffWcZwHIbzwff3hdr1RdBvkc08+s68r4iHycTnTNGEOsGitEZF/id7WqGeH2JyyrPDeUcyFbduy2+7IK4+0FRJK5LHAO896vSI3Zim6n9xP//wCozha2O0rFzcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/3b26596c67694b7c3500088dd3d71401/8c557/npm-success.png\" srcset=\"/static/3b26596c67694b7c3500088dd3d71401/4edbd/npm-success.png 175w,\n/static/3b26596c67694b7c3500088dd3d71401/13ae7/npm-success.png 350w,\n/static/3b26596c67694b7c3500088dd3d71401/8c557/npm-success.png 700w,\n/static/3b26596c67694b7c3500088dd3d71401/e996b/npm-success.png 1050w,\n/static/3b26596c67694b7c3500088dd3d71401/fd84e/npm-success.png 1056w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<h1>Bước 6: Tiếp tục migrate các migration mới</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan migrate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ea45dad9746bf844c3382f4e4e115aeb/5bd27/migration-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 22.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3UlEQVQY0zWPa26DMBCEuQivxgWjGjAE29gYDApB7f0PNN1YyY/RrGal2W+TdZNwvoPWI5xbooQQEG0H3nDUdQ3OOaq3c96gqhjlFRpOGXmeZ6QcWZYhkRtD778gxwbOekzThGVZcD4vWGujZmOglIrz66DSGoYyZx3GYYjH2q4DYwyJvmqoJ4MyAiEc0Ebj8Thx/f7Fgn3fsYWNdgHee1jnqNTRRwYLlXdU1PcyeiTsD442fEPef3AcJ8w8wxFhCHukeNF+yFa/QhOpEC2G8U5Et/hqWZYoigJpmuIfeWV+wr/rvZgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/ea45dad9746bf844c3382f4e4e115aeb/8c557/migration-2.png\" srcset=\"/static/ea45dad9746bf844c3382f4e4e115aeb/4edbd/migration-2.png 175w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/13ae7/migration-2.png 350w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/8c557/migration-2.png 700w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/e996b/migration-2.png 1050w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/2cefc/migration-2.png 1400w,\n/static/ea45dad9746bf844c3382f4e4e115aeb/5bd27/migration-2.png 1432w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n<ul>\n<li>Sau đó chạy ứng dụng <code class=\"language-text\">php artisan serve</code>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e053067ab60f0c25bce72aaa092c4fb6/ae28e/serve.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAeklEQVQI1yXIaxKCIABGUfcRZDaIQwKhgJqOuv9VXal+nPkelcsDLhUldei56QbZPZGqQbQNqm3RWqOUKr5d4b2jftTcpUBK+Ush/qo+B8z4xk8jdhqI58qwzdgY6IIl54l9PziOk5Qy87LwWTdiTDjnCo8xr7IjY/kueEI8W4qlMfcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/e053067ab60f0c25bce72aaa092c4fb6/8c557/serve.png\" srcset=\"/static/e053067ab60f0c25bce72aaa092c4fb6/4edbd/serve.png 175w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/13ae7/serve.png 350w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/8c557/serve.png 700w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/e996b/serve.png 1050w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/2cefc/serve.png 1400w,\n/static/e053067ab60f0c25bce72aaa092c4fb6/ae28e/serve.png 1598w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n<li>Truy cập vào <a href=\"http://127.0.0.1:8000/\">http://127.0.0.1:8000/</a> trên trình duyệt của bạn\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.42857142857144%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAABD0lEQVQoz3WRyW7DMAxE/f9/2OYQ5FQjseJIlrhoc0dyEhhOa7zDiOaQA3DQmJZAs10CSyDAHQms/yDG8uzCzzgOFDPHLKkwqCuvHehe/xNJGS6KZWjvVMgHOp/5cqHTyX99B+cJxdbR5jahmyHTbsrwVKI8z36a2JhobYwp1TXmtp9EIVKpG7oLNbySFIQZr+bhvMIjSiQ5Z0y5TcZ7YhFmFdFSivYsOzOGl8oSEb+1sgKU1nVFCOxu0VhVY631aG5+VWPuzIIpG60Pt1g8vtLfpX8fm1NByIddnPNuCSEwYmMnLJN5XG/mPlvrPPA41+dmNHNM+LERc31rTe08myZNgI9mHONVPZxkz7sH/AK/kUXNwylpbgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/b2c0050e99607894903267b012ac638b/8c557/laravel.png\" srcset=\"/static/b2c0050e99607894903267b012ac638b/4edbd/laravel.png 175w,\n/static/b2c0050e99607894903267b012ac638b/13ae7/laravel.png 350w,\n/static/b2c0050e99607894903267b012ac638b/8c557/laravel.png 700w,\n/static/b2c0050e99607894903267b012ac638b/e996b/laravel.png 1050w,\n/static/b2c0050e99607894903267b012ac638b/2cefc/laravel.png 1400w,\n/static/b2c0050e99607894903267b012ac638b/8bf8a/laravel.png 1901w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></li>\n</ul>\n<h1>Bước 7: Test Feature</h1>\n<ul>\n<li>Click vào register góc phải trên màn hình, điên đầy đủ thông tin để đăng ký 1 tài khoản\n<img src=\"/register.png\" alt=\"liveware\"></li>\n</ul>\n<p>Sau khi đăng ký thành công, sẽ điều hướng bạn tới trang Dashboard:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c4a647a31f731c52d9006af4762e2676/9c177/dashboard.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.71428571428571%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABRklEQVQoz5VQ127EMAzL//9me72et7xHnJTyDaAvHQIjCFJoitrO87R0UJhjP/8bWx89lxyCn6Dv/I2x9z5a79/QgNpaWfmBzYeEkbHH+6VYo60lIl9KnfPAKz+gtg5yHqM7Ot4uUambMcZaW3Ke8xcb4G8h5tbG3LuxyhE567QxUiuldEP0Xmt7BjZvtXLjPI8Xuc85Y8oxpWfmIsQUQuRIXIRVgLvv+0M5pgLgP0c+pbykFhprAh60ELnPnc635BVw5srKKVdL4XIV15sSUktlhNJSGx9T68NR/LiKT6EVX9NbR8Y6vPgiQ7w5KkQoaq4NgwJnfUAJ2zjKlliDxRceymvt7CiQDyCkUtBNQOaitE4hKmPvUmjeseqnMpg3qaS2QuHURq4MTmHPCSMYYS9wJDWAA0F1Y8POC4ylugl5L/4CbdwXmqayjfKaMdAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/c4a647a31f731c52d9006af4762e2676/8c557/dashboard.png\" srcset=\"/static/c4a647a31f731c52d9006af4762e2676/4edbd/dashboard.png 175w,\n/static/c4a647a31f731c52d9006af4762e2676/13ae7/dashboard.png 350w,\n/static/c4a647a31f731c52d9006af4762e2676/8c557/dashboard.png 700w,\n/static/c4a647a31f731c52d9006af4762e2676/9c177/dashboard.png 880w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<ul>\n<li>Test thử tính năng login với tài khoản vừa tạo, logout tài khoản rồi click vào login sẽ thấy form login như sau:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 557px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 87.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQ4y42TTYvUQBCG8wP1JnjXw/4B9+TFiwcRPK14EjyIB714EUEE9+BdV3EYxBlYZ8fZfGzSX1WddFcnVk9GGDLJYvHQaZJ6u+tNVycG7CHa2MbZrrOAcT6awySjyrq2Pxf47iMKadFO6pPxVY09fgBH9+DbDKe2nRQD2JPn+PgpfPqMdXPtzoD1UIxxXJ5bpXfzcbHzni0658JBdF3/bAdwNM5pg4knKiqpoQ5tR6HzFMd+4ojHdoDzLWd676OYQvs7NV/n69ky//7r8my+/jJbMT8W6WyRrbLmTxn2uSioMoGI1FYcpPFpCbmwWYl5xSNcFjqvsBBWGJIQ9uE3tml5Z9WXrbVG/r+Wu+J/w+3KppCV9nwjL1KdCXelA1Oo0E8OyRUZG3Y7s+dVqtnq2Xy13JhMdZsqXMO6JAF7nlnfOO881XVTNw2fReQgYiYFtsmn9a/s7QeldSWkkMoA8DFOWY1LEO15js0wDM4QQkpeUhte8aqsWPbi5Zsbt+7cvH330ZNnnCOkGRfHWrZKbYxUqqoEO3n/4fT4/kPm1eu3nMNVJsbgCIBoa8QtNsJH6Zzv29N70gZib/ONmQAHSAVCsQuuBfqL8RdQmQBXNSlGgwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" srcset=\"/static/1cb417fcc0da394477005c104ae0de56/4edbd/login.png 175w,\n/static/1cb417fcc0da394477005c104ae0de56/13ae7/login.png 350w,\n/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png 557w\" sizes=\"(max-width: 557px) 100vw, 557px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></li>\n</ul>\n<p>Login thành công cũng đưa bạn đến trang Dashboard, click vào profile tại menu góc màn hình\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 557px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 87.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQ4y42TTYvUQBCG8wP1JnjXw/4B9+TFiwcRPK14EjyIB714EUEE9+BdV3EYxBlYZ8fZfGzSX1WddFcnVk9GGDLJYvHQaZJ6u+tNVycG7CHa2MbZrrOAcT6awySjyrq2Pxf47iMKadFO6pPxVY09fgBH9+DbDKe2nRQD2JPn+PgpfPqMdXPtzoD1UIxxXJ5bpXfzcbHzni0658JBdF3/bAdwNM5pg4knKiqpoQ5tR6HzFMd+4ojHdoDzLWd676OYQvs7NV/n69ky//7r8my+/jJbMT8W6WyRrbLmTxn2uSioMoGI1FYcpPFpCbmwWYl5xSNcFjqvsBBWGJIQ9uE3tml5Z9WXrbVG/r+Wu+J/w+3KppCV9nwjL1KdCXelA1Oo0E8OyRUZG3Y7s+dVqtnq2Xy13JhMdZsqXMO6JAF7nlnfOO881XVTNw2fReQgYiYFtsmn9a/s7QeldSWkkMoA8DFOWY1LEO15js0wDM4QQkpeUhte8aqsWPbi5Zsbt+7cvH330ZNnnCOkGRfHWrZKbYxUqqoEO3n/4fT4/kPm1eu3nMNVJsbgCIBoa8QtNsJH6Zzv29N70gZib/ONmQAHSAVCsQuuBfqL8RdQmQBXNSlGgwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"liveware\" title=\"liveware\" src=\"/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png\" srcset=\"/static/1cb417fcc0da394477005c104ae0de56/4edbd/login.png 175w,\n/static/1cb417fcc0da394477005c104ae0de56/13ae7/login.png 350w,\n/static/1cb417fcc0da394477005c104ae0de56/30d00/login.png 557w\" sizes=\"(max-width: 557px) 100vw, 557px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<p>Tại đây chúng ta sẽ thấy phần cập nhật Profile:</p>\n<ul>\n<li>Ảnh Profile (max: 1024KB)</li>\n<li>Sửa tên, email.</li>\n<li>Đổi mật khẩu</li>\n<li>Bật bảo mật 2 lớp</li>\n<li>Browse sessions</li>\n<li>Xoá tài khoản, bạn cần setup mail để confirm việc này:</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/afa7deed1fbf2ed5fef30971412b759a/898f6/mail.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABn0lEQVQoz3VS2VLCQBDkO6xSQc6gMZAIOYgJJJuTkCAEL+TJ8kH//72dXSCKVT507ezOTm/P9NZU7QbdXgOK0gULp9BGCtqdS7S7dTRb5+jQyvMcPN7v67/ixklcuxvdoiddIYpnSLMA2SJEMvfhTXTEiYdbpVcV7Iuu/nlkH1eE6ZwhjKZYPqTImIc8juAHDnzfhkcwTJXyLixrBEs3kKQegsAFY/dwHB2mpaHVvvghTFJfEGZ5iDwMEVgxBso1buQOlIGEwbAPqd8UdyWpif51q8LxvFLI5XKFERHOqe2X7RrPmwKJ59AYGPI8xnRmCQV/Wz0dB81Qu5NFwBXyOXLCx6clyvUCkWujILJ7V0e9cSbM4kZxcPLj+vuh2misCLncAN5ysUwPxjBsyhzMNqFpctW2bgzFPPnv4LVckEp58TMItbE+EISrVYqynGO7XWG3K/H+/ord8wPeCE+bDK90/vn1gaKIkCQumWUiDG0yZiJiVZUEKlMmtobZzIDnmXTJpvZdOIYKJgoswoTGEWNIRbLcpH9LZintAzoV4TfH0SVDIimhQwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"mail\" title=\"mail\" src=\"/static/afa7deed1fbf2ed5fef30971412b759a/8c557/mail.png\" srcset=\"/static/afa7deed1fbf2ed5fef30971412b759a/4edbd/mail.png 175w,\n/static/afa7deed1fbf2ed5fef30971412b759a/13ae7/mail.png 350w,\n/static/afa7deed1fbf2ed5fef30971412b759a/8c557/mail.png 700w,\n/static/afa7deed1fbf2ed5fef30971412b759a/898f6/mail.png 798w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span> \n<p>  Nhập email để confirm:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/45512bd5b096a6a6e8efab583afc0fce/c0388/input-mail.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQoz41TTW/TQBDNH+RWoSJyKKQHhJoUqlTAARDkhHqq4MQPQBxAHCpxAYGExA0KrUoBCRHlw3FiOx9er3fW8a6Xt44BN6USq6fR29l5s7PJc4XHtISIE0lKEooFnT4to3JaKYhGHu08Ek+eC6WIRf8tRqnS9Pa9WKnFu4/jH20hE9vx3+KIizJYJAQJxxVPX8TP9uLBSGAhWa75KxZSEpqXICiZzxOt5zKxBNulAqKkECuVxkKggbRZLIk3C5Kco61N4mZ0AUEr7DGYUgocI1Q4551uz/MDd+SNfN91hyPPB7F8OMQGCURnYE+GHgrHWmu5EEece74/nszGkykOgvEE0QuCaRjO5yluSFUKAiyWUtoYg0GsGGNjzEwrk+lFNFmWwxadtQox43IQMFKGtJG6iBLbFMjixIiTQCbVBj+AFQeROTh2Do96X74NPh229w/aH456H4/7n7+7+1/dbqA7vvqDrq9+eqnPNJ6R30ym67Bef+oMwr4zc1zWcSMvVIDPVCgNMMsjwBLLMVdxc/kleGkes9aDhxvN243tu9dv3N+6CbQaTfB79ead9avbr968Q1nIeKUQ5bosj/gntm61VqpXVtc2Ll7erNY2q+vXLqzVq7XG6qX6ufO1vZevC7F140nAJ3CWNQ4MI3JQzvO4cAvPTbrs7bKBozM+Jvbb3r8AgZhw5BZ9a4AAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"input mail\" title=\"input mail\" src=\"/static/45512bd5b096a6a6e8efab583afc0fce/c0388/input-mail.png\" srcset=\"/static/45512bd5b096a6a6e8efab583afc0fce/4edbd/input-mail.png 175w,\n/static/45512bd5b096a6a6e8efab583afc0fce/13ae7/input-mail.png 350w,\n/static/45512bd5b096a6a6e8efab583afc0fce/c0388/input-mail.png 542w\" sizes=\"(max-width: 542px) 100vw, 542px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span> </p>\n<p>  Sau đó sẽ có 1 mail gửi về cho bạn để hoàn thành thao tác này:\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/ca56730c5dbe9b7f3884ba462040776f/9c177/confirm-mail.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABOElEQVQoz42SSU7EMBBF+/4XYMGWDQt2HAY20Ew9JLHjqewqj5SbqKVGooP1ZCVOff1KfW9aa8ZYIcQ8z1JKpZS1Nufc/rE2r0/Pw/EoZyWEhGX5XEptra6K0QcLqCEaHxWQBuJdOQbnBRoVvO3G7efx5ePwvp+kxfnEprcN/DlMOkzmAunQegRMgbIB7LjuxK+MC3ERs1KYC/jEeOJxWAtE8TwFfogxlVL4166JNSCXIkXGOb/bD8MoMotKabWmfEVsggKslcv64LbvXze3d/cPj+cWroq7M3VnpIBElLhRtk2pR1FXnE9i75EbPul78/RDTDHldXGMuZdybS6/Ql4Xs5tx3kHQxgsVRulHGaa5w2mtReXSbgiHCbVNBjLv2nUsJI7vTzHD18tT9v2SJEqZs15IHT7/Bphx7KgG8NzwAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"confirm mail\" title=\"confirm mail\" src=\"/static/ca56730c5dbe9b7f3884ba462040776f/8c557/confirm-mail.png\" srcset=\"/static/ca56730c5dbe9b7f3884ba462040776f/4edbd/confirm-mail.png 175w,\n/static/ca56730c5dbe9b7f3884ba462040776f/13ae7/confirm-mail.png 350w,\n/static/ca56730c5dbe9b7f3884ba462040776f/8c557/confirm-mail.png 700w,\n/static/ca56730c5dbe9b7f3884ba462040776f/9c177/confirm-mail.png 880w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span> </p>\n<h2>Kết luận</h2>\n<ul>\n<li>Chúng ta đã tim hiểu sơ bộ về sự thay đổi của Authentication Laravel tại version 8.x. Sự thay đổi này của Laravel 8.x rất hợp lý và tích hợp + hỗ trợ thêm rất nhiều cho authentication so với các phiên bản trước, vẫn đảm bảo được việc dễ dàng cài đặt và sử dụng cho develop.</li>\n</ul>\n<h2>Tài liệu tham khảo</h2>\n<p><a href=\"https://laravel.com/docs/8.x/authentication\">https://laravel.com/docs/8.x/authentication</a></p>\n<p><em>by Ngọc Quân - Tomosia Việt Nam</em></p>","id":"2ee16996-5468-53a8-a56d-6fd476cc4629","frontmatter":{"title":"Authenticate Laravel 8.x basic (Register and Login)","date":"06-11-2020","tags":["php","laravel"]},"fields":{"slug":"/auth-register-and-login-laravel-8.x/"}}},{"node":{"excerpt":"Bài viết này mình sẽ giới thiệu các cách định nghĩa routing hay dùng khi làm việc với CakePHP 4. Các routing được định nghĩa trong file config/routes.php. Cakephp 4 sử dụng class  để mapping URL với…","html":"<p>Bài viết này mình sẽ giới thiệu các cách định nghĩa routing hay dùng khi làm việc với CakePHP 4. Các routing được định nghĩa trong file <strong>config/routes.php</strong>. Cakephp 4 sử dụng <em>class</em> <code class=\"language-text\">Cake\\Routing\\RouterBuilder</code> để mapping URL với controller action.</p>\n<h3>1. Định nghĩa routing đơn giản</h3>\n<p>Định nghĩ 1 routing lấy tất cả các bài viết</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/articles'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'index'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Giờ khi truy cập vào url <code class=\"language-text\">/articles</code> sẽ mapping đến method index trong controller Articles.</p>\n<h3>2. Truyền tham số cho action</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// routes.php</span>\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'/articles/{id}'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'view'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setPass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setPatterns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'\\d+'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Viết ngắn ngọn hơn</span>\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'/articles/{id}'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'view'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'\\d+'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'pass'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// src/Controller/ArticlesController.php</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Some code here...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với khai báo này ta đã validate {id} trên url bắt buộc phải là số và khi truy cập vào url <code class=\"language-text\">/articles/{id}</code> mapping với controller Articles action view và tham số id trên url sẽ là đối số $id của action view.</p>\n<h3>3. Đặt tên</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// Đặt tên cho route dùng hàm connect.</span>\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Users'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'login'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'_name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'login'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Đặt tên khi sử dụng specific route</span>\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'/logout'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Users'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'logout'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'logout'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>4. Gom nhóm route</h3>\n<p>Code chưa gom nhóm</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/articles'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'index'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'/articles/{id}'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'view'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'\\d+'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'pass'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Code sau khi gom nhóm</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/articles'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'index'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'/{id}'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'view'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'\\d+'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'pass'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Gom nhóm và set sub namespace cho controller</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/admins'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'prefix'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Admins'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/articles'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'index'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n      <span class=\"token single-quoted-string string\">'/{id}'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'view'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'\\d+'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'pass'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Việc gom nhóm sẽ giúp code không bị lặp lại và quản lý code dễ dàng hơn</p>\n<h3>5. Matching Specific HTTP Methods</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/articles'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// route này cho mapping với POST request.</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n        <span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'store'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// route này cho mapping với POST hoặc PUT request.</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n        <span class=\"token single-quoted-string string\">'/{id}'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'action'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'edit'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setMethods</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'PUT'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Phần này giúp validate http request đến controller action, có thể chỉ cho phép 1 phương thức HTTP hoặc nhiều.</p>\n<h3>6. Route middleware</h3>\n<p>Khi muốn sử dụng middleware trong 1 scope đầu tiên cần đăng kí middleware đó.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Middleware<span class=\"token punctuation\">\\</span>CsrfProtectionMiddleware</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Middleware<span class=\"token punctuation\">\\</span>EncryptedCookieMiddleware</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'csrf'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CsrfProtectionMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'cookies'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EncryptedCookieMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó mới có thể sử dụng middleware</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Middleware<span class=\"token punctuation\">\\</span>CsrfProtectionMiddleware</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Middleware<span class=\"token punctuation\">\\</span>EncryptedCookieMiddleware</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'csrf'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CsrfProtectionMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'cookies'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EncryptedCookieMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/cms'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Enable CSRF &amp; cookies middleware</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'csrf'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'cookies'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/articles/{action}/*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'controller'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>7. Resource Routes</h3>\n<p>Khi viết resfull api chúng ta sẽ rất hay sử dụng resource route, và cakePhp 4 cũng có luôn.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/api'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">resources</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'articles'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/api/articles\n/api/articles/{id}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>8. Nested Resource Routes</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">scope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/api'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">resources</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>RouteBuilder <span class=\"token variable\">$routes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$routes</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">resources</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Comments'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/api/articles/{article_id}/comments\n/api/articles/{article_id}/comments/{id}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>Lời kết</h3>\n<p>Trên dây là các khai báo route hay dùng khi sử dụng CakePhp 4. Hi vọng bài viết sẽ giúp ích cho mọi người.</p>\n<h3>Nguồn tham khảo</h3>\n<ul>\n<li><a href=\"https://book.cakephp.org/4/en/development/routing.html\">https://book.cakephp.org/4/en/development/routing.html</a></li>\n</ul>\n<h6><em><div style=\"text-align: right\"> [Huunv | Nguyễn Văn Hữu ] </div></em></h6>","id":"f5e0db47-d19f-50f2-9ff5-ad562c4594d9","frontmatter":{"title":"CakePHP 4: Routing","date":"05-11-2020","tags":["php","cakephp"]},"fields":{"slug":"/cakephp-4-routing/"}}},{"node":{"excerpt":"Cùng tìm hiểu về HTTP request methods\nĐối với các lập trình viên web nói chung thì chúng ta không thể nào mà không nghe đến các từ như get hoặc post,  bởi vì nó thực sự rất phổ biển…","html":"<ol>\n<li>Cùng tìm hiểu về HTTP request methods\nĐối với các lập trình viên web nói chung thì chúng ta không thể nào mà không nghe đến các từ như <strong>get</strong> hoặc <strong>post</strong>,  bởi vì nó thực sự rất phổ biển.</li>\n</ol>\n<p>Nhưng ngoài ra còn có nhiều method khác mà chúng ta ít sử dụng hơn nhưng sự tồn tại của chúng cũng là rất cần thiết.</p>\n<p>Trong bài viết này, tôi sẽ giới thiệu các bạn về các request methods hiện có để nếu như các bạn cần sử dụng đến chúng có thể tìm ở ngay đây.</p>\n<h1>2. Sơ lược về các request</h1>\n<p><em>Đầu tiên phải nói đến là có tất cả 9 loại request, get và post là 2 loại thông dụng được sử dụng nhiều.</em> </p>\n<ol>\n<li>\n<p>GET:</p>\n<blockquote>\n<p>Được sử dụng để lấy thông tin từ sever theo URI đã cung cấp.</p>\n</blockquote>\n</li>\n<li>\n<p>HEAD:</p>\n<blockquote>\n<p>Giống với GET nhưng response trả về không có body, chỉ có header</p>\n</blockquote>\n</li>\n<li>\n<p>POST:</p>\n<blockquote>\n<p>Gửi thông tin tới sever thông qua các biểu mẫu http( đăng kí chả hạn..)</p>\n</blockquote>\n</li>\n<li>\n<p>PUT:</p>\n<blockquote>\n<p>Ghi đè tất cả thông tin của đối tượng với những gì được gửi lên</p>\n</blockquote>\n</li>\n<li>\n<p>PATCH:</p>\n<blockquote>\n<p>Ghi đè các thông tin được thay đổi của đối tượng.</p>\n</blockquote>\n</li>\n<li>\n<p>DELETE:</p>\n<blockquote>\n<p>Xóa tài nguyên trên server.</p>\n</blockquote>\n</li>\n<li>\n<p>CONNECT:</p>\n<blockquote>\n<p>Thiết lập một kết nối tới server theo URI.</p>\n</blockquote>\n</li>\n<li>\n<p>OPTIONS:</p>\n<blockquote>\n<p>Mô tả các tùy chọn giao tiếp cho resource.</p>\n</blockquote>\n</li>\n<li>\n<p>TRACE:</p>\n<blockquote>\n<p>Thực hiện một bài test loop - back theo đường dẫn đến resource.</p>\n</blockquote>\n<h1>3.  Đặc tính</h1>\n<p>Có 4 đặc tính nổi bật của các method là:</p>\n</li>\n</ol>\n<h3>Safe (Độ an toàn)</h3>\n<ul>\n<li>Một method được coi là safe khi nó không làm thay đổi trạng thái \"sate\" của server. </li>\n<li>Nói cách khác, an toàn là chỉ đọc mà không làm thay đổi bất kì điều gì.</li>\n<li>Các method được coi là safe chỉ có: GET, HEAD và OPTIONS.  </li>\n<li>Unsafe: PUT, DELETE, POST và PATCH.</li>\n</ul>\n<h3>Idempotent (tính bất biến)</h3>\n<ul>\n<li>Một request được xem là <strong>idempotent</strong> nếu sau \u001dnhiều lần gọi, nó vẫn trả về kết quả như nhau.</li>\n<li>\n<p>Vì điều này nên các method safe thì đều idempotent. Nhưng unsafe chưa chắc đã idempotent.\n<code class=\"language-text\">int i = 100; // idempotent</code>\n<code class=\"language-text\">i++; // not idempotent</code> </p>\n<blockquote>\n<p>Thao tác gán đầu tiên được hiểu là <strong>idempotent</strong>, vì cho dù ta <strong>thực hiện câu lệnh này bao nhiêu lần</strong>, <strong>giá trị của i cũng vẫn chỉ là 100</strong>. Ngược lại, khi giá trị i++, <strong>mỗi lần gọi sẽ tăng giá trị i lên 1</strong>. Vì vậy, <strong>i không là idempotent</strong>.</p>\n</blockquote>\n</li>\n<li>Hãy chú rằng kết quả ở đây là trạng thái của nguồn dữ liệu trên server (lưu ý rằng các mã trạng thái (200,400,403,…) không liên quan tới tính ổn định).</li>\n<li>1 số lưu ý: header dài tối đa 8kb và cũng phụ thuộc cả vào trình duyệt body thì limit của nó tùy trình duyệt.  <em>Url không dài quá 2 nghìn kí tự (ror)</em></li>\n</ul>\n<h3>Visibility (Tính che giấu thông tin)</h3>\n<ul>\n<li>\n<p>Một request trong http methods được xem là <strong>visibility</strong> khi nó <strong>không để lộ ra thông tin trên URL</strong> khi request được gửi.</p>\n<blockquote>\n<p> *Cần lưu ý rằng visibility ở đây <strong>chỉ giới hạn ở URL</strong> (phần người dùng có thể nhìn thấy được).*</p>\n</blockquote>\n</li>\n</ul>\n<h3>Cachable (Có thể cache được)</h3>\n<ul>\n<li>Một request được xem là \u001d<strong>cacheable</strong> khi <strong>sau lần gửi thứ nhất của request</strong>, kết quả phản hồi <strong>có thể được lưu</strong> vào một trong các loại cache trên websites (localStorage, <a href=\"https://45.76.152.160/tim-hieu-ve-http-cookie-cookies/\">cookies</a>, …).</li>\n<li>Các bạn có thể xóa cache trong trình duyệt của mình</li>\n</ul>\n<h1>4. So sánh Get và Post</h1>\n<p>GET và POST là hai phương thức của giao thức HTTP, đều là gửi dữ liệu về server xử lí sau khi người dùng nhập thông tin vào form và thực hiện submit. Trước khi gửi thông tin, nó sẽ được mã hóa bằng cách sử dụng một giản đồ gọi là url encoding. Giản đồ này là các cặp name/value được kết hợp với các kí hiệu = và các kí hiệu khác nhau được ngăn cách bởi dấu &#x26;.</p>\n<h2>GET</h2>\n<ul>\n<li>Phương thức GET gửi thông tin người dùng đã được mã hóa thêm vào trên yêu cầu trang:\n<code class=\"language-text\">https://example.com/index?name=value1&amp;name1=value2&amp;name2=value3</code></li>\n</ul>\n<blockquote>\n<p>Chúng ta thấy rằng GET lộ thông tin trên đường dẫn URL. Băng thông của nó chỉ khoảng 1024 kí tự vì vây GET hạn chế về số kí tự được gửi đi. GET không thể gửi dữ liệu nhị phân , hình ảnh ... Có thể cached và được bookmark (đánh dấu trên trình duyệt). Lưu trong browser history.</p>\n</blockquote>\n<h2>POST</h2>\n<p>Phương thức POST truyền thông tin thông qua HTTP header, thông tin này được mã hóa như phương thức GET. Dữ liệu đươc gửi bởi phương thức POST rất bảo mật vì dữ liệu được gửi ngầm, không đưa lên URL, bằng việc sử dụng Secure HTTP, bạn có thể chắc chắn rằng thông tin của mình là an toàn. Parameters được truyền trong request body nên có thể truyền dữ liệu lớn, hạn chế tùy thuộc vào cấu hình của Server.</p>\n<blockquote>\n<p>Không cache và bookmark được cũng như không được lưu lại trong browser history. POST không có bất kì hạn chế nào về kích thước dữ liệu sẽ gửi, có thể gửi dữ liệu nhị phân, hình ảnh.</p>\n</blockquote>\n<h2>So sánh</h2>\n<ul>\n<li>\n<p><strong>Lưu trữ (cache)</strong> </p>\n<blockquote>\n<p>Dữ liệu gửi bằng phương thức GET sẽ được lưu trữ lại trong query string và có thể được xem trong lịch sử trình duyệt.\nNgược lại thì dữ liệu và địa chỉ URL của các request gửi bằng POST không được trình duyệt lưu lại. </p>\n</blockquote>\n</li>\n<li>\n<p><strong>Tốc độ</strong></p>\n<blockquote>\n<p>GET nhanh hơn rất nhiều so với POST về quá trình thực thi vì dữ liệu gửi đi luôn được webrowser cached lại, khi dùng phương thức POST thì server luôn thực thi và trả kết quả cho client, còn dùng GET thì webrowser cached sẽ kiểm tra có kết quả tương ứng đó trong cached chưa, nếu có thì trả về ngay mà không cần đưa tới server. </p>\n</blockquote>\n</li>\n<li>\n<p><strong>Đánh dấu (bookmark)</strong> </p>\n<blockquote>\n<p>Đối với request gửi bằng phương thức GET người dùng có thể bookmark lại được trên trình duyệt. Ngược lại các request gửi bằng POST sẽ không thể bookmark được. </p>\n</blockquote>\n</li>\n<li>\n<p><strong>Gửi lại form</strong></p>\n<blockquote>\n<p>Với form gửi đi bằng phương thức GET bạn có thể gửi lại bằng cách bấm phím F5 hoặc Ctrl + R. Tuy nhiên với phương thức POST, nếu bạn muốn thực hiện việc gửi lại dữ liệu của form thì trình duyệt sẽ hiển thị một hộp thoại cảnh báo.</p>\n</blockquote>\n</li>\n<li>\n<p><strong>Trở lại trang trước</strong></p>\n<blockquote>\n<p>Trong trường hợp bạn đã gửi form dữ liệu đi rồi sau đó bấm phím Backspace để quay lại trang trước thì với phương thức GET bạn sẽ vẫn được cùng một nội dụng (chứa form). Ngược lại với POST thì bạn sẽ thấy một trang trống.</p>\n</blockquote>\n</li>\n<li>\n<p><strong>Bảo mật</strong> </p>\n<blockquote>\n<p>Phương thức POST bảo mật hơn GET vì dữ liệu được gửi ngầm, không xuất hiện trên URL, dữ liệu cũng không được lưu lại trong khi đó với GET thì bạn có thể hiển thị lại được các dữ liệu này. </p>\n</blockquote>\n</li>\n<li>\n<p><strong>Dữ liệu</strong></p>\n<blockquote>\n<p>Phương thức POST không giới hạn dung lượng dữ liệu gửi đi cũng như loại nhữ liệu (văn bản thông thường hay file nhị phân như upload tập tin hay hình ảnh, video...). Ngược lại, với phương thức GET dữ liệu gửi đi bị giới hạn sử dụng các ký tự chữ có trong bộ ký tự ASCII. Đồng thời dữ liệu của GET được gửi trong URL thông qua query string nên sẽ bị giới hạn bởi số lượng ký tự tối đa cho phép trong URL.</p>\n</blockquote>\n</li>\n</ul>\n<h1>5. Lời cuối cùng</h1>\n<p>Ở trên chỉ là tóm tắt cơ bản về các request methods trong HTTP . Ngoài ra, để tìm hiểu thêm về bảo mật Http methods, các bạn có thể đọc thêm ở các nguồn tài liệu khác nhé.\n<strong>See ya!!</strong></p>\n<h6><em><div style=\"text-align: right\"> - by Thắng Đặng</div></em></h6>","id":"1448b36a-a881-52cc-8423-44ec93b884af","frontmatter":{"title":"Learn about HTTP request method ","date":"05-11-2020","tags":["technical"]},"fields":{"slug":"/tim-hieu-reqeust-method-http/"}}},{"node":{"excerpt":"Chúng ta khi làm việc với Laravel ít nhất vài lần sẽ gặp một task yêu cầu làm công việc tìm kiếm thông tin dựa vào 1 chuỗi đầu vào. Thường thì chúng ta sẽ viết đi viết lại 1 câu điều kiện để thực hiện…","html":"<p>Chúng ta khi làm việc với Laravel ít nhất vài lần sẽ gặp một task yêu cầu làm công việc tìm kiếm thông tin dựa vào 1 chuỗi đầu vào. Thường thì chúng ta sẽ viết đi viết lại 1 câu điều kiện để thực hiện tìm kiếm hoặc sử dụng một thư viện nào đó để làm công việc đó.</p>\n<p>Sau một thời gian copy và patse những câu lệnh where, tôi đã nghĩ ra cách để đơn giản hoá công việc tìm kiếm và có thể tái sử dụng nhiều lần. Chúng ta sẽ tìm hiểu ngay bên dưới.</p>\n<h2>I.  Bắt đầu</h2>\n<h4>1. Khởi tạo trait</h4>\n<ul>\n<li>Tạo thư mục \"App\\Traits\"</li>\n<li>\n<p>Tạo file SearchTrait.php trong thử mục \"App\\Traits\" với nội dung:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Traits</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Builder</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Schema</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Arr</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">trait</span>  SearchTrait\n<span class=\"token punctuation\">{</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h4>2. Định nghĩa những hàm để thực hiện việc tìm kiếm</h4>\n<ul>\n<li>\n<p>Lấy điều kiện join khi search được define trong model và khởi tạo scope để join với những bảng liên quan:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Get list tables with join conditions\n *\n * @return Array\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span>  Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'joins'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Scope to join table with corresponding conditions from getJoins()\n * @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n * @return \\Illuminate\\Database\\Eloquent\\Builder\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeMakeJoins</span><span class=\"token punctuation\">(</span>Builder <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$join</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token variable\">$join</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'='</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Lấy những trường sẽ sẽ được tìm kiếm dựa vào định nghĩa ở model:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Get all fields, which can be search in this tables and relation table\n * @return Array\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$model</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'columns'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Schema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">getColumnListing</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">primaryKey</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getUpdatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCreatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'updated_at'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">method_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'getDeletedAtColumn'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getDeletedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'deleted_at'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> <span class=\"token function\">array_diff</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHidden</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$others</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token variable\">$fields</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Định nghĩa scope dùng để tìm kiếm, ở đây có 2 trường hợp (Tìm kiếm trên bảng hiện tại và những bảng quan hệ hoặc chỉ tìm kiếm trên bảng hiện tại):</li>\n</ul>\n<p>1: Tìm kiếm trên bảng hiện tại và những bảng quan hệ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table and relational tables\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t*/</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearch</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>  <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">makeJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span>  <span class=\"token single-quoted-string string\">'.*'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>2: Chỉ tìm kiếm trên bảng hiện tại (No Relation):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table and relational tables\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t*/</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearchNoRelation</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>  <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n            <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h4>3.  Đầy đủ</h4>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span>  <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Traits</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Builder</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Schema</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span>  <span class=\"token package\">Arr</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">trait</span>  SearchTrait\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">/**\n     * Get list tables with join conditions\n     *\n     * @return Array\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>  Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'joins'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">/**\n     * Scope to join table with corresponding conditions from getJoins()\n     * @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n     * @return \\Illuminate\\Database\\Eloquent\\Builder\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeMakeJoins</span><span class=\"token punctuation\">(</span>Builder <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$table</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$join</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token variable\">$join</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'='</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">/**\n     * Get all fields, which can be search in this tables and relation table\n     * @return Array\n     */</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$model</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Arr<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">searchable</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'columns'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> Schema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">getColumnListing</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">primaryKey</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getUpdatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCreatedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'updated_at'</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$others</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">method_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'getDeletedAtColumn'</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token operator\">?</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getDeletedAtColumn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'deleted_at'</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$fields</span> <span class=\"token operator\">=</span> <span class=\"token function\">array_diff</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fields</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHidden</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$others</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$fields</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table and relational tables\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t* @return \\Illuminate\\Database\\Eloquent\\Builder\n\t*/</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearch</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">makeJoins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span>  <span class=\"token single-quoted-string string\">'.*'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/**\n\t* Scope models are used to search by $keyword for fields on the current table\n\t* @param \\Illuminate\\Database\\Eloquent\\Builder|static $query\n\t* @param string $keyword\n\t* @param boolean $matchAllFields\n\t* @return \\Illuminate\\Database\\Eloquent\\Builder\n\t*/</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">scopeSearchNoRelation</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span>  <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$keyword</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$keyword</span> <span class=\"token operator\">=</span> <span class=\"token function\">preg_replace</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/\\s+/'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keyword</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getSearchFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$field</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$matchAllFields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> \n\t\t\t\t\t<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$field</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LIKE'</span><span class=\"token punctuation\">,</span> <span class=\"token double-quoted-string string\">\"%<span class=\"token interpolation\"><span class=\"token variable\">$keyword</span></span>%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>II. Cách sử dụng</h2>\n<p><strong><em>1. Trong model:</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"<php?\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-<php? line-numbers\"><code class=\"language-<php?\">namespace  App\\Models;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse App\\Traits\\SearchTrait;\n\nclass \u001dProduct extends Model\n{\n\tuse SearchTrait;\n\t\n\tprotected $searchable = [\n\t\t&#39;columns&#39; =&gt; [\n\t\t\t&#39;products.name&#39;, &#39;categories.name&#39;, &#39;users.name&#39;\n\t\t],\n\t\t&#39;joins&#39; =&gt; [\n\t\t\t&#39;category&#39; =&gt; [&#39;\u001dproducts.category_id&#39;, &#39;categories.id&#39;],\n\t\t\t&#39;user&#39; =&gt; [&#39;\u001dproducts.user_id&#39;, &#39;users.id&#39;]\n\t\t]\n\t];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>columns</strong> : Những cột sẽ được thực hiện tìm kiếm.</li>\n<li><strong>joins</strong>: Những bảng quan hệ và điều kiện để nối bảng.</li>\n</ul>\n<p><strong><em>2. Trong \bController:</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span>  <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Controllers</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Product</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>Request</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Controller</span>\n  \t<span class=\"token comment\">/**\n     * Get list products\n     * @param Request $request\n     * @return View\n     */</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>Request <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$keywork</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$request</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'keywork'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$products</span> <span class=\"token operator\">=</span> Product<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$keywork</span><span class=\"token punctuation\">,</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'products.index'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'products'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Ở đây tham số thứ 2 của hàm search()</li>\n<li>$matchAllFields: Nếu <strong>true</strong> thì tất cả các trường tìm kiếm đều phải chứa giá trị <strong>keywork</strong> và ngược lại chỉ cần một trong các trường chứa <strong>keywork</strong>.</li>\n</ul>\n<h2>III. Kết luận</h2>\n<p>Như vậy, trong blog này chúng ta đã có một cách thực hiện công việc tìm kiếm một cách đơn giản và dễ tái sử dụng bằng cách sử dụng <strong>Trait</strong> trong Laravel. Mong là bài chia sẽ này sẽ giúp được mọi người trong công việc của mình.</p>\n<h6><em><div style=\"text-align: right\"> [Tran Van Tuan Anh | Trần Văn Tuấn Anh ] </div></em></h6>","id":"c63995c7-a6e2-5f5d-85a3-35e55a86f2e2","frontmatter":{"title":"[Laravel] Create a simple laravel search by trait","date":"04-11-2020","tags":["laravel"]},"fields":{"slug":"/create-a-simple-laravel-search-by-trait/"}}},{"node":{"excerpt":"Eloquent ORM được sủ dụng rất nhiều trong 1 project Laravel, tuy nhiên để sử dụng được tối đa những gì Laravel cung cấp thì không phải ai cũng biết. Trong bài viết này mình sẽ chỉ cho các bạn một vài…","html":"<p>Eloquent ORM được sủ dụng rất nhiều trong 1 project Laravel, tuy nhiên để sử dụng được tối đa những gì Laravel cung cấp thì không phải ai cũng biết. Trong bài viết này mình sẽ chỉ cho các bạn một vài thủ thuật, hi vọng sẽ giúp ích cho các bạn trong một vài trường hợp cụ thể.</p>\n<h4>1. Increments và Decrements</h4>\n<p>Khi muốn update tăng 1 đơn vị cho 1 column thay vì viết như này.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$post</span> <span class=\"token operator\">=</span> Post<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">view_count</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể viết lại như này </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$post</span> <span class=\"token operator\">=</span> Post<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'view_count'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Hoặc</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Post<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'view_count'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPost<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$postId</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'view_count'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// +10</span>\nProduct<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$productId</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">decrement</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'stock'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h4>2. XorY methods</h4>\n<p> Laravel Eloquent có khả nhiều function kết hợp 2 methods kiểu như \"hãy làm X trước nếu không thì làm Y\"</p>\n<ul>\n<li><b>findOrFail</b>\nThay vì viết như này</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">abort</span><span class=\"token punctuation\">(</span><span class=\"token number\">404</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể viết ngắn gọn như này</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">findOrFail</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>\n<p><b>firstOrCreate</b></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$email</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nUser<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n<span class=\"token single-quoted-string string\">'email'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$email</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>↓</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">firstOrCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$email</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>3. Model boot() method</h4>\n<p>Trong Laravel Eloquent có một function <code class=\"language-text\">boot()</code> cho phép bạn ghi đè lại các giá trị mặc định.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n    * @return void\n    */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">static</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">updating</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// do some logging</span>\n            <span class=\"token comment\">// thay thế một số property, ví dụ $model->something = transform($something);</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ứng dụng nhiều nhất của function này là set uuid cho đối tượng</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* @return void\n*/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    self<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">creating</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$model</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">uuid</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span>Uuid<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>4. Thêm điều kiện hoặc ordering trong relationship</h4>\n<p>Dưới đây là một cách mà các bạn thường dùng để định nghĩa một relationship</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* @return mixed\n*/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">users</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'App\\User'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tuy nhiên bạn hoàn toàn có thể thêm <code class=\"language-text\">where</code> hoặc <code class=\"language-text\">orderBy</code> </p>\n<p>Ví dụ trong trường hợp cụ thể, bạn cần tạo quan hệ giữa bảng <code class=\"language-text\">categories</code> và <code class=\"language-text\">posts</code> nhưng thêm điều kiện là <code class=\"language-text\">post</code> phải có trạng thái là <code class=\"language-text\">APPROVED</code> và sắp xếp theo thứ tụ tăng dần.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* @return mixed\n*/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'App\\Models\\Category'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'status'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'APPROVED'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'DESC'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>5. Model properties: timestamps, appends, ...</h4>\n<p>Có một vài parameters của Eloquent Model, được thể hiện dưới dạng properties của class đó. Một số cái phổ biến nhất có thể là:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$fillable</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Những fileds có thể được set giá trị bằng cách dùng User::create()</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$dates</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'deleted_at'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Những fields sẽ được set bởi Carbon-ized</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'field1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'field2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Các giá trị bổ sung được trả về trong JSON </span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khoannnnnnnnnnnnnnnnnnn, Còn nữa...</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$primaryKey</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'uuid'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Primary key k phải lúc nào cũng bắt buộc phải là id</span>\n<span class=\"token keyword\">public</span> <span class=\"token variable\">$incrementing</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// và thậm chí k cần phải tự động tăng luông </span>\n<span class=\"token keyword\">protected</span> <span class=\"token variable\">$perPage</span> <span class=\"token operator\">=</span> <span class=\"token number\">25</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Bạn có thể override số lượng data trong 1 page khi sủ dụng pagination, giá trị này default là 15</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CREATED_AT</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">UPDATED_AT</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'updated_at'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Thay đổi được tên column created_at và updated_at luôn nè </span>\n<span class=\"token keyword\">public</span> <span class=\"token variable\">$timestamps</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Hoặc khai báo là k cần sủ dụng chúng</span>\n<span class=\"token keyword\">protected</span> <span class=\"token variable\">$dateFormat</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'U'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Hoặc bạn có thể thay đổi kiểu dữ liệu của chúng. Ví dụ chuyển created_at và updated_at sang integer thì làm như ví dụ này.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Và tất nhiên là còn nhiều hơn nữa, trên đây mình đã liệt kê những cái thú vị nhất, để biết thêm chi tiết, vui lòng kiểm tra ở <code class=\"language-text\">abstract Model Class</code></p>\n<h4>6. Find multiple entries</h4>\n<p>Chắc hẳn tất cả mọi người đều biết về <code class=\"language-text\">find()</code> method.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nhưng có rất ít người biết rằng, hàm <code class=\"language-text\">find()</code> có thể nhận nhiều ID dưới dạng 1 array.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>7. WhereX</h4>\n<p>Bạn có thể kết hợp tên column viết dưới dạng <code class=\"language-text\">Camel</code> vào sau <code class=\"language-text\">where</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'approved'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Chuyển thành</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">whereApproved</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ngoài ra có một số method đã được define trước trong Eloquent</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">whereDate</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Y-m-d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nUser<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">whereDay</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nUser<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">whereMonth</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nUser<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">whereYear</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>8. Order by relationship</h4>\n<p>Sử dụng khi bạn cần lấy <code class=\"language-text\">post</code> mới nhất trong 1 list <code class=\"language-text\">categories</code>. Đầu tiên bạn cần define 1 relationship riêng việt cho <code class=\"language-text\">post</code> mới nhất của <code class=\"language-text\">categories</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* @return mixed\n*/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">latestPost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasOne</span><span class=\"token punctuation\">(</span>\\<span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Post</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">latest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Và sau đó, trong khi query bạn có thể làm được điều này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$categories</span> <span class=\"token operator\">=</span> Category<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">with</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'latestPost'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">sortByDesc</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'latestPost.created_at'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>9. Eloquent::when() – không còn phải sử dụng if-else’s</h4>\n<p>Khi cần thêm điều kiện vào trong query. Đa số mọi người sẽ viết như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token single-quoted-string string\">'likes'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'likes'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'likes_amount'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token single-quoted-string string\">'date'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'ordering_rule'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'desc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tuy nhiên bạn có thể sử dụng <code class=\"language-text\">when()</code> để viết lại như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> Author<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token single-quoted-string string\">'likes'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'likes'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'likes_amount'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token single-quoted-string string\">'date'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'ordering_rule'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'desc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nhìn có vẻ dài hơn cách dùng if else thông thường nhưng nó sẽ thật sự tốt trong việc phải truyền thêm tham số</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'role'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'role_id'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$authors</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>10. BelongsTo Default Models</h4>\n<p>Giả sử khí bạn phải show thông tin của 1 <code class=\"language-text\">post</code> kèo theo thông tin của tác giả:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">author</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tuy nhiên nếu thông tin về tác giả bị xóa. Hệ thống của bạn sẽ xuất hiện 1 lỗi kiểu như <code class=\"language-text\">property of non-object</code>\nTất nhiên vẫn có cách giải quyết kiểu như</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">!</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">author</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">author</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nhưng bạn hoàn toàn có thể làm nó ở relationship</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* @return mixed\n*/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">author</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'App\\Author'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">withDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Administrator'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>11. Order by Mutator</h4>\n<p>Hãy tưởng tượng bạn có cái này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* Get fullname by first name and last name\n* @return string\n*/</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getFullNameAttribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'first_name'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' '</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'last_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ bạn muốn order by theo <code class=\"language-text\">full_name</code> thì sao nhỉ?</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$clients</span> <span class=\"token operator\">=</span> Client<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Viết như này nó sẽ k chạy đâu nhé :))</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cần viết như này</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$clients</span> <span class=\"token operator\">=</span> Client<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">sortBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Lưu ý rằng tên function khác nhau nhé. Nó k phải <code class=\"language-text\">orderBy</code> mà là <code class=\"language-text\">sortBy</code></p>\n<h4>12. Set ordering mặc định</h4>\n<p>Nếu bạn muốn <code class=\"language-text\">User:all()</code> luôn được order by name? Bạn có thể sủ dụng method <code class=\"language-text\">boot()</code> như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">/**\n* @return void\n*/</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Order by name ASC</span>\n    <span class=\"token keyword\">static</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">addGlobalScope</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'order'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Builder <span class=\"token variable\">$builder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$builder</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'asc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>13. Raw query methods</h4>\n<p>Giả sử chúng ta cần thêm 1 câu truy vấn Sql vào câu lệnh Eloquent của mình.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// whereRaw</span>\n<span class=\"token variable\">$orders</span> <span class=\"token operator\">=</span> <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'orders'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">whereRaw</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'price > IF(state = \"TX\", ?, 100)'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">200</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// havingRaw</span>\nProduct<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">groupBy</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'category_id'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">havingRaw</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'COUNT(*) > 1'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// orderByRaw</span>\nUser<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'2016-01-01'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orderByRaw</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'(updated_at - created_at) desc'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>14. Replicate: tạo 1 bản copy của 1 row</h4>\n<p>Đây là cách tốt nhất để tạo 1 bản sao ò database entry:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$task</span> <span class=\"token operator\">=</span> Tasks<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$newTask</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$task</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">replicate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$newTask</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h4>15. Chunk() method for big tables</h4>\n<p>Không liên quan nhiều lắm đến Eloquent, nó thiên về Collection nhiều hơn, nhưng vẫn tốt khi muốn xử lý các dữ liệu lớn, bạn có thể chia chúng thành nhiều phần:\nThay vì viết như này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$users</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể viết lại như này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">chunk</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$users</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$users</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>16. Tạo nhưng file bổ sung khi tạo model bằng command</h4>\n<p>Chắc hẳn tất cả mọi người đề biết về câu lệnh tạo model này:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">php artisan make<span class=\"token punctuation\">:</span>model Company</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nhưng k phải ai cũng biết rằng có 3 flags hữu ích để tạo các tệp liên quan đến Model</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">php artisan make<span class=\"token punctuation\">:</span>model Company <span class=\"token punctuation\">-</span>mcr</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code class=\"language-text\">-m</code> sẽ tạo thêm migration file</li>\n<li><code class=\"language-text\">-c</code> sẽ tạo thêm controller file </li>\n<li><code class=\"language-text\">-r</code> sẽ chỉ định controller có thêm thuộc tính --resource</li>\n</ul>\n<h4>17. Override updated_at when saving</h4>\n<p>Bạn có biết <code class=\"language-text\">save()</code> method có thể nhận thêm tham số không? Chúng ta có thể yêu cầu nó bỏ qua chức năng mặc định updated_at để được set bằng thời gian hiện tại.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$product</span> <span class=\"token operator\">=</span> Product<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$product</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">updated_at</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'2019-01-01 10:00:00'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$product</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'timestamps'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Trong trường hợp này mình đã override <code class=\"language-text\">updated_at</code> mặc định bằng giá trị được xác định từ trước mà tôi muốn.</p>\n<h4>18. Kết quả của method <code class=\"language-text\">update()</code> là gì?</h4>\n<p> Bạn có biết <code class=\"language-text\">$result</code> sẽ trả về gì k?</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$products</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">whereNull</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'category_id'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'category_id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Câu trả lời là số hàng được update, vì vậy nếu bạn cần kiểm tra xem có bao nhiêu hàng bị ảnh hưởng thì bạn k cần làm thêm bất kỳ cái gì khác - <code class=\"language-text\">update()</code> method sẽ trả về cho bạn con số này.</p>\n<h4>19. Nhóm các điều kiện khi sử dụng Eloquent Query</h4>\n<p>Bạn sẽ làm thế nào nếu bạn có and-or kết hợp trong SQL query kiểu như này:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">WHERE</span> <span class=\"token punctuation\">(</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Male'</span> <span class=\"token operator\">and</span> age <span class=\"token operator\">>=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">or</span> <span class=\"token punctuation\">(</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Female'</span> <span class=\"token operator\">and</span> age <span class=\"token operator\">>=</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Khi chuyển qua Eloquent bạn nghĩ như này có đúng?</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'Male'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'Female'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sai hoàn toàn nhé. Cách đúng sẽ phức tạp hơn một chút:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'Male'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'Female'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>20. orWhere with multiple parameters</h4>\n<p>Cuối cùng, bạn có thể truyền tham số vào <code class=\"language-text\">orWhere()</code> là một array.</p>\n<p>Với cách thông thường bạn sẽ phải viết như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nhưng bạn có thể viết lại như này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'b'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'c'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<br>\n<p>Hi vọng với những mẹo này sẽ giúp các bạn nhiều hơn khi làm việc với dự án laravel </p>\n<h6><em><div style=\"text-align: right\"> [Nam Tran | Trần Thành Nam ] </div></em></h6>","id":"bb695671-20a3-529b-8a87-adbcd06d412d","frontmatter":{"title":"20 Laravel Eloquent Tips and Tricks","date":"03-11-2020","tags":["Laravel","php"]},"fields":{"slug":"/20-laravel-eloquent-tips-and-tricks/"}}},{"node":{"excerpt":"Component Vue UI là công cụ đắc lực giúp tăng hiệu suất, hiệu quả và giảm đáng kể thời gian làm dự án khi sử dụng vue trong các dự án của bạn. Mình xin giới thiệu 5 thư viện Component UI mà bản thân…","html":"<p>Component Vue UI là công cụ đắc lực giúp tăng hiệu suất, hiệu quả và giảm đáng kể thời gian làm dự án khi sử dụng vue trong các dự án của bạn. Mình xin giới thiệu 5 thư viện Component UI mà bản thân mình đã áp dụng và mình cảm thấy rất tốt tại thời điểm hiện tại.</p>\n<br/>\n<p><strong>1. Bootstrap Vue</strong></p>\n<p>Nó cung cấp tất cả nhưng gì Bootstrap có và được xây dựng dể sử dụng các component với Vuejs. Nếu bạn đã và đang dùng bootstrap thì bạn có thể nghĩ tới sử dụng thư viện này. Bootstrap Vue khá mạnh mẽ và có khả năng đáp ứng rất tốt cho các dự án từ nhỏ đến lớn. Tuy nhiên các nhân mình cảm thấy document của thư viện này được viết không tốt cho lắm.\n<br/>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAA10lEQVQoz6WSMW7DMAxFdc4ep2s7ZO4RsvcEQZApQJI9Y+sOiSJZtmSJsn5Jty5gdLETAh9aqIfPTypjLKrqC8YYSJVSHpLyPuCqb3BNA8oZKRESEYgy+r5fLNW0LWrnIOAQAlrvB3UxThzPLVXXNT55ZIGMgPG9y2HousGdjPqvQaBz1f9mqG8Gxjpkzqww5M8hS5rmSv5l3oEq1KG1F3hKAyTGBHEdOcNF4zKQeJnq+EF4P1mct3vYwwmOF6S1hmT743NZqdcN8LQGds9vqF5WE8Y9d/gN6BzBsMI89oMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"bootstrap vue\" title=\"bootstrap vue\" src=\"/static/5d2227af6eee95012993a9b8b19ba3c5/8c557/bootstrap-vue.png\" srcset=\"/static/5d2227af6eee95012993a9b8b19ba3c5/4edbd/bootstrap-vue.png 175w,\n/static/5d2227af6eee95012993a9b8b19ba3c5/13ae7/bootstrap-vue.png 350w,\n/static/5d2227af6eee95012993a9b8b19ba3c5/8c557/bootstrap-vue.png 700w,\n/static/5d2227af6eee95012993a9b8b19ba3c5/77800/bootstrap-vue.png 855w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></img>\n<br/>\nTrang chủ: <a href=\"https://bootstrap-vue.org/\">https://bootstrap-vue.org/</a></p>\n<p><strong>2. Vuetify</strong></p>\n<p>Vuetify là một semantic component framework dành cho vuejs. Vuetify được thiết kế theo hường material và có các thành phần UI sạch. Số lượng components hỗ trợ cũng khá ngon. Tuy nhiên bạn nên cân nhắc nó trong các dự án mà UI không thiết kế theo hướng material bởi vì custom em nó cũng khá mệt :))\n<br/>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVQoz62QsUpDQRBF9/ss7PMZfoKCxs7Kxk4IKdQi5AssUkcENaAEkkCQFxMCmse+md2dI5soIpg0zwuH6S7njivLEhEhx8xq40IIxBhJKdUi92Qx573/X8NcltvrGn7jVuUKX3k0KKqCVNUPkq//fUXXi7bhiAYRkiQ0a+fpu7C0e/J4MWFQDHieD/GvUxiNNhQFtnzBZvfY2wNW3GEfU76ezba41lObw94RZ48XvHeu4PiE2Dwlti/R2wP0Zh/tNpDrPUL/fNOXwtrmr3wCfVNsAXl8oQAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"vuetify\" title=\"vuetify\" src=\"/static/4c404d93a1d92c8117b043ef55d92b15/8c557/vuetify.png\" srcset=\"/static/4c404d93a1d92c8117b043ef55d92b15/4edbd/vuetify.png 175w,\n/static/4c404d93a1d92c8117b043ef55d92b15/13ae7/vuetify.png 350w,\n/static/4c404d93a1d92c8117b043ef55d92b15/8c557/vuetify.png 700w,\n/static/4c404d93a1d92c8117b043ef55d92b15/44fd6/vuetify.png 789w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></img>\n<br/>\nTrang chủ: <a href=\"https://vuetifyjs.com/en/\">https://vuetifyjs.com/en/</a></p>\n<p><strong>3. Buefy</strong></p>\n<p>Bao gồm các component cho vuejs và xây dựng trên Bulma.Bulma là một css frame work nhẹ và hướng mobile first. Tuy nhiên trong các dự án lớn buefy có thể không đáp ứng đủ do số lượng components không nhiều.\n<br/>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAAu0lEQVQoz6WOOw7CQAxE9/4dp+Ag1IiSA1BQBCkBsn97B9ubSBQ0CZFGK8fjN+NqKRinCZQyWi5oMtu7RbWCXzP4/oBjZsQYQSGC395kJiIxUn9Xycx6vMj2q0dvfIRrrcF7jyLNtC0TQ0N+qQok54wsvqLQ771wGIATIYRgwJSStE0ClkQx7JFT2DAMlq5JtDTcA9M71yEkPRv+/azhOpRMmJ/VlFMP2NmwN7ueXzgebqbLabR/utsK/QA2P3YXpLJWTgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"buefy\" title=\"buefy\" src=\"/static/39374f265034ea9a02b9e0eba2281f21/8c557/buefy.png\" srcset=\"/static/39374f265034ea9a02b9e0eba2281f21/4edbd/buefy.png 175w,\n/static/39374f265034ea9a02b9e0eba2281f21/13ae7/buefy.png 350w,\n/static/39374f265034ea9a02b9e0eba2281f21/8c557/buefy.png 700w,\n/static/39374f265034ea9a02b9e0eba2281f21/78597/buefy.png 947w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></img>\n<br/>\nTrang chủ: <a href=\"https://buefy.org/\">https://buefy.org/</a></p>\n<p><strong>4. Element UI</strong></p>\n<p>Đạt 47.8k star trên github, Element UI là một thư viện khá phổ biến. Element Ui có số lượng component khá đồ sộ và hầu như đáp ứng được các component mà bạn muốn. Việc sử dụng nó cũng hết sức đơn giản chỉ với đọc document trên trang chủ. Tuy nhiên nó chỉ thích hợp xây dựng cho Desktop. Dĩ nhiên bạn có thể tự responsive được cho các loại màn hình như hệ thông lưới được cung cấp sẵn. Em này là hàng ngon, anh em nên cân nhắc :))\n<br/>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 105.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAB2ElEQVQ4y41UW07EMAzcu3EAbsG1+OIA/CF++eAQgISQYEVf6fudGI/bhL62XUvTtEnqjO1xTrRhWhvS5krwXsMjDOMJjyRJSamYokhRXdeDUzNsPMKmQ631DJs/buxzmOw7wTNYZVlORVlS13XUMpqmpaZtqW27ATy3x7JnxzBx2DQNVVVFFTuGw67r2dm/I4yYO2LuHPZ9P7Jp5R3oxtGmwP4ExxbTFLkc4gXskiShNM2ELRjVHDJgmQ0HaVmTdDB6cTiwnBXFnmDNXFnhKZxDhBoEIYVhyGMgDFWcCYOp80sH0WTN5XBpS8aX5pZrLocly0XFMcUMFAYygsgxB+ZW7EVRyrdSSnKOyKCKFUNM4icAiccoRcoyOQRpkIO5ePhG8TJZS7ig9bpTlgYmvh8IE5/zChXAIH7P812bgm0YRaKAWch7+bnWZiEjbwFOCyN5L4qCfs5nCQ2W5zn9et7FPt8M2XaDHSFghGK/u51e3uyUNE2FCfTH4h9hDnW4ur5syEOVG9KSYONwfB/+XwybVS65QT5CI/hOjLvvpGc3cqjHfl5VudcDo5dPQzf3RLcPRHePrNHesEQiilhC05tlt8rTCS839PRm6Pnd0OvXwAwpaa8syh8MY3SaltZNpAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"element ui\" title=\"element ui\" src=\"/static/c3f8d774ad015bab33048301501b617e/c0388/element-ui.png\" srcset=\"/static/c3f8d774ad015bab33048301501b617e/4edbd/element-ui.png 175w,\n/static/c3f8d774ad015bab33048301501b617e/13ae7/element-ui.png 350w,\n/static/c3f8d774ad015bab33048301501b617e/c0388/element-ui.png 542w\" sizes=\"(max-width: 542px) 100vw, 542px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></img>\n<br/>\nTrang chủ: <a href=\"https://element.eleme.io/#/en-US\">https://element.eleme.io/#/en-US</a></p>\n<p><strong>5. Ant design vue</strong></p>\n<p>Được thiết kế dựa trên Ant design. Ant design cung cấp các template có sẵn và bao gồm các phiên bản cho Vue, React, Angular. Ant design Vue bao gồm đầy đủ các components mà bạn cần để làm dự án lớn và không thua kém gì Element UI. Thực tế mình thấy nó còn ngon hơn Element UI với khả năng cung cấp hệ thông lưới responsive khá tốt. Cá nhân mình khá hài lòng với em này, các bạn có thể thử :))\n<br/>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQ4y61UW26DMBD0mXqFXrF//e1tKkXqTw/AByQYCBHvh3fLbLWUEpdS1JUmxK/xeHdsw54gokNAmHEc2VrLaZpykiTc9z075w7DgLlt2xnoPKoQEEKoUoBwGIYZOAHw20Y6LoQ4rh656zquqorruhY0TSNfbKYLfdBNja8YOsmnYguzQiiL45gvl4sohCKoRE73EAFYd6fwP6xjyrLkMAxFHeyDnAVBIAVZE/va6zBYCLlIulR2Si6OvCd8m8iRkS8AapEHkKOtlkI/2mqpoiikqkvSWSE6MAHI81wmqnUwBgLdcEm4TMk3QvyoKkzSquI/vgjt31M4IcSOURSJdaAQamB0tUKWZVKsJclPYdaD64qqykPGtjbmHvfXkeCvHpxfm8+HAI8DEu2+QG7XtcO49y4jziXx25n43RKX3UQ0DnNRdj9f4rcReSN+eiV+eHb8+EJ8Ch03RcbX/LZZiDvbLP3UDsTXhvjWTqlwtHn1fPgA+Qwnqk3rbSMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ant design vue\" title=\"ant design vue\" src=\"/static/50718beafa07fc5a52894a3b32494b52/b06ae/ant-design-vue.png\" srcset=\"/static/50718beafa07fc5a52894a3b32494b52/4edbd/ant-design-vue.png 175w,\n/static/50718beafa07fc5a52894a3b32494b52/13ae7/ant-design-vue.png 350w,\n/static/50718beafa07fc5a52894a3b32494b52/b06ae/ant-design-vue.png 560w\" sizes=\"(max-width: 560px) 100vw, 560px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></img>\n<br/>\nTrang chủ: <a href=\"https://antdv.com/docs/vue/introduce/\">https://antdv.com/docs/vue/introduce/</a></p>\n<p><strong>Kết luận</strong></p>\n<p>Trên đây là nhưng thư viện Component UI mình thấy khá hữu dụng cho Vue và đều thích hợp cho các dự án từ nhỏ đến lớn. Mình xin kết thúc bài viết tại đây. Hẹn các bạn ở bài viết sau nhé.</p>\n<p><strong>- From ĐMH -</strong></p>","id":"7c4a3aea-0571-5be2-8f37-f90ce4bdf094","frontmatter":{"title":"5 Best Vue UI Component Libraries 2020","date":"01-11-2020","tags":["javascript"]},"fields":{"slug":"/5-best-vue-ui-component-libraries-2020/"}}},{"node":{"excerpt":"Chúng ta thường thấy các trang web từ Rails xây dựng url dựa trên primary key-cột id từ database. Bây giờ hãy tưởng tượng chúng ta có một model Person và các associated. Chúng ta có 1 record người…","html":"<p>Chúng ta thường thấy các trang web từ Rails xây dựng url dựa trên primary key-cột id từ database. Bây giờ hãy tưởng tượng chúng ta có một model Person và các associated. Chúng ta có 1 record người dùng với tên Bob Martin và có id là 6. Theo mặc định, url show record trên sẽ là</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token operator\">/</span>people<span class=\"token operator\">/</span><span class=\"token number\">6</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nhưng đối với các mục đích về SEO hay thậm chí là thẩm mĩ, chúng ta sẽ muốn có tên của Bob trong url. Số 6 ở cuối url được gọi là \"slug\". Chúng ta hãy xem xét 1 vài cách để implement url trên tốt hơn</p>\n<p><strong>Simple Approach</strong></p>\n<p>Phương pháp đơn giản nhất là override method to_param trong Persol model. Bất cứ khi nào cúng ta gọi route helper như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">person_path<span class=\"token punctuation\">(</span><span class=\"token variable\">@person</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Rails sẽ gọi đến method to<em>param để chuyển object đến 1 slug cho url. Trong model của chúng ta nếu không define 1 method to</em>param thì Rails sẽ mặc định sử dụng method trong ActiveRecord::Base và trả về id\nĐể sử dụng to_param, điều quan trọng là sử dụng các đối tượng ActiveRecord thay cho id. Đừng bao giờ sử dụng:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">person_path<span class=\"token punctuation\">(</span><span class=\"token variable\">@person</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Bad!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Thay vào đó, hãy sử dụng:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">person_path<span class=\"token punctuation\">(</span><span class=\"token variable\">@person</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>Slug Generation with to_param</strong></p>\n<p>Trong model, chúng ta có thẻ override to_param bao gồm 1 parameterized version của person's name:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">to_param</span></span>\n    <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">.</span>parameterize<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Phương pháp trên sẽ biến bất kì 1 chuỗi nào thành kí tự hợp lệ cho url. Trong ví dụ của chúng ta, kết quả trả về sẽ là</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token operator\">/</span>people<span class=\"token operator\">/</span><span class=\"token number\">6</span><span class=\"token operator\">-</span>bob<span class=\"token operator\">-</span>martin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>Object Lookup</strong></p>\n<p>Chúng ta cần làm gì để thay đổi finder của chúng ta? Không gì cả :))</p>\n<p>Khi chúng ta gọi Person.find(x), tham số x được chuyển đổi sang một số nguyên để thực hiện việc tra cứu SQL. Chúng ta có thể thử kiểm tra kết quả với 1 vài string gồm cả số và chữ:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">.</span>to_i\n<span class=\"token comment\"># => 1</span>\n<span class=\"token string\">\"1-with-words\"</span><span class=\"token punctuation\">.</span>to_i\n<span class=\"token comment\"># => 1</span>\n<span class=\"token string\">\"1-2345\"</span><span class=\"token punctuation\">.</span>to_i\n<span class=\"token comment\"># => 1</span>\n<span class=\"token string\">\"6-bob-martin\"</span><span class=\"token punctuation\">.</span>to_i\n<span class=\"token comment\"># => 6</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Method to<em>i sẽ ngừng việc interpreting string ngay khi nó bắt gặp 1 kí tự không phải chữ số. Do đó method to</em>param sẽ luôn thực hiện các tra cứu dựa trên id và loại bỏ phần còn lại của slug.</p>\n<p><strong>Benefits / Limitations</strong></p>\n<p>Lợi ích đầu tiên chúng ta có thể thấy là việc cải thiện SEO và làm cho url của chúng ta dễ đọc hơn</p>\n<p>Một hạn chế  của phương pháp này là người dùng không thể tha tác với các url 1 cách có ý nghĩa.</p>\n<p>Một hạn chế khác là id vẫn tồn tại trong url. Nếu bạn muốn che giấu, hay làm id trở nên khó hiểu hoặc không có ý nghĩa thì sẽ không nhận được hỗ trợ từ phương pháp này</p>\n<p><strong>Using a Non-ID Field</strong></p>\n<p>Đôi khi bạn muốn có được từ ID tất cả các thuộc tính khác trong cơ sở dữ liệu để tra cứu. Hãy tưởng tượng chúng ta có một object Tag và nó có một cột name. Nó có thể có giá trị là ruby hoặc rails.</p>\n<p><strong>Link Generation</strong></p>\n<p>Chúng ta có thể override to_param để tạo links:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  validates_uniqueness_of <span class=\"token symbol\">:name</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">to_param</span></span>\n    name\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Và bây giờ khi chúng ta gọi tag_path(@tag), chúng ta sẽ được /tags/ruby</p>\n<p><strong>Object Lookup</strong></p>\n<p>Việc tra cứu sẽ khó khăn hơn, mặc dù khi có 1 request đến url này nó sẽ được lưu trữ trong param[:id] bởi router.</p>\n<p>1 controller bình thường sẽ gọi ra Tag.find (\"ruby\"), và nó sẽ fail chặt :))</p>\n<p>Chúng ta có 1 vài lựa chọn ở đây:</p>\n<p><strong>Option 1: Query Name from Controller</strong></p>\n<p>Chúng ta có thể thay đổi controller để sử dụng Tag.find<em>by</em>name(params[:id]). Nó sẽ đảm bảo code của chúng ta chạy được, nhưng lại làm xấu thiết kế hướng đối tượng. Chúng ta đang phá vỡ tính đóng gói của class Tag.</p>\n<p><strong>Option 2: Custom Finder</strong></p>\n<p>Chúng ta có thể custom trong model Tag:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  validates_uniqueness_of <span class=\"token symbol\">:name</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">to_param</span></span>\n    name\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">find_by_param</span></span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    find_by_name<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Option 3: Overriding Find</strong></p>\n<p>Chúng ta sẽ override find method:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token comment\">#...</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span></span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    find_by_name<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nó sẽ làm việc với column name của model Tag, nhưng sẽ thất bại với id. Làm thế nào để xử lí với cả 2?</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token comment\">#...</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span></span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> input<span class=\"token punctuation\">.</span>is_a<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Integer</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">super</span>\n    <span class=\"token keyword\">else</span>\n      find_by_name<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ok, giờ thì nó đã làm việc. Nhưng khi phải viết is_a, bạn nên suy nghĩ xem có cách nào tốt hơn. Và ở đây chúng ta có thể dựa trên 1 vài nguyên tắc để làm nó tốt hơn:</p>\n<p>Databases cung cấp id 1 cho bản ghi đầu tiên\nRuby converts strings bắt đầu với 1 kí tự thành 0</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token comment\">#...</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span></span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> input<span class=\"token punctuation\">.</span>to_i <span class=\"token operator\">!=</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">super</span>\n    <span class=\"token keyword\">else</span>\n      find_by_name<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token comment\">#...</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span></span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    input<span class=\"token punctuation\">.</span>to_i <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> find_by_name<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">super</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Có vẻ đã ổn, nhưng có 1 lỗi có thể xảy ra: nếu 1 cái tên bắt đầu bằng 1 số, nó sẽ được hiểu như 1 id. Hãy thêm xác nhận để biết rằng 1 cái tên không thể bắt đầu bằng 1 số</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token comment\">#...</span>\n  validates_format_of <span class=\"token symbol\">:name</span><span class=\"token punctuation\">,</span> without<span class=\"token punctuation\">:</span> <span class=\"token regex\">/^\\d/</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span></span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n    input<span class=\"token punctuation\">.</span>to_i <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> find_by_name<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">super</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Using the FriendlyID Gem</h2>\n<p>Tiện lợi hơn 1 chút thì chúng ta có thể sử dụng gem FriendlyID</p>\n<p>Add gem vào Gemfile:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">gem <span class=\"token string\">\"friendly_id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"~> 4.0.0\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Gõ bundle trong terminal để cài đặt</p>\n<p><strong>Simple Usage</strong></p>\n<p>Thêm vào model</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token keyword\">extend</span> <span class=\"token constant\">FriendlyId</span>\n  friendly_id <span class=\"token symbol\">:name</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Dedicated Slug</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Tag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span>\n  <span class=\"token keyword\">extend</span> <span class=\"token constant\">FriendlyId</span>\n  friendly_id <span class=\"token symbol\">:name</span><span class=\"token punctuation\">,</span> use<span class=\"token punctuation\">:</span> <span class=\"token symbol\">:slugged</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Usage</strong></p>\n<p>Chúng ta có thể thấy trong action sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">t <span class=\"token operator\">=</span> <span class=\"token constant\">Tag</span><span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Ruby on Rails\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token comment\">#&lt;Tag id: 16, name: \"Ruby on Rails\", created_at: \"2011-09-11 15:42:53\", updated_at: \"2011-09-11 15:42:53\", slug: \"ruby-on-rails\"></span>\n<span class=\"token constant\">Tag</span><span class=\"token punctuation\">.</span>find <span class=\"token number\">16</span>\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token comment\">#&lt;Tag id: 16, name: \"Ruby on Rails\", created_at: \"2011-09-11 15:42:53\", updated_at: \"2011-09-11 15:42:53\", slug: \"ruby-on-rails\"></span>\n<span class=\"token constant\">Tag</span><span class=\"token punctuation\">.</span>find <span class=\"token string\">\"ruby-on-rails\"</span>\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token comment\">#&lt;Tag id: 16, name: \"Ruby on Rails\", created_at: \"2011-09-11 15:42:53\", updated_at: \"2011-09-11 15:42:53\", slug: \"ruby-on-rails\"></span>\nt<span class=\"token punctuation\">.</span>to_param\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">\"ruby-on-rails\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Như vậy, qua bài viết này chúng ta đã tiếp cận với friendly url bằng cả cách \"hơi lười\" và cách \"hơi chăm\", chúc các bạn có những giây phút coding thú vị\nBài viết dịch từ <a href=\"http://tutorials.jumpstartlab.com/topics/controllers/friendly-urls.html\">http://tutorials.jumpstartlab.com/topics/controllers/friendly-urls.html</a></p>","id":"049b7c57-f84e-5fe3-9be8-b499a1c25c6e","frontmatter":{"title":"Friendly url in Rails","date":"27-10-2020","tags":["rails"]},"fields":{"slug":"/friendly-url-in-rails/"}}},{"node":{"excerpt":"Chào các bạn, mình có 1 topic nho nhỏ đó là lấy thông tin người dùng từ bên thứ 3 (facebook, twitter, line), khi mà chúng ta cần đăng kí và đăng nhập vào ứng dụng của mình bằng facebook, twitter, line…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Chào các bạn, mình có 1 topic nho nhỏ đó là lấy thông tin người dùng từ bên thứ 3 (facebook, twitter, line), khi mà chúng ta cần đăng kí và đăng nhập vào ứng dụng của mình bằng facebook, twitter, line thì việc lấy dữ liệu từ bên thứ 3 nó rất cần thiết. Vậy thì làm thế nào để lấy được dữ liệu đó? Thì trong bài viết này mình sẽ hướng dẫn các bạn lấy dữ liệu thông qua các thư viện hỗ trợ trong Rails nhé.</p></div></div>\n<h2>1. Facebook</h2>\n<ul>\n<li>Cách 1 : sử dụng gem koala (<a href=\"https://github.com/arsduo/koala\">https://github.com/arsduo/koala</a>)</li>\n</ul>\n<p>Đầu tiên ở thư mục project hiện tại vào gemfile add dòng sau : </p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">gem <span class=\"token string\">'koala'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tiếp theo : </p>\n<p><code class=\"language-text\">bundle install</code></p>\n<p>Lúc này cần define method để lấy dữ liệu : </p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">fetch_facebook</span></span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n    profile <span class=\"token operator\">=</span> <span class=\"token keyword\">nil</span>\n    <span class=\"token keyword\">begin</span>\n      graph   <span class=\"token operator\">=</span> <span class=\"token constant\">Koala</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Facebook</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">API</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n      fb_hash <span class=\"token operator\">=</span> graph<span class=\"token punctuation\">.</span>get_object<span class=\"token punctuation\">(</span><span class=\"token string\">'me'</span><span class=\"token punctuation\">,</span> fields<span class=\"token punctuation\">:</span> <span class=\"token string\">'id, email'</span><span class=\"token punctuation\">)</span>  \n      profile <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> uid<span class=\"token punctuation\">:</span> fb_hash<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> fb_hash<span class=\"token punctuation\">[</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">if</span> fb_hash\n    <span class=\"token keyword\">ensure</span>\n      profile\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ở đây mình có 1 chú ý nhỏ về cái email mình cần phải cấp quyền cho nó mới lấy được email và các bạn vào link dưới để cấp quyền và lấy token để test thử nhé (<a href=\"https://developers.facebook.com/tools/explorer/\">https://developers.facebook.com/tools/explorer/</a>).</p>\n<p>Ngoài ra, thì dưới app cũng có thể cấp quyền và gửi token lên cho server thì ta có thể lấy được thông tin của người dùng từ facebook rồi.</p>\n<ul>\n<li>Cách 2 : Sử dụng gem httparty (<a href=\"https://github.com/jnunemaker/httparty\">https://github.com/jnunemaker/httparty</a>)</li>\n</ul>\n<p>Tương tự với gem koala thì chúng ta phải add gem và bundle nó nhé: </p>\n<p><code class=\"language-text\">gem &#39;httparty&#39;</code></p>\n<p>run:</p>\n<p><code class=\"language-text\">bundle install</code></p>\n<p>Tiếp theo thì cũng define method để dùng cho việc lấy dữ liệu nha:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">fetch_facebook</span></span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n    profile <span class=\"token operator\">=</span> <span class=\"token keyword\">nil</span>\n    <span class=\"token keyword\">begin</span>\n      fb_hash <span class=\"token operator\">=</span> <span class=\"token constant\">HTTParty</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'[https://graph.facebook.com/v5.0/me?fields=email,id](https://graph.facebook.com/v5.0/me?fields=email,id)'</span><span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>  \n                           access_token<span class=\"token punctuation\">:</span> token  \n                         <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parsed_response   \n      profile <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> uid<span class=\"token punctuation\">:</span> fb_hash<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> fb_hash<span class=\"token punctuation\">[</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">if</span> fb_hash\n    <span class=\"token keyword\">ensure</span>\n      profile\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để lấy được cái link trong get thì các bạn vào đây tham khảo để lấy nha:(<a href=\"https://developers.facebook.com/docs/graph-api/using-graph-api\">https://developers.facebook.com/docs/graph-api/using-graph-api</a>).</p>\n<p>Qua method này thì mình có thể lấy được email và id rồi, nếu các bạn muốn lấy thêm thông tin khác như tên, ngày sinh,... thì thêm vào chỗ email,id nhé.</p>\n<h2>2. Twitter</h2>\n<p>Đối với twitter thì mình thấy có gem twitter hỗ trợ cũng khá ổn nên mình hướng dẫn các bạn dùng nó nhé. (<a href=\"https://github.com/sferik/twitter\">https://github.com/sferik/twitter</a>)</p>\n<p>Tương tự thì mình cũng phải add gem và install nó thôi.</p>\n<p><code class=\"language-text\">gem &#39;twitter&#39;</code></p>\n<p><code class=\"language-text\">bundle install</code></p>\n<p>Tiếp đến thì mình cần tạo application của twitter để lấy được consumer<em>key và consumer</em>secret để config cho nó nhé: (<a href=\"https://developer.twitter.com/en/apps\">https://developer.twitter.com/en/apps</a>)</p>\n<p>Đầu tiên các bạn tạo app như này giúp mình nhé:</p>\n<p><img src=\"https://user-images.githubusercontent.com/44299177/96090443-6556e480-0ef2-11eb-9c3c-ac0b6e404994.png\" alt=\"alt\"></p>\n<p>Chi tiết app sẽ như sau:</p>\n<p>Ở details app:</p>\n<p> <img src=\"https://user-images.githubusercontent.com/44299177/96090807-f8901a00-0ef2-11eb-96eb-3015796a55e0.png\" alt=\"alt\"></p>\n<p> <img src=\"https://user-images.githubusercontent.com/44299177/96090813-faf27400-0ef2-11eb-871d-2ddd85681554.png\" alt=\"alt\"></p>\n<p>Ở keys and tokens:</p>\n<p> <img src=\"https://user-images.githubusercontent.com/44299177/96090578-9c2cfa80-0ef2-11eb-8d9f-c3ff6b22317e.png\" alt=\"alt\"></p>\n<p>Ở permissions:</p>\n<p> <img src=\"https://user-images.githubusercontent.com/44299177/96091333-a8fe1e00-0ef3-11eb-9073-dd02f292011f.png\" alt=\"alt\"></p>\n<p>Dựa vào mục keys and token thì các bạn đã lấy được consumer key, consumer secret, access token, access token secret, để test thoải mái rồi nha.</p>\n<p>Sau đó mình cũng define method như sau và truyền các giá trị vừa lấy được vào đây nhé:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">fetch_twitter</span></span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">,</span> token_secret<span class=\"token punctuation\">)</span>\n  profile <span class=\"token operator\">=</span> <span class=\"token keyword\">nil</span>\n  <span class=\"token keyword\">begin</span>\n    client <span class=\"token operator\">=</span> <span class=\"token constant\">Twitter</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">REST</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Client</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>config<span class=\"token operator\">|</span>\n      config<span class=\"token punctuation\">.</span>consumer_key        <span class=\"token operator\">=</span> <span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string\">'CONSUMER_KEY'</span><span class=\"token punctuation\">]</span>\n      config<span class=\"token punctuation\">.</span>consumer_secret     <span class=\"token operator\">=</span> <span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string\">'CONSUMER_SECRET'</span><span class=\"token punctuation\">]</span>\n      config<span class=\"token punctuation\">.</span>access_token        <span class=\"token operator\">=</span> token\n      config<span class=\"token punctuation\">.</span>access_token_secret <span class=\"token operator\">=</span> token_secret\n    <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">if</span> client\n      infor <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span>verify_credentials<span class=\"token punctuation\">(</span>include_email<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n      profile <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> uid<span class=\"token punctuation\">:</span> infor<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> infor<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span> \n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">ensure</span>\n    profile\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Các bạn nhớ chú ý cái method verify_credentials giúp mình nhé, nhờ nó mà mình mới lấy được email đó. Mình phải search đủ đường, kiểm tra đủ kiểu mới kiếm được nó đó nha. </p>\n<h2>3. Line</h2>\n<p>Còn line thì mình đã và đang sử dụng cái gem rest-client nó hỗ trợ cho việc lấy dữ liệu của account line nè. (<a href=\"https://github.com/rest-client/rest-client\">https://github.com/rest-client/rest-client</a>).</p>\n<p>Tương tự với Facebook và Twitter thì mình cũng add gem và bundle thôi: </p>\n<p><code class=\"language-text\">gem &#39;rest-client&#39;</code></p>\n<p><code class=\"language-text\">bundle install</code></p>\n<p>Các bạn vào đây để lấy api get profile của line nha: (<a href=\"https://developers.line.biz/en/reference/social-api/#profile\">https://developers.line.biz/en/reference/social-api/#profile</a>).</p>\n<p>Line thì đơn giản hơn một xíu chẳng cần tạo app hay lấy key gì cả và chỉ cần define method như sau là được rồi:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">fetch_line</span></span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n    profile <span class=\"token operator\">=</span> <span class=\"token keyword\">nil</span>\n    <span class=\"token constant\">RestClient</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://api.line.me/v2/profile'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"Authorization\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Bearer <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>token<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json'</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>response<span class=\"token punctuation\">,</span> _request<span class=\"token punctuation\">,</span> _result<span class=\"token operator\">|</span>\n        response <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span>parse<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>   \n        profile <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> uid<span class=\"token punctuation\">:</span> response<span class=\"token punctuation\">[</span><span class=\"token string\">'userId'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">if</span> response<span class=\"token punctuation\">[</span><span class=\"token string\">'userId'</span><span class=\"token punctuation\">]</span>\n      <span class=\"token keyword\">end</span>\n      <span class=\"token keyword\">return</span> profile\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Thằng line này mình chưa lấy token bằng web mà mình nên mình nhờ phía app lấy token và gửi token lên cho mình nhé.</p>\n<p>Line này thì mình không lấy được email đâu vì nó đăng nhập bằng số điện thoại mà và account nó không có email thì làm sao mà lấy. nên dựa vào method trên là mình đã lấy được id của nó rồi nha.</p>\n<h2>4. Kết luận</h2>\n<p>Vậy là xong phần lấy thông tin người dùng của facebook, twitter, line rồi ạ, ở bài viết này thì mình chỉ quan tâm nhiều đến việc lấy id và email, nếu mọi người cần lấy thêm nhiều thông tin hơn thì hãy đọc kỹ các thư viện trên nhé nó sẽ có thứ mà các bạn cần. Hi vọng bài viết này có thể giúp đỡ 1 phần nào đó trong dự án của bạn, và có khó khăn gì về cái này cứ comment ở dưới nhé mình sẽ check comment và support nếu có thể ạ. Cảm ơn mọi người đã đọc!</p>\n<p>Happy coding !!!</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Vo Van Tra </div><div class=\"custom-block-body\"></div></div>","id":"90d0ee56-9300-537f-a0ea-04fc7f5e843a","frontmatter":{"title":"Get Information Account From Facebook, Twitter, Line In Rails","date":"26-10-2020","tags":["ruby","rails","twitter","facebook","line"]},"fields":{"slug":"/get-information-account-from-facebook-twitter-line-in-rails/"}}},{"node":{"excerpt":"Làm thế nào để chúng ta có thể lấy được cookie Instagram khi đã bật xác minh 2 bước một cách tự động và hàng loạt. Giới thiệu chung 1. Two-factor authentication là gì ? Xác thực hai yếu tố (2FA) là…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Làm thế nào để chúng ta có thể lấy được cookie Instagram khi đã bật xác minh 2 bước một cách tự động và hàng loạt.</p></div></div>\n<h2>Giới thiệu chung</h2>\n<h3>1. Two-factor authentication là gì ?</h3>\n<p>Xác thực hai yếu tố (<strong>2FA</strong>) là một tính năng bảo mật tùy chọn yêu cầu bạn nhập mã xác minh cũng như mật khẩu của mình mỗi khi đăng nhập.</p>\n<p>Sau khi thiết lập, <strong>2FA</strong> giảm đáng kể cơ hội truy cập trái phép vào tài khoản của bạn.</p>\n<h3>2. Các gem cần dùng.</h3>\n<h4>ROTP gem</h4>\n<blockquote>\n<p><strong>ROTP</strong> là môt thư viện ruby ​​để tạo và xác thực mật khẩu một lần (<strong>HOTP &#x26; TOTP</strong>) theo <strong><code class=\"language-text\">RFC 4226</code></strong> và <strong><code class=\"language-text\">RFC 6238</code></strong>.</p>\n<p><strong>ROTP</strong> tương thích với <strong>Google Authenticator</strong> có sẵn cho <strong>Android</strong> và <strong>iPhone</strong> và bất kỳ triển khai dựa trên <strong>TOTP</strong> nào khác.</p>\n<p>Nhiều trang web sử dụng điều này để xác thực đa yếu tố, chẳng hạn như\n<strong>GMail</strong>, <strong>Facebook</strong>, <strong>Amazon EC2</strong>, <strong>WordPress</strong> và <strong>Salesforce</strong>. \u001dCó thể tìm hiểu \u001dkỹ hơn <a href=\"https://en.wikipedia.org/wiki/Google_Authenticator#Usage\">ở đây.</a></p>\n</blockquote>\n<h4>Poltergeist gem</h4>\n<blockquote>\n<p><strong>Poltergeist</strong> là driver cho <strong>Capybara</strong>. Nó cho phép bạn chạy các bài \u001dtest <strong>Capybara</strong> của mình trên trình duyệt headless\n<strong>PhantomJS</strong> . Nếu bạn muốn chạy tests của mình trên headless <strong>Chrome</strong>, có một dự án khác mà <a href=\"https://github.com/rubycdp/cuprite\">Cuprite</a> tuyên bố là tương thích với <strong>Poltergeist</strong>.</p>\n</blockquote>\n<h2>Tiến hành thực hiện.</h2>\n<h3>Bước 1:</h3>\n<p>Bật xác minh 2 bước trên điện thoại\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75c26ce903790f1c89c87da4d6fa5d8b/89048/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAADFElEQVRIx62WyXLTQBCG9f4PwjkniuIQQjgQCASHgFOJF3mR91W2ZFvefuabZFzKQrwkqmqNZtTT/fcyPe2VSiUVi0XlcjmVy2XVajXNZjMtFgslSaL1em3Xbm9vNZ/Pn9ByuVS9Xlcmk9Hx8bG8MAzV7/ft5slkYkfHjNDxeCyUFgoFtVotKyDNAwFgOp1a8piwabVaWQGOnHb+5fN5ZbNZVatVy+eUPUcem5Acx5ONljShEB6n8DkeCOtQ5AG/Wg0UBIF8v2R8mbe+xA29Xs9St9u1xHd63RFr/I/jWB5Of+wTZxLIHLkgvUTwWR+CiODgo0ajYdESAOaVSsVGmfVtD+AsQnyAj9CCAofYzTEFH20TxmN92Ol0rNDBYLAhogtqvlG2CzqLEIHNZtOiwFSSlBET2+22NRmUOwvkxQYH+bWPBzLf9615HD+XxKPRyDJgrtO+DSG8nvt4q8eLosiiwvmMpAh+w4/Ol4ysvxTpDUKSMTZC58lM4XCg6SRWZCKMK1AGuYiTSlsRcgI6w1CJmYwXyzuaTDU2Pkx2iO6TKM+MwODiu8KzUxXfH6l18lH1P5cqBzX1zBnVfTB2CYoVuPz6SdHZZ6lWlhpVqV6RLr9Jfy8OC0p49E65Tk/1UaRCuyu/N1AzNClz+kHrcbiXyTYoyma0+nYiXf24Q5X9JZ1/kfwbx7lnYi9Xyv/OKMzfqHB+plrmp4J8TtF8sZegDcKFOcsxl5JZHJnojqYzRVTfZLa3/2xQqDKBqXuM5B/JOzPfhwizAjmzV1dXNoEpqBRbTsohAjdnmRL2Zmd5OBzq+vpajCADLZfOLsn8X4TTlM9eW3k8Dr67pEBIxYYODgrVGnPxI0JRwB2bZtpGDwRSbRCE2eP7srWPsMdkCyydE80QpZ8AvcqHeuPHowpT+kF419/4thckMCDepUo/SBvXVaV7FAKFII4h/9Ip5W7Bx3P3be8ULnTQuQaJix+ErlEinbhiXd/If1LNzV0fBBCLEAY2pbtWUsc1nW6D68JGJs365v/ifj40N2an0VRi+P8BmZLyo5uNtJ0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-1.png\"\n        title=\"image-1.png\"\n        src=\"/static/75c26ce903790f1c89c87da4d6fa5d8b/8c557/image-1.png\"\n        srcset=\"/static/75c26ce903790f1c89c87da4d6fa5d8b/4edbd/image-1.png 175w,\n/static/75c26ce903790f1c89c87da4d6fa5d8b/13ae7/image-1.png 350w,\n/static/75c26ce903790f1c89c87da4d6fa5d8b/8c557/image-1.png 700w,\n/static/75c26ce903790f1c89c87da4d6fa5d8b/e996b/image-1.png 1050w,\n/static/75c26ce903790f1c89c87da4d6fa5d8b/89048/image-1.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e6325dc2ecdf366ffc64af5b6dd2b265/89048/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAADBElEQVRIx7WW21IaQRCG9/1v8gJ5CW+8MiZlrCRiTCGFhZyRw8ICLiflIOz+mW/KsQgJYUyZqWp2js0/3X93T9BoNFSr1VQul3V3d6dOp6Plcqn1eq3VaiUac8Vi0c4hT09PL7LZbBSGobLZrE5PTxVMJhPd39/bw/P53CpjI2M29/t9NZtNqxRhblshwpnFYmEl4ODDw4PSNFWSJFYcEuZQUigULEJugULO7Cp1EvCDwsfHR81mM02nU4uUOWS3uT/dJ/bKNzc31o65XM6KQ3R9fW1RbsuhFvDjs9G3BVy1VCopjmNrfLxer9etvbi67x86HwR4CKU07LlNjX9CyEGoAZrhcGgFGvGNosg6CU8f+gNnY0sbDsMhDqK82+1agbCstVotyzUvhWmaaGWUcf9tWyXP/dTM05wZDtkzWJv1WifUxFytWqlYZzRNCNaqVd2Wymp0eyoyZxxWMevO3nudkozMdbMZKXshfT+XLs/M97N0Zfq5S6l6Ky0X/k4Zvn+n/PGR4m6olrFbJ+orHAwU9npqFQuKPhwrPTlyMA7TZtOoaP7lo9bfPml1ea7Vj69aXhm5ONPi/EQbM1Y89Ec4M95rGPsQt6NWU9NmXbNWQ9Oop7EJy7GJ79li6UVs6+WpOYQTiOmwF2kQjxTBQxM55Me2ocx4NPJX6DrJMz1SS5/kN3rsJol9YrNNPp+3mQXKkHnINlVDm0Nk3ptt3jLjBMQwqEbGTj1DFcKNUIPIoHR1xTvbEMMoILTou2xNn6hwtvVG6DSDhBLgxNUa3zT24hQMz1VB5qobdCHbUBbINq+6Mh2fLOLrtGA8HiuTydg8CF1cVsGuIAUlJaHdbr8O4d/QuBLpXaRI9SB1GRthji8oWfO2IXQhWqAJtYQagjhvUw1Z8/ay3rj9Uuj/5MnXhuT/QfimCrfpsEuPfWNnhu1x6l5fvPegCIR2TxHCzr0WWGeNXOlqM6EKndyY8+4xYBGygUPuXQNdiGE2s+4OoJz1qeFlbNbXz2NKxMDU75XZ/xMikvFdMuNHVgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-2.png\"\n        title=\"image-2.png\"\n        src=\"/static/e6325dc2ecdf366ffc64af5b6dd2b265/8c557/image-2.png\"\n        srcset=\"/static/e6325dc2ecdf366ffc64af5b6dd2b265/4edbd/image-2.png 175w,\n/static/e6325dc2ecdf366ffc64af5b6dd2b265/13ae7/image-2.png 350w,\n/static/e6325dc2ecdf366ffc64af5b6dd2b265/8c557/image-2.png 700w,\n/static/e6325dc2ecdf366ffc64af5b6dd2b265/e996b/image-2.png 1050w,\n/static/e6325dc2ecdf366ffc64af5b6dd2b265/89048/image-2.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e09f2a7043e622be4b51c0e127b966c/89048/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAACdUlEQVRIx+1WuY4TQRT0T8AnkLMIIVL4K2IiDhGQshEJRwAhEosJSS2tMZZve3yNr7kPe47iVVttLSvbeyKBtC2V+k3P65p3awqdTgetVgv1eh2UuUdRhDRNkec5uAaDASqVClarlXrOskzJBPWGwyFKpRKKxSIKjuNgsVhguVwqIiolSQLf99Hr9TAej9HtdtUljel0qog0aRzH6i5R4IPruhsFEmtCWtVut1Eul2EYBqrVKmq1GkajkdKnribVKNB8usb9JLS7uxYJT98hCvsukXQb9q29hJdZZxLSDSaGmWbMrkzI5JimiclkAtu2N6G4NKHnebAcG47rwLoOQj8QCztiYXMC56KE27Lp+QGG9V8YHh/Dtpyd2b9QliMp/iAKz5dlzd7v91VHMKPsDnYFW4+dwYQYPUP1Os/Yis1mU+nxfaPR2Fi5sTAMQ9VSzKhlWapfNbn+AEn4jtmez+dq58dms9n5XSYB+5ikrMUzXWbhcjio8pDL3PlMsAaDIFBTRO/6nb5DKynzLgtfxZDmc4TpnS5oV0xzAlPksYSC4RhJGLgzJHyvwTNOrq0ucwzxq44jltgWIt+DL4UduGKNFDmt2tWGe2OYCkypFsOXqR0AbVdKKL1CL7MQwiSHt8rhC5xljlX2r42vG8Ibwv+WML8m/B0LOWDjJEO0BTwPVxn85RqUd+kSaSo/S6VphoN3scK99/FGJu4KHnyI8fhzjEefYjz8uD47OIX7onPnbYTDnwkK3/vC+jxY40Xwp/xM8CrErTcRbh/Kz+TrcH12Uo94KXga4MkP+T/kjDsysp342svwpZsqUN6m881Y63TcHL8BE9HWjT5aNLAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-3.png\"\n        title=\"image-3.png\"\n        src=\"/static/5e09f2a7043e622be4b51c0e127b966c/8c557/image-3.png\"\n        srcset=\"/static/5e09f2a7043e622be4b51c0e127b966c/4edbd/image-3.png 175w,\n/static/5e09f2a7043e622be4b51c0e127b966c/13ae7/image-3.png 350w,\n/static/5e09f2a7043e622be4b51c0e127b966c/8c557/image-3.png 700w,\n/static/5e09f2a7043e622be4b51c0e127b966c/e996b/image-3.png 1050w,\n/static/5e09f2a7043e622be4b51c0e127b966c/89048/image-3.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/220849608735b72ca7dbc1e5fcefe388/89048/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAACt0lEQVRIx+1U227TQBD1/38IL0jAS6GqaCkthYZeiHJxjC+xHeXuOL7GsWPHh5lNXLlqqfoAb1npyLO7Z49nZ3ZGsiwL/X4fmqaBbVmWsV6vURQFyrIEj9FoJNY3m42Yb7dbYTOYNx6P0Ww2cXZ2BikIAiyXS2RZJoTyPBeI4xiDwQDT6RS2bYtDFRzHEUKVaJqm4ixD4kkYhg8EFmbBKIrQ7XZhmiY6nY4QVxQFqqpiMpkIPnMZlTBDYvf5akxgm0d11ZdGnct2BalO4k12u34VBntRXataYwf4y7epj0eCvNnr9cS1dF0X315PQZcSoqoaZNrjEHACOJatVgvz+fyp4HOeCG84SRnNVzGydYI83a2tVivBS5LkEf9BMKNDMSUhISJnlw+skxWCOIHppeg5CTQ3RXuWwAkT4hFnz+NvdXYn+FICihxpGGPtBUiWPlZ+hCLb/J1PWrsY5kQaWYAuA3dXwM+vwM0lcP8DaN8A3Tugc7uzm9coab9snNP3AqXSAmyd4ra/cmoZGL17A/3oPdTPxzAVGX1KiEZvjitI1Q2oRh+GZZOtwzAMlOQ5Sno2FCoMLSG6vT4HLB3S5uQDZm3KGsVrQpj6IcZzB3OqhoXrYjqbiYxyNhnD4RAuVVa0TwIHjF+kPx4h/fgWUu65iL98gn96BLfxDVH7Hr7Vh7dYYOHMEVFpMkLfRxgwAgQk6NkmUrULaDKK2yuk58conCmkgtRD+ls4GSNR2kgJ+a8GNt9PkV6eUDwvnuKG0KJ4GgpgaqA/1N7hK8rsdWOnI/Fj5tev6xp0bmFk/6aE2NTKHuq6jurwfl5yDVMZcoNhLYnLbUHx4oBzW2Jwy3IpIZ7nCSK3OO4+bFcVUa9/1vD9QFSNVC3WO0xlV52o3k2e60T1NQn/eBwED4IHwYPgQfA/Cf4Bklr5JLtW4C4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-4.png\"\n        title=\"image-4.png\"\n        src=\"/static/220849608735b72ca7dbc1e5fcefe388/8c557/image-4.png\"\n        srcset=\"/static/220849608735b72ca7dbc1e5fcefe388/4edbd/image-4.png 175w,\n/static/220849608735b72ca7dbc1e5fcefe388/13ae7/image-4.png 350w,\n/static/220849608735b72ca7dbc1e5fcefe388/8c557/image-4.png 700w,\n/static/220849608735b72ca7dbc1e5fcefe388/e996b/image-4.png 1050w,\n/static/220849608735b72ca7dbc1e5fcefe388/89048/image-4.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e1ede5253895da489e7e5379abe2da89/89048/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAAClUlEQVRIx+1WS2tTQRi94E/wn7lOs3Dhb3AnCMb6QHRRpAvBrRtBQVFL4y41aQtpCEmreafJTZrnzb03yX0e50wzfdA2DW0RhA6czOM7c/LNfPPNHa1cLqNSqaBQKIDtXC6HyWSCIAgQhiFYGo0G8vk8XNeVfdrYJnzfR7PZRDqdRjweh2ZZlpwwHo+lkOd5ktTpdFCr1dBqtaSd0HVd1rSRp0Sn06mcS2gc4CQOkuQ4jhRst9vIZDLSs52dHel5sVjE7u6uXAk55CpRBY3uq2UokHxZOck/CW3eJO7heZhXNNxwuVRQRVHXm2KP3esLmqaJTq8vYGBgjI624sqCtjhOrb0iBtt/0EsU4VszL8OremjZMNs1+J0qzEIZ8BYMykXRHI1GaHe6OBDLNmzr6MhcFPmFojyZZdFCUVbqvV5P5jTTazAYyBRjthD9fl9mEzkqFcmjTfHPCBqGgVKphGq1epTHh8dFl+PZbFYK1Ot1mXq0k8t05PipJfNi4F6pC0L12eaxITjGmpeJbdsSzH/WtNEhOqepgNDIJdF91lwmwT49VjaOdbtd2WdNG+eqQP371LsVvBW8Ffw/BHkb+uH1wU9NEEoPg9kn7Gag7VshYluexNNZfQgXsU1H4smmK6H6MbZPcJe3PTxKukjo4m2zXhc/z+yzeD6G9lrYXgW4s+rj7ntftAXeCC9eOtCWrWPuC4HHFh4mxOvr9yBE5IdzGmsuIt8miL7LI7qawf2VLTxYSWHpbVr2lz4eILIeIPJ9KvnRNQf3vjr4XPLnRPnnJ5ipDdilIuz9fTgtHW6lBHNvD/jyARjqOO8JcTbKIlR8HXqNOozNJIapXxgmN2AIjMQfDFNJ2LksAj5MOTc4nssP6F+rDtIDyhCapgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-5.png\"\n        title=\"image-5.png\"\n        src=\"/static/e1ede5253895da489e7e5379abe2da89/8c557/image-5.png\"\n        srcset=\"/static/e1ede5253895da489e7e5379abe2da89/4edbd/image-5.png 175w,\n/static/e1ede5253895da489e7e5379abe2da89/13ae7/image-5.png 350w,\n/static/e1ede5253895da489e7e5379abe2da89/8c557/image-5.png 700w,\n/static/e1ede5253895da489e7e5379abe2da89/e996b/image-5.png 1050w,\n/static/e1ede5253895da489e7e5379abe2da89/89048/image-5.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a86d7cccaf1ab98773be3a81be94aea1/89048/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAADmklEQVRIx+1WS2/TQBCOxF/gN3CniCMH/hZnTjxuHOGEEA+JhwSIFkELhbSi0DZJ7ThNkzQhryaO7TjUsePXx8zGm7qPcEAgcWClz7O7M/Pt7Ozsypl6vY5arYa9vT1wX1VVuK4L3/cRhiG4tVotaJqGIAgQx7HQSbBNp9NBLpfD8vIyMrZtwzRNTCYTQcRO0nAwGKDRaKDX66HdbqPZbIo5aSPheZ7wZWR4MBqNBAErmZjBTt1uF4qioFKpiB0UCgWxG7aVdmliRiaKIrENlrLPLab+vBYndmk/icxJ48CnrY/HCIh3QmMvopyRnMRTBJhCpCXwTy2WSa/KrW8NsVPUUFzPora2itzSa2wvvkL+7RtU1z6hmv2IIskdRUWr1z+1m+MR2iagbgGbWWDnG7C7A5QKiNVtQMsBZYVAc8om8PUTkN8ArMGJCJOcBcoWWs8eoKcpOGi34PoB9B+HMB0X5tjFjyBEa2AI2M4YfTqwXrmE788fwvv6We4ziZBW8VaXoLa7qFGZaMUibMuCpioo7+6iQyVjGgZKVItFOvVup41atYrSbhnFgz5GH5aAbjO1ZUpuQIRlyk+ecrPf6UK3R1C0ErY2v6GQz2Fomajv0wUgIoMib/Z0FCjXhY8rcN69pNMbH98yHS0m6yswFl/AK+YxqWgw6vvo9Ax0zRGssY8Dw4ZFt8arlOCSjb3yBvb714hsK9lxfLpsEFIpNKpAVaMD2oa3sQZn/TPs7CrGX7KICptTXX1vFtWpsuFbIUC1FVAJ+EmthTGXRIg4pBFLQoijWgwpIuETTG9JLCO06AB0XRcwKPmDfl/AoHur6wP0qd8n3UCM9ek8zQ3Jj+f4LWAbQcjXhUn0xEEQJo4s2ZCllTizXvZZ8ng4HArJdzvDrNKRJ3k1ueosohQJz/M4vbCcE4S8ZX5t+IliyNWkETuko0vreE6CbWaHwoRyi/w+spLJ2YnHkpiJ0hFKUtkXOeSPjEAinc+0jtPC47PsOQB+J2dlww8tg/PAUkZ4MpeyzzbyQZZ+8ZmFnTQ+fVmfvHJaMua1uYS/2/4T/if8ZwjjP4S/EyHfWS+I4M4B6xw/wuHk13aMMKSfpZweYeGRJ3DpsTfrC9D4IskrTz1cfT7tL5yBy088XLjv4p4aILPSItabzhS3nKO+HN9wcO7OGOfvusd1adwmXHdwbZ3+D236R3vXjH6Jt98jLDXCufr3hEXS10cxfgLJ/K22W0T/SgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-6.png\"\n        title=\"image-6.png\"\n        src=\"/static/a86d7cccaf1ab98773be3a81be94aea1/8c557/image-6.png\"\n        srcset=\"/static/a86d7cccaf1ab98773be3a81be94aea1/4edbd/image-6.png 175w,\n/static/a86d7cccaf1ab98773be3a81be94aea1/13ae7/image-6.png 350w,\n/static/a86d7cccaf1ab98773be3a81be94aea1/8c557/image-6.png 700w,\n/static/a86d7cccaf1ab98773be3a81be94aea1/e996b/image-6.png 1050w,\n/static/a86d7cccaf1ab98773be3a81be94aea1/89048/image-6.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Sử dụng gem ROTP để lấy mã</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">totp = ROTP::TOTP.new(&quot;base32secret3232&quot;, issuer: &quot;My Service&quot;)\ntotp.now # =&gt; &quot;492039&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47806dd62b21342bc36939e577cf3833/89048/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsSAAALEgHS3X78AAADNUlEQVRIx+1W227aQBD1//9LH9qHtlIuldrnSIEQwh2MiW1s4xu2scEwnTOwW4IKUaq8tOpKR57dOTM7e/HMGoPBgJrNJg2HQxqPx/T4+Eir1YrW6zVtNhtCs22bTNMUebvdik4BHNd1qdFo0O3tLRlJktBisaCqqsQRCCDWdU1xHMskjuPQfD4Xp+BCd+wUtmVZir0BIU1TTYISQB/GrVaL+v0+jUYjWYllWRIlOMdOVbQGlLvdTkjHgMNzDbpTvoJBFxomyvNc7ym+lyZCu+gQxr1ej+7u7mTJnU6HsOevOoRhlmV6Y4uiEFkBfQC6UyiOitxQV2G5XMryAMjKyTGOOQgAUH11xS4u+U/amxzikN7V4btH+GaHOJwgCPRfgo0Ow1DuIBp0GIMOY1EUyQn/xUv+7/BfdShFp76M6oDXeDUydlju6ItZn8VnxpVV07W1l3/H+cr4NK5pkIhDks45fBzvjW5m5/X4fhhydo93XPXWNfn5hvyM/9HVVssvkDOn2B7kjf562VpsFqzzeCwruer5QUgVUj9nZIcLes5ZuOLUHkUxZZyhq7KihOuzy7UZvCIvODmEwl9zKZ1zkfc9X+Q0XZKRFyt9QqjPqq3Y0Xa7T6jBIqDJ4eWAdmyDcc/zdAI2HNfnSrakKE64bpQUJ6nAnQfsKKIkzfjFYJE5tTTPdj3hQJ6YU+Z6ogPfCKNE8l/JIff7A65kJW3wDGECIsGsC86Jk4kpEYMHm6ra50iTHdq8HbtD5EaWFboG46GkymHBjnGv0JBkzaMlZ3mh5Xa7TdPpVCdo49mey4yev+DwLcIhhXwgtuPJGHS245LjzmUcy5qxzSKMBeZ0xvpfPox0mekNddhQRZjneH5sdOrvdnualy5zXQHxeFIRgm/E8f5kfd+Xl1aS7PuYSO3hbDaTJ4l6dUVso96J3W5Xnnx73ZqMTn9MvaFJ3cFEowfwGJYYH04WX5xswndtNJlRt3/gHdnga7SeBnSKZrvPSvPF/cRjSTXreU6NVo+eemO6uvlO199+iPzQHpDx2BnSKeC0wxFg2QUvO+YIA/47sAXoj81nMW53R3T/0KH75pPIsP0JT+3iD6NTy5EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-7.png\"\n        title=\"image-7.png\"\n        src=\"/static/47806dd62b21342bc36939e577cf3833/8c557/image-7.png\"\n        srcset=\"/static/47806dd62b21342bc36939e577cf3833/4edbd/image-7.png 175w,\n/static/47806dd62b21342bc36939e577cf3833/13ae7/image-7.png 350w,\n/static/47806dd62b21342bc36939e577cf3833/8c557/image-7.png 700w,\n/static/47806dd62b21342bc36939e577cf3833/e996b/image-7.png 1050w,\n/static/47806dd62b21342bc36939e577cf3833/89048/image-7.png 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<h2>Bước 2:</h2>\n<p>Xác định các input cần nhập và button cần click\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f2cf54e88989526ba424ea779613c412/2adcb/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACuklEQVQ4y3VT204TURTlW9Q/8PIvvvpqvLw1FiJEiRIeaAPBhHDRB2mCD4pAiGIihJIAJUgh0gtMCqWlnWk7M537dDozy30OllAbT7LPmTnZa519W32tVgthGKJQKGBxcRFbW1vI5/PIZDKQJAmO48J1XXiex435MguCAL7vg+HZfefsY85sDQ0O4sG9u/i+9gOqZiCbP0VFrEE3HWi6gYDADFCtVvlDsizDNE2O7SJsk6Oua1heXUVWKOCyUoWiqiiVL1FvyKjVayiVyhzIohIEAel0GqlUCqIo9hK2aPNdB5HYFB7G5pGh1AEfa8sJzMWiGHkdRe7khANZ+u22z1Nlgfg87YDu2t2Eoefi2fAY7j+KIJ3NcvDx4S7io4MYnxhD4azA7yzTgE3Wcm20HBseBRL47V7CttfCy+ERPO4fptrlUJdFWK51RUJnrS5RuiFKqg+h4aOoBjhXApzSt2KH8G8StmmzqTGzkxMYHejH0dERNjd/IjYxjncz07BsndeKddb2QuhOAMPxYbjMAnh+SBHebAqxG4aBlaWv+PL+AyqVS6x9W8EkPfB5aRm2Y0KqSdejIqsGNc1AQ9GJxOttCiuwpmlIbmwgn/4FVZGxv3+IU6EEsSpR3Sw+IsyPEXrUFM20YdouQvrnd94/EZqWiYWFT0jMf8TOwW+olWM0L3bhORqvXaPR4EA2s81mkzenaVDkhscf6iG0bBtzs9OYmZpE+jgHqZyDeH4A02gSgcaHmRF21pW60PXfUdK1UqLRKG7dvoPt7W3ITRPCWRlFGugLGnBZVqAoCuLxOF5EIhh6O4KBN6/w/OkTzCcSHM94GHEf23iUloVischVouk6qaSOBtVO03TubJHM9vb2kEwmsbObQpI0v76+TprPXmuaE3byZ6Sdjjk0tK7jcHPY+ff1/62bKf8Bcy8EdoJzfBEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-8.png\"\n        title=\"image-8.png\"\n        src=\"/static/f2cf54e88989526ba424ea779613c412/8c557/image-8.png\"\n        srcset=\"/static/f2cf54e88989526ba424ea779613c412/4edbd/image-8.png 175w,\n/static/f2cf54e88989526ba424ea779613c412/13ae7/image-8.png 350w,\n/static/f2cf54e88989526ba424ea779613c412/8c557/image-8.png 700w,\n/static/f2cf54e88989526ba424ea779613c412/e996b/image-8.png 1050w,\n/static/f2cf54e88989526ba424ea779613c412/2cefc/image-8.png 1400w,\n/static/f2cf54e88989526ba424ea779613c412/2adcb/image-8.png 1984w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Thực hiện điền vào các input text và click, một cách dễ dàng để thực hiện việc này là sử dụng <strong>PhantomJS</strong> thông qua gem <a href=\"https://github.com/teampoltergeist/poltergeist\"><strong>Poltergeist</strong></a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session = Capybara::Session.new(:poltergeist)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Vì 1 số websiteite sử dụng <strong><code class=\"language-text\">User-Agent</code></strong> để xác định sử dụng các JavaScript cụ thể nhưng không chạy được trong <strong>PhantomJS</strong> với <strong><code class=\"language-text\">User-Agent</code></strong> mặc định của nó, nên tốt nhất chúng ta nên sử dụng <code class=\"language-text\">Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36</code> cho <code class=\"language-text\">PhantomJS 1.x</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.driver.headers = { &#39;User-Agent&#39; =&gt; &#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36&#39; }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Tiếp theo chúng ta tiến hành load đến page login của <strong>Instagram</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.visit &#39;https://www.instagram.com/accounts/login/&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Điền <strong>username</strong> và <strong>password</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.fill_in &#39;username&#39;, with: &quot;yourusername&quot;\nsession.fill_in &#39;password&#39;, with: &quot;yourpassword&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Click button <strong>Login</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.click_button &#39;Log In&#39;\nsleep 5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Để kiểm tra kết quả trong quá trình làm chúng ta có thể <strong>Screen Shot</strong> bằng cách</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.save_screenshot(&#39;screen.png&#39;, full: true)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Thường thì sau khi click button login cần khoảng 3-5s để load page vì vậy để chắc chắn chúng ta nên thêm sleep 5s vào ở các thời điểm load page.</p>\n<p>Kết quả thu được sau khi thực hiện các bước trên.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac0728291def90a6769521c36ac9ae4d/2bef9/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeUlEQVQ4y52TTU/CQBCG+4/1zoWDXk046A/gakxIgMTEhCucPCAaRZAYFRNTKO1u2+1+9LW77ZJKKKZM8mRmd6Zvp90dh3OOMkmSbP0hyrVlnN2NcqEQYi9VYgcF9YPWXJYarOncUYJCSDDG8E0YlkFsYiHlsYISijOQ9Q8+FzODjlOR52oLpkriw2O4/yKYujFeVwkeXY4lEVCyZocxS7I/JXEzZTgZBDgbUZyPCE4HPq5fYpPTNbU6lFKB+h7mzxM8TSZ4mL1j/rZAsHYhlarXoRW1JrMD5mq7rBTbK2gvrsq6GI/H6Pf7GT307m7R63YxHA6RpumfC/6voL4e2jqdDprNJlqtFi6uLtFoNNBut01O1+wVrBotVvrkXTNiFePpCJGPmCwox5zrImawMTcHltUVHe2OpBOQED6h8AKKTYGOPT9n7ZPME6w2gfE2pmGEKIpACAGl1PgwDOHoBKERAhoayrHGJ7nXLzJ7RQNhFCOOYyNi0etfbE+ERl34C2gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-9.png\"\n        title=\"image-9.png\"\n        src=\"/static/ac0728291def90a6769521c36ac9ae4d/8c557/image-9.png\"\n        srcset=\"/static/ac0728291def90a6769521c36ac9ae4d/4edbd/image-9.png 175w,\n/static/ac0728291def90a6769521c36ac9ae4d/13ae7/image-9.png 350w,\n/static/ac0728291def90a6769521c36ac9ae4d/8c557/image-9.png 700w,\n/static/ac0728291def90a6769521c36ac9ae4d/2bef9/image-9.png 1024w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Tiếp tục sử dụng ROTP gem để lấy mã và điền vào</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.fill_in &#39;Security Code&#39;, with: ROTP::TOTP.new(&quot;base32secret3232&quot;, issuer: &quot;My Service&quot;).now</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Click button <strong>Confirm</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.click_button &#39;Confirm&#39;\nsleep 5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Giờ chúng ta có thể lấy được cookie của account bằng cách </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.visit &#39;https://www.instagram.com/&#39;\ncookie = session.driver.cookies[&quot;sessionid&quot;].value</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Sau khi lấy được để tranh việc PhantomJS ngốn memory chúng ta nên quit trình duyệt bằng cách</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">session.driver.quit</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>Tổng kết</h2>\n<ul>\n<li>Bài viết này sẽ giúp chúng ta có thể lấy được cookie của account Instgram một cách nhanh chóng và hàng loạt khi cookie account Instagram hết hạn.</li>\n<li>Cảm ơn mọi người đã dành thời gian đọc bài viết, rất mong nhận được sự góp ý từ mọi người để có thể cải thiện ở các bài viết tiếp theo.</li>\n<li>Ở Part 2 mình sẽ giới thiệu về cách crawler một bài post trên Instagram, rất mong được sự ủng hộ từ mọi người.</li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Đoàn Trung Quân </div><div class=\"custom-block-body\"></div></div>","id":"3e813bf8-47c0-5282-98f6-55617449b1c3","frontmatter":{"title":"Auto Login and Get Instagram Cookie When Your Account Enable Two-Factor Authentication ( Scraping Instagram Part 1 )","date":"25-10-2020","tags":["ruby","instagram"]},"fields":{"slug":"/auto-login-and-get-instagram-cookie-when-your-account-enable-two-factor-authentication-scraping-instagram-part-1/"}}},{"node":{"excerpt":"Thế giới ngày càng hiện đại và phát triển, đi theo nó cũng là công nghệ, các thư viện sử dụng, môi trường triển khai cũng thay đổi. Để tránh sự không đồng bộ lúc cài đặt, triển khai hệ thống đống nhất…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Thế giới ngày càng hiện đại và phát triển, đi theo nó cũng là công nghệ, các thư viện sử dụng, môi trường triển khai cũng thay đổi. Để tránh sự không đồng bộ lúc cài đặt, triển khai hệ thống đống nhất, tránh xảy ra lỗi deployment, thì một dự án open platform được ra đời, đó là Docker</p></div></div>\n<h2>Docker là gì</h2>\n<p>  Theo wikipedia:\n<em>Docker là một dự án mã nguồn mở giúp tự động triển khai các ứng dụng Linux và Windows vào trong các container ảo hóa.\"</em></p>\n<h2>Vì sao nên sử dụng Docker</h2>\n<p>Một ngày đẹp trời, được công ty cấp một con macbook pro full options mới ken để làm việc. Đúng lúc đó, bug \"ở trên\" ập xuống, developer phải mất ít nhất nửa ngày để làm quen và cài đặt môi trường để running project để develop.</p>\n<p>Trong tình thế khó khăn nhất, Boss đi kiểm tra tiến độ,bảo cài Docker thôi rồi quăng một cái lệnh, rồi nói \"làm task nhanh giúp anh nhé\", tự nhiên lúc đó thấy Boss mới xỉn xò quá...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/440c91cb531c947888976c04b394cb93/764d7/run-docker.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.14285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdUlEQVQ4y6VU2XKCQBAEb5OIIsR8g4kRici1EC/i///RZHtgAS1RU3noWgqY3u6Z3tVm8ZrsyCczEmT4Wxq4CfVdQcOvRCItkD/3nJi09w1pH34zzGBPY8aB19FmS0/rlAaSpP0ZUntZQV8E9wlt8UOz5MRkhr8jW2R5IT6i+BL199cIrTgjkIJsJGFGx6roWsEjCl+TnBCw4uNjhU3/wCJIlWUobrTbZP+SEApHpcLsrjL9lkIQTGXfLJGvU2n52fsuW4CpY+L9lSiBaLWaJj4uYqOGAjIUIDL6wmf8uYeIjRHsmBiK9f/2UOUQQD850ArL8CzgHUZUbXqp1gwPNJFE6B1sT8I928ZpefG2fORA0FvFBQSvHP75FbUgABEGooi6Tl6gwD/PvQoFgXJxdiTVSYFdMzqwUgyn60QF4vIc1zdoSaKBK8oBnhG+pac8OvIZ9ofqYqj1EbYBLpaFHbkZImXw5rVbCIpApm4atnBvyjci9Au0OcjRUIfHWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/440c91cb531c947888976c04b394cb93/8c557/run-docker.png\"\n        srcset=\"/static/440c91cb531c947888976c04b394cb93/4edbd/run-docker.png 175w,\n/static/440c91cb531c947888976c04b394cb93/13ae7/run-docker.png 350w,\n/static/440c91cb531c947888976c04b394cb93/8c557/run-docker.png 700w,\n/static/440c91cb531c947888976c04b394cb93/e996b/run-docker.png 1050w,\n/static/440c91cb531c947888976c04b394cb93/2cefc/run-docker.png 1400w,\n/static/440c91cb531c947888976c04b394cb93/764d7/run-docker.png 1782w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b59814edabcfad736c9edf950de88248/6e52c/run-docker2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQklEQVQ4y31U2XLiMBAUhHAHzJWqvOR5NzgBDBgf2BgvS+3//9Ds9Ehje7OpPHRJsqWZnp6WTDcuqOUfaXzMaBYVNA1zxoXXF3rcJNT5iBgxPbzbsf1+IvN2JLMOv8bLJqXl5kSrOKdVcqFFlJEXpjQ9XcmLSnriwMN9JhgEZwn8bcDXdUGLdUbP6Z2W57sEmYRXWqa/acVrYBIWkgAA85Z/socR+DMmQUH9t4ieMz7MQaangksvLUPGPP4lcwSd8dyLrsK25YfU4qAI3oSZhSUNt2dXki2tvztXQJn/zBndbcL6xqIxRsjw4LQ2i/Qm9CVQoAFSOYQg9lAi6x5/721T+S5zhjRpbdmKDCgHB7RMxeiQW8149Nw/ZYhKNHmXE4CZwowPF4mu2XuOHZJgrewqbCwe3fhfc8Ysdod1gOBowCwuq0Yskpt0FY2wDK11RvvczTNhqPphNANm2PEjOajdbB7ARm0AxIdmbe6mNMKhaXwz/8ho5Cc02NlOQ7um6GroQdDseCrzyhFOV0hkXnZs4gBXrhDxZ2JsyxIH0JRRA/Wtyaqg2It9qMR4LgBKVhZgJlbwazuoifV7ZZVmQ7AecibzYy/ZcW8BYbXPq3usLOGIcWMP1tANidp6U8Du6VhUXlOAJYKqjoB9beqOAvZFUh9ylyeHPxK5v8tEbGmI858d48qXsAi+1evElvrzwNDH4XB3N+Um/pvLA1BKiZ67KagCGDYapXNUoNYS20h525qZZZBWpekom794slqf3sO/2BwLB+c3nD0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/b59814edabcfad736c9edf950de88248/8c557/run-docker2.png\"\n        srcset=\"/static/b59814edabcfad736c9edf950de88248/4edbd/run-docker2.png 175w,\n/static/b59814edabcfad736c9edf950de88248/13ae7/run-docker2.png 350w,\n/static/b59814edabcfad736c9edf950de88248/8c557/run-docker2.png 700w,\n/static/b59814edabcfad736c9edf950de88248/e996b/run-docker2.png 1050w,\n/static/b59814edabcfad736c9edf950de88248/2cefc/run-docker2.png 1400w,\n/static/b59814edabcfad736c9edf950de88248/6e52c/run-docker2.png 1948w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Đó là câu chuyện có thật ai cũng đã từng trải qua, Docker được tạo ra giúp chúng ta cài đặt môi trường đồng bộ với project hiện tại. Tránh mất thời gian fix những lỗi ở môi trường system. Đây là ưu điểm chính Docker mang đến cho developer, doanh nghiệp công nghệ.</li>\n<li>Cái gì cũng có nhược điểm, Docker khá là nặng, tốn khá là nhiều tiền vào việc nâng cấp hệ thống để dùng Docker (nâng ram, thêm cpu, ...), nên việc chọn Docker làm việc triển khai, build, đóng gói sản phẩm cũng phải đắng đo xem \"túi\" của Khách Hàng có đủ \"rộng\" không.</li>\n</ul>\n<h2>Dockerfile</h2>\n<p><code class=\"language-text\">Dockerfile</code> là một tập tin dạng text chứa một tập các câu lệnh để tạo mới một Image trong Docker.</p>\n<h3>Quy Trình của Dockerfile trong Docker</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba54d53b236c62ac5f618bd20052b875/54c3a/quy-trinh.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABcRAAAXEQHKJvM/AAABRUlEQVQY02PYuWOT4OsXN5se3jtTvHDBZM7mPf+ZiyYs5cta95iNAQjklqxxV16xoch9xgLOt2f/M+VO3chdv+IlK0jOMajZ2cWlPqHFu4Fr84nNrAvnL+ZguHvniuDLZ1d+fPt8//+z+8fdwxgYOJrrY0z/5zMIMVRlqrRfuv7z2v///3XWbi75z8DA0lQdrPOliYEnOaPCwCW0/6d5w9L/KivWloMsqJm/lIPh3auHAq+eX33z69uj/x/e3A4ESfy/EczyvwjISIzlqz53+eLiR8/+a6zflgySm9npCnZ5aFKvgk/C7BdaW3f/Fz+/PwMkVrluNQdDz8wZUucuHiu5eOV446ET+7RAEn07HjKB6BWZBRwyLd0m/BNmhCZk5Ypmdy4CG+bSfYkps75aKKhggqPN5IVR8W2NMpmV9QKbNm5gBQDPr5CNQEMY6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/ba54d53b236c62ac5f618bd20052b875/8c557/quy-trinh.png\"\n        srcset=\"/static/ba54d53b236c62ac5f618bd20052b875/4edbd/quy-trinh.png 175w,\n/static/ba54d53b236c62ac5f618bd20052b875/13ae7/quy-trinh.png 350w,\n/static/ba54d53b236c62ac5f618bd20052b875/8c557/quy-trinh.png 700w,\n/static/ba54d53b236c62ac5f618bd20052b875/e996b/quy-trinh.png 1050w,\n/static/ba54d53b236c62ac5f618bd20052b875/54c3a/quy-trinh.png 1257w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Một bản build được tạo ra 1 image nhất định</li>\n<li>container là một instance của image</li>\n</ul>\n<h2>Cơ chế lưu trữ Docker</h2>\n<ul>\n<li>Lưu trữ Theo cơ chế copy on write</li>\n<li>Tạo một hệ thống mới ngay lập tức mà không cần copy tất cả file hệ thống</li>\n<li>Hệ thống lưu trữ lại mỗi lần thay đổi</li>\n</ul>\n<hr>\n<h2>Các lệnh thường dùng trong DockerFile</h2>\n<h3>FROM</h3>\n<p>Cú Pháp:  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  FROM <span class=\"token operator\">&lt;</span>base_image<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>phiên_bản<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Khởi nguồn từ image nào?</li>\n<li>Tải nếu chưa có trong local registry</li>\n<li>Là lệnh đầu tiên trong local registry</li>\n</ul>\n<h3>Maintainer</h3>\n<p>Cú Pháp:  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  MAINTAINER <span class=\"token operator\">&lt;</span>tên_tác_giả<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Khai báo tác giả của Dockerfile</li>\n</ul>\n<h3>WORKDIR</h3>\n<p>Cú Pháp:  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  WORKDIR <span class=\"token operator\">&lt;</span>đường_dẫn_thư_mục<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Định nghĩa directory cho CMD</li>\n</ul>\n<h3>CMD, ENTRYPOINT, RUN</h3>\n<p>Cú Pháp:  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  CMD <span class=\"token operator\">&lt;</span>câu_lệnh<span class=\"token operator\">></span>\n\n  RUN <span class=\"token operator\">&lt;</span>câu_lệnh<span class=\"token operator\">></span>\n\n  ENTRYPOINT <span class=\"token operator\">&lt;</span>câu_lệnh<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Chúng ta sử dụng lệnh này để chạy một command cho việc cài đặt các công cụ cần thiết cho Image của chúng ta.</li>\n<li>CMD và ENTRYPOINT thường dùng để chạy các câu lệnh running server (mysql, redis, ...) cuối cùng trong image trước khi đóng gói cuối cùng.</li>\n<li>CMD có thể bị override nếu như chúng ta run khi bắt đầu start, run container.</li>\n<li>Entrypoint sẽ không bị override.</li>\n</ul>\n<h3>ADD</h3>\n<p>Cú Pháp</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  ADD <span class=\"token operator\">&lt;</span>src<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>dest<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Câu lệnh này dùng để copy một tập tin local hoặc remote nào đó vào một vị trí nào đó trên Container.</li>\n<li>Định nghĩa biến môi trường trong Container.</li>\n</ul>\n<h3>ENV</h3>\n<p>Cú Pháp</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  ENV <span class=\"token operator\">&lt;</span>tên_biến<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Định nghĩa biến môi trường trong Container.</li>\n</ul>\n<h3>VOLUME</h3>\n<p>Cú Pháp</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  VOLUME <span class=\"token operator\">&lt;</span>tên_thư_mục<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Dùng để truy cập hoặc liên kết một thư mục nào đó trong Container.\nCó 2 loại VOLUME:</p>\n<ul>\n<li>Volume giữa host và container</li>\n<li>Volume giữa các container</li>\n</ul>\n<p>ví dụ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">volumes:\n      - ./postgres-data:/var/lib/postgresql/data\nor\n\nvolumes: ./postgres-data</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h2>Hướng dẫn tạo một VPS (VIRTUAL PRIVATE SERVER) ở local để deploy</h2>\n<p>Đây là cách mình tự vọc vạch môi trường deployment khi thời còn là dev nghèo (bây giờ cũng vậy :v). Khi developer không có môi trường server để deploy, phải chờ KH đi thuê hoặc đang gặp khó khăn về xác thực tài khoản,... dẫn đến chúng ta sẽ có thời gian \"chết\", thay vì đó có một cách khác để để build trước hệ thống, trên môi trường server.</p>\n<p>Mình áp dụng docker để build lên một con vps để deployment trên đó.</p>\n<p>Yêu cầu:</p>\n<ul>\n<li>Laptop hoặc PC, ổ cứng trên trên 40gb, (nhược điểm của Docker).</li>\n<li>Computer phải cài docker.</li>\n<li>Kiến thức về vòng đời của DockerFile.</li>\n<li>Nắm được một số lệnh cơ bản của Dockerfile.</li>\n</ul>\n<h3>Step 1: tạo một môi forder chứa tất cả các file của bài hướng dẫn</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">  $ <span class=\"token function\">mkdir</span> docker-example\n\n  <span class=\"token comment\">#tạo một Dockerfile</span>\n  $ <span class=\"token function\">touch</span> Dockerfile\n\n  <span class=\"token comment\"># mở Dockerfile lên</span>\n  $ <span class=\"token function\">vim</span> Dockerfile</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Step 2: Viết lệnh để build server nào</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">FROM ubuntu:16.04\n\nRUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y <span class=\"token function\">sudo</span>\n\nRUN <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y openssh-server <span class=\"token function\">curl</span> <span class=\"token function\">vim</span>\n\nRUN <span class=\"token function\">mkdir</span> /var/run/sshd\n\nRUN <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev <span class=\"token punctuation\">\\</span>\n    libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties <span class=\"token punctuation\">\\</span>\n    libffi-dev libgdbm-dev libncurses5-dev automake libtool bison libffi-dev net-tools <span class=\"token function\">git</span> nginx\n\nRUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'root:toor'</span> <span class=\"token operator\">|</span> chpasswd\n\nRUN <span class=\"token function\">sed</span> -i <span class=\"token string\">'s/PermitRootLogin prohibit-password/PermitRootLogin yes/'</span> /etc/ssh/sshd_config\n\nRUN <span class=\"token function\">sed</span> <span class=\"token string\">'s@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g'</span> -i /etc/pam.d/sshd\n\nENV NOTVISIBLE <span class=\"token string\">\"in users profile\"</span>\n\nRUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"export VISIBLE=now\"</span> <span class=\"token operator\">>></span> /etc/profile\n\nRUN <span class=\"token function\">useradd</span> -ms /bin/bash -p <span class=\"token number\">123123</span> longvv\n\nEXPOSE <span class=\"token number\">22</span>\nCMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"/usr/sbin/sshd\"</span>, <span class=\"token string\">\"-D\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dòng đầu tiên</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">FROM ubuntu:16.04</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>FROM nó sẽ tìm trong local registry, check thử có images ubuntu:16.04 hay không, nếu có thì lấy cái images đó. Nếu không thì pull trên docker hub về, cái này làm việc như git.</p>\n<p>Tiếp theo mình dùng <code class=\"language-text\">RUN</code> để cài cách package cơ bản, chúng ta thường hay thao tác trên terminal.</p>\n<p>Đến bước này</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'root:toor'</span> <span class=\"token operator\">|</span> chpasswd</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Mình tạo một account gồm <code class=\"language-text\">USERID</code>, và <code class=\"language-text\">PASSWORD</code> cho con ubuntu của mình.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">RUN <span class=\"token function\">sed</span> -i <span class=\"token string\">'s/PermitRootLogin prohibit-password/PermitRootLogin yes/'</span> /etc/ssh/sshd_config\n\nRUN <span class=\"token function\">sed</span> <span class=\"token string\">'s@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g'</span> -i /etc/pam.d/sshd</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Cách lệnh tiếp theo mình xác thực, phân quyền account mình vừa mới tạo cho hệ thống</p>\n<p>Có 2 cái lệnh hơi rườm rà ở đây:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">ENV NOTVISIBLE <span class=\"token string\">\"in users profile\"</span>\n\nRUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"export VISIBLE=now\"</span> <span class=\"token operator\">>></span> /etc/profile</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Đây là cách vượt qua các biến môi trường khi chạy một dịch vụ Dockerized sshd. SSHD tẩy tế bào môi trường, do đó, ENV biến chứa trong Dockerfile phải được đẩy tới /etc/profile để chúng có sẵn.</p>\n<p>Bước này là bước khi chúng ta ssh vào container của VPS, nó có lắng nghe hay không là đây.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#nếu là máy bạn đang chạy Ubuntu OS</span>\n\nEXPOSE <span class=\"token number\">22</span>\n\n<span class=\"token comment\">#nếu là Mac os</span>\n\nEXPOSE <span class=\"token number\">22</span> <span class=\"token number\">80</span> <span class=\"token number\">3000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Vì sao lại có 2 options này, tại vì HDH Mac không có thể thoải mái public port như Ubuntu, Mac OS phải qua một cái tầng bảo mật nữa, còn Ubuntu thì không.</p>\n<h3>Step 3: Bulid images từ Dockerfile nào</h3>\n<p>Ta sử dụng lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ docker build -t demo-docker <span class=\"token builtin class-name\">.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>cấu trúc: <code class=\"language-text\">docker build -t &lt;name_container&gt; &lt;thư_mục_Dockerfile&gt;</code></p>\n<p>Docker sẽ build cho chúng ta một cái image có tên là demo-docker và chạy hết những lệnh ta đã cài đặt trong Dockerfile.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/285ce76d8a9facfa11d90f9190921cb6/d544a/docker-build.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.71428571428571%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfUlEQVQ4y41U6VrCMBAsRWuBolR9CQ/usy03vP8rrTubbhKjYn/Ml4NmMjO7IRoUFT2t9zTYnA3WJ0omFbVHG7oflxR9rCh6X5oxnPvQ/e78wIQnei4u9MBEyaQUIuBuVFB7uBHIAT0Ukvr7ndmW8uJsCKeVJQPc2hD/qixEZ7YTq6/V1aqyVvXWW3gL5r3FXixDZcpqkV/KykCc1BE4VBKLIqld4DdkjnNRf3mwBQF5d76j3nxPUJ7xOlscZD+dbuWgkiECOJG9OhrMJUPk91JeJSsoiz/XcnuLR2dn8R3hnn4HRVAHUpNfUVe7krmDUaCV129/XKyEOSMZu6wUsKPQDNUm5pJ1fQ7OxDIIYRk54QOttN8qraA9WsFcVJrG3tk+VEtqEzfGQ4N/20eBauZMppa1eqKQW0H3/nxyIUyGpg9N+Qv7MjR8G/qtt+wTgiyvLYPUZudbaULmCC+iUv8YpBfDt9vUMl7K4+rIz+9IfR4zXqPysZ9bUzLGF3DDxdCDveWpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/285ce76d8a9facfa11d90f9190921cb6/8c557/docker-build.png\"\n        srcset=\"/static/285ce76d8a9facfa11d90f9190921cb6/4edbd/docker-build.png 175w,\n/static/285ce76d8a9facfa11d90f9190921cb6/13ae7/docker-build.png 350w,\n/static/285ce76d8a9facfa11d90f9190921cb6/8c557/docker-build.png 700w,\n/static/285ce76d8a9facfa11d90f9190921cb6/e996b/docker-build.png 1050w,\n/static/285ce76d8a9facfa11d90f9190921cb6/2cefc/docker-build.png 1400w,\n/static/285ce76d8a9facfa11d90f9190921cb6/d544a/docker-build.png 1950w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ta kiểm tra images bằng lệnh <code class=\"language-text\">docker images</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1061a782814e04b9b229720a7afa55b3/ea66f/docker-images.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.142857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAOklEQVQI12MQsrT/z6pvCcRW/5l1LcCY3dD6P6OOOVycCSjGBqQZtM3+sxlY/2fRswSrA9Fgth6CDQBl0xxkjqkyFAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/1061a782814e04b9b229720a7afa55b3/8c557/docker-images.png\"\n        srcset=\"/static/1061a782814e04b9b229720a7afa55b3/4edbd/docker-images.png 175w,\n/static/1061a782814e04b9b229720a7afa55b3/13ae7/docker-images.png 350w,\n/static/1061a782814e04b9b229720a7afa55b3/8c557/docker-images.png 700w,\n/static/1061a782814e04b9b229720a7afa55b3/e996b/docker-images.png 1050w,\n/static/1061a782814e04b9b229720a7afa55b3/2cefc/docker-images.png 1400w,\n/static/1061a782814e04b9b229720a7afa55b3/ea66f/docker-images.png 2828w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Step 4: Run container từ image</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"> $ docker run -d -P --name docker-app-3 demo-docker</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Cấu trúc</p>\n<p><code class=\"language-text\">docker run &lt;option&gt; &lt;tên_image&gt;</code></p>\n<p>Khi run nó sẽ tạo một container có tên là docker-app-3, để kiểm tra container đang hoạt động, ta dùng lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ docker <span class=\"token function\">ps</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/cb88c/run-container.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.428571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPklEQVQI12Ng0DL9z21i95/L2PY/i57lf0Zts/+8pvb/2QyswWyQHKu+1X8GKJsdKA7is+pbAtVYIfGtwHwAa2EcqOdPlykAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/8c557/run-container.png\"\n        srcset=\"/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/4edbd/run-container.png 175w,\n/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/13ae7/run-container.png 350w,\n/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/8c557/run-container.png 700w,\n/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/e996b/run-container.png 1050w,\n/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/2cefc/run-container.png 1400w,\n/static/855e5831d1c0fc4cbdd62ee6f3ffc2df/cb88c/run-container.png 2728w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Chúng ta đã tạo ra một con VPS không khác những VPS ta hay đi thuê ở AWS hoặc AZURE,...</p>\n<h3>Step 5: SSH vào con server vào vọc nào</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/53b5a9bf021d8e5266d423b0d8a95561/df438/result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzUlEQVQoz42R2w6CMBBEqYiIgGLiRxjlKneKgMb//6W1UwHxQfRhsmTbmZ5dFKfoaJffpLZZR3rEibk5sXMm62KQJ3puRsopJUWcfZWVtGQmDZlxI+s6qslOWzIuNekhp1VYSeEh1St+Bx74Q4RwWvol2dmLdl/cyRGyRLAMOcZCyTtsLhQmUG3i64dAa/WkRt/7ixDjwYwqJShRh51qQTWOrvrFb0q8DEJpFKPDjJ7erwF9LShlIL7xo2YpsSuQQBgPl9nkAptoNM0EPgFRSsbiEmA7NAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"Title\"\n        src=\"/static/53b5a9bf021d8e5266d423b0d8a95561/8c557/result.png\"\n        srcset=\"/static/53b5a9bf021d8e5266d423b0d8a95561/4edbd/result.png 175w,\n/static/53b5a9bf021d8e5266d423b0d8a95561/13ae7/result.png 350w,\n/static/53b5a9bf021d8e5266d423b0d8a95561/8c557/result.png 700w,\n/static/53b5a9bf021d8e5266d423b0d8a95561/e996b/result.png 1050w,\n/static/53b5a9bf021d8e5266d423b0d8a95561/2cefc/result.png 1400w,\n/static/53b5a9bf021d8e5266d423b0d8a95561/df438/result.png 1556w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Chắc cái bạn làm đến đây nên cần chú ý</p>\n<p>Trong DockerFile mình có <code class=\"language-text\">EXPOSE PORT 22</code>, container sẽ random cái port khác để ta ssh (ví dụ trong hình là 32779).</p>\n<p>Tới bước gõ pass có thể các bạn có thể cũng quên, Mình có tạo một user cho SYSTEM qua lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'root:toor'</span> <span class=\"token operator\">|</span> chpasswd</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>USERID: root\nPASSWORD: toor</p>\n<p>OK, mọi thứ đã xong, giờ deoloy hệ thống các bạn lên VPS này thử nào.</p>\n<hr>\n<p>Nếu các bạn muốn deploy một cái app chạy bằng Rails bằng Capitano gem</p>\n<p>Mình suggest các bạn nên đọc <a href=\"https://viblo.asia/p/huong-dan-deploy-ung-dung-ruby-on-rails-len-server-aws-ec2-su-dung-gem-capistrano-puma-va-nginx-Eb85oXDWK2G#_add-ssh-key-authentication-7\">bài này</a> của trang viblo.</p>\n<p>Cảm ơn các bạn đã đọc bài viết đầu tay của mình. &#x3C;3</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Long Vui Vẻ (longvv) </div><div class=\"custom-block-body\"></div></div>","id":"c7f5d710-873c-5ec8-a5b8-954ceb5eb976","frontmatter":{"title":"Create VPS (Virtual Private Server) by Docker and Dockerfile","date":"24-10-2020","tags":["Docker"]},"fields":{"slug":"/create-vps-virtual-private-server-by-docker-and-dockerfile/"}}},{"node":{"excerpt":"Tiếp nối chương trước, chương này, tôi sẽ đi chi tiết hơn vào cách đặt tên. Meaningful names Có 2 ví dụ như này Chắn chắn, tôi sẽ chọn viết theo kiểu viết thứ 2. Đây là một ví dụ của việc đặt tên có…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Tiếp nối chương trước, chương này, tôi sẽ đi chi tiết hơn vào cách đặt tên.</p></div></div>\n<h4>Meaningful names</h4>\n<p>Có 2 ví dụ như này</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token comment\"># bad</span>\nc <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>comments<span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>published<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nm <span class=\"token operator\">=</span> c<span class=\"token punctuation\">.</span>max_by<span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token symbol\">:rating</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># good</span>\npost_comments <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>comments<span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>published<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\ntop_rated_comment <span class=\"token operator\">=</span> post_comments<span class=\"token punctuation\">.</span>max_by<span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token symbol\">:rating</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chắn chắn, tôi sẽ chọn viết theo kiểu viết thứ 2. Đây là một ví dụ của việc đặt tên có nghĩa</p>\n<ul>\n<li>\n<p>Reveal Intention (tiết lộ ý định)</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">Document</span><span class=\"token comment\">#write_to_file(path)</span>\n<span class=\"token constant\">MessageService</span><span class=\"token comment\">#send(from, to, body)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Chỉ cần nhìn vào đoạn code trên, tôi có thể hiểu rõ ý định của function <code class=\"language-text\">write_to_file</code> hay <code class=\"language-text\">send</code> mà thậm chí tôi không cần đọc nội dung code bên trong nó. Một số chú ý, khi bạn muốn đặt tên theo kiểu này:</p>\n<ul>\n<li>Name as a comment:</li>\n</ul>\n<p>Tôi thường hạn chế comment ít nhất có thể. Bởi vì, chẳng ai rảnh mà đọc comment của bạn đâu.</p>\n<p>Nhưng, có một số trường hợp, tôi vẫn phải comment lại. Đó là khi</p>\n<ul>\n<li>function thể hiện một logic phức tạp, khó có thể định nghĩa trong một câu</li>\n<li>bạn không thể tìm được một câu mô tả chính xác những gì bạn làm</li>\n<li>A word or a sentence</li>\n</ul>\n</li>\n<li>\n<p>Avoid Disinformation: tránh xa những thông tin dễ gây nhầm lẫn hoặc sai lệch</p>\n<p>Ví dụ, nếu bạn đặt tên biến là O (chữ o hoa) hay l (chữ l thường), nhìn rất giống 0 (số 0) hay 1 (số 1).</p>\n<p>Hay như, <code class=\"language-text\">arr = {}</code>, rõ ràng, việc tôi đặt tên là <code class=\"language-text\">arr</code> đã dẫn đến việc hiểu nhầm loại dữ liệu được xử lý, nếu ai đó, bỏ qua dòng khai báo kia của tôi</p>\n</li>\n<li>\n<p>Simplest</p>\n<p>Đặt tên <code class=\"language-text\">đơn giản nhất có thể</code> và <code class=\"language-text\">mọi người đều có thể hiểu</code></p>\n<p>Tôi có thể ví dụ cho bạn 2 cách đặt tên như sau</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">isSumOfPrecedingTwoNumber</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isFibonacciNumber</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Tôi nghĩ bạn đã có câu trả lời cho mình.</p>\n</li>\n<li>\n<p>Can reading</p>\n<p>Viết rõ ràng, dễ hiểu, hạn chế viết tắt</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DtaRcrd102</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> Date genymdhms<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> Date modymdhms<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Customer</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> Date generationTimestamp<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> Date modificationTimestamp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Việc đặt tên như class đầu, rất khó hiểu, trong khi với class thứ hai, tôi không tốn thêm mấy thời gian.</p>\n<p>Viết tắt, giúp tôi giảm bớt thời gian, nhưng đó là chỉ lúc đặt tên thôi.</p>\n<p>Bởi vì, các editor hay IDE bây giờ làm quá tốt việc suggest rồi, tôi viết tắt chút, nó cũng gợi ý chính xác cho tôi rồi.</p>\n</li>\n<li>\n<p>Searchable</p>\n<p>Các IDE hiện đại, giúp ích rất nhiều cho việc inspect code. Nhưng vì đặc thù của các ngôn ngữ hay thư viện được sử dụng, chúng ta vẫn phải search xem biến đó được dùng ở đâu.</p>\n<ul>\n<li>More 3 letter</li>\n</ul>\n<p>Nếu tôi đặt tên biến chỉ là a, b, c. Nó sẽ hạn chế rất nhiều khả năng tìm được nơi sử dụng của biến tôi đang tìm.</p>\n<ul>\n<li>Use Constant >=&#x3C; Hardcode</li>\n</ul>\n<p>Hardcode là việc luôn phải tránh. Thay vì hardcode, tôi sử dụng biến Constant để thay thế. Nó vừa giúp tôi DRY code, mà việc DRY đó, còn giúp tôi không bao giờ phải search xem cái số được hardcode đó sử dụng những đâu.</p>\n</li>\n</ul>\n<h4>Function</h4>\n<ul>\n<li>\n<p>Do one thing</p>\n<p>Nếu function của tôi có nhiều hơn một nhiệm vụ hoặc là những nhiệm vụ (A, B, C) phân biệt nhau bởi switch, tôi sẽ không viết chung chúng vào một function X.</p>\n<p>Lúc này, tôi sẽ tách thành 3 function A, B, C và gọi chúng trong function X.</p>\n<p>Việc đọc lại code sẽ rất nhanh, bởi vì, tôi đã phân chia chúng rõ ràng.</p>\n</li>\n<li>\n<p>The stepdown rule</p>\n<p>Cũng khá giống như trên, nếu function của tôi là tổng hợp của các bước A1, A2, A3.</p>\n<p>Tôi sẽ không có lý do gì để viết chung chúng vào 1 function A.</p>\n<p>Việc tách nhỏ, khiến tôi đọc lại code nhanh hơn.</p>\n</li>\n<li>\n<p>Switch statements</p>\n<p>Thú thực,  <code class=\"language-text\">Switch statements</code> trông khá khó nhìn, nhưng nếu áp dụng quy tắc <code class=\"language-text\">Do one thing</code> ở trên vào, tôi sẽ được một function khá dễ nhìn.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Employee</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">calculatePay</span></span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">case</span> type\n  <span class=\"token keyword\">when</span> <span class=\"token symbol\">:fullTime</span>\n    calculatePayForFullTime\n  <span class=\"token keyword\">when</span> <span class=\"token symbol\">:partTime</span>\n    calculatePayForPartTime\n  <span class=\"token keyword\">else</span>\n    <span class=\"token keyword\">raise</span> <span class=\"token constant\">Invalid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">EmployeeType</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Function arguments</p>\n<p>Một function với số lượng biến không xác định, quả thật sẽ làm tôi băn khoăn.</p>\n<p>Như ví dụ dưới đây, bất cứ khi nào <code class=\"language-text\">Employee</code> của tôi phát sinh thêm một field mới, tôi sẽ lại phải thêm biến vào trong function này ?</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Employee</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">create</span></span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> address<span class=\"token punctuation\">,</span> phone<span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">,</span> birthday<span class=\"token punctuation\">,</span> gender<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để giải quyết vấn đề trên, tôi cần xác định</p>\n<ul>\n<li>Maximum arguments number is 3:</li>\n</ul>\n<p>Đây là một con số đẹp để tôi có thể dễ dàng nhớ cách sử dụng function.</p>\n<p>Tuỳ từng trường hợp, có thể 5 là số tối đa</p>\n<ul>\n<li>Argument objects: Khi số lượng biến yêu cầu tăng lên, nhóm những biến có đặc điểm chung vào 1 object.</li>\n</ul>\n<p>Để dễ hiểu, bạn hãy xem cách tôi refactor class <code class=\"language-text\">Employee</code> trên</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Employee</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">create</span></span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> employee_information <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmployeeInformation</span>\nattribute <span class=\"token symbol\">:address</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:phone</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:description</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:birthday</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:gender</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Doing or Answer</p>\n<p>Một function chỉ thực hiện 1 trong 2 hành động: Doing or Answer</p>\n<p>Không bao giờ thực hiện 2 việc cùng lúc.</p>\n<p><em>Ví dụ:</em></p>\n<p>answer ở đây: <code class=\"language-text\">findByPaidUser</code> chỉ trả về tất cả các Paid User, không thực hiện bất kỳ hành động nào.</p>\n</li>\n</ul>\n<h4>Variable</h4>\n<ul>\n<li>\n<p>Relevant for the context</p>\n<p>Tuỳ thuộc vào từng bối cảnh, có thể cách đặt tên biến trong một bối cảnh này là không thể được, nhưng trong một bối cảnh khác, nó được chấp nhận</p>\n</li>\n<li>Long name</li>\n<li>\n<p>Short name</p>\n<p>Thường thì tên biến sẽ dài từ 3 -> 31. Nó đủ để tôi có thể đặt một tên phù hợp với bối cảnh bài toán.</p>\n</li>\n</ul>\n<h4>Ruby on Rails</h4>\n<p>Dưới đây là một số convention mà tôi áp dụng trong các project RoR:</p>\n<ul>\n<li>\n<p>Case style:</p>\n<p>Class: PascalCase</p>\n<p>variable or method: snake_case</p>\n<p>Constant: SNAKE_CASE</p>\n</li>\n<li>\n<p>Naming convention:</p>\n<ul>\n<li>Sử dụng prefix là <code class=\"language-text\">is_</code> nếu giá trị của biến là boolean</li>\n<li>Sử dụng suffix là <code class=\"language-text\">!</code> nếu function ép buộc giá trị thành <code class=\"language-text\">true</code></li>\n</ul>\n</li>\n</ul>\n<h4>Tips and tricks</h4>\n<p>Đôi khi, tôi không biết cách đặt tên như thế nào.</p>\n<p>Có thể, tôi sẽ viết rõ ràng comment và mô tả ra.</p>\n<p>Hoặc, tôi sẽ cứ đặt một cái tên trước, sau khi code xong, lúc này, tôi có thể <code class=\"language-text\">sáng suốt hơn</code> để... đặt tên lại.</p>\n<p>Đây là những kiến thức được tôi khái quát và cá nhân hoá. Nó giúp đỡ tôi rất nhiều khi đặt tên khi coding.</p>\n<p>Bạn có ý tưởng gì mới, hãy comment chúng ta cùng trao đổi nhé !</p>","id":"c20a555e-e4bb-5ffc-af31-50fa54a8f1f5","frontmatter":{"title":"Naming convention - part 2","date":"20-10-2020","tags":["convention"]},"fields":{"slug":"/naming-convention-2/"}}},{"node":{"excerpt":"Khi mới bắt đầu làm việc với Laravel, mình tin là nhiều người không biết hoặc không có thói quen \"khai thác\" hết những tính năng của Model. Vì vậy, trong bài viết này mình sẽ giới thiệu đến các bạn…","html":"<p>Khi mới bắt đầu làm việc với Laravel, mình tin là nhiều người không biết hoặc không có thói quen \"khai thác\" hết những tính năng của Model.</p>\n<p>Vì vậy, trong bài viết này mình sẽ giới thiệu đến các bạn 7 điều cần biết để tận dụng tối đa Model, giúp mọi thứ sẽ đơn giản hơn rất nhiều.</p>\n<h2>Tạo Model</h2>\n<p>Đầu tiên chúng ta hãy tạo 1 model có tên <strong>Blog</strong> cho dễ thực hành nhé: </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"> php artisan make<span class=\"token punctuation\">:</span>model Blog </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Giờ chúng ta đã có Model rồi, bắt đầu vào tìm hiểu sức mạnh đầu tiên nào.</p>\n<h2>1. Casting attributes</h2>\n<p>Casting attributes - tức là bạn có thể chuyển đổi thuộc tính thành 1 kiểu dữ liệu nhất định, ví dụ như sau: </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$casts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>  \n    <span class=\"token single-quoted-string string\">'is_published'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'boolean'</span>  \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi khai báo như vậy, bất kể khi nào truy cập tới <em>is_published</em> thì nó cũng sẽ ở dạng boolean kể cả khi trong database bạn lưu ở dạng interger. </p>\n<p>Ngoài ra còn có rất nhiều kiểu chuyển đổi khác như là <em>date</em>, <em>datetime</em>.</p>\n<p>Khi mới bắt đầu, mình có thói quen viết thế này ở blade  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">{{ $blog->created_at->format ('Y-m-d') }}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và tất nhiên, nếu ở 1 blade khác cần dùng truy cập với <em>created_at</em> thì mình sẽ phải viết đi viết lại rất nhiều lần. Giờ đây điều này có thể thay thế bằng cách sử dụng thuộc tính $casts : </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$casts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'created_at'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'datetime:Y-m-d'</span><span class=\"token punctuation\">,</span> \n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Thuộc tính <em>created_at</em> sẽ luôn trả về theo định dạng <em>Y-m-d</em> và chúng ta không cần phải thực hiện bất kỳ công việc format nào nữa.</p>\n<h2>2. Accessors</h2>\n<p>Đôi khi bạn muốn kết hợp nhiều thuộc tính thành một hoặc bạn chỉ muốn định dạng một thuộc tính. Điều này có thể được thực hiện với <strong>Accessors</strong> trong Laravel.</p>\n<p>Mình sẽ lấy 1 ví dụ. Trong bảng <em>users</em>, có 2 trường là \"<em>first_name</em>\" và \"<em>last_name</em>\".  Nếu muốn hiển thị tên đầy đủ của người đó, có thể viết như sau </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">first_name</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' '</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">last_name</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đó là một cách tiếp cận rất ngây thơ. Cách Laravel để giải quyết vấn đề này là sử dụng một Accessors. Đây là một phương thức được định nghĩa trong một Model với cú pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">get[NameOfAttribute]Attribute</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Với bài toán mình vừa đưa ra ở trên, nếu muốn lấy <em>full_name</em> , bạn cần viết như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> getFullNameAttribute <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">return</span>  <span class=\"token double-quoted-string string\">\"<span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span> first_name<span class=\"token punctuation\">}</span></span> <span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span> last_name<span class=\"token punctuation\">}</span></span>\"</span> <span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó, muốn truy cập đến <em>full_name</em> chỉ cần gọi </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">full_name</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>3.  Mutators</h2>\n<p>Ngược với  <strong>Accessor</strong>,  <strong>Mutators</strong>  cho phép chúng ta định dạng lại giá trị thuộc tính trước khi lưu vào Database. Có cú pháp giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setLastNameAttribute</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'last_name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">ucfirst</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Ví dụ trên sẽ apply hàm  <em>ucfirst()</em>  cho  <em>last</em>name_  và lưu kết quả vào trong  <em>$attributes</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">last_name</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'jones'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả sẽ là 'Jones'.</p>\n<h2>4. Visibility</h2>\n<p>Có một vài thuộc tính không nên được chứa trong dữ liệu được lấy ra, ví dụ như thuộc tính <em>password</em>. Và đây là trường hợp mà <strong>Visibility</strong> phát huy tác dụng, chúng ta có thể sử dụng thuộc tính <strong>$hidden</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$hidden</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'password'</span> \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nói đơn giản nhất, hidden tức là không hiển thị. Thuộc tính <strong>$hidden</strong> giống như một blacklist cho thuộc tính. </p>\n<p>Và ngoài ra, chúng ta cũng có thể sử dụng thuộc tính <strong>$visible</strong> được coi là whitelist cho thuộc tính.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$visible</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'first_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'last_name'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi sử dụng thuộc tính  <strong>$visible</strong>  trong model, thì các thuộc tính không được thiết lập sẽ tự động ẩn.</p>\n<h2>5. Appending values</h2>\n<p>Khi một Model có  <em>accessors</em>  và  <em>relations</em>, theo mặc định chúng sẽ không được thêm vào array và JSON của Model. Để làm điều này, chúng ta phải thêm  <em>accessors</em>  và  <em>relations</em>  vào thuộc tính  <em><strong>$appends</strong></em>  của model. Ví dụ với thuộc tính  <em>full</em>name_:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><em>Chú ý: Accessors được thêm vào thuộc tính $append sử dụng snack case chứ không phải camel case.</em></p>\n<p>Giả sử model User có quan hệ 1 - n với model Blog:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">blogs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span>App\\<span class=\"token package\">Blog</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để thêm blog vào model chỉ cần thêm vào thuộc tính  <em>$appends</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'blogs'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể chỉ định thuộc tính thêm vào. Ví dụ, chúng ta muốn thêm thuộc tính blog id và title vào model:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'blogs:id,title'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>6. Touches</h3>\n<p>Khi một model có mối quan hệ  <em>BelongsTo</em>  hoặc  <em>BelongsToMany</em>  với model khác, như trong trường hợp này: Comment model thuộc về một Blog, khi bạn sửa một comment và bạn muốn blog liên quan đến comment này cũng sẽ cập nhật lại thời gian, điều này có thể được thực hiện bằng cách thêm mối quan hệ vào thuộc tính  <em>$touches</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Comment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$touches</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'blog'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">blog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span>App\\<span class=\"token package\">Blog</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi Comment model được update, thì thuộc tính  <em>updated</em>at_  của Blog model liên quan với comment này sẽ được cập nhật tự động.</p>\n<h2>Kết luận</h2>\n<p>Trên đây làm 6 điều quan trọng cần biết để có thể tận dụng tối đa Model, nếu như chưa có thói quen sử dụng thì mình khuyên các bạn nên thay đổi, ngay sau khi đọc được bài viết này :D </p>\n<p>Cảm ơn và hẹn gặp lại trong những bài viết mới nhé ! See yaaaa</p>\n<p> <em>From Vnus with love ....</em></p>","id":"1fae4a51-206d-5548-b2fb-6e76106c17a6","frontmatter":{"title":"6 things you need to know to get the most out of your Laravel Model","date":"19-10-2020","tags":["php","laravel"]},"fields":{"slug":"/6-things-you-need-to-know-to-get-the-most-out-of-your-laravel-model/"}}},{"node":{"excerpt":"Đối với developer, việc đặt tên là việc thường xuyên phải làm. Đôi khi, thật dễ dàng để đặt tên cho một đối tượng hay một hành động nào đó. Nhưng, khi một project quá lớn, số đối tượng ngày càng phình…","html":"<p>Đối với developer, việc đặt tên là việc thường xuyên phải làm.</p>\n<p>Đôi khi, thật dễ dàng để đặt tên cho một đối tượng hay một hành động nào đó.</p>\n<p>Nhưng, khi một project quá lớn, số đối tượng ngày càng phình to, việc đặt tên của tôi ngày càng khó khăn.</p>\n<h4>Problem</h4>\n<p>Thậm chí, tôi còn lăn tăn, liệu tôi có thể đặt tên trùng với một thành viên nào đó trong team không.</p>\n<p>Có một số vấn đề tôi thường gặp phải khi đặt tên:</p>\n<ul>\n<li>Conflict name: đây là vấn đề thường gặp nhất, khi project của tôi có nhiều thành viên.</li>\n<li>\n<p>Obscure (Dark): Tối nghĩa, cái tên chẳng nêu lên được ý nghĩa của hành động được thực hiện.</p>\n<p>Việc này thường xảy ra với những bạn chưa hiểu rõ được spec, hoặc đôi khi, bạn chẳng nghĩ ra được cái tên gì nó thực tế, nên đặt cho có lệ</p>\n</li>\n<li>Complex: tên quá dài, trong khi đó, tôi có thể đặt ngắn gọn hơn nhưng vẫn giữ được ý nghĩa đầy đủ.</li>\n</ul>\n<h4>Goal</h4>\n<p>Rõ ràng, việc đặt tên chuẩn, giúp tôi có lướt nhanh project mà không cần thiết phải đọc từng dòng code một.</p>\n<p>Với một chút ít kinh nghiệm coding của tôi, hiện tại, tôi có thể:</p>\n<ul>\n<li>Dễ dàng đặt tên biến hoặc tên function.</li>\n<li>Sử dụng ít thời gian đọc lại code nhất có thể</li>\n<li>Bất kỳ ai cũng có thể đọc hiểu code</li>\n</ul>\n<h4>The first requirement</h4>\n<p>Mỗi người đều có một tính cách và hành động riêng. Nhưng, hiển nhiên, tôi sống trong một xã hội, và tôi phải tuân thủ theo những quy tắc, luật lệ được đặt ra.</p>\n<p>Tương tự, việc naming, tôi cũng không thể bừa bãi được.</p>\n<h5>Reserved Word</h5>\n<p>Theo wikipedia</p>\n<blockquote>\n<p>Trong ngôn ngữ máy tính, một từ dành riêng, còn được gọi là định danh dành riêng là một từ không thể được sử dụng làm định danh, chẳng hạn như tên của một biến, hàm hoặc nhãn - đó là \"dành riêng cho việc sử dụng\"</p>\n</blockquote>\n<p>Như vậy, ngay ở cách định nghĩa, nó đã yêu cầu tôi tránh xa <code class=\"language-text\">Reserved Word</code>.</p>\n<p><code class=\"language-text\">Reserved Word</code> tuỳ thuộc vào từng programing language hay framework bạn sử dụng.</p>\n<p>Ví dụ:</p>\n<p>Đối với Ruby, reserved word là: alias, and, class, def ,else, ...</p>\n<p>Đối với Ruby on Rails, là: ActionController, ActionView, Binding</p>\n<p>Đối với javascript, là: function, char, var, ...</p>\n<p>Tôi có thể dùng từ khoá: <code class=\"language-text\">Reserved Word + Programing language</code> để có thể tìm hiểu thêm về các language khác.</p>\n<h5>Convention</h5>\n<p>Việc tuân theo convention, giúp tôi có thể naming một cách thống nhất, thoải mái, hạn chế tối đa sai sót có thể xảy ra.</p>\n<ul>\n<li>\n<p>Project convention</p>\n<p>Khi bạn tham gia vào một dự án, việc tuân thủ quy tắc của dự án là việc bắt buộc. Có thể quy tắc này khá lạ lẫm và nghịch lý với bạn và với ngôn ngữ bạn sử dụng. Nhưng, hãy nhớ tuân theo, mọi người trong dự án đang sử dụng, bạn đừng phá vỡ nó, mọi người sẽ khá khó chịu khi đọc code của bạn đó.</p>\n</li>\n<li>\n<p>Programing convention (Style guide)</p>\n<p>Nhưng <code class=\"language-text\">Style guide</code> này quy định, cách comment, lùi dòng, hay có thể giúp tôi optimize code luôn.</p>\n<p>Và đặc biệt là tên biến được đặt theo quy tắc nào. Việc này, giúp tôi không đặt tên biến loạn xì ngậu lên.</p>\n<p>Mỗi một ngôn ngữ đều có một hoặc rất nhiều bộ quy tắc. Ví dụ Javascript có rất nhiều style guide: <a href=\"https://google.github.io/styleguide/jsguide.html\">Google JavaScript Style Guide</a>, <a href=\"https://github.com/airbnb/javascript\">Airbnb JavaScript Style Guide</a> . Hãy lựa chọn một bộ quy tắc. Đừng tham, nếu bạn không hiểu rõ từng quy tắc một trong từng bộ quy tắc.</p>\n</li>\n<li>\n<p>Personal</p>\n<p>Ngoài những quy tắc chung kể trên, hãy tự tạo cho mình một số quy tắc, đừng phá vỡ quy tắc chung.</p>\n</li>\n</ul>\n<h4>Structure &#x26; Namespace</h4>\n<p>Tôi có thể cho bạn một ví dụ sau</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// application.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">saveresume</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">previewsaveresume</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>dset<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> dset<span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là một ví dụ nhỏ, tôi có thể dễ dàng đọc hiểu được.</p>\n<p>Nếu tôi code lại, chúng như thế này, liệu có thể dễ hiểu hơn ?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// resume.js</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Resume</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value<span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">preview</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>dset<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> dset<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tôi đã <code class=\"language-text\">Structure</code> lại (chuyển chúng ra file resume.js) và <code class=\"language-text\">Namespace</code> (sử dụng object <code class=\"language-text\">Resume</code>).</p>\n<p>Việc <code class=\"language-text\">chia nhỏ</code> như trên, giúp tôi không bị conflict với bất kỳ một tác vụ nào có thể phát sinh. Biết đâu, trong quá trình coding, tôi có thể phát sinh thêm nhiều <code class=\"language-text\">save</code> và <code class=\"language-text\">preview</code> với một đối tượng nào đó. Nó có thể khiến tôi nhầm lẫn. Do đó, tôi <code class=\"language-text\">chia để trị</code></p>\n<h4>Case style</h4>\n<p>Khi code javascript, tôi hay gặp trường hợp, cùng một developer, lúc thì bạn đó viết: <code class=\"language-text\">save_file</code>, lúc thì bạn viết <code class=\"language-text\">saveFile</code>.</p>\n<p>Thật may mắn, khi bạn sử dụng <code class=\"language-text\">Programing convention (Style guide)</code> mà tôi đã nhắc ở trên, nó hạn chế việc bạn đặt tên lung tung như vậy.</p>\n<p>Vậy có bao nhiêu loạ <code class=\"language-text\">case style</code></p>\n<ul>\n<li>camelCase: sử dụng để khai báo biến</li>\n<li>PascalCase: sử dụng để khai báo class</li>\n<li>\n<p>snake_case</p>\n<ul>\n<li>snake_case: tên trường hoặc bảng trong database, hay là <code class=\"language-text\">instance variable</code></li>\n<li>SNAKE_CASE: sử dụng như một hằng số</li>\n</ul>\n</li>\n<li>keybab-case: sử dụng trong url</li>\n</ul>\n<p>Dài quá, tôi sẽ tiếp tục ở phần 2</p>","id":"9499eed3-19b5-504c-8007-65201bfc4445","frontmatter":{"title":"Naming convention - part 1","date":"19-10-2020","tags":["convention"]},"fields":{"slug":"/naming-convention-1/"}}},{"node":{"excerpt":"Amazon Elastic Container Registry (ECR) là dịch vụ lưu trữ bộ chứa Docker được quản lý đầy đủ giúp các nhà phát triển dễ dàng lưu trữ, quản lý và triển khai hình ảnh bộ chứa Docker. Amazon ECR được…","html":"<p>Amazon Elastic Container Registry (<strong>ECR</strong>) là dịch vụ lưu trữ bộ chứa <a href=\"https://aws.amazon.com/vi/docker/\">Docker</a> được quản lý đầy đủ giúp các nhà phát triển dễ dàng lưu trữ, quản lý và triển khai hình ảnh bộ chứa Docker. Amazon <strong>ECR</strong> được tích hợp với <a href=\"https://aws.amazon.com/vi/ecs/\">Amazon Elastic Container Service (ECS)</a>, giúp đơn giản hóa quy trình công việc từ khi khâu phát triển đến khâu sản xuất. Amazon ECR giúp bạn không phải vận hành các kho bộ chứa riêng hay thay đổi quy mô cơ sở hạ tầng ngầm. Amazon ECR sẽ trở thành máy chủ lưu trữ hình ảnh của bạn trong kiến trúc có độ sẵn sàng cao và quy mô linh hoạt, cho phép bạn triển khai các bộ chứa cho ứng dụng của mình một cách ổn định. Khả năng tích hợp với AWS Identity and Access Management (<strong>IAM</strong>) đem đến cho bạn khả năng kiểm soát từng kho ở cấp tài nguyên. Với Amazon <strong>ECR</strong>, bạn sẽ không phải trả tiền trước hay có cam kết gì. Bạn chỉ phải chi trả chi phí cho lượng dữ liệu bạn lưu trong các kho cũng như dữ liệu được truyền lên Internet.\n<img src=\"https://d1.awsstatic.com/diagrams/product-page-diagrams/Product-Page-Diagram_Amazon-ECR.bf2e7a03447ed3aba97a70e5f4aead46a5e04547.png\" alt=\"enter image description here\"></p>\n<h1>Lợi ích</h1>\n<ul>\n<li>Đây là dịch vụ lưu trữ Docker image cho các dự án và nhiều môi trường sử dụng nền tảng đám mây <strong>AWS</strong>, ECR cho phép bạn tạo phân vùng theo <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html\">region</a> định sẵn.</li>\n<li>Sự kết hợp tuyệt vời với <strong>AWS \u001dBeanstalk</strong>, đối với các dự án tích hợp deploy bằng CI/CD khi \u001c sử dụng đến <em>Beanstalk</em> thì Docker ECR là một trong những sự lựa tối ưu và đa dụng \u001dnhất trong hệ sinh thái đám mây AWS.</li>\n<li><strong>Docker ECR</strong> được mã hoá file và sử dụng AWS Identity nên chỉ có thể truy cập và sử dụng nếu có Identity, bạn không thể copy nguyên link của Docker image này rồi truy cập ở một nơi khác khi không có Identity được. Bạn có thể build image từ local, CI/CD và pust lên Docker ECR kèm theo <strong>Identity</strong> đã cho.</li>\n<li>\n<p>Dựa vào region đã định sẵn nên tốc độ build/deploy dự án sẽ nhanh hơn là dùng Docker hub, bạn có thể sử dụng một repo chứa nhiều môi trường(test, develop, staging).</p>\n<h2>Được quản lý toàn phần</h2>\n</li>\n</ul>\n<p>Amazon Elastic Container Registry giúp bạn không phải vận hành và thay đổi quy mô cơ sở hạ tầng để làm nền tảng hoạt động cho sổ đăng ký bộ chứa của mình. Bạn sẽ không cần phải cài đặt và quản lý phần mềm hay thay đổi quy mô cơ sở hạ tầng. Chỉ cần đẩy hình ảnh trong bộ chứa của bạn lên Amazon ECR và lấy hình ảnh ra bằng bất kỳ công cụ quản lý bộ chứa nào khi bạn cần triển khai.</p>\n<h2>Độ sẵn sàng cao</h2>\n<p>Amazon Elastic Container Registry có kiến trúc bền bỉ, dư thừa và có quy mô cực kỳ linh hoạt. Các hình ảnh trong bộ chứa của bạn rất dễ sử dụng và truy cập, nên bạn có thể triển khai ổn định các bộ chứa mới cho ứng dụng của mình.</p>\n<h2>Bảo mật</h2>\n<p>Amazon Elastic Container Registry truyền hình ảnh của bạn qua kết nối HTTPS và tự động mã hóa hình ảnh được lưu trữ của bạn. Bạn có thể cấu hình các chính sách để quản lý quyền và kiểm soát truy cập vào hình ảnh của bạn bằng cách sử dụng người dùng và vai trò của AWS Identity and Access Management (IAM) mà không phải trực tiếp quản lý thông tin xác thực trên phiên bản EC2.</p>\n<h2>Quy trình công việc đơn giản hoá nhất có thể</h2>\n<p>Amazon Elastic Container Registry được tích hợp với Amazon ECS và CLI Docker, đem đến cho bạn khả năng đơn giản hóa quy trình công việc phát triển và sản xuất. Bạn có thể dễ dàng đẩy hình ảnh trong bộ chứa của bạn lên Amazon ECR bằng cách sử dụng CLI Docker từ bộ máy phát triển của bạn rồi Amazon ECS sẽ có thể lấy trực tiếp từ đó để phục vụ quá trình triển khai sản xuất.</p>\n<h1>Kết hợp với CI/CD</h1>\n<h2>Ưu điểm:</h2>\n<ul>\n<li>Từ các ứng dụng CI/CD hot nhất hiện nay như: Circleci, Github Action, Gitlab Action,... có thể sử dụng để build các Docker image <strong>ECR</strong> và thực hiện testing trong các Docker container đó rất tiện dụng và giảm thiểu khả năng rủi do cho môi trường production.</li>\n<li>Chúng ta có thể linh động để build các job theo quy trình để kiểm thử code, docker hoạt động có chơn chu hay không trước khi tiến đến bước deploy dự án,...</li>\n<li>Sử dụng Docker ECR trong CI bạn sẽ không cần phải mất nhiều thời gian để đi chỉ cho các thanh niên develop khác rằng đoạn code này có thể lỗi hay không và lỗi đó ở đâu, cách fix như thế nào, các thanh niên đó sẽ tự biết cách fix và tìm hiểu,... Bạn có thể dành time làm các công việc khác trong một mớ công việc được giao :D.</li>\n<li>\n<p>Bạn có thể kết nối đến các <strong>RDS</strong> từ bên trong mỗi container.</p>\n<h2>Nhược điểm:</h2>\n</li>\n<li>Docker ECR chỉ dành cho khách hàng chịu chơi, bạn sẽ phải tốn thêm chi phí cho mỗi lần build và deploy dự án.</li>\n<li>Chỉ dành cho người về Docker mới có thể build và sử dụng.</li>\n<li>Chỉ dành cho các dự án có sử dụng đến nền tảng đám mây AWS.</li>\n<li>Tài liệu về Docker ECR còn ít đòi hỏi khả năng research của bạn phải đạt mức thượng thừa :D.</li>\n<li>Bạn phải am hiểu về AWS mới có thể cấu hình cho dự án hoạt động đúng yêu cầu.</li>\n</ul>\n<h1>Kết luận</h1>\n<p>Từ bài viết này bạn đã phần nào hình dung về <strong>AWS Docker ECR</strong> rồi đúng không nào, đừng ngại ngần hãy đề xuất và áp dụng vào dự án nhé, nó sẽ rất linh hoạt cho dự án của bạn đó.\nBạn sẽ cần tốn chút time tìm hiểu xem cơ chế hoạt động của nó thế nào,.. :D  đừng lo lắng, nó đơn giản lắm:</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Lê Văn Chiến </div><div class=\"custom-block-body\"></div></div>","id":"c4f936a4-80ba-5a9e-9798-d18167228a62","frontmatter":{"title":"About Amazon Elastic Container Registry (ECR)","date":"18-10-2020","tags":["docker","aws","erc","ci","git"]},"fields":{"slug":"/about-amazon-elastic-container-registry-ecr/"}}},{"node":{"excerpt":"CakePHP 3: Bake by example Bài viết này hướng đến những người mới làm quen với khuôn khổ CakePHP 3. I. Trước khi bạn sử dụng bake command Tạo một số bảng, tuân theo quy ước CakePHP.\nKiểm tra xem bạn…","html":"<h1>CakePHP 3: Bake by example</h1>\n<p>Bài viết này hướng đến những người mới làm quen với khuôn khổ CakePHP 3.</p>\n<h4><em>I. Trước khi bạn sử dụng bake command</em></h4>\n<p>Tạo một số bảng, tuân theo <a href=\"https://book.cakephp.org/3/en/intro/conventions.html#database-conventions\">quy ước</a> CakePHP.\nKiểm tra xem bạn có đang ở thư mục gốc của dự án không, nếu bạn liệt kê danh sách thư mục, bạn sẽ thấy các thư mục \"bin\", \"config\", \"src\", \"webroot\".</p>\n<h4>II. Tạo controller cho một bảng được gọi là <code class=\"language-text\">users</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake controller Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Controller/UsersController.php</p>\n</blockquote>\n<h4>III. Tạo model (and entity cho một bảng được gọi là <code class=\"language-text\">users</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Model/Table/UsersTable.php<br>\ncreates src/Model/Entities/User.php</p>\n</blockquote>\n<h4>IV. Tạo template mẫu mặc định cho bảng (add/edit/view/index)</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Template/Users/index.ctp add.ctp edit.ctp view.ctp</p>\n</blockquote>\n<h4>V. Gộp tất cả những điều trên trong 1 lệnh</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake all Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>VI. Chỉ định template users thư mục index</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users index</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Template/Users/index.ctp</p>\n</blockquote>\n<h4>VII. Command bake cho các thư mục tiền tố (ví dụ: )</h4>\n<p>Nếu bạn đang làm cho một phần quản trị của trang web của mình, bạn sẽ sử dụng các template và controller riêng biệt.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake controller Users --prefix admin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Controller/Admin/UsersController.php  </p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users --prefix admin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>VIII. Bake from a different database</h3>\n<p>Các ví dụ trước đều sử dụng kết nối db được định nghĩa trong app.php là  <code class=\"language-text\">app.php</code>  as  <code class=\"language-text\">&#39;default&#39;</code>.\nNếu bạn có cơ sở dữ liệu kế thừa để xử lý hồ sơ khách hàng, ví dụ:.  <code class=\"language-text\">db_records</code>, tệp  <a href=\"https://book.cakephp.org/3.0/en/orm/database-basics.html#configuration\">config file</a> trông như thế này.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// in config/app.php\n&#39;Datasources&#39; =&gt; [\n        &#39;default&#39; =&gt; [\n            &#39;host&#39; =&gt; &#39;localhost&#39;,\n            &#39;username&#39; =&gt; &#39;db_user&#39;,\n            &#39;password&#39; =&gt; &#39;pass123&#39;,\n            &#39;database&#39; =&gt; &#39;db_application&#39;,\n        ],\n        &#39;records&#39; =&gt; [\n            &#39;host&#39; =&gt; &#39;localhost&#39;,\n            &#39;username&#39; =&gt; &#39;db_records_user&#39;,\n            &#39;password&#39; =&gt; &#39;pass123&#39;,\n            &#39;database&#39; =&gt; &#39;db_records&#39;,\n        ],\n]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>IX. Tạo mô hình cho một bảng được gọi là  <code class=\"language-text\">user_records</code>  trong cơ sở dữ liệu bản ghi</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates /src/Model/Table/UserRecordsTable.php</p>\n</blockquote>\n<blockquote>\n<p>creates src/Template/Admin/Users/index.ctp edit.ctp add.ctp view.ctp</p>\n</blockquote>\n<p>Điều này sẽ bao gồm trong  <code class=\"language-text\">UserRecordsTable.php</code> tệp của bạn. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">public static function defaultConnectionName()\n{\n    return &#39;records&#39;;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo một mô hình từ cơ sở dữ liệu này cho một bảng không tuân theo quy ước\nở trên, ví dụ: tbl<em>records</em>user. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records --table tbl_records_user</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>create /src/Model/Table/UserRecordsTable.php<br>\ntạo /src/Model/Entities/UserRecord.php</p>\n</blockquote>\n<p>Điều này sẽ thêm <code class=\"language-text\">defaultConnectionName()</code>và cũng đặt.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$this-&gt;setTable(&#39;tbl_records_user&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn có thể đặt các tùy chọn khác ở đây, nhưng một số tùy chọn dễ đặt hơn bằng cách chỉnh sửa tệp sau đó. Nhưng ví dụ: bạn cũng có thể đặt trường <a href=\"https://book.cakephp.org/3.0/en/orm/retrieving-data-and-resultsets.html#finding-key-value-pairs\">hiển thị</a> thành một thứ gì đó khác với trường mặc định, ví dụ: email  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records --table tbl_records_user --display-field email</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Điều này sẽ sửa đổi trường hiển thị  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$this-&gt;setDisplayField(&#39;email&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<hr>\n<h4>X. Các quy tắc của hiệp hội</h4>\n<p>Theo mặc định, <code class=\"language-text\">bake</code> lệnh sẽ tìm kiếm các liên kết. Nếu bạn đang sử dụng bảng kế thừa hoặc một nguồn dữ liệu khác, bất kỳ tiêu đề trường nào kết thúc bằng <code class=\"language-text\">_id</code> có thể gây ra lỗi 'không tìm thấy bảng cơ sở hoặc chế độ xem'.</p>\n<p>Để tránh điều này, bạn có thể sử dụng điều  mà không cần liên kết  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records --table tbl_records_user --no-associations</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>XI. Sử dụng bằng một plugin</h3>\n<p>Giả sử bạn đã cài đặt một plugin như <a href=\"https://github.com/FriendsOfCake/bootstrap-ui\">friendsofcake / BootstrapUI</a> để các tệp mẫu của bạn đang sử dụng kiểu Bootstrap theo mặc định,<br>\nBây giờ bạn có thể thêm <code class=\"language-text\">-t BootstrapUI</code>vào bất kỳ lệnh nào ở trên</p>\n<h4>XII. Tạo tệp mẫu bằng plugin</h4>\n<blockquote>\n<p>tạo /src/Template/Users/index.ctp add.ctp edit.ctp view.ctp  </p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users -t BootstrapUI</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>XIII. Tạo toàn bộ khung MVC (bộ điều khiển, bảng, thực thể, mẫu) bằng cách sử dụng cơ sở dữ liệu kế thừa</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake all UserRecords -c records --table tbl_records_user -t BootstrapUI</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<hr>\n<h3>XIV .Các tính năng hữu ích</h3>\n<p>Bake dựa vào kết nối cơ sở dữ liệu, do đó, để giúp bạn tải lên và ghi nhớ tất cả các bảng trong hệ thống, bạn có thể gọi một lệnh mà không cần chỉ định tên bảng để xem danh sách các bảng có sẵn. Giả sử cơ sở dữ liệu của bạn có 3 bảng:<br>\n<code class=\"language-text\">users</code><br>\n<code class=\"language-text\">articles</code><br>\n<code class=\"language-text\">activity_logs</code></p>\n<p>Sử dụng lệnh <code class=\"language-text\">bin/cake bake model</code>sẽ tạo ra một danh sách các bảng có sẵn  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model\nChoose a model to bake from the following:\nUsers\nArticles\nActivityLogs</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tương tự đối với:  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake controller\nbin/cake bake template</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<hr>\n<p>Hy vọng rằng nếu bạn đang sử dụng CakePHP lần đầu tiên, đây là tài liệu tham khảo hữu ích cho bảng điều khiển nướng.</p>","id":"3918e1d4-43ea-57a2-8cf3-af844426d0c8","frontmatter":{"title":"CakePHP 3: For Beginner","date":"14-10-2020","tags":["php","cakephp"]},"fields":{"slug":"/cakephp-3-bake-by-example/"}}},{"node":{"excerpt":"Từ năm 2016, PHP7 đã được nâng cấp hằng năm. Mỗi năm nó đều có tính năng mới, và có tính năng giúp viết code gọn hơn, khiến cho ngôn ngữ lập trình thân thiện với người quản lý website hơn. Hãy cùng…","html":"<p>Từ năm 2016, PHP7 đã được nâng cấp hằng năm. Mỗi năm nó đều có tính năng mới, và có tính năng giúp viết code gọn hơn, khiến cho ngôn ngữ lập trình thân thiện với người quản lý website hơn.</p>\n<p>Hãy cùng tìm hiểu phiên bản PHP 7.4 này có gì mới. Toàn bộ danh sách thay đổi đầy đủ bạn có thể đọc thêm  <a href=\"https://www.php.net/manual/en/migration74.php\">tại đây</a>.</p>\n<h3>Preloading</h3>\n<p>Hãy nói về code trước. Khi sử dụng framework hoặc libaries, files được tải lên và link trên mỗi request. Preloading là khi bạn tải framework và libraries vào trong OPCache. Nó giúp server tải file PHP trước và lưu trên bộ nhớ khi khởi động để có sẵn cho bất kỳ request nào tương lai!</p>\n<p>Preloading được chạy bằng  <strong>php.ini</strong>  với chỉ dẫn:  <strong>opache.preload</strong>. Nó bắt PHP script chạy khi server khởi động. Nó cũng có thể được dùng để tải lên nhiều file khác hoặc chọn để inlcude hay compile chúng.</p>\n<p>Rất tuyệt phải không, có điều, nếu nguồn bị thay đổi, server phải khởi động lại. Preloaded files cũng bị nằm trong bộ nhớ OPCache mãi mãi.</p>\n<p>Những preload files này cũng sẵn sàng dùng cho request tương lai nếu cần sử dụng.</p>\n<h3>Spread Operator trong Array Expressions</h3>\n<p>Quay về khi PHP 5.6 phát hành, PHP bắt đầu hỗ trợ argument unpacking (spread operator). Còn bây giờ với 7.4, chúng ta có thể dùng tính năng này với array expression. <strong>Argument unpacking</strong> là một <em>syntax</em> để <em>unpack array</em> và <em>travesables</em> thành arguments list. Để làm vậy, nó chỉ cần dùng … (3 chấm) là được.</p>\n<p>Hãy xem qua ví dụ bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$animals</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'dog'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'cat'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$animalkingdom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'lion'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'elephant'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$animals</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'giraffe'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['lion', 'elephant', 'dog', 'cat', 'giraffe'];</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Giờ chúng ta có thể mở rộng array từ mọi nơi trong một array khác, chỉ bằng cú pháp Spread Operator.</p>\n<p>Ví dụ dài hơn:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$num1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$num2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3]</span>\n<span class=\"token variable\">$num3</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [0, 1, 2, 3]</span>\n<span class=\"token variable\">$num4</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">111</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 1, 2, 3, 111]</span>\n<span class=\"token variable\">$num5</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 1, 2, 3]</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Có vậy thôi, nhưng bạn cũng có thể dùng nó trong một hàm. Ví dụ như:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num6</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['a', 'b', 'c']</span>\n<span class=\"token variable\">$num7</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NumIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['a', 'b', 'c']</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">arrGen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">15</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span><span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">yield</span> <span class=\"token variable\">$i</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num8</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">arrGen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [11, 12, 13, 14]</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hơn nữa, bạn giờ có thể unpack array và generators được trả về từ hàm trực tiếp vào trong array mới.</p>\n<p>Ví dụ về code như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAnimals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'dog'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'cat'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'elephant'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAnimals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'lion'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tiger'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'giraffe'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với PHP 7.4, nó sẽ in ra:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"dog\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"cat\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"elephant\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"lion\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"tiger\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"giraffe\"</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với array expression này, spread operatos có hiệu năng tốt hơn so với bản 7.3  <strong>array_merge</strong>. Đó là vì spread operator là ngôn ngữ cấu trúc trong khi đó  <strong>array_merge</strong>  là một hàm. Cũng vì spread operator hỗ trợ  <strong>objects</strong>  triển khai ngang còn  <strong>array_merge</strong>  chỉ hỗ trợ arrays.</p>\n<p>Một vài điều cần lưu ý, bạn chỉ có thể dùng indexed arrays vì string keys không được hỗ trợ. Nếu sử dụng, lỗi recoverable sẽ xuất ra màn hình, vì phát hiện thấy string key.</p>\n<p>Một ưu điểm nổi trội khá của 7.4 là việc loại bỏ array_merge.</p>\n<p>Ví dụ, hãy xem một array merge bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'banana'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'orange'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$array</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'orange'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$array</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'apple'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//shifting</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// prints</span>\n<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"banana\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"apple\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"orange\"</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Một ưu điểm của 7.4 sử dụng function generator.  <a href=\"https://www.php.net/manual/en/language.generators.syntax.php\">Generator function</a>  cũng giống như một hàm thông thường, ngoại trừ việc thay vì trả về một giá trị, generator function có thể trả về nhiều giá trị.</p>\n<p>Hãy xem thử ví dụ bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">generator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span><span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">yield</span> <span class=\"token variable\">$i</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">generator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Weak References</h3>\n<p>PHP 7.4 bây giờ đã có class WeakReference, không nên lầm lẫn với class  <strong>WeakRed</strong>  và  <strong>Weakref</strong>  extension.</p>\n<p><strong>WeakReferences</strong>  giúp programmer gọi tham chiếu tới một object. Nó hữu dụng vì nó không ngăn object bị hủy. Hó hỗ trợ triển khai cache có cấu trúc.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\nWeakReference <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* Methods */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>void<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>object <span class=\"token variable\">$referent</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> WeakReference\n    <span class=\"token keyword\">public</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>void<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span>object\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Contravariant Parameters và Covariant Returns</h3>\n<p>Hiện tại, PHP sử dụng hầu như invariant parameter types và return types. Có nghĩa là, nếu một phương thức có parameter hay return type của X thì subtype parameter hoặc return type cũng phải là loại  <strong>X</strong>.</p>\n<p>Bây giờ với PHP 7.4, nó cho phép  <strong>covariant</strong>  (được sắp từ chi tiết đến tổng quan) và  <strong>contravariant</strong>  (ngược lại) trên parameter và return types.</p>\n<p>Đây là ví dụ của cả hai:</p>\n<p>Ví dụ return type của covariant:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> object<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UserFactory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ví dụ loại contravariant parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Concatable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>Iterator <span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Collection</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Concatable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// accepts all iterables, not just Iterator</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>iterable <span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* ... */</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Typed Properties 2.0</h3>\n<p>Từ PHP 5, type hints đã được hỗ trợ, cho phép một loại biến nhất định được chuyển tới hàm hoặc class. Khi nâng cấp lên PHP 7.2, data type  <strong>object</strong>  xuất hiện, và các loại khác có thể cũng được chờ đón hơn trong tương lai. Tương lai giờ đã ở đây rồi</p>\n<p>Trong phiên bản 7.4 mới, PHP có thể hỗ trợ những loại sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\nbool<span class=\"token punctuation\">,</span> int<span class=\"token punctuation\">,</span> float<span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">,</span> iterable<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">,</span> <span class=\"token keyword\">parent</span>\nany <span class=\"token keyword\">class</span> <span class=\"token class-name\">or</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">name</span>\n<span class=\"token operator\">?</span>type <span class=\"token comment\">// where \"type\" may be any of the above</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Lưu ý loại  <strong>parent</strong>  có thể được dùng trong classes, và không cần có tính đồng nhất của parent với parameter và return type</p>\n<p>Cũng vậy, lưu ý là  <strong>void</strong>  và  <strong>callable</strong>  không được hỗ trợ.  <strong>Void</strong>  bị xóa vì nó không hữu dụng và tính chất không rõ ràng;  <strong>Callable</strong>, vì hành vi của nó phụ thuộc bối cảnh.</p>\n<p>Hãy xem một vài ví dụ sau.</p>\n<p>Đây là một class, được viết cho PHP 7.3:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** @var int $id */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/** @var string $name */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> int <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>PHP 7.4, không hy sinh sự an toàn của bất kỳ type nào, một class có thể được viết đơn giản như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> int <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là một vài ví dụ khác của các type mà 7.4 hỗ trợ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> int <span class=\"token variable\">$scalarType</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">protected</span> ClassName <span class=\"token variable\">$classType</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token operator\">?</span>ClassName <span class=\"token variable\">$nullableClassType</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Types are also legal on static properties</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> iterable <span class=\"token variable\">$staticProp</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Types can also be used with the \"var\" notation</span>\n    <span class=\"token keyword\">var</span> bool <span class=\"token variable\">$flag</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Typed properties may have default values (more below)</span>\n    <span class=\"token keyword\">public</span> string <span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token double-quoted-string string\">\"foo\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span>string <span class=\"token variable\">$nullableStr</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// The type applies to all properties in one declaration</span>\n    <span class=\"token keyword\">public</span> float <span class=\"token variable\">$x</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// equivalent to:</span>\n    <span class=\"token keyword\">public</span> float <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> float <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Arrow Functions 2.0</h3>\n<p>Anonymous functions trong PHP dường như rất dài dòng, kể cả khi chỉ thực hiện một tác vụ đơn giản. Một phần là lượng lớn của syntactic boilerplate, một phần là cận nhập biến một cách thủ công.</p>\n<p>Nó làm cho code khó đọc và càng khó hiểu.</p>\n<p>Hãy xem code sau nó dùng PHP 7.3:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">array_values_from_keys</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arr</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">array_map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Còn đây là cú pháp chính xác của PHP 7.4:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">array_values_from_keys</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arr</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">array_map</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Arrow function giờ có dạng đơn giản hơn nhiều:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>parameter_list<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> expr</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bên dưới bạn có thể thấy ví dụ của 2 hàm  <strong>$fn1 (7.3)</strong>  và  <strong>$fn2 (7.4)</strong>  cạnh nhau. Chúng có cùng kết quả nhưng cú pháp khác nhau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$y</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$fn1</span> <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$fn2</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$y</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nó cũng hoạt động được nếu arrow function kết hợp lại:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$z</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$fn</span> <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span> <span class=\"token operator\">*</span> <span class=\"token variable\">$y</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$z</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tại đây, function bên ngoài bắt lấy biến  <strong>$z</strong>. Sau đó, function ở trong cũng bắt $z từ bên ngoài. Phiên bản 7.4 hỗ trợ việc này, còn 7.3 thì không thể: outer scope có thể được dùng trong inner function</p>\n<p>Cú pháp arrow function syntax cho phép sử dụng đa dạng các function như là, variadics, default values, parameter và return types, cũng như by-reference passing và returning. Nhưng cũng có thể giữ cho code được sạch và dễ đọc. Bên dưới là arrow function hợp lệ có thể dùng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> int <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\nfn<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$rest</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$rest</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Một điều cần lưu ý là arrow functions có quyền ưu tiên thấp nhất. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span>\n<span class=\"token comment\">// is</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// not</span>\n<span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Nguồn tham khảo</h2>\n<ul>\n<li><a href=\"https://www.php.net/releases/7_4_0.php\">https://www.php.net/releases/7<em>4</em>0.php</a></li>\n<li><a href=\"https://www.hostinger.com/\">https://www.hostinger.com/</a></li>\n</ul>","id":"1cd02f26-e660-5708-aa0b-12e94fa717fe","frontmatter":{"title":"What's new in PHP 7.4?","date":"14-10-2020","tags":["php","php7.4"]},"fields":{"slug":"/co-gi-moi-o-php74/"}}},{"node":{"excerpt":"Như các bạn đã biết, phân quyền trong một ứng dụng là một phần không thể thiếu trong việc phát triển phần mềm. Vậy nên, hôm nay mình sẽ giới thiệu một package có thể giúp các bạn phân quyền nhanh và…","html":"<p>Như các bạn đã biết, phân quyền trong một ứng dụng là một phần không thể thiếu trong việc phát triển phần mềm. Vậy nên, hôm nay mình sẽ giới thiệu một package có thể giúp các bạn phân quyền nhanh và đơn giản trong một website được viết bằng PHP với framework là Laravel. Đó là package laravel-permission. Chúng ta cùng tìm hiểu nhé!</p>\n<h1>I. Cài đặt Laravel permission</h1>\n<p>Laravel permission cho phép chúng ta có thể dễ dàng phân chia các vai trò (roles) và quyền (permissions) dùng để quản lý quyền hạn truy cập trong một trang web. Để cài đặt package này, chúng ta cần:</p>\n<ul>\n<li>Laravel phiên bản cao hơn 5.8</li>\n<li>Nếu bạn đang có sẵn file <code class=\"language-text\">config/permission.php</code> bạn phải đổi tên hoặc xóa, bởi vì khi setup thì package sẽ được publishes vào <code class=\"language-text\">config/permission.php</code>\nChúng ta chạy câu lệnh dưới để cài đặt package nhé:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">composer <span class=\"token keyword\">require</span> spatie<span class=\"token operator\">/</span>laravel<span class=\"token operator\">-</span>permission</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó, trong config/app.php chúng ta add service provide cho package như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    Spatie\\<span class=\"token package\">Permission<span class=\"token punctuation\">\\</span>PermissionServiceProvider</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó, publish migration thông qua lệnh:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">php artisan vendor<span class=\"token punctuation\">:</span>publish <span class=\"token operator\">--</span>provider<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"Spatie\\Permission\\PermissionServiceProvider\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Chạy lệnh <code class=\"language-text\">php artisan migrate</code> và chúng ta sẽ có các bảng như roles, permissions, role<em>has</em>permissions, model<em>has</em>roles và model<em>has</em>permission</p>\n<h2>II. Tạo Role và Permission</h2>\n<p>Đầu tiên add trait của <code class=\"language-text\">Spatie\\Permission\\Traits\\HasRoles</code> vào model mà bạn muốn phần quyền ở đây thì mình sẽ add vào model <code class=\"language-text\">Admin</code> nhé:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Traits<span class=\"token punctuation\">\\</span>HasRoles</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Admin</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Authenticatable</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">HasRoles</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó chúng ta thêm các vai trò (roles) và quyền (permissions), một role có thể có nhiều permission. Chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Role</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Permission</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$role</span> <span class=\"token operator\">=</span> Role<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span> <span class=\"token operator\">=</span> Permission<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Như trên các bạn đã thấy, mình vừa tạo ra một Role có tên là <code class=\"language-text\">subAdmin</code> và một Permission là <code class=\"language-text\">managementUser</code></p>\n<p>Một quyền có thể được chỉ định cho một vài cho bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permission</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//or...</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nhiều quyền có thể được đồng bộ hóa với một vai trò bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncPermissions</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permissions</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncRoles</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$roles</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Có thể xóa quyền khỏi vai trò bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">revokePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permission</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeRole</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Để lấy thông tin tất cả các <code class=\"language-text\">users</code> có role là <code class=\"language-text\">subAdmin</code> chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> Admin<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">role</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc trả về các user có quyền truy cập <code class=\"language-text\">managementUser</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> Admin<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">permission</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>III. Cách sử dụng</h2>\n<p><strong><em>1. Trao quyền trực tiếp cho 1 user</em></strong></p>\n<p>Bạn có thể giao một quyền cho một <code class=\"language-text\">user</code> như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span>managementUser'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>bạn cũng có thể giao nhiều quyền user trong một lần hoặc có thể sử dụng mảng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//or</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để xóa một quyền khỏi một <code class=\"language-text\">user</code> nào đó, chúng ta làm như sau :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">revokePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc xóa và thêm mới một quyền khác thì chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncPermissions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và còn một số option khác, các bạn có thể tham khảo thêm <a href=\"https://spatie.be\">https://spatie.be</a></p>\n<p><strong><em>2. Trao quyền thông qua Role</em></strong></p>\n<p>Một roles có thể được trao cho bất cứ <code class=\"language-text\">users</code> nào bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'edit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cũng có thể giao nhiều roles cho user trong một lần hoặc có thể sử dụng mảng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể xóa và thêm vai trò mới thông qua</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hoặc để xóa một role khỏi một user, chúng ta chỉ cần làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cũng có thể check xem liệu <code class=\"language-text\">user</code> có phải là <code class=\"language-text\">role</code> đang cần tìm bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Sử dụng với middleware</em></strong></p>\n<p>Bạn có thể sử dụng <code class=\"language-text\">can</code> như một mặc định để giới hạn quyền truy cập cho trang web bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'can:managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc nếu bạn không muốn sử dụng mặc định, Laravel permission mang đến cho chúng ta các middleware <code class=\"language-text\">RoleMiddleware</code>, <code class=\"language-text\">PermissionMiddleware</code> and <code class=\"language-text\">RoleOrPermissionMiddleware</code>. Để sử dụng, bạn cần thêm vào app/Http/Kernel.php file như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$routeMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Middlewares<span class=\"token punctuation\">\\</span>RoleMiddleware</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'permission'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Middlewares<span class=\"token punctuation\">\\</span>PermissionMiddleware</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó sử dụng chúng để kiểm tra các route :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'role:super-admin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nRoute<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'permission:managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>4. Sử dụng trực tiếp trên Blade</em></strong></p>\n<p>Đối với phần view, để hiển thị view tương ứng cho các vai trò, chúng ta có thể sử dụng <code class=\"language-text\">@can</code>, <code class=\"language-text\">@cannot</code>, <code class=\"language-text\">@canany</code>, and <code class=\"language-text\">@guest</code> để kiểm tra việc xem thông tin hiển thị trên một trang web. Chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">//</span>\n@endcan</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn cũng có thể dùng <code class=\"language-text\">role</code> để check việc này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">role</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//</span>\n@endrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc là:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">hasrole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//</span>\n@endhasrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể linh hoạt trong việc check nhiều <code class=\"language-text\">roles</code> hơn như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">hasanyrole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin|admin'</span><span class=\"token punctuation\">)</span>\n   <span class=\"token comment\">//</span>\n@<span class=\"token keyword\">else</span>\n  <span class=\"token comment\">//</span>\n@endhasanyrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>IV. Kết luận</h2>\n<p>Bài viết trên mình cũng đã giới thiệu và hướng dẫn sử dụng một số tính năng cơ bản trong package laravel permission để phân quyền trong ứng dụng chạy bằng framework Laravel. Cảm ơn các bạn đã đọc bài viết của mình ^-^</p>\n<h6><em><div style=\"text-align: right\"> - by Phan Trung </div></em></h6>","id":"d67db112-1e9b-5cad-bbb0-8fddcb9110a7","frontmatter":{"title":"[Laravel] Simple authorization with the Laravel permission package","date":"14-10-2020","tags":["php","laravel"]},"fields":{"slug":"/phan-quyen-voi-package-Laravel-permission/"}}},{"node":{"excerpt":"CakePHP cung cấp khá nhiều các chức năng hữu ích cho lập trình viên trong đó có việc tích hợp sẵn PHPUnit. Ngoài các tính năng do PHPUnit cung cấp, CakePHP cũng cung cấp một số tính năng bổ sung giúp…","html":"<p>CakePHP cung cấp khá nhiều các chức năng hữu ích cho lập trình viên trong đó có việc tích hợp sẵn PHPUnit. Ngoài các tính năng do PHPUnit cung cấp, CakePHP cũng cung cấp một số tính năng bổ sung giúp việc kiểm thử dễ dàng hơn. Bài viết này bao gồm việc hướng dẫn cài đặt PHPUnit và thực hiện một vài kiểm thử đơn giản. </p>\n<h1>I. Cài đặt PHPUnit.</h1>\n<p><strong><em>1. Cài đặt</em></strong></p>\n<p>PHPUnit có thể được cài đặt thông qua <em>PHAR package</em> hoặc <em>Composer</em>.</p>\n<ul>\n<li>\n<p>Cài đặt PHPUnit bằng Composer.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer require --dev phpunit/phpunit:<span class=\"token string\">\"^8.5\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Cài đặt PHPUnit bằng PHAR package.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php phpunit.phar</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Thiết lập cơ sỡ dử liệu</em></strong></p>\n</li>\n</ul>\n<p>Hãy chắc chắn rằng bạn đã bật <em>debug</em> trong tệp config/app.php trước khi chạy bất kì thử nghiệm nào. Bạn cũng cần cấu hình và tạo một cơ sở dữ liệu mới cho việc kiểm thử để tránh mất dữ liệu trong dự án. Đây là cấu hình cơ bản mà CakePHP hỗ trợ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'Datasources'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'test'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'datasource'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Cake\\Database\\Driver\\Mysql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'persistent'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'host'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dbhost'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'username'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dbname'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dbpass'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'database'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'test_database'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>3. Chạy PHPUnit</em></strong></p>\n<p>Bây giờ bạn có thể chạy PHPUnit bằng cách:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">vendor/bin/phpunit</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer <span class=\"token builtin class-name\">test</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Để chạy PHPUnit cho một thử nghiệm cụ thể, bạn có thể cung cấp đường đẫn đến thử nghiệm theo dạng tham số. Ví dụ: nếu bạn có một thử nghiệm cho lớp <strong>ArticlesTableTest</strong>, bạn có thể chạy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer <span class=\"token builtin class-name\">test</span> tests/TestCase/Model/Table/ArticlesTableTest</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nếu bạn thấy thông báo màu xanh với trạng thái là <strong>OK</strong> cùng một số thông tin về quá trình thử nghiệm thì việc kiểm thử của bạn đã thành công. Ngược lại, nếu thấy thông báo màu đỏ và trạng thái là <strong>FAILURES</strong> cùng các thông tin về lỗi thì việc kiểm thử đã thất bại, bạn cần kiểm tra lại code của mình. Lưu ý, nếu bạn đang sử dụng Window thì thông báo sẽ không hiện thị màu nên hãy nhận biết bằng trạng thái để biết việc kiểm thử có thành công hay không.</p>\n<h1>II. Quy ước và tạo kiểm thử.</h1>\n<p><strong><em>1. Quy ước về kiểm thử</em></strong></p>\n<p>Giống như hầu hết mọi thứ trong CakePHP, việc tạo và chạy các kiểm thử cũng có một số quy ước:</p>\n<ol>\n<li>Các tệp PHP chứa các thử nghiệm phải nằm trong thư mục <em>tests/TestCase/[Type]</em>.</li>\n<li>Tên các tệp phải kết thúc bằng <strong>Test.php</strong> thay vì <strong>.php</strong> như các tệp thông thường.</li>\n<li>Các lớp chứa các thử nghiệm nên được kế thừa từ các lớp: Cake\\TestSuite\\TestCase, Cake\\TestSuite\\IntegrationTestCase hoặc \\PHPUnit\\Framework\\TestCase.</li>\n<li>Tên lớp cần phải khớp với tên tệp. VD: class RouterTest extends TestCase.</li>\n<li>Tên của bất kì phương thức nào trong tệp mà có chứa các khẳng định (assertion) phải bắt đầu bằng test, ví dụ: testPublished. </li>\n</ol>\n<p><strong><em>2. Tạo kiểm thử đầu tiên</em></strong></p>\n<p>Trong ví dụ sau, chúng ta sẽ tạo phương thức <em>bar()</em> trong một <em>Helper</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProgressHelper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Helper</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$width</span> <span class=\"token operator\">=</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token single-quoted-string string\">'&lt;div class=\"progress-container\">\n                &lt;div class=\"progress-bar\" style=\"width: %s%%\">&lt;/div>\n            &lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$width</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là một ví dụ đơn giản, nhưng sẽ rất hữu ích để bắt đầu một thử nghiệm. Sau khi tạo <em>Helper</em> chúng ta sẽ tạo tệp <strong>tests/TestCase/View/Helper/ProgressHelperTest.php</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Test<span class=\"token punctuation\">\\</span>TestCase<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper<span class=\"token punctuation\">\\</span>ProgressHelper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>TestSuite<span class=\"token punctuation\">\\</span>TestCase</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>View</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProgressHelperTest</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">TestCase</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">testBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong lớp thử nghiệm hãy luôn có phương thức <em>setUp()</em>. Phương thức này sẽ được gọi đầu tiên và giúp tạo các đối tượng cần thiết cùng thực hiện bất kì cấu hình nào của bạn.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$view</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Progress</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProgressHelper</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$view</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi tạo phương thức <em>setUp()</em>, chúng ta sẽ tiếp tục làm việc với phần quan trọng nhất đó là phương thức thử nghiệm <em>testBar()</em>. Hãy tạo một số khẳng định để đảm bảo rằng <em>Helper</em> hoạt động và tạo ra kết quả mong đợi.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">testBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Progress</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assertStringContainsString</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'width: 90%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assertStringContainsString</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'progress-bar'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Progress</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.3333333</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assertStringContainsString</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'width: 33%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Phương thức <em>assertStringContainsString()</em> để đảm bảo rằng chuỗi trả về chứa nội dung mà chúng ta mong đợi. Nếu kết quả không chứa nội dung mong đợi quá trình kiểm tra sẽ không thành công và code đang chưa được chính xác. Đây là ví dụ khi quá trình kiểm tra diễn ra thành công.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.                                                   <span class=\"token number\">1</span> / <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>\n\nTime: <span class=\"token number\">0.21</span> minutes, Memory: <span class=\"token number\">2.00</span> MB\n\nOK <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> tests, <span class=\"token number\">3</span> assertions<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>III. Kết luận.</h1>\n<p>Bằng việc sử dụng các thử nghiệm, chúng ta có thể mô tả mối quan hệ giữa các đầu vào đã biết và đầu ra mong đợi của chúng. Điều này giúp chúng ta tự tin hơn về code đang viết vì có thể đảm bảo rằng code đã đáp ứng được các kì vọng và khẳng định mà các thử nghiệm đưa ra.</p>\n<p>Hi vọng bài viết này sẽ giúp các bạn hiểu hơn về cách tạo và chạy một thử nghiệm trong CakePHP và hãy luôn sử dụng các thử nghiệm cho dự án của mình nhé! </p>\n<h6><em><div style=\"text-align: right\"> - by Phu Thai </div></em></h6>","id":"eb3ec820-3f13-5ff8-9973-c303eda41b2a","frontmatter":{"title":"Integration PhpUnit test into Cakephp for beginner","date":"14-10-2020","tags":["php","cakephp"]},"fields":{"slug":"/testing-cakephp-for-beginner/"}}},{"node":{"excerpt":"Có rất nhiều docker command được giới thiệu trong document của docker. Chúng ta chắc hẳn không sử dụng hết tất cả chúng. Vậy với những người mới bắt đầu sử dụng docker, chúng ta cần chú ý đến những…","html":"<p>Có rất nhiều docker command được giới thiệu trong document của docker. Chúng ta chắc hẳn không sử dụng hết tất cả chúng. Vậy với những người mới bắt đầu sử dụng docker, chúng ta cần chú ý đến những command nào. Trong bài viết này, mình sẽ giới thiệu cho các bạn các lệnh docker hay sử dụng nhất.</p>\n<p><strong><em>1. Kiểm tra phiên bản</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker -v</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Liệt kê các image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker images -a</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Xóa một image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker image <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>imageId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>4. Tải về một image từ hub.docker.com</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker pull <span class=\"token operator\">&lt;</span>imageName<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>version<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>5. Kiểm tra thông tin chi tiết của 1 image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker inspect <span class=\"token operator\">&lt;</span>imageId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>6. Liệt kê các container đang chạy</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">ps</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>7. Liệt kê tất cả các container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">ps</span> -a</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>8. Xóa container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>9. Tạo mới một container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run -it <span class=\"token operator\">&lt;</span>imageId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>10. Vào terminal container đang chạy</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container attach <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>11. Chạy container đang dừng</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container start -i <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>12. Chạy một lệnh trên container đang chạy</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>13. Kiểm tra thông tin chi tiết của 1 container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker inspect <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>14. Dừng 1 container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker stop <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>15. Chia sẻ dữ liệu</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run -it -v <span class=\"token operator\">&lt;</span>pathInHost<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>pathInContainer<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>imageName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>16. Liệt kê network trong docker</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker network <span class=\"token function\">ls</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>17. Tạo một network</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker network create --driver <span class=\"token operator\">&lt;</span>networkType<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>networkName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>18. Kết nối vào 1 network</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker network connect <span class=\"token operator\">&lt;</span>networkName<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>containerName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>19. Kiểm tra các thông tin của network</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker inspect <span class=\"token operator\">&lt;</span>networkName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>20. Mapping post</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run -p <span class=\"token operator\">&lt;</span>hostPost<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>containerPost<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>21. Xem lịch sử container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">history</span> <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>22. Check logs container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker logs <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>23. Hướng dẫn sử dụng lệnh</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker --help</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>24. Xoá tất cả container, image, network, và build cache không sử dụng</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker system prune</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>25. Kiểm tra các thay đổi của container từ khi nó được tạo</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">diff</span> <span class=\"token operator\">&lt;</span>containerName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>26. Lưu container thành image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker commit <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>imageName<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>version<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>27. Tạo image từ dockerfile</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker buid</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>II. Lời kết</h1>\n<p>Trên dây là những lệnh docker cơ bản hay dùng. Hi vọng bài viết sẽ giúp ích cho mọi người khi làm việc với Docker.\n<em><div style=\"text-align: right\"> - by Huunv </div></em></p>","id":"c7c74d7b-f18d-5157-a522-92ab6e2cf806","frontmatter":{"title":"Docker Commands For Beginner","date":"13-10-2020","tags":["Docker"]},"fields":{"slug":"/docker-commands-for-beginner/"}}},{"node":{"excerpt":"1. Định nghĩa Dependency Injection(DI) là mô hình lập trình, cách tổ chức code sao cho các đoạn code khác nhau, các module khác nhau, các lớp khác nhau không phụ thuộc nhau một cách cứng nhắc, mà cần…","html":"<h3>1. Định nghĩa</h3>\n<p>Dependency Injection(DI) là mô hình lập trình, cách tổ chức code sao cho các đoạn code khác nhau, các module khác nhau, các lớp khác nhau không phụ thuộc nhau một cách cứng nhắc, mà cần có một cơ chế thay đổi các thành phần phụ thuộc cả ở thời điểm chạy và thời điểm biên dịch.</p>\n<h3>2. Lợi ích</h3>\n<p>Làm giảm sự phụ thuộc giữa các đối tượng.</p>\n<p>Giúp viết Unit test dễ dàng hơn.</p>\n<p>Giảm thiểu được boilerplate code vì việc khởi tạo dependency được làm bởi một component khác.</p>\n<p>Mở rộng dự án dễ dàng hơn.</p>\n<p>Giúp ích trong việc liên kết lỏng (loose coupling) giữa các thành phần trong dự án.</p>\n<p>Dễ bảo trì, module hóa ứng dụng và mở rộng.</p>\n<h3>3. Nhược điểm</h3>\n<p>Dependency Injection ẩn các dependency nên một số lỗi chỉ xảy ra khi chạy chương trình thay vì có thể phát hiện khi biên dịch chương trình.</p>\n<p>Nó khá là phức tạp để học, và nếu dùng quá đà thì có thể dẫn tới một số vấn đề khác.</p>\n<p>Có thể làm ảnh hưởng tới chức năng auto-complete hay Find references của một số IDE.</p>\n<p>Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$username</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">username</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$username</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">password</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">username</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C1. Không sử dụng DI</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C2. Sử dụng DI</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C3. Sử dụng DI trong setter</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C4. Sử dụng DI thông qua Interface</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">DatabaseInterface</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong cách 1 ở trên ta không sử dụng DI sẽ có một số vấn đề là ta phải khởi tạo Config ngay trong class Database, về logic thì không có gì để nói, nhưng về mở rộng và bảo trì code thì sẽ khó bởi:</p>\n<p>Database và Config class đang bị gắn vào nhau, nếu Config có sự thay đổi(về tham số khởi tạo chẳng hạn) thì sẽ kéo theo sự thay đổi của Database và những class liên quan tới Config.</p>\n<p>Database biết nhiều thứ của Config quá, mà cái gì quá cũng không tốt.</p>\n<p>Với cách thứ 2 thì Database không phụ thuộc vào Config nữa, mà được truyền thẳng đối tượng Config thông qua hàm khởi tạo, như vậy sẽ giải quyết được vấn đề ở cách 1 thực hiện.</p>\n<h3>4. Các kiểu Dependency Injection</h3>\n<h3>4.1. Constructor Injection</h3>\n<p>Ở cách thứ 2 chính là sử dụng kiểu Constructor Injection, với cách này có một số đặc điểm là giảm sự phụ thuộc, giảm sự phức tạp từ Config và linh hoạt trong việc mở rộng và thay đổi từ Config.</p>\n<h3>4.2. Setter Injection</h3>\n<p>Ở cách thứ 3 là sử dụng kiểu Setter Injection. Như vậy ta cũng không cần làm thay đổi logic trong code mà chỉ đơn giản khai báo trong setter, đôi khi chúng ta cũng cần một giá trị mặc định gì đó cho Config thì có thể triển khai trong setter này.</p>\n<h3>4.3. Interface Injection</h3>\n<p>Sử dụng như trong cách thứ 4. Khi Database cần triển khai thì cần implements DatabaseInterface và cần cung cấp đối tượng Config thông qua setConfig.</p>\n<h2>5. Dependency Injection Container</h2>\n<p><code>Khi đối tượng phụ thuộc quá lớn thì sao?</code></p>\n<p>Lúc này giải pháp đưa ra là cần tạo một thùng chứa chuyên quản lý tất cả các đối tượng độc lập, từ autoload, khởi tạo, thiết lập và cài cắm vào đối tượng khác. Dependency Injection Container được ra đời.\nTrong Laravel có một công cụ rất mạnh đó là Service Container, nó quản lý các dependencies và thực hiện xử lý dependency injection. Các bạn có thể tham khảo thêm trong <a href=\"https://laravel.com/docs/8.x/container\">tài liệu của Laravel.</a></p>\n<h2>6. Tạm kết</h2>\n<p>Vậy trách nhiệm của dependency injection là:</p>\n<ul>\n<li>Tạo ra các object.</li>\n<li>Biết được class nào cần những object đấy.</li>\n<li>Cung cấp cho những class đó những object chúng cần.</li>\n</ul>\n<p>Bằng cách này, nếu trong tương lai object đó có sự thay đổi thì dependency injection có nhiệm vụ cấp lại những object cần thiết cho class.</p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"5809e949-9f5e-51e1-91a3-91888adf5371","frontmatter":{"title":"Dependency injection and dependency injection container in Laravel","date":"12-10-2020","tags":["php","laravel"]},"fields":{"slug":"/dependency-injection-and-dependency-injection-container-in-laravel/"}}},{"node":{"excerpt":"1.Giới thiệu Chào cả nhà, sau bài làm sao để tạo animation sóng trong iOS thì nay em trở lại với một chủ đề nhỏ nữa muốn chia sẻ với mọi người đặc biệt là những anh em iOS. Đó là làm sao để tạo…","html":"<h1>1.Giới thiệu</h1>\n<p>Chào cả nhà, sau bài <a href=\"https://blog.tomosia.com/swift-tao-animation-song-trong-ios-voi-swift/\">làm sao để tạo animation sóng trong iOS</a> thì nay em trở lại với một chủ đề nhỏ nữa muốn chia sẻ với mọi người đặc biệt là những anh em iOS. Đó là làm sao để tạo carousel trong iOS với swift.</p>\n<p>Với carousel thì đây là một kiểu UI UX rất là phổ biến. Nó có mặt ở hầu hết các website, mobile app, desktop app, ... Đối với mảng web và android thì được support khá là nhiều để có thể implement nó một cách rất là dễ dàng cho nên cũng không cần quá phải lo lắng 😄, tuy nhiên đối với iOS thì không được Apple support nhiều đến như vậy 🤧, cho nên là việc biết cách implement carousel trở nên rất là quan trọng. Do đó, em mong rằng sau khi đọc xong bài viết này thì mọi người có thể hiểu và áp dụng được vào cho dự án của mình.</p>\n<h1>2. Đặt vấn đề</h1>\n<p>Như mọi người cũng đã biết thì với UICollectionView và UICollectionViewFlowLayout hoặc từ iOS 13 trở lên có UICollectionViewCompositionalLayout thì đã có thể implement được hầu hết các chức năng của một Carousel, đó là horizontal scroll, custom UICollectionViewCell, set contentOffset, ... Tuy nhiên có một chức năng mà nếu chỉ sử dụng UICollectionViewFlowLayout hay UICollectionViewCompositionalLayout thì sẽ rất khó để có thể làm được đó là infinite scroll. Do đó, để có thể tạo ra một Carousel hoàn hảo thì em nghĩ ta phải custom lại UICollectionViewLayout.</p>\n<p>Việc custom lại UICollectionViewLayout nghĩa là sẽ phải tự sắp xếp vị trí của các UICollectionViewCell, và việc tính toán vị trí của Cell sẽ phải giải quyết các vấn đề sau đây:</p>\n<ol>\n<li>Tính toán vị trí của Cell sao cho phù hợp với design</li>\n<li>Tính toán vị trí của Cell mỗi lần UICollectionView change offset</li>\n<li>Tính toán vị trí của Cell sao cho có infinite scroll</li>\n<li>Tính toán vị trí offset phù hợp để mỗi lần scroll thì các Cell hiển thị đúng với design</li>\n</ol>\n<h1>3. Ý tưởng</h1>\n<p>Về cơ bản chúng ra có 4 vấn đề như đã đề cập ở trên, tuy nhiên design là khác nhau đối với mỗi app, hay với mỗi màn hình cho nên là ở bài này em sẽ chỉ nói đến việc làm sao để có infinite scroll. Ý tưởng của em dựa trên một ý nghĩ rất là đơn giản đó là, đối với mỗi Cell mà đang được focus, thì ta sẽ phải tính được vị trí của tất cả các Cell nằm ở bên trái và tất cả các Cell nằm ở bên phải. Mỗi khi UICollectionView change offset thì sẽ phải tính toán lại tất cả mọi thứ 😄</p>\n<h1>4. Triển khai ý tưởng</h1>\n<p>Đầu tiên ta sẽ tạo ra class CollectionViewLayout kế thừa lại UICollectionViewLayout</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CollectionViewLayout</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionViewLayout</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForElements</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">nil</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> collectionViewContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">CGSize</span><span class=\"token punctuation\">.</span>zero\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">shouldInvalidateLayout</span><span class=\"token punctuation\">(</span>forBoundsChange newBounds<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mỗi khi UICollectionView reload data hay invalidate layout thì hàm prepare sẽ được gọi nên là chúng ta sẽ tính toán vị trí của các Cell ở hàm này.</p>\n<p>Chúng ta sẽ tạo ra các biến sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> itemSpacing<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">8</span> <span class=\"token comment\">// khoảng cách giữa các Cell</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> currentCellIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// IndexPath.item của cell sẽ được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> offsetX<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// vị trí offset của UICollectionView khi tính toán lại vị trí của các Cell</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> leftArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// mảng chứa IndexPath.item của các Cell nằm bên trái Cell đang được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> rightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// mảng chứa IndexPath.item của các Cell nằm bên phải Cell đang được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> contentWidth<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> numberOfItem<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> collectionView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">numberOfItems</span><span class=\"token punctuation\">(</span>inSection<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> sizeCell<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> width <span class=\"token operator\">=</span> collectionView<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">-</span> itemSpacing <span class=\"token operator\">*</span> <span class=\"token number\">4</span>\n  <span class=\"token keyword\">let</span> height <span class=\"token operator\">=</span> collectionView<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>height\n  <span class=\"token keyword\">return</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> height<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Implement hàm prepare:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> collectionView <span class=\"token operator\">=</span> collectionView <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Tại lần đầu prepare cần set offsetX của collectionView = 10000</span>\n  <span class=\"token keyword\">if</span> isFirstTimePrepare <span class=\"token punctuation\">{</span>\n      offsetX <span class=\"token operator\">=</span> cycleStart\n      collectionView<span class=\"token punctuation\">.</span>contentOffset<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> cycleStart\n      isFirstTimePrepare <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Trường hợp collectionView.reloadData</span>\n  <span class=\"token keyword\">if</span> attributes<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">!=</span> numberOfItem <span class=\"token punctuation\">{</span>\n      attributes<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      leftArray<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      rightArray<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Tính số cell ở bên trái và bên phải cell đang được focus</span>\n  <span class=\"token keyword\">let</span> numberOfLeftItem <span class=\"token operator\">=</span> numberOfItem <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">:</span> numberOfItem <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">let</span> numberOfRightItem <span class=\"token operator\">=</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> numberOfLeftItem\n\n  <span class=\"token comment\">// Lấy IndexPath.item của các cell ở bên trái và bên phải cell đang được focus</span>\n  <span class=\"token keyword\">var</span> leadingRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> trailingRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> currentCellIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> currentCellIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">while</span> leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">&lt;</span> numberOfLeftItem <span class=\"token punctuation\">{</span>\n      leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n      i <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> j <span class=\"token operator\">=</span> currentCellIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">>=</span> numberOfItem <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> currentCellIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">while</span> trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">&lt;</span> numberOfRightItem <span class=\"token punctuation\">{</span>\n      trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span>\n      j <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> numberOfItem <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/*\n    + Nếu item nào chưa tồn tại trong leftArray ở lần change offset này thì cần được add vào additionalLeftArray để có thể thay đổi vị trí của cell đó\n    **/</span>\n  <span class=\"token keyword\">var</span> additionalLeftArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> leadingRightArray <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>leftArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          additionalLeftArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  leftArray <span class=\"token operator\">=</span> leadingRightArray\n\n  <span class=\"token comment\">/*\n  + Nếu item nào chưa tồn tại trong rightArray ở lần change offset này thì cần được add vào additionalRightArray để có thể thay đổi vị trí của cell đó\n  **/</span>\n  <span class=\"token keyword\">var</span> additionalRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> trailingRightArray <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>rightArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          additionalRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  rightArray <span class=\"token operator\">=</span> trailingRightArray\n\n  <span class=\"token keyword\">let</span> centerX <span class=\"token operator\">=</span> offsetX <span class=\"token operator\">+</span> collectionView<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n\n  <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> numberOfItem <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> indexPath <span class=\"token operator\">=</span> <span class=\"token function\">IndexPath</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">,</span> section<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> attr <span class=\"token operator\">=</span> <span class=\"token function\">CollectionViewLayoutAttributes</span><span class=\"token punctuation\">(</span>forCellWith<span class=\"token punctuation\">:</span> indexPath<span class=\"token punctuation\">)</span>\n      attr<span class=\"token punctuation\">.</span>isCenter <span class=\"token operator\">=</span> i <span class=\"token operator\">==</span> currentCellIndex\n\n      <span class=\"token keyword\">if</span> additionalLeftArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính khoảng cách từ minX của cell đến vị trí trung tâm, cách tính này sẽ dựa vào design</span>\n              <span class=\"token keyword\">var</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n              <span class=\"token keyword\">for</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> index <span class=\"token punctuation\">{</span>\n                  <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">+</span> itemSpacing\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> additionalRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính khoảng cách từ minX của cell đến vị trí trung tâm, cách tính này sẽ dựa vào design</span>\n              <span class=\"token keyword\">var</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n              <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> index <span class=\"token punctuation\">{</span>\n                  <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> index <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> itemSpacing\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">+</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> attributes<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>indexPath<span class=\"token punctuation\">.</span>item <span class=\"token operator\">==</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">first</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>frame <span class=\"token punctuation\">{</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> frame\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính vị trí của cell đang được focus</span>\n              <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> frame\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> attributes<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">where</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>indexPath<span class=\"token punctuation\">.</span>item <span class=\"token operator\">==</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          attributes<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>at<span class=\"token punctuation\">:</span> index<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      attributes<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>attr<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  contentWidth <span class=\"token operator\">=</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>numberOfItem <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> itemSpacing <span class=\"token operator\">+</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>numberOfItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> sizeCell<span class=\"token punctuation\">.</span>width\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nhìn vào hàm kia chắc hẳn mọi người cũng đã hiểu được một phần rồi nhỉ 😄, em sẽ giải thích một chút về những điểm đặc biệt sau:</p>\n<ol>\n<li>Tại sao lần đầu tiên prepare lại cần set offset của UICollectionView lên là 10000? Như mọi người cũng biết thì offset đầu tiên mặc định của UICollectionView là 0, cho nên nếu Cell thứ 0 là đang được focus thì các Cell ở bên trái nó sẽ có vị trí x &#x3C; 0, mà với UICollectionView thì các Cell ở vị trí x &#x3C; 0 sẽ không thể hiển thị lên được trên màn hình, vì lý do này nên phải set offset của UICollectionView lên là 10000</li>\n<li>Tại sao phải cần đến additionalLeftArray và additionalRightArray? Tại sao có những Cell được set lại frame mà nó đã có trong mảng attributes? Chắc hẳn mọi người nghĩ là mỗi khi change offset của UICollectionView thì sẽ chỉ cần tính toán lại vị trí của các Cell theo offset x mới của UICollectionView thôi, tuy nhiên nếu làm như vậy thì sẽ bị mất đi animation, vì lý do đó nên cách làm của em đó là mình chỉ tính lại vị trí của những Cell mà nó chưa có trong leftArray hoặc là rightArray mà thôi.</li>\n</ol>\n<p>OK, sau đó chúng ta chỉ cần trả về những kết quả đã tính toán được ở hàm prepare mà thôi.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForElements</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> attributes\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> attributes<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> collectionViewContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> contentWidth <span class=\"token operator\">*</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> collectionView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>height <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Về cơ bản là ta đã implement xong CollectionViewLayout cho việc tạo ra Carousel rồi, chỉ còn việc xử lý tích hợp nó vào UICollectionView thôi! Mà trong bài này em sẽ không nói chi tiết về những phần đấy. Cho nên là em sẽ để source code <a href=\"https://github.com/LaptrinhvaCuocsong/CarouselDemo\">tại đây</a> để mọi người có thể tham khảo.</p>\n<p>Em có capture video kết quả, mọi người có thể download file video <a href=\"https://github.com/LaptrinhvaCuocsong/CarouselDemo/tree/master/Video\">tại đây</a> nhé.</p>\n<p>Như vậy, em đã trình bày xong cách để tạo Carousel trong iOS với Swift. Nếu mọi người có cách nào khác thì hãy chia sẻ hoặc comment phía dưới nhé 😄.</p>\n<p>Happy reading!!!</p>\n<p>by Nguyen Manh Hung - Tomosia Viet Nam</p>","id":"d6b580a0-4611-58fa-b97c-bf059c218e18","frontmatter":{"title":"Build Carousel in iOS with Swift","date":"11-10-2020","tags":["swift","ios"]},"fields":{"slug":"/tao-carousel-trong-ios-voi-swift/"}}},{"node":{"excerpt":"Bài viết này mình muốn chia sẻ với các bạn một gói xây dựng Widget trong Laravel khá hữu dụng và ổn định, để biết chi tiết hơn chúng ta cùng đi vào vấn đề luôn nhé! version laravel >= 5.5 I. Giới…","html":"<p>Bài viết này mình muốn chia sẻ với các bạn một gói xây dựng Widget trong Laravel khá hữu dụng và ổn định, để biết chi tiết hơn chúng ta cùng đi vào vấn đề luôn nhé!</p>\n<p><em>version laravel</em> >= 5.5</p>\n<h1>I. Giới thiệu</h1>\n<ul>\n<li>\n<p>Trong quá trình xây dựng website chúng ta thường có rất nhiều các thành phần lặp đi lặp lại việc xử lý logic</p>\n<ul>\n<li>Calenda, Chart, List,... trong các website phía quản trị admin hoặc hệ thống quản lý</li>\n<li>1 website tin tức luôn có 1 sidebar left hiển thị các bài viết mới nhất, bài viết liên quan.</li>\n<li>1 website thương mại điện tử dưới mỗi detail sản phẩm luôn hiển thị slider sản phẩm liên quan....</li>\n</ul>\n</li>\n<li>Các vấn đề trên về logic xử lý thì giống nhau nhưng có thể chỉ khác về Input. Việc lặp lại khiến code khó maintain khi thay đổi, các lớp xử lý logic sinh ra nhiều khó quản lý, hiệu năng không đảm bảo. Vì vậy mình đã tìm 1 ra gói Laravel Widget có thể hỗ trỡ mình giải quyết vấn đề đó khi xây dựng website bằng Framework Laravel.</li>\n<li>Laravel Widget được xây dựng nhằm mục đích hỗ trợ các website tối ưu cơ bản quá trình xây dựng các thành phần trong web cả về logic, giao diện và clean code. Tương tác tốt với các lớp và cấu hình &#x26; cài đặt dễ dàng, dễ sử dụng. Tính mở rộng cũng rất cao hỗ trợ rất tốt cho blade view. </li>\n</ul>\n<h1>II. Chi tiết</h1>\n<h2>Cài đặt</h2>\n<ul>\n<li>\n<p>Việc cài đặt dễ dàng với câu lệnh</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer require arrilot/laravel-widgets</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Version Laravel >= 5.5</li>\n</ul>\n<h2>Sử dụng</h2>\n<p><em>Để dễ hình dung về 1 case chúng ta sẽ đi vào ví dụ là 1 website tin tức và khi bạn truy cập vào website này, luôn có 1 thành phần hiển thị các tin tức đã xem gần đây của bạn. Chúng ta sẽ tạo 1 widget xử lý điều đó nhé!</em></p>\n<ul>\n<li>\n<p>Đầu tiên, chúng ta chạy 1 câu lệnh tạo ra 1 widget được cung cấp bởi gói đã cài đặt trên:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan make:widget RecentNews</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>lệnh này sẽ tạo ra 2 file: <code class=\"language-text\">resources/views/widgets/recent_news.blade.php</code> (1 file blade view trống) và <code class=\"language-text\">app/Widgets/RecentNews</code> (nếu bạn không muốn tạo file view thì thêm <code class=\"language-text\">--plain</code> vào cuối câu lệnh trên)</p>\n</li>\n</ul>\n<p>File <code class=\"language-text\">app/Widgets/RecentNews</code> có nội dung như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">  <span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Widgets</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">use</span> <span class=\"token package\">Arrilot<span class=\"token punctuation\">\\</span>Widgets<span class=\"token punctuation\">\\</span>AbstractWidget</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n  <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/**\n      * The configuration array.\n      *\n      * @var array\n      */</span>\n      <span class=\"token keyword\">protected</span> <span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">/**\n      * Treat this method as a controller action.\n      * Return view() or other content to display.\n      */</span>\n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets.recent_news'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token single-quoted-string string\">'config'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>tại đây sẽ xử lý logic dữ liệu và hiển thị widget, khá giống với vai trò 1 controller. Bạn có thể đưa các lớp vào đây xử lý. Ví dụ mình muốn sử dụng 1 repository <code class=\"language-text\">NewsRepository</code> hoặc 1 model <code class=\"language-text\">News</code> có thể truyền vào <code class=\"language-text\">function run()</code> sau đó truyền params ra view của widget như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>NewsRepository <span class=\"token variable\">$newRepository</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$listNews</span> <span class=\"token operator\">=</span> News<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$newsRecents</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$newRepository</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getListRecent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets.recent_news'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'config'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'news'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$listNews</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'newsRecents'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$newsRecents</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Tiếp theo để hiển thị view widget <code class=\"language-text\">recentNews</code> chúng ta có thể đặt <code class=\"language-text\">@widget(&#39;recentNews&#39;)</code> ở bất kỳ blade view nào chúng ta muốn, widget sẽ hiển thị ở vị trí đó. Ví dụ nội dung file <code class=\"language-text\">resource/views/widgets/recent_news.php</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"col-md-4\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Tin tức đã xem<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n@<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$newsRecents</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$news</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"box-news-recent\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"title\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token variable\">$news</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">title</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"{{ <span class=\"token interpolation\"><span class=\"token variable\">$news</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">thumbnail</span></span> }}\"</span> alt<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"{{ <span class=\"token interpolation\"><span class=\"token variable\">$news</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">title</span></span> }}\"</span> width<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"70\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n@<span class=\"token keyword\">foreach</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Giờ hiển thị vào <code class=\"language-text\">resource/views/news/index.php</code> là 1 file view chúng ta chỉ cần chèn đoạn code gọi widget này ở bất kỳ đâu trong file đó:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">widget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'newsRecent'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'recentNews'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc tiếp:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">recentNews</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Truyền các tham số vào Widget (Passing variables to widget)</h2>\n<h3>truyền qua mảng cấu hình ($config)</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'count'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">5</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n@<span class=\"token function\">widget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'recentNews'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// shows 5</span>\n@<span class=\"token function\">widget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'recentNews'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'count'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// shows 10</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code class=\"language-text\">count</code> cho phép chúng ta hiển thị widget đó lặp lại liên tiếp.</li>\n<li>\n<p>Có thể truyền các giá trị tuỳ biến từ bên ngoài vào widget thông qua <code class=\"language-text\">$config</code> ví dụ <code class=\"language-text\">@widget(&#39;recentNews&#39;, [&#39;foo&#39; =&gt; &#39;bar&#39;])</code>, bên trong <code class=\"language-text\">app/Widgets/RecentNews</code> tại <code class=\"language-text\">function run()</code> chúng ta có thể đọc được param vừa truyền:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token variable\">$foo</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'foo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// $foo == 'bar' </span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">return</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets.recent_news'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'config'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Widget bất đồng bộ (Asynchronous widgets)</h2>\n<p>Trong một vài trường hợp, load widget bằng Ajax rất có lợi. Việc load widget bất đồng bộ cũng rất đơn giản, chỉ cần đổi cú pháp từ <code class=\"language-text\">Widget:: =&gt; AsyncWidget::</code> và <code class=\"language-text\">@widget =&gt; @asyncWidget</code> là xong.</p>\n<ul>\n<li>Các tham số của widget sẽ được mã hóa (theo mặc định) và được gửi qua lệnh gọi ajax. Vì vậy, khi nhận tham số hãy sử dụng <code class=\"language-text\">json_encoded()</code> và <code class=\"language-text\">json_decoded()</code>.</li>\n</ul>\n<h6><em>Lưu ý: Bạn có thể tắt mã hóa cho một <strong>widget</strong> cụ thể bằng cách thêm</em> <code class=\"language-text\">public  $encryptParams = false;</code> <em>trong đó. Tuy nhiên, hành động này là không khuyến khích nếu không thực sự cần thiết vì không an toàn.</em></h6>\n<h6><em>Lưu ý: Bạn có thể đặt</em> <code class=\"language-text\">use_jquery_for_ajax_calls = true</code> <em>trong tệp cấu hình để sử dụng nó cho các cuộc gọi ajax nếu muốn, nhưng bạn cần thêm jquery vào trang của mình theo cách thủ công trong trường hợp này.</em></h6>\n<ul>\n<li>\n<p>Mặc định trong quá trình call Ajax hiển thị widget thì sẽ không có gì hiển thị khi loading, bạn có thể custom bằng <code class=\"language-text\">function placeholder()</code> cho việc hiển thị đó:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">placeholder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token single-quoted-string string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Tự động tải lại Widget (Reloadable widgets)</h2>\n<ul>\n<li>Bạn có thể cấu hình đơn giản tải lại Widget sau N giây bạn muốn.</li>\n<li>\n<p>Chỉ cần set <code class=\"language-text\">$reloadTimeout</code> là xong</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/**\n  * The number of seconds before each reload.\n  *\n  * @var int|float\n  */</span>\n  <span class=\"token keyword\">public</span> <span class=\"token variable\">$reloadTimeout</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h6>_Lưu ý: Cân nhắc sử dụng tính năng này một cách hợp lý không sẽ trở thành spam.</h6>\n</li>\n</ul>\n<h2>Caching</h2>\n<ul>\n<li>\n<p>Cache 1 widget bằng cách set <code class=\"language-text\">public $cacheTime</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RecentNews</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractWidget</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/**\n * The number of minutes before cache expires.\n * False means no caching at all.\n *\n * @var int|float|bool\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token variable\">$cacheTime</span> <span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Widget groups</h2>\n<ul>\n<li>\n<p>Thông thường chúng ta sẽ hiển thị các widget bằng cách viết chúng vào blade view muốn hiển thị. Nhưng còn 1 cách khác cho phép chúng ta có thể sắp xếp vị trí widget, nhóm chúng lại và có thể viết trong controller với cú pháp đơn giản:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token comment\">// add several widgets to the 'sidebar' group anywhere you want (even in controller)</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgetName1'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$config1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgetName2'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$config2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>// display them in a view in the correct order\n@widgetGroup('sidebar')\n// or\n{{ Widget::group('sidebar')->display() }}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">- Bạn có thể đặt dấu phân cách tuỳ ý vào giữa các widget được group lại `Widget::group(&#39;sidebar&#39;)-&gt;setSeparator(&#39;&lt;hr&gt;&#39;)-&gt;...;`\n\n- Bạn cũng có thể gói từng widget trong một nhóm bằng `wrap` bằng cách:\n```php\nWidget::group(&#39;sidebar&#39;)-&gt;wrap(function ($content, $index, $total) {\n    // $total is a total number of widgets in a group.\n    return &quot;&lt;div class=&#39;widget-{$index}&#39;&gt;{$content}&lt;/div&gt;&quot;;\n})-&gt;...;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Removing widgets from a group</h3>\n<ul>\n<li>Trong một số trường hợp khi hiển thị ta phải bỏ 1 số widget vì một vài điều kiện thì có các cách sau</li>\n<li>\n<p>loại bỏ widget khỏi group bằng unique ID</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$id1</span> <span class=\"token operator\">=</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$id2</span> <span class=\"token operator\">=</span> Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeById</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// There is only second widget in the group now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả widgets ra khỏi group bằng specific name\nví dụ add 2 widget cùng có specific name là <code class=\"language-text\">&quot;files&quot;</code> sau đó thực hiện xoá các widget có specific name = \"files\"</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeByName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Widget group is empty now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả widgets có cùng position ra khỏi group.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeByPosition</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Widget group is empty now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả widget trong group</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addAsyncWidget</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Widget group is empty now</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3>Kiểm tra trạng thái của group (Checking the state of a group)</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Widget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bool</span>\n\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bool</span>\n\nWidget<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sidebar'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// int</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Kết luận</h2>\n<ul>\n<li>Qua bài viết trên chúng ta có thể thấy Laravel Widget dễ sử dụng, cú pháp thân thiện và giải quyết được nhiều vấn đề trong quá trình xây dựng website.</li>\n<li>Laravel Widget tương thích với nhiều phiên bản của Laravel và khá linh hoạt trong bất kể Design pattern nào.</li>\n<li>Tuy nhiên vẫn còn 1 số điểm hạn chế về việc sử dụng bất đồng bộ, pagination,... và quá trình phát triển phải custom lại 1 số thứ về logic xử lý.</li>\n</ul>\n<h2>Tài liệu tham khảo</h2>\n<ul>\n<li>Các bạn có thể đọc tài liệu gốc &#x26; follow update Laravel Widget tại đây\n<a href=\"https://github.com/arrilot/laravel-widgets\">https://github.com/arrilot/laravel-widgets</a></li>\n</ul>\n<h6><em><div style=\"text-align: right\"> - by Ngoc Quan </div></em></h6>","id":"0a3a7ae8-7606-5eba-91c8-d9895d9f57cc","frontmatter":{"title":"Widget trong Laravel","date":"08-10-2020","tags":["php","laravel"]},"fields":{"slug":"/widget-trong-laravel/"}}},{"node":{"excerpt":"Ở bài viết trước chúng ta đã tìm hiểu về Authentication cơ bản trong framework Laravel và demo một vài tính năng đăng nhập, đăng ký,... Nhưng đó là chỉ là 1 auth user, thông thường 1 website ít nhất…","html":"<p>Ở <a href=\"https://blog.tomosia.com/authentication-trong-laravel/\">bài viết trước</a> chúng ta đã tìm hiểu về Authentication cơ bản trong framework Laravel và demo một vài tính năng đăng nhập, đăng ký,... Nhưng đó là chỉ là 1 auth user, thông thường 1 website ít nhất sẽ có 2 đối tượng user (User thông thường, User Administrator). Chưa kể có những hệ thống có rất nhiều user và nằm ở các bảng khác nhau trong database.\nVí dụ: 1 công ty có các cửa hàng, trong cửa hàng có các nhân viên và người dùng mua hàng\nChúng ta sẽ cần có Account Company, Account Shop, Account Employee, Account User và các acc này không có cùng thuộc tính giống nhau nên không thể lưu chung 1 bảng được mà phải lưu ở các bảng khác nhau trong database. Vậy Laravel sẽ xử lý ra sao chúng ta cùng tìm hiểu nhé!</p>\n<p><em>Authentication basic Laravel</em> :\n<a href=\"https://blog.tomosia.com/authentication-trong-laravel/\">https://blog.tomosia.com/authentication-trong-laravel/</a></p>\n<p><em>Version Laravel: 5.x, 6.x, 7.x</em></p>\n<h1>I. Chuẩn bị dữ liệu</h1>\n<p><strong><em>1. Database</em></strong></p>\n<ul>\n<li>\n<p>Dùng migrations để tạo 4 bảng tương ứng với 4 authenticate user của hệ thống</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan make:migration create_admins_table --create<span class=\"token operator\">=</span>admins\nphp artisan make:migration create_shops_table --create<span class=\"token operator\">=</span>shops\nphp artisan make:migration create_admins_table --create<span class=\"token operator\">=</span>employees\nphp artisan make:migration create_users_table --create<span class=\"token operator\">=</span>users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>migration <code class=\"language-text\">create_admins_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admins'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>migration <code class=\"language-text\">create_shops_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'shops'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'company_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>migration <code class=\"language-text\">create_employees_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'employees'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'company_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'shop_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>migration <code class=\"language-text\">create_users_table</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\nSchema<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Blueprint <span class=\"token variable\">$table</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">increments</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'address'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'created_by'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$table</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">timestamps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>chạy câu lệnh để chạy 4 migration trên khởi tạo thành 4 bảng tương ứng trong database</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan migrate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Model</em></strong></p>\n</li>\n<li>\n<p>Tạo 1 thư mục app/Models trong projects sau đó tạo 4 models tương ứng các bảng vừa tạo</p>\n<ul>\n<li>\n<p>Để tránh dài dòng chúng ta chỉ ví dụ 1 Model cho bảng Admin, các bảng khác tạo tương tự:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<p>use Illuminate\\Notifications\\Notifiable;\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;</p>\n<p>class Admin extends Authenticatable\n{\nuse Notifiable;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">protected $guard = &#39;admin&#39;;\n\nprotected $fillable = [\n    &#39;name&#39;, &#39;email&#39;, &#39;password&#39;,\n];\n\nprotected $hidden = [\n    &#39;password&#39;, &#39;remember_token&#39;,\n];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">+ Ở đây **Model Admin** có extends **Authenticatable** của Laravel để kế thừa các dặc tính Authenticate của Laravel và sử dụng như 1 model bình thường.\n+ Tiếp theo ta có thêm thành phần \n```php\nprotected $guard = &#39;admin&#39;;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>mục đích để khai báo tên GUARD cho model và sau này sử dụng authenticate Admin, tên GUARD sẽ sử dụng rất thường xuyên và quan trọng.</p>\n</li>\n<li>Các model còn lại các bạn tạo tương tự Model Admin nhé!</li>\n</ul>\n<h2>II Cấu hình</h2>\n<ul>\n<li>Giờ chúng ta sẽ đi vào việc cấu hình các luồng xác thực cho các đối tượng User vừa khởi tạo dữ liệu và model.</li>\n</ul>\n<p><strong>GUARD</strong></p>\n<ul>\n<li>\n<p>Laravel cho phép chúng ta được sử dụng nhiều guardard, mỗi guard sẽ ứng với 1 thành phần xác thực khác nhau. Việc cấu hình guard ở file <code class=\"language-text\">Config/auth.php</code></p>\n<ul>\n<li>\n<p>cấu hình guard mặc định của Laravel như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'guards'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n<span class=\"token single-quoted-string string\">'web'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token single-quoted-string string\">'api'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'token'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'hash'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mặc định chỉ có 2 guard là web và api, nhưng chúng ta có tới 4 guard như đã nói trên thì sẽ câu hình như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'guards'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n<span class=\"token single-quoted-string string\">'admin'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'admin_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'shop'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'shop_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'employee'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'employee_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'user'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'user_provider'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>PROVIDER</strong></p>\n<ul>\n<li>Chắc các bạn cũng đã thấy cấu hình guard vừa rồi mình cũng đã thay đổi cả tên provider của từng guard. Tiếp theo mình sẽ hướng dẫn các bạn cấu hình provider nhé!</li>\n</ul>\n<p>Guard để xác thực người dùng còn Provider sẽ lấy ra dữ liệu người dùng sau khi xác thực, vậy nên việc cấu hình Provider sẽ liên quan tới việc liên kết Authenticate tới Model tương ứng. Việc cấu hình vẫn ở trong <code class=\"language-text\">app/auth.php</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'admin_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>Admin</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'shop_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>Shop</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'employee_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>Employee</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'user_provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Models<span class=\"token punctuation\">\\</span>User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>ROUTE</strong></p>\n<ul>\n<li>như vậy từ việc cấu hình ở Guard liên kết vói Provider và Provider liên kết với Model thì chúng ta đã hoàn tất việc cấu hình về cơ bản cho các autheticate. Giờ thì chúng ta khai báo các route tương ứng để thực hiện các chức năng cơ bản của 1 authenticate như đăng nhập, đăng ký, quên mật khẩu,... như sau:</li>\n<li>\n<p>Ví dụ với Admin, còn lại các bạn làm tương tự</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LoginController@showLoginForm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nRoute<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'LoginController@login'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>Route::group(['namespace' => 'Admin', 'prefix' => 'admin'], function () {\nRoute::group(['middleware' => ['auth:admin']], function () {\nRoute::get('/home', 'HomeController@index');\n});\n});</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Tại đây mình đã gọi tới LoginController để hiển thị form login với `function showLoginForm` và check login cho Admin với `function login`, sau khi login thành công với Auth Admin sẽ điều hướng tới trang home.\n\n## III Xử lý multiple authenticate\n**_1. Controller_**\n\n- Tại đây mình mô tả cách xử lý chung các autheticate trong 1 controller, nếu các bạn muốn xử lý riêng thì tách controller xử lý tương tự.\n```php\n&lt;?php\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Foundation\\Auth\\AuthenticatesUsers;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse App\\Http\\Controllers\\Controller;\n\nclass LoginController extends Controller\n{\n    /*\n    |--------------------------------------------------------------------------\n    | Login Controller\n    |--------------------------------------------------------------------------\n    |\n    | This controller handles authenticating users for the application and\n    | redirecting them to your home screen. The controller uses a trait\n    | to conveniently provide its functionality to your applications.\n    |\n    */\n\n    use AuthenticatesUsers;\n\n    /**\n     * Where to redirect users after login.\n     *\n     * @var string\n     */\n\n    protected $redirectTo = &#39;/home&#39;;\n    /**\n     * Create a new controller instance.\n     *\n     * @return void\n     */\n\n     const ALL_GUARD = [\n       &#39;admin&#39;, &#39;shop&#39;, &#39;employee&#39;, &#39;user&#39;\n     ];\n\n    public function guard()\n    {\n        return Auth::guard(&#39;admin&#39;);\n    }\n\n    function login(Request $request) \n    {\n      $dataLogin = $request-&gt;only([&#39;email&#39;, &#39;password&#39;]);\n      foreach (self::ALL_GUARD as $guard) {\n        if (Auth::guard($guard)-&gt;attempt($dataLogin)) {\n          return redirect(&#39;/&#39;.$guard.&#39;/home&#39;);\n        }\n      }\n      return redirect(&#39;/login&#39;);\n    }\n\n    public function showLoginForm()\n    {\n        return view(&#39;auth.login&#39;);\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Tại đây chúng ta khi <code class=\"language-text\">use AuthenticatesUsers</code> đã xử lý tương đối cho việc login rồi nhưng để dễ hình dung mình có viết lại 1 số function để tự xử lý logic login theo ý mình. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>Request <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$dataLogin</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$request</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">only</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">ALL_GUARD</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$guard</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Auth<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">guard</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$guard</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">attempt</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$dataLogin</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/'</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$guard</span><span class=\"token punctuation\">.</span><span class=\"token single-quoted-string string\">'/home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đơn giản chỉ là check từng guard một xem email, password tại guard nào xác thực thành công sẽ khởi tạo phiên đăng nhập và điều hướng tới trang home. Tuy nhiên cách xử lý này không tối ưu mà chỉ mang tính ngắn gọn demo, còn nhiều vấn đề. Mình khuyến khích các bạn nên tách riêng Controller xử lý cho từng authenticate.</p>\n</li>\n</ul>\n<p><strong><em>2. Middleware</em></strong></p>\n<ul>\n<li>Chúng ta khởi tạo middleware để sau khi login sẽ xác thực việc truy cập tới mỗi route của người dùng. Ví dụ Middleware cho Admin như sau:</li>\n<li>\n<p>Chạy câu lệnh tạo middleware:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan make:middleware AdminAuth</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Tại middleware AdminAuth code như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?</span>php</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<p>namespace App\\Http\\Middleware;</p>\n<p>use App\\Traits\\ResponseTrait;\nuse Closure;\nuse Illuminate\\Support\\Facades\\Auth;</p>\n<p>class AdminAuth\n{\nuse ResponseTrait;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">const GUARD_ADMIN = &#39;admin&#39;;\n\n/**\n * Handle an incoming request.\n *\n * @param \\Illuminate\\Http\\Request $request\n * @param \\Closure $next\n * @return mixed\n */\npublic function handle($request, Closure $next)\n{\n    if (Auth::guard(self::GUARD_ADMIN)-&gt;check()) {\n        return $next($request);\n    }\n\n    return abort(401);\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">+ Khai báo middleware trong `app/Http/Middleware/Kernel.php` để sử dụng middleware. Khai báo thêm `&#39;admin&#39; =&gt; \\App\\Http\\Middleware\\AdminAuth::class` vào $routeMiddleware như sau:\n```php\n  protected $routeMiddleware = [\n      ...\n      &#39;admin&#39; =&gt; \\App\\Http\\Middleware\\AdminAuth::class,\n      ...\n  ];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>IV. Kết luận</h2>\n<ul>\n<li><strong>Multiple Authenticate</strong> rất tiện lợi và dễ sử dụng, hơn nữa nó làm cho Framework Laravel trở nên ưu việt hơn khi có thể kết hợp được với nhiều thư viện authenticate khác để xây dựng hệ thống website đa dạng hơn hoặc 1 service API tuyệt vời.</li>\n<li>Mong bài viết này sẽ phần nào giúp các bạn hiểu được cơ bản về <strong>multiple authenticate Laravel</strong> giúp các bạn có thể ứng dụng được khi làm project và yêu thích PHP &#x26; Laravel hơn để có thể tìm hiểu sâu và cùng nhau chia sẻ các kiến thức về lĩnh vực lập trình PHP &#x26; Laravel nhé!</li>\n</ul>\n<h6><em><div style=\"text-align: right\"> - by Ngoc Quan </div></em></h6>","id":"1277686e-3992-5dfa-ae8e-2a1872a411af","frontmatter":{"title":"Authentication Laravel - Multiple Authenticate","date":"07-10-2020","tags":["php","laravel"]},"fields":{"slug":"/authentication-laravel-multiple-authentication/"}}},{"node":{"excerpt":"Khai thác - tấn công - phá hoại doanh nghiệp từ những lỗ hổng bảo mật trên website luôn là vấn đề đau đầu của nhà phát triển. Việc kiểm tra và cảnh báo trong quá trình development là rất cần thiết.…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p><strong>Khai thác - tấn công - phá hoại</strong> doanh nghiệp từ những lỗ hổng bảo mật trên website luôn là vấn đề đau đầu của nhà phát triển. Việc kiểm tra và cảnh báo trong quá trình development là rất cần thiết.</p></div></div>\n<h2>Giới thiệu chung</h2>\n<h3>1. Brakeman là gì?</h3>\n<p>   <img src=\"https://camo.githubusercontent.com/92cf013ec2d2c5538bd5d0ec8b1fd600d3614f2b/687474703a2f2f6272616b656d616e7363616e6e65722e6f72672f696d616765732f6c6f676f5f6d656469756d2e706e67\" alt=\"alt\"></p>\n<p>   Brakeman là <strong>Static Application Security Testing (SAST)</strong> công cụ kiểm tra và cảnh báo lỗ hổng bảo mật có thể xảy ra dựa trên source code tĩnh được viết cho các ứng dụng rake như Sinatra, Ruby on Rails,.. Ngoài các lỗ hổng phổ biến và nguy hiểm như là <a href=\"https://guides.rubyonrails.org/security.html#sql-injection\">SQL Injection</a> và <a href=\"https://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf\">Cross Site Request Forgery</a> nói chung thì Brakeman còn đưa ra cảnh báo cho các lỗi bảo mật của ứng dụng Rails nói riêng như là <a href=\"https://brakemanscanner.org/docs/warning_types/attribute_restriction/\">Attribute Restriction</a>, <a href=\"https://brakemanscanner.org/docs/warning_types/content_tag\">Cross Site Scripting (Content Tag)</a>, vv ...</p>\n<p>   Mặc dù trong <a href=\"https://guides.rubyonrails.org/security.html\">tài liệu</a> của Rails đã đề cập đến và đưa ra cách mà Rails xử lý nhưng trong quá trình phát triển thực tế thì việc thiếu xót là không thể tránh khỏi. Vì vậy một công cụ cảnh báo như Brakeman kết hợp với CI/CD là rất cần thiết và việc review sẽ trở nên đơn giản hơn.</p>\n<p>   Brakeman sẽ căn cứ vào phiên bản Rails của ứng dụng để đưa ra các cảnh báo thích hợp. Hơn nữa vì chỉ đánh gía trên source code tĩnh mà không cần thực thi nên thời gian thực hiện và đưa ra kết quả đánh giá của brakeman rất nhanh.</p>\n<h3>2. SQL Injection</h3>\n<p>   Hacker khai thác lỗi hổng từ các câu lệnh SQL raw. </p>\n<p>   <img src=\"https://portswigger.net/web-security/images/sql-injection.svg\" alt=\"alt\"></p>\n<p>   Cùng lướt qua một trong những cách tấn công bằng SQL Injection đơn giản nhất nhé</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">User</span><span class=\"token punctuation\">.</span>find_by<span class=\"token punctuation\">(</span><span class=\"token string\">\"login = '<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:name</span><span class=\"token punctuation\">]</span><span class=\"token delimiter tag\">}</span></span>' AND password = '<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:password</span><span class=\"token punctuation\">]</span><span class=\"token delimiter tag\">}</span></span>'\"</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>   Thì hacker có thể truyền tham số là <code class=\"language-text\">params[:password]= &quot; &#39;&#39; OR &#39;2&#39;&gt;&#39;1 &quot;</code> để vượt qua bước kiểm tra mật khẩu để đăng nhập được vào hệ thống như bên dưới.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users <span class=\"token keyword\">WHERE</span> login <span class=\"token operator\">=</span> <span class=\"token string\">'tomoblo'</span> <span class=\"token operator\">AND</span> password <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token operator\">OR</span> <span class=\"token string\">'2'</span><span class=\"token operator\">></span><span class=\"token string\">'1'</span> <span class=\"token keyword\">LIMIT</span> <span class=\"token number\">1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đứng vị trí Top 1 dựa trên đánh giá <a href=\"https://www.owasp.org/index.php/Top_10_2010-A1\">Open Web Application Security Project (OWASP) 2010</a> nhưng hiện tại SQL Injection vẫn là một lỗ hổng bảo mật phổ biến mà các website lớn nhỏ rất dễ mắc phải.</p>\n<h3>3. Cross-Site Request Forgery (CSRF)</h3>\n<p>   CSRF là kỹ thuật đánh lừa người dùng bằng cách gửi script đến người dùng khi họ vẫn đang truy cập trang bằng session đã đăng nhập của mình</p>\n<p>   <img src=\"https://guides.rubyonrails.org/images/security/csrf.png\" alt=\"alt\"></p>\n<p>Để tăng thêm lớp bảo mật Rails là chèn thêm một token ẩn vào dưới form và so sánh với biến <em>csrf</em>token lưu ở session khi người dùng gửi một phương thức POST đến server.</p>\n<h2>Áp dụng</h2>\n<p>Chỉ cần một bước cài đặt có thể sử dụng ngay brakeman</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># Gemfile\ngem &#39;brakeman&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>1. Kết quả kiểm tra đánh giá</h3>\n<p>  Chạy lệnh <code class=\"language-text\">bundle exec brakeman</code> ở dưới CLI và cùng xem kết quả</p>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b3c1611f414cb082f742a12c21bdd2a8/1be7e/brakeman.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQoz5WS626DMAyFGYkT5wKBtmtXbZ20vv87ntkeTFXVie7HkQPYHz52unnaYd92IB/Qv5DJ9Son6uGcg/fuN26pGy8Z01fFeC4o+2TikRELIWYPT8/DDGiQOSM1RprYYhwYFH9g/+nOgO1SML1Lh8cCFljgiBACiPxToPucrp4yhlNBfc2oRzkfJGq3iSx5S/fQbjjLDD8qmsxQLbPY9TGY5cCi5EG8nBfpN333uEPpbBC7qSUpjpIc4NUykxWtxQZan5efPQS2z4LDdUR7ky0LPM/JFhO0UBJIF3Mrv2FZITrDJCCF2Uxl81muTRK7rNfnRmtnfy3lGyEXwXj4rzPJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt\"\n        title=\"alt\"\n        src=\"/static/b3c1611f414cb082f742a12c21bdd2a8/8c557/brakeman.png\"\n        srcset=\"/static/b3c1611f414cb082f742a12c21bdd2a8/4edbd/brakeman.png 175w,\n/static/b3c1611f414cb082f742a12c21bdd2a8/13ae7/brakeman.png 350w,\n/static/b3c1611f414cb082f742a12c21bdd2a8/8c557/brakeman.png 700w,\n/static/b3c1611f414cb082f742a12c21bdd2a8/e996b/brakeman.png 1050w,\n/static/b3c1611f414cb082f742a12c21bdd2a8/1be7e/brakeman.png 1059w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Chúng ta có thể thấy brakeman trả về thông báo rất rõ ràng:</p>\n<ul>\n<li>Cảnh báo <a href=\"https://guides.rubyonrails.org/getting_started.html#basic-authentication\">Basic authentication</a>  của Rails vì trong source code mình đang cố tình gán cố định mật khẩu là <code class=\"language-text\">Testing</code>.</li>\n<li>Phát hiện một lỗi SQL injection có thể bị khai thác ở mức độ High level</li>\n<li>Brakeman thông báo Rails có một cập nhật mới để xử lý lỗi <a href=\"https://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf\">CSRT</a> tốt hơn</li>\n<li>Cảnh báo <a href=\"https://brakemanscanner.org/docs/warning_types/dynamic_render_paths/\">Dynamic Render Path</a> tức đường dẫn này đang bị ảnh hưởng bởi tham số tuỳ ý từ người dùng và trong trường hợp cụ thể này có thể gây hại đến app</li>\n</ul>\n<h3>2. Tích hợp với CI/CD</h3>\n<p>Brakeman cung cấp các <a href=\"https://brakemanscanner.org/docs/options/\">options</a> linh hoạt tuỳ vào mức độ dự án. Ví dụ như:</p>\n<ul>\n<li>--no-exit-on-warn : Tiếp tục tiến trình CI/CD khi gặp warnings</li>\n<li>--exit-on-error : Dừng tiến trình khi bắt gặp lỗi.</li>\n<li>--except BasicAuth: Bỏ qua lỗi <a href=\"https://guides.rubyonrails.org/getting_started.html#basic-authentication\">Basic authentication</a> và tiếp tục tiến trình</li>\n<li>vv, ...</li>\n</ul>\n<p>Ví dụ mình muốn tất cả commit phải fix hết tất cả các warning ở mức độ medium trở lên và bỏ qua cảnh báo Basic Auth của Rails:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># cicleci/config.yml\n...\nsteps:\n  ...\n  - run:\n      name: Run brakeman\n      command: bundle exec brakeman --except BasicAuth --exit-on-warn -w2\n  ...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Tổng kết</h2>\n<p>Linh hoạt, đơn giản, nhẹ nhàng tại sao chúng ta không áp dụng brakeman vào dự án của mình. Để brakeman có thể giúp ta tránh được những rủi ro tiềm tàng mà chúng ta có thể xử lý được. Chúng ta hãy cùng cân nhắc cái giá phải trả của việc lộ thông tin khách hàng và trang website bị phá hoại nếu bị Hacker để mắt đến.</p>\n<p>Hy vọng qua bài viết mọi người sẽ hiểu hơn tầm quan trọng cua việc đánh giá kiểm tra bảo mật khi phát triển dự án của mình. Rất cám ơn mọi người đã xem bài viết.</p>\n<p><strong>Tài liệu tham khảo:</strong></p>\n<p>Github: <a href=\"https://github.com/presidentbeef/brakeman\">https://github.com/presidentbeef/brakeman</a></p>\n<p>Document: <a href=\"https://brakemanscanner.org/docs\">https://brakemanscanner.org/docs</a></p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Huy Nguyen </div><div class=\"custom-block-body\"></div></div>","id":"607e5b5f-7437-57a4-852f-e87ad68ff311","frontmatter":{"title":"Protect Rails application with brakeman gem","date":"29-09-2020","tags":["rails"]},"fields":{"slug":"/brakeman/"}}},{"node":{"excerpt":"ES5 là gì ? ES (ECMAScript) là một ngôn ngữ được chuẩn hóa bởi tổ chức ECMA và được giám sát bởi hội đồng TC39. Và Javascript là cài đặt cụ thể của chuẩn ECMAScript này và trở thành một ngôn ngữ thông…","html":"<p><strong>ES5 là gì ?</strong></p>\n<p>ES (ECMAScript) là một ngôn ngữ được chuẩn hóa bởi tổ chức ECMA và được giám sát bởi hội đồng TC39. Và Javascript là cài đặt cụ thể của chuẩn ECMAScript này và trở thành một ngôn ngữ thông dụng trong lập trình web hiện nay. ES5 là phiên bản thứ năm cửa ECMAScript, nó được giới thiệu vào năm 2009. Nó được chúng ta sử dụng nhiều nhất trong nhiều năm để làm chuẩn cài đặt ra Javascript được hỗ trợ hầu hết bởi tất cả các trình duyệt hiện tại. Trong bài viết này, chúng ta sẽ chỉ đề cập đến ES5 các bạn nhé.</p>\n<p><strong>Tổng quan về object trong JS</strong></p>\n<p>Objects trong JS, cũng tương tự như những ngôn ngữ khác, tuy nhiên nó được thiết kế trên mô hình đối tượng đơn giản. Một object là một tập hợp các thuộc tính (property), và một thuộc tính là sự liên kết giữa một cái tên và giá trị. Giá trị của một thuộc tính có thể là một hàm (method).</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> animal <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'Cat'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">showName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta cùng đi vào tìm hiểu những cách khai báo object trong ES5 nhé.</p>\n<br/>\n<p><strong>Những cách khai báo object trong JS</strong></p>\n<p>Trong các ngôn ngữ khác, để khai báo object chỉ cần dùng từ khoá <code class=\"language-text\">new</code> + <code class=\"language-text\">class name</code>. Nhưng trong JS không có khái niệm class cho nên chúng ta thường khởi tạo bởi một trong các cách sau:</p>\n<h3>Cách 1: Object literal</h3>\n<p>Sử dụng cặp dấu ngoặc nhọn <code class=\"language-text\">{}</code> và thêm thuộc tính vào bên trong nó (Viết đoạn này xong lại nhớ đến <code class=\"language-text\">this</code> :)). Mình sẽ có 1 bài viết về nó sau)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> animal <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'Cat'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">showName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Cat</span>\nanimal<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// This is Cat</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Cách 2: Object constructor</h3>\n<p>Sử dụng từ khoá <code class=\"language-text\">new Object()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> animal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nanimal<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Cat'</span>\nanimal<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">showName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Cat</span>\nanimal<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// This is Cat</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Cách 3: Constructor function</h3>\n<p>Hay còn gọi là constructor pattern. Trong cách này, sẽ dùng một function đóng vai trò là constructor để khởi tạo object. Nhìn chung bao gồm 2 bước sau:</p>\n<ol>\n<li>Định nghĩa kiểu cho object bằng cách khai báo một constructor function. Bạn nên viết hoa chữ cái đầu tiên của tên hàm này</li>\n<li>Khởi tạo object với từ khoá <code class=\"language-text\">new</code></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">showName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Khởi tạo object</span>\n<span class=\"token keyword\">var</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cat'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Cat</span>\ncat<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// This is Cat</span>\n\n<span class=\"token keyword\">var</span> dog <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Dog'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>dog<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Dog</span>\ndog<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// This is Dog</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ngoài ra ta cũng có thể sử dụng prototype để khai báo:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Cat'</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">showName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Cat</span>\ncat<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// This is Cat</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Cách 4: Object.create method</h3>\n<p>Object có thể được tạo bằng phương thức Object.create(). Phương thức này có thể rất hữu ích, bởi vì nó cho phép bạn chọn prototype cho object bạn muốn tạo ra, mà không cần phải định nghĩa constructor function.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> Animal <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'Cat'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">showName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> catA <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Cat<span class=\"token punctuation\">)</span>\ncatA<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Cat</span>\ncatA<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Dog'</span>\ncatA<span class=\"token punctuation\">.</span><span class=\"token function\">showName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// This is Cat</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br/>\n<p><strong>Tổng kết</strong></p>\n<p>Từ thời ES5, để khai báo một object khá dài dòng và rắc rối. Kể từ khi ES6 (một bản nâng cấp lớn cho JavaScript) ra đời, cung cấp cho chúng ta cú pháp class / object một cách dễ dàng hơn để làm việc với các đối tượng, làm cho hướng đối tượng trong JS trở nên dễ dàng và tường minh hơn. Tuy nhiên, trong thực tế rất nhiều dự án đang triển khai vẫn còn sử dụng ES5 cho nên việc biết đến những cách khai báo object trong bài viết nãy vẫn còn rất hữu dụng phải không các bạn.</p>\n<p>Cảm ơn các bạn đã theo dõi, hẹn gặp lại trong một bài viết khác nhé.</p>\n<p><strong>- From ĐMH (Don't Make Haste) -</strong></p>","id":"f24473f7-b645-5fc1-9de1-2db66ee005be","frontmatter":{"title":"The ways to declare objects in ES5","date":"29-09-2020","tags":["javascript"]},"fields":{"slug":"/the-ways-to-declare-objects-in-ES5/"}}},{"node":{"excerpt":"Làm thế nào để chúng ta có thể lấy được một User Access Token của Facebook vĩnh viễn không hết hạn nhằm sử dụng vào nhiều dự án khác nhau của dự án. Mời các bạn cùng theo dõi bài viết của mình. :D…","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Làm thế nào để chúng ta có thể lấy được một User Access Token của Facebook vĩnh viễn không hết hạn nhằm sử dụng vào nhiều dự án khác nhau của dự án. Mời các bạn cùng theo dõi bài viết của mình. :D</p></div></div>\n<p><strong><em>Access Token là gì?</em></strong>\nAccess Token là một chuỗi kí tự để xác định một User, App, hoặc Trang và được sử dụng bởi <strong>App</strong> để gọi API. Khi ai đó\nkết nối với ứng dụng bằng cách <strong>Đăng nhập với Facebook</strong> và phê duyệt yêu cầu cấp quyền, ứng dụng sẽ nhận được mã thông báo truy cập tạm thời, an toàn để truy cập vào <strong>Facebook APIs</strong>.</p>\n<p>Một Access Token bao gồm thông tin về thời điểm hết hạn và ứng dụng nào đã tạo mã truy cập. Có nhiều loại Access Token khác nhau để hỗ trợ trong các trường hợp khác nhau như <a href=\"https://developers.facebook.com/docs/facebook-login/access-tokens\">User Access Token, App Access Token, Page Access Token, Client Access Token</a>.</p>\n<p><strong><em>Token ngắn hạn và Token dài hạn</em></strong></p>\n<p>User Access Token Facebook thường có 2 dạng là: <strong>Short-Lived</strong> và <strong>Long-Lived</strong> tokens.</p>\n<ul>\n<li><strong>Short-Lived</strong> tokens thường tồn tại trong khoảng thời gian ngắn khoảng 1-2 giờ.</li>\n<li><strong>Long-Lived</strong> tokens thường tồn tại trong thời gian dài khoảng 60 ngày.</li>\n</ul>\n<p>Dù là <strong>Short-Lived</strong> hay <strong>Long-Lived</strong> tokens thì đều bị hết hạn trong khoảng thời gian nào đó. Nhưng trong một số dự án có các tính chất khác nhau mà chúng ta cần một Access-Token <strong>không hết hạn</strong> để có thể lấy dữ liệu người dùng mà không cần phải Refresh-Token. Nên hôm nay mình hướng dẫn các bạn lấy Access-Token Facebook không bao giờ hết hạn.</p>\n<p><strong><em>Hướng dẫn lấy User Access-Token Facebook never Expired</em></strong></p>\n<ol>\n<li>Đầu tiên chúng ta truy cập vào trang <a href=\"https://developers.facebook.com/tools/explorer\">https://developers.facebook.com/tools/explorer</a>. Sau đó làm theo các bước trong ảnh.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad1b966f82ad17f060aa9281ae3052bc/73a2e/images-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACAUlEQVQoz32Su24TQRSG950gJHYc0SdOaGnoKBENJULEUFDS8QIpkPIAqRClJaQoJBbCkh0HiMN6L97bXHZ39vZzZmxDsBArfTszZ/f8c84/Y+3tHWB3dx/d7gG6+w/Q2bmPVruD9vYONrfauHP3HjY2NrHV2kbL0DHrJ0+f4eWbt3j+4hCvD3t41evh8aOHsAaDAc4vLvB1OMR4PDKMRnoc/8VkcklMDHrtuS6SJEEQxohpnDoRjj5cwsKtJ1NAVQMNzcuyJCoTbyhQ06uuNbVZF6pAJRL6kNEfFKsrDJ0G1uKHxiTmRQUmM0QJg+MHsF0f7jzEPEoQc2m+MZEiZgJZKnDSt/HuY4z3nziO+hzHpxKWlmqUQs0SFFEI6VErQYDYthHe3MC5uoL3/Qfm11MTS2YzSCGh8hyn51P0z2wMhj4+DwOcffGWgmWBRnAUcQzh+2BhhNhxDAl5xSmm0XNGMUGeCS7gXv9EEbrkFQdkDIiIBKndZulhSe2LLAeXKfmplhRkxQJFcM+DTwcTfqPKHRc+HUqpvaX8ioQWgksP9UEIEpOEuA21uIITjKqTaYaArJmRBYo2Xj3/FFxHJ6+T6k5ImDFuboOmoHxrJfY/QV2RJmFiOV9Uqi3Ic4Wyqsx1qujOWTmdlg7qsjOay1S3KMzuf+BrLGI6t9DeKvWbX5kqI+BnlEKWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-1.png\"\n        title=\"images-1.png\"\n        src=\"/static/ad1b966f82ad17f060aa9281ae3052bc/8c557/images-1.png\"\n        srcset=\"/static/ad1b966f82ad17f060aa9281ae3052bc/4edbd/images-1.png 175w,\n/static/ad1b966f82ad17f060aa9281ae3052bc/13ae7/images-1.png 350w,\n/static/ad1b966f82ad17f060aa9281ae3052bc/8c557/images-1.png 700w,\n/static/ad1b966f82ad17f060aa9281ae3052bc/e996b/images-1.png 1050w,\n/static/ad1b966f82ad17f060aa9281ae3052bc/2cefc/images-1.png 1400w,\n/static/ad1b966f82ad17f060aa9281ae3052bc/73a2e/images-1.png 1439w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"2\">\n<li>Sau khi nhấn <strong>Open In Access Token Tool</strong>, chúng ta sẽ được di chuyển đến trang <strong><a href=\"https://developers.facebook.com/tools/debug/accesstoken?access-token=...\">https://developers.facebook.com/tools/debug/accesstoken?access-token=...</a>.</strong>. Sau đó chúng ta nhấn vào <strong>Extend Access Token</strong> ở dưới.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f0b07011e31e6c35da96113acf78e479/29114/images-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABWUlEQVQoz52SX0+DMBTF+f5fQ+M2mGG6xAc/gm8++WBiYswYMMqfDtrSshxvC93QvRhJfjncwj0cehvE8QOWqwhhdI+7xYp0jTCMsJoIw/VINOpyGWJB793cLhCtN9g8PSOOSYnt4xYB/nklTEPo6/UgSQ+Ys88KVFWNtu3A+RFtJ6BUj77voSbsvZQKac6w2//sD7JD6R54bF03oxErKzRkKpWCNgZam1EnirI+93h1hp40H3VM1qGuG6dzk15rZ2y1YBdDTzB3t5oXJToysb/UdhKdUA4he4chU2MGp39IyHCgr9acUwJDRmToTAYMw8jpdDrDyuY6oV3YW7JJkwxf7x8o0pwSVASnZMolFr/Ii8oN0XtYDeqGw8NpsjkZvr68IfncUd3i8vzoBjSv572eQElJx0JCCOEWBNXDQBtvNB2fyqF1T4PiYIzRkaE97VpXK2WTU/+Mbz0b7u4W0ngJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-2.png\"\n        title=\"images-2.png\"\n        src=\"/static/f0b07011e31e6c35da96113acf78e479/8c557/images-2.png\"\n        srcset=\"/static/f0b07011e31e6c35da96113acf78e479/4edbd/images-2.png 175w,\n/static/f0b07011e31e6c35da96113acf78e479/13ae7/images-2.png 350w,\n/static/f0b07011e31e6c35da96113acf78e479/8c557/images-2.png 700w,\n/static/f0b07011e31e6c35da96113acf78e479/e996b/images-2.png 1050w,\n/static/f0b07011e31e6c35da96113acf78e479/2cefc/images-2.png 1400w,\n/static/f0b07011e31e6c35da96113acf78e479/29114/images-2.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/816b0d02134c8a126c7eda2ad677a215/7ebf9/images-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABsElEQVQoz4WR227TQBCG/cIgmtikrhQueAFU6ni9B5+2jt0EIaVF0HBRClwgJB6AS7iooFIlyC1C5GdmEleRqISlTzO7O/N7DsFoFGMYRgijEfb2hhgOQyLCYGvD8CGiaAP7g0EocffuP6CcGPuPHiOOD3CwH2M8HiNouw7TtsV02qIl29H5uGnQEGyrqkLJlKVQey9vT5IcrvDo2qnkMl13guAoSbFLQmhtYK2F98c4P19iuXyNi4s3uLx8i/lsjrqu6c1TnMVkom5zJ2mGIKGLHr5ga6yDdTmausLV1y/49fsP1us1+Pv86SPePZ/hw8szvH9xipaqfypiCqnSCFikJ9la6xwyrbFYLPDt+gbfb35itVrh6voHTs9eoXAGNQllmZYK+0L+FZxsrMtzFEWJqvaYzZ+hO5kJvunkrqKWGRZI/ieYqgzGaBIspFJuv9guhBfk/WZ+jMruENydYc/hUSrBisQVDT6nalmUq86FQuCf7+aJoDYWPYbIaMOHCYllvGknd/3bXf4tehMfcGtMTnPjRfD8qrKQFjWdjTHiW7JKKfEdj4LOfW5PRW9/AXxyNeT/7gUBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-3.png\"\n        title=\"images-3.png\"\n        src=\"/static/816b0d02134c8a126c7eda2ad677a215/8c557/images-3.png\"\n        srcset=\"/static/816b0d02134c8a126c7eda2ad677a215/4edbd/images-3.png 175w,\n/static/816b0d02134c8a126c7eda2ad677a215/13ae7/images-3.png 350w,\n/static/816b0d02134c8a126c7eda2ad677a215/8c557/images-3.png 700w,\n/static/816b0d02134c8a126c7eda2ad677a215/e996b/images-3.png 1050w,\n/static/816b0d02134c8a126c7eda2ad677a215/2cefc/images-3.png 1400w,\n/static/816b0d02134c8a126c7eda2ad677a215/7ebf9/images-3.png 1919w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"3\">\n<li>Sau khi chúng ta nhấn <strong>Extend Access Token</strong>, giao diện sẽ hiển thị cho chúng ta một dãy <strong>Access-Token</strong> mới. Chúng ta nhấn vào <strong>Debug</strong></li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1ae2955b0ef185086554e71a7a4528ba/5068c/images-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABcklEQVQoz51R2W7CMBDM//9E+8ARWhGE1If+S2kLBEgc7Ni5L2C63lCUCrUPjTSa9a53Mrt25vMFpu4T3NkzxuMpMcXuDNMpgdi1Na73+cnExYjuPTyOKDeH9/IKz1tg4XlYLpdw8M9vL1tU7X3e2QcRDuGRsQ96NsYgL0qkacZc1w2aZoiWcyJSuPUHR44dcYwRUsEyg2JDQgUJSaWRUFzVNbquQztA150gY/Ozl+AMDz0Ui1hnWhtkWY62JZG2ZTQDSPWL4Hfym4uSxqSxirJBWTXE9S3uru5Opz8cDgUjYqM17agilwWLddR8Pp9xIpyvuFwuUFZQSJ4qvK7rbmRb2IUxlE55h1LnLFrWvUN2XPXnY5wglAZCahZjh9bVDZQI6MXWfkB/DiGlgI4lvbZBmmhGliYoaK9ZkiA6BBDrDUQguNdqOHYPDGU5QSwilLsVcn+FbPvGnPvvV6yo9onm4KPcfCD2t1DrNVQYca/V+AJa4utGSyeM6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-4.png\"\n        title=\"images-4.png\"\n        src=\"/static/1ae2955b0ef185086554e71a7a4528ba/8c557/images-4.png\"\n        srcset=\"/static/1ae2955b0ef185086554e71a7a4528ba/4edbd/images-4.png 175w,\n/static/1ae2955b0ef185086554e71a7a4528ba/13ae7/images-4.png 350w,\n/static/1ae2955b0ef185086554e71a7a4528ba/8c557/images-4.png 700w,\n/static/1ae2955b0ef185086554e71a7a4528ba/e996b/images-4.png 1050w,\n/static/1ae2955b0ef185086554e71a7a4528ba/2cefc/images-4.png 1400w,\n/static/1ae2955b0ef185086554e71a7a4528ba/5068c/images-4.png 1917w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Và giao diện sẽ như hình bên dưới.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0cd51be0acc55ce023d32d00fd607a70/8963a/images-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABTklEQVQoz52Ry07DMBBF/f8fAiRN0qCy4TvYsQCBgLwdO/EjjdNebIe2KaUbLB3d0dhzNTMmSZLiLlghCCPc3AYIrQbhCuEqQhQniOMYURRjFTlNfN6/D0LEyT2Sh0es0xTpeo3N5gEE/zz7K3kihIKQC4QE59zSgfEetBXouv4MKQWennNkJYfWGksPkpcNlhQVBbemejTolfZqdjtMjukE9nvUlCEr6rN64gxmZrMiK8E/PyCKDNXrC+j7G3RLMRqD7Th6Rq8GdcOOTRw4GR4usgJt9gVeFGB5DlGV0IxB6WFG/WDjqmmPhgclS3eXLOsW0j4ezASht5DDOGNjZTE2b6bJjj35kS86/GuHTUNtsfYfJG03zmTe3TTv0rKzuJGz4ryWlDXFTOvVjUFbZn+4Q0NtzHo/nh4ucR2W1anWKVFKYYl0yCXyOr9qHd9D3vAnzKKuMQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-5.png\"\n        title=\"images-5.png\"\n        src=\"/static/0cd51be0acc55ce023d32d00fd607a70/8c557/images-5.png\"\n        srcset=\"/static/0cd51be0acc55ce023d32d00fd607a70/4edbd/images-5.png 175w,\n/static/0cd51be0acc55ce023d32d00fd607a70/13ae7/images-5.png 350w,\n/static/0cd51be0acc55ce023d32d00fd607a70/8c557/images-5.png 700w,\n/static/0cd51be0acc55ce023d32d00fd607a70/e996b/images-5.png 1050w,\n/static/0cd51be0acc55ce023d32d00fd607a70/2cefc/images-5.png 1400w,\n/static/0cd51be0acc55ce023d32d00fd607a70/8963a/images-5.png 1918w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Như vậy là chúng ta đã lấy được User Access Token Facebook không hết hạn. Tiến hành Copy Access Token, sau đó trờ lại trang <a href=\"https://developers.facebook.com/tools/explorer\">https://developers.facebook.com/tools/explorer</a> và dán vào ô chứa <strong>access-token</strong>. Chúng ta sẽ thấy phần <strong>Expired</strong> đã không còn hiển thị nữa.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfa358ec09edb878f6932b6aaf1c6d39/bed7a/images-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB10lEQVQoz32Su24TQRSG952Ik9hxRJ84oaahooOGGiGSUFBS8QJRJMQbUKRFEaJJLISFLw0QrW873vtcdtY/Z84QJzKX1X57Rmd2/nObYH//EHt7B+h0DtE5eID27n00W220dnaxtd3CvY1NNBpb2G7uoMm0sdHYxJOnz/Dy9Rs8f3GEV0fHODk+weNHDxF0u11cXl3ha6+HwaDP9PvODjAk2A6HGI1GK5xvMhkjiWNEixhxnODnJMbZ+RAB7jzSALb2a1NZVMSS1kv61PWSsb+t27dG0oZ0f9Br0RsDQV3XdICPQSmDNMsRJynEYoFILGidICOfUhraGEZpilwbfOimeHsu8O4ixenHBO8/pQicmBcEZVShKCWLzuYC4+kcP65DhOMZJtMIc0ElMgkSCvr5m8DFIMOX6wqX3w2h/xTMixJZXiDPc6KAlMpnRRkqpVBywIwoKKCAkRmdtFSgYf4q6CilJLyAy9pZ5/PZR9SSGNNZhBnhel2ThqUBrAlaFnMCN8LrsDgFkpSxEAJhGEJrvRrsPzNcF1lxx+eGlaYZJ1JZy+eDG7H/CboyHUnqbUq9dX3W2veWS6bbwiXzddAeSU0vypIH4qLfkq3hfW5Ixl0lfavxC2KRJ2xx9ImlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-6.png\"\n        title=\"images-6.png\"\n        src=\"/static/dfa358ec09edb878f6932b6aaf1c6d39/8c557/images-6.png\"\n        srcset=\"/static/dfa358ec09edb878f6932b6aaf1c6d39/4edbd/images-6.png 175w,\n/static/dfa358ec09edb878f6932b6aaf1c6d39/13ae7/images-6.png 350w,\n/static/dfa358ec09edb878f6932b6aaf1c6d39/8c557/images-6.png 700w,\n/static/dfa358ec09edb878f6932b6aaf1c6d39/e996b/images-6.png 1050w,\n/static/dfa358ec09edb878f6932b6aaf1c6d39/2cefc/images-6.png 1400w,\n/static/dfa358ec09edb878f6932b6aaf1c6d39/bed7a/images-6.png 1437w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong><em>Tổng kết</em></strong></p>\n<p>Như vậy là chúng ta đã lấy được User Access Token không hết hạn. Với Page Access Token chúng ta cũng sẽ lấy tương tự như thế. Các bạn có thể thử lấy và trải nghiệm. :D</p>\n<p>Hi vọng bài viết sẽ bổ ích đối với mọi người. Mọi góp ý về sai sót hoặc thảo luận mời mọi người bình luận.</p>\n<p><strong>Tài liệu tham khảo:</strong></p>\n<ul>\n<li><a href=\"https://www.sociablekit.com/get-facebook-page-access-token-never-expire/\">https://www.sociablekit.com/get-facebook-page-access-token-never-expire/</a></li>\n<li>\n<p><a href=\"https://developers.facebook.com/docs/facebook-login/access-tokens/\">https://developers.facebook.com/docs/facebook-login/access-tokens/</a></p>\n<h6><em><div style=\"text-align: right\"> - by Thuận Nguyễn </div></em></h6>\n</li>\n</ul>","id":"97a1418f-9b72-5519-a2c6-81c7b324ffc1","frontmatter":{"title":"[Facebook SDK] Lấy Access Token User vĩnh viễn. ","date":"29-09-2020","tags":["facebook","instagram"]},"fields":{"slug":"/access-token-never-expire-facebook/"}}},{"node":{"excerpt":"1. PHP là gì ? PHP viết hồi qui của \"PHP: Hypertext Preprocessor\". PHP khởi đầu như là một dự án mã nguồn mở nhỏ, nhưng theo đà phát triển, ngày càng nhiều người thấy rằng nó càng ngày càng hữu ích…","html":"<h1>1. PHP là gì ?</h1>\n<h3>PHP viết hồi qui của \"PHP: Hypertext Preprocessor\".</h3>\n<ul>\n<li>PHP khởi đầu như là một dự án mã nguồn mở nhỏ, nhưng theo đà phát triển, ngày càng nhiều người thấy rằng nó càng ngày càng hữu ích. PHP được phát triển từ một sản phẩm có tên là PHP/FI. </li>\n<li>PHP/FI do Rasmus Lerdorf tạo ra năm 1994, ban đầu được xem như là một tập con đơn giản của các mã kịch bản Perl để theo dõi tình hình truy cập đến bản sơ yếu lý lịch của ông trên mạng. </li>\n<li>Ông đã đặt tên cho bộ mã kịch bản này là <i>\"Personal Home Page Tools\"</i>. Khi cần đến các chức năng rộng hơn, Rasmus đã viết ra một bộ thực thi bằng C lớn hơn để có thể truy vấn tới Database và giúp cho người sử dụng phát triển các ứng dụng web đơn giản. </li>\n<li>Rasmus đã quyết định công bố mã nguồn của PHP/FI cho mọi người xem, sử dụng cũng như sửa các lỗi có trong nó, đồng thời cải tiến mã nguồn.</li>\n<li>PHP là ngôn ngữ lập trình kịch bản viết cho máy chủ mà được nhúng trong HTML. Nó được sử dụng để quản lý nội dụng động, Database, Session tracking, …</li>\n<li><i>Nó được tích hợp với một số Database thông dụng như MySQL, PostgreSQL, Oracle, Sybase, Informix, và Microsoft SQL Server.</i></li>\n<li>PHP thực thi rất tuyệt vời, đặc biệt khi được biên dịch như là một Apache Module trên Unix side. MySQL Server, khi được khởi động, thực thi các truy vấn phức tạp với các tập hợp kết quả khổng lồ trong thời gian Record-setting.</li>\n<li>PHP hỗ trợ một số lượng rộng rãi các giao thức lớn như POP3, IMAP, và LDAP. PHP4 bổ sung sự hỗ trợ cho Java và các cấu trúc đối tượng phân phối (COM và CORBA).</li>\n<li><i>Cú pháp PHP là giống C</i>.</li>\n</ul>\n<h1>2. PHP có thể làm gì ?</h1>\n<ul>\n<li>PHP thực hiện các hàm hệ thống, ví dụ: từ các file trên một hệ thống, nó có thể tạo, mở, đọc, ghi và đóng chúng.</li>\n<li>PHP có thể xử lý các form, ví dụ: thu thập dữ liệu từ file, lưu dữ liệu vào một file, thông qua email bạn có thể gửi dữ liệu, trả về dữ liệu tới người dùng.</li>\n<li>Bạn có thể thêm, xóa, sửa đổi các phần tử bên trong Database của bạn thông qua PHP.</li>\n<li>Truy cập các biến Cookie và thiết lập Cookie.</li>\n<li>Sử dụng PHP, bạn có thể hạn chế người dùng truy cập vào một số trang trong Website của bạn.</li>\n<li><i>Nó có thể mật mã hóa dữ liệu.</i></li>\n</ul>\n<h1>3. Đặc trưng của PHP là gì ?</h1>\n<p>5 đặc trưng quan trọng làm PHP trở thành ngôn ngữ khá tiện lợi:</p>\n<ul>\n<li>Đơn giản hóa</li>\n<li>Hiệu quả</li>\n<li>Bảo mật cao</li>\n<li>Linh động</li>\n<li>Thân thiện</li>\n</ul>\n<h1>4. Làm quen với PHP</h1>\n<ul>\n<li>Để dần làm quen với PHP, chúng ta khởi đầu với PHP script đơn giản. Chúng ta sẽ bắt đầu với ví dụ đầu tiên về PHP là \"Hello, World\" script.</li>\n<li>\n<p>Như đã đề cập trước đó, PHP được nhúng trong HTML. Nghĩa là, bên trong HTML (hoặc XHTML) bạn sẽ có thể có các lệnh PHP như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;html&gt;  \n&lt;head&gt;\n&lt;title&gt;Tomosia&lt;/title&gt; \n&lt;/head&gt; \n&lt;body&gt; \n&lt;?php echo &quot;Hello World!&quot;;?&gt; \n&lt;/body&gt; \n&lt;/html&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h1>5. Cài đặt web server</h1>\n<h3>Ở đây mình sẽ giới thiệu các bạn sử dụng xampp</h3>\n<p><strong>Bước 1:</strong> Download XAMPP tại <a href=\"https://www.apachefriends.org/download.html\">https://www.apachefriends.org/download.html</a> và tiến hành cài đặt như các chương trình thông thường.</p>\n<p><strong>Bước 2:</strong> Start Apache và MySQL trong XAMPP control panel</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/01b08472c0888f6687b0216fd610c61a/29d31/cai-dat-xampp.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 64%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdcpZBQf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAESEBH/2gAIAQEAAQUClEnMobP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAAAASAxMpH/2gAIAQEABj8CKphDP//EABoQAAMBAAMAAAAAAAAAAAAAAAABETEhQZH/2gAIAQEAAT8hXYkSBrc+HDS0UKQuz//aAAwDAQACAAMAAAAQJ9//xAAWEQEBAQAAAAAAAAAAAAAAAAAAESH/2gAIAQMBAT8QxX//xAAWEQEBAQAAAAAAAAAAAAAAAAAAESH/2gAIAQIBAT8Q1H//xAAbEAEAAwEAAwAAAAAAAAAAAAABABEhMUFRYf/aAAgBAQABPxB4WwDpKV13qLl7cAcJg9+Sg0rzcUWkz3P/2Q==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cai dat xampp\" title=\"cai dat xampp\" src=\"/static/01b08472c0888f6687b0216fd610c61a/29d31/cai-dat-xampp.jpg\" srcset=\"/static/01b08472c0888f6687b0216fd610c61a/e52aa/cai-dat-xampp.jpg 175w,\n/static/01b08472c0888f6687b0216fd610c61a/70ebb/cai-dat-xampp.jpg 350w,\n/static/01b08472c0888f6687b0216fd610c61a/29d31/cai-dat-xampp.jpg 700w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></img></p>\n<p><strong>Bước 3:</strong> Gõ vào trình duyệt địa chỉ localhost. Nếu hiện ra màn hình sau thì việc cài đặt đã thành công.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3d8268c4994b19f4ab47e94dac69c24e/29d31/cai-dat-xampp-2.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQME/9oADAMBAAIQAxAAAAHRcp2ekFgX/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECEQMQMv/aAAgBAQABBQKLtFIx86//xAAXEQADAQAAAAAAAAAAAAAAAAABAhAh/9oACAEDAQE/AWGz/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/ARbW/8QAGRAAAQUAAAAAAAAAAAAAAAAAAAEgMUGR/9oACAEBAAY/AiiExn//xAAbEAACAQUAAAAAAAAAAAAAAAABEAARITGx8f/aAAgBAQABPyGgk6luFDC//9oADAMBAAIAAwAAABDUD//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxABmWF//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERIWH/2gAIAQIBAT8QhKzY/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERQVGBkf/aAAgBAQABPxB0Tl4E8eItXgVSXLKEf//Z&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cai dat xampp 2\" title=\"cai dat xampp 2\" src=\"/static/3d8268c4994b19f4ab47e94dac69c24e/29d31/cai-dat-xampp-2.jpg\" srcset=\"/static/3d8268c4994b19f4ab47e94dac69c24e/e52aa/cai-dat-xampp-2.jpg 175w,\n/static/3d8268c4994b19f4ab47e94dac69c24e/70ebb/cai-dat-xampp-2.jpg 350w,\n/static/3d8268c4994b19f4ab47e94dac69c24e/29d31/cai-dat-xampp-2.jpg 700w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></img></p>\n<p><strong>Bước 4:</strong> Vào thư mục cài đặt XAMPP/htdocs và tiến hành tạo file <strong>test.php</strong> với nội dung như mục 4</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8bd1ddeb855524ce701d6a567ef11763/29d31/cai-dat-xampp-3.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 67.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3FBNQf/EABgQAAMBAQAAAAAAAAAAAAAAAAACEgEg/9oACAEBAAEFApwlSV4//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAADEg/9oACAEBAAY/AkTH/8QAGhAAAgIDAAAAAAAAAAAAAAAAABFhkSAhcf/aAAgBAQABPyHWk+kWiLWH/9oADAMBAAIAAwAAABDDD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABcQAQADAAAAAAAAAAAAAAAAAAEgMUH/2gAIAQEAAT8QConEspS//9k=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"cai dat xampp 3\" title=\"cai dat xampp 3\" src=\"/static/8bd1ddeb855524ce701d6a567ef11763/29d31/cai-dat-xampp-3.jpg\" srcset=\"/static/8bd1ddeb855524ce701d6a567ef11763/e52aa/cai-dat-xampp-3.jpg 175w,\n/static/8bd1ddeb855524ce701d6a567ef11763/70ebb/cai-dat-xampp-3.jpg 350w,\n/static/8bd1ddeb855524ce701d6a567ef11763/29d31/cai-dat-xampp-3.jpg 700w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></img></p>\n<p><i>Gõ trên trình duyệt địa chỉ localhost/test.php. Nếu hiện ra dòng chữ Hello World nghĩa là ứng dụng PHP đầu tiên đã chạy thành công.</i></p>\n<h1>6. Như vậy</h1>\n<p>Chúng ta đã có hiểu biết cơ bản về  “PHP” rồi đấy.</p>\n<h4><i>Hẹn gặp các bạn vào các bài viết sắp tới. See ya !!!</i></h4>","id":"944e9b8c-9952-5e07-bfbd-2bc69d8fd844","frontmatter":{"title":"PHP for beginner","date":"29-09-2020","tags":["html","php"]},"fields":{"slug":"/gioi-thieu-ngon-ngu-php/"}}},{"node":{"excerpt":"1.Giới thiệu Chào cả nhà, dạo gần đây mình có được join vào team backend của công ty, mình vô tình tìm hiểu thêm về auto deploy và check style code , conventions code giúp mình check cú pháp code theo…","html":"<h1>1.Giới thiệu</h1>\n<p>Chào cả nhà, dạo gần đây mình có được join vào team backend của công ty, mình vô tình tìm hiểu thêm về auto deploy và check style code , conventions code giúp mình check cú pháp code theo đúng chuẩn quốc tế và tối ưu hiệu suất cho source code, trợ giúp rất nhiều đến việc maintain, refactor hay thêm feature. Mình chợt nghĩ backend có tools xịn sò như vậy, liệu bên mobile có tools nào có khả năng tương tự không ???. </p>\n<p>Câu trả lời là có, sau một hồi tìm tòi thì cuối cùng mình cũng tìm được công cụ có thể trợ giúp điều đó. Đó chính là Android Lint. Vì chưa có dịp để tìm hiểu bên IOS nên ở bài viết này mình sẽ chỉ nói về công cụ Android Lint của Android.</p>\n<h1>1. Android Lint là gì?</h1>\n<p>Như mình đã nói ở trên, Lint là 1 công cụ mà google cung cấp cho các developers dùng để phân tích source code , bắt các issue sai, khó bảo trì , không tối ưu , cú pháp sai chuẩn gây khó maintain. Lint giúp chúng ta xác định và khắc phục lỗi sai đó để tăng chất lượng code mà không phải build lại ứng dụng. </p>\n<p>Lint tools có thể tìm kiếm được những vấn đề có thể gây ảnh hưởng đến cú pháp , tối ưu code, bảo mật cho code, trải nghiệm của ứng dụng. Mỗi issue được tìm thấy sẽ được thông báo bằng ghi chú, câu lệnh bị lỗi và mức độ nghiêm trọng của issue để developers có thể ưu tiên khắc phục những issue quan trọng. Ngoài ra, mình có thể tăng hoặc giảm mức độ nghiêm trọng của issue, thêm hoặc bớt các issue mà tools đưa ra để phù hợp hơn với dự án mình đang làm.</p>\n<h1>2. Cách hoạt động của Lint Tools ?</h1>\n<p><img src=\"https://developer.android.com/studio/images/write/lint.png\" alt=\"Compare\"></p>\n<p>Nhìn vào hình ảnh có thể bạn cũng hiểu được phần nào cách hoạt động của Lint tools. Trong sơ đồ này, chúng ta có 3 thành phần chính đó là AppSource Files, lint.xml và lint Tool.</p>\n<h3>2.1 AppSource Files</h3>\n<p>Đây là chính là source code của chúng ta muốn dùng lint Tools để kiểm tra, Lint tool có thể kiểm tra toàn bộ các extensions file trong source mà android studio tạo ra  ví dụ như file proguard, java, kotlin, icon, xml,......</p>\n<h3>2.2 lint.xml</h3>\n<p>Đây là thành phần quan trọng để check các issue trong source code. Trong file lint.xml , chứa tất tần tật cấu hình các issue của lint tools. Nó được viết dưới dạng thẻ xml. và bạn hòan toàn có thể chỉnh sửa file này để cấu hình các issue phù hợp với dự án đang làm. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;lint&gt;\n    &lt;!-- Disable the given check in this project --&gt;\n    &lt;issue id=&quot;IconMissingDensityFolder&quot; severity=&quot;ignore&quot; /&gt;\n\n    &lt;!-- Ignore the ObsoleteLayoutParam issue in the specified files --&gt;\n    &lt;issue id=&quot;ObsoleteLayoutParam&quot;&gt;\n        &lt;ignore path=&quot;res/layout/activation.xml&quot; /&gt;\n        &lt;ignore path=&quot;res/layout-xlarge/activation.xml&quot; /&gt;\n    &lt;/issue&gt;\n\n    &lt;!-- Ignore the UselessLeaf issue in the specified file --&gt;\n    &lt;issue id=&quot;UselessLeaf&quot;&gt;\n        &lt;ignore path=&quot;res/layout/main.xml&quot; /&gt;\n    &lt;/issue&gt;\n\n    &lt;!-- Change the severity of hardcoded strings to &quot;error&quot; --&gt;\n    &lt;issue id=&quot;HardcodedText&quot; severity=&quot;error&quot; /&gt;\n&lt;/lint&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>2.3 Lint tool</h3>\n<p>Đây là công cụ chính để thực hiện việc kiểm tra source code của bạn. Lint tools quét tất cả source code của bạn. Bạn có thể sử dụng lint tools bằng command line hoặc tool được tích hợp sẵn lên Android Studio. Nó sẽ check cấu trúc code để đưa ra những gợi ý cú pháp có thể lỗi để bạn có thể sửa nó và tối ưu ứng dụng của bạn. Đây là một công cụ mạnh mẽ để kiểm tra và nhận biết các lỗi sai trước khi đưa ứng dụng của bạn đến người dùng cuối.</p>\n<h3>2.4 Kết quả của lint checks</h3>\n<p>Lint Tools có thể check source code và nhận diện được các vấn đề về convention, tính đúng đắn của cú pháp, tính bảo mật, khả năng tối ưu, tính đa ngôn ngữ trong i18n, khả năng truy cập,...\nChúng ta có thể xem kết quả việc check trên console hay có thể là cửa sổ trên công cụ Android Studio.</p>\n<h3>2.5 Cơ chế</h3>\n<p>khi chúng ta yêu cầu check source code, thì lint tool sẽ so sánh các cú pháp trong source code của chúng ta với các issue có trong file lint.xml, sau đó đưa ra kết quả kiểm tra (lint output).</p>\n<h1>3. Sử dụng Lint tools như thế nào ?</h1>\n<h2>3.1 Sử dụng command line</h2>\n<p>Nếu bạn sử dụng Gradle hay IDE Android Studio bạn chỉ cần chạy lệnh sau</p>\n<ul>\n<li>\n<p>Trên hệ điều hành Windows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">gradlew lint</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Trên hệ điều hành Linux hoặc MacOS:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">./gradlew lint</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đây sẽ là output:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&gt; Task :app:lint\nRan lint on variant release: 5 issues found\nRan lint on variant debug: 5 issues found\nWrote HTML report to file:&lt;path-to-project&gt;/app/build/reports/lint-results.html\nWrote XML report to file:&lt;path-to-project&gt;/app/build/reports/lint-results.xml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi chạy lệnh lint tool sẽ báo cáo cho chúng ta số các issue và đường dẫn đến file HTML và XML chứa nội dung kết quả kiểm tra của lint tool.\n<img src=\"https://developer.android.com/studio/images/write/html_lint_report.png\" alt=\"Compare\">\nChú ý rằng bạn cần cài biến môi trường JAVA_HOME cho androidsdk.\nTrường hợp source code của bạn có chia ra các môi trường variant, bạn có thể chạy lint với môi trường được chỉ định</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">gradlew lintDebug</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ngoài ra, nếu bạn không dùng Android studio hay Gradle thì bạn có thể sử dụng lint tools độc lập, bạn cài đặt Android SDK Tools từ SDK Manager. Sau đó tìm lint tools trong thư mục android_sdk/tools/. rồi chạy lệnh với cú pháp như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">lint [flags] &lt;project directory&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Để có thể thấy các flag và các tham số của lệnh bạn chạy lệnh:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">lint --help</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>3.2 Sử dụng Android studio để chạy lint tools</h2>\n<p>Android Studio đã hỗ trợ rất đầy đủ cho tính năng lint tools. Để chạy lint, bạn mở android studio và project bạn cần checks, Nhấn vào Analyse -> Inspect Code, Android studio sẽ hiển thị ra cửa sổ để setting phạm vi check , cuối cùng nhấn Ok và chờ Android Studio xử lý mọi thứ cho chúng ta. Thật tiện lợi phải không nào!\n<img src=\"https://developer.android.com/studio/images/write/chooseinspectionscope_2x.png\" alt=\"Compare\">- Sau khi Android Studio hoàn thành việc checks, Nó sẽ trả kết quả cho chúng ta ở cửa sổ inspect Code, cửa sổ bên trái sẽ là tất cả issue mà lint tìm được bên phải là mô tả , mức độ ưu tiên và vị trí của đoạn code gặp vấn đề.\n<img src=\"https://developer.android.com/studio/images/write/inspectandfix_2x.png\" alt=\"Compare\"></p>\n<h2>3.3 Chỉnh sửa issue của lint tools theo project</h2>\n<p>Như mình đã chia sẻ ở trên , ngoài những issue mặc định của lint tools, bạn hoàn toàn có thể chỉnh sửa các issue, thêm, bớt để phù hợp với dự án hiện tại. file lint.xml được lưu vào trong  thư mục gốc của project.\nChúng ta có các thẻ <code class=\"language-text\">&lt;lint&gt;</code> <code class=\"language-text\">&lt;issue&gt;</code> <code class=\"language-text\">&lt;ignore&gt;</code>\nĐể tắt checking bởi lint tools cho một methof trong kotlin , java ta dung annotations <code class=\"language-text\">@SuppressLint</code>. Tắt đối với file xml <code class=\"language-text\">xmlns:tools=&quot;http://schemas.android.com/tools&quot;</code> và sử dụng <code class=\"language-text\">tools:ignore</code>\nCấu hình cho Gradle, ta dùng <code class=\"language-text\">lintOptions {}</code></p>\n<h2>3.4 Tạo 1 warning baseline</h2>\n<p>Bạn có thể tạo 1 trạng thái cảnh báo cho project hiện tại, và bạn có thể dùng nó trong các lần tiếp theo. Những lần tiếp theo tools sẽ chỉ chạy những issue mới đã được báo cáo. Nó giúp chúng ta giải quyết các vấn đề trong tương lai mà không phải quay lại với những vấn đề đã có từ trước.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">android { \nlintOptions { baseline file(&quot;lint-baseline.xml&quot;)  }  \n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h1>Kết luận</h1>\n<p>Có thể thấy, Lint tools là 1 công cụ hữu ích giúp chúng ta trong việc tăng chất lượng sản phẩm , hạn chế tối đa những vấn đề xảy ra không đáng có, tăng khả năng maintain cho source code. Mặc dù vậy, Lint tools vẫn còn khá nhiều android developers lãng quên đi tầm quan trọng của nó, điển hình là mình (Nhưng mà bây giờ thì biết rồi !). Vậy mình hy vọng qua bài chia sẻ này có thể giúp bạn hiểu thêm được 1 tools mới và có thể áp dụng vào những dự án mình đang làm. Happy Coding!</p>\n</li>\n</ul>\n<p>by Phạm Thanh Tùng - Tomosia Việt Nam</p>","id":"f184c41a-46b5-5e0d-8a92-bb1226784e8b","frontmatter":{"title":"Optimize source code with Lint Check Tools in android","date":"27-09-2020","tags":["android"]},"fields":{"slug":"/toi-uu-code-voi-lint-checks/"}}},{"node":{"excerpt":"Mở bài(cho đúng format) Rails là 1 framework tuyệt vời do tính dễ tiếp cận cũng như khả năng kiểm soát logic tương đối dễ dàng của nó. Tuy nhiên, performance của Rails là vấn đề đã được đặt câu hỏi từ…","html":"<p><strong>Mở bài(cho đúng format)</strong></p>\n<p>Rails là 1 framework tuyệt vời do tính dễ tiếp cận cũng như khả năng kiểm soát logic tương đối dễ dàng của nó. Tuy nhiên, performance của Rails là vấn đề đã được đặt câu hỏi từ những ngày đầu nó xuất hiện, đặc biệt là với lượng dữ liệu lớn. Có thể bạn không xa lạ gì với câu chuyện dự án chạy với 40 server hay bottleneck khi bạn cố gắng xử lý với dữ liệu hàng triệu người dùng. Okay, có vài chuyện chúng ta có thể làm để không trở thành nhân vật trong những câu chuyện đó.</p>\n<p><strong>How</strong></p>\n<ol>\n<li>Bỏ qua ActiveRecord nếu có thể</li>\n</ol>\n<p>ActiveRecord đã làm mọi thứ dễ dàng hơn rất nhiều, nhưng nó không được thiết kế cho raw data. Khi bạn muốn áp dụng một loạt các thao tác đơn giản cho hàng triệu row, tốt hơn bạn nên gắn bó với raw SQL statement. Nếu bạn cảm thấy mình thực sự cần một công cụ ORM để giúp bạn hình dung mọi thứ, hãy xem phần tiếp theo.</p>\n<ol start=\"2\">\n<li>Update all records</li>\n</ol>\n<p>Cách nông dân:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">User</span><span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>city<span class=\"token punctuation\">:</span> “<span class=\"token constant\">Houston</span>”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>user<span class=\"token operator\">|</span>\n  user<span class=\"token punctuation\">.</span>note <span class=\"token operator\">=</span> “<span class=\"token constant\">Houstonian</span>”\n  user<span class=\"token punctuation\">.</span>save\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dễ đọc, dễ hiểu nhưng dễ toang. Nếu có khoảng 100k người dùng ở Houstonian, có thể đoạn code đó sẽ chạy cả ngày luôn. Một giải pháp hợp lý hơn sẽ là</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">User</span><span class=\"token punctuation\">.</span>update_all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token punctuation\">:</span> “<span class=\"token constant\">Houstonian</span>”<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>city<span class=\"token punctuation\">:</span> “<span class=\"token constant\">Houston</span>”<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nó có lẽ sẽ không tốn hơn 30s với cùng lượng dữ liệu</p>\n<ol start=\"3\">\n<li>Chỉ load columns cần thiết</li>\n</ol>\n<p>Mã như <code class=\"language-text\">User.where(city: “Houston”)</code> sẽ lấy tất cả thông tin của user từ database. Nếu bạn chỉ đơn giản là không quan tâm đến các thông tin khác như tuổi, giới tính hoặc nghề nghiệp, bạn không nên lấy chúng ngay từ đầu. Cố gắng sử dụng select_column khi bạn có nhiều record.</p>\n<ol start=\"4\">\n<li>Sử dụng find<em>in</em>batches</li>\n</ol>\n<p>Với các ứng dụng nhỏ, điều này thậm chí sẽ không được chú ý, nhưng nó thực sự quan trọng. 100 nghìn record user có thể dễ dàng chiếm hơn 5 GB memory. Server của bạn có thể sẽ crash. Do đó, bạn nên sử dụng find<em>in</em>batches</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">User</span><span class=\"token punctuation\">.</span>find_in_batches<span class=\"token punctuation\">(</span>conditions<span class=\"token punctuation\">:</span> <span class=\"token string\">'grade = 2'</span><span class=\"token punctuation\">,</span> batch_size<span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>students<span class=\"token operator\">|</span>\n  students<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>student<span class=\"token operator\">|</span>\n    student<span class=\"token punctuation\">.</span>find_or_create_by_class_name<span class=\"token punctuation\">(</span>‘<span class=\"token constant\">PE</span>’<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"5\">\n<li>Reduce transactions</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  <span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span>ms<span class=\"token punctuation\">)</span> <span class=\"token keyword\">BEGIN</span>\n  <span class=\"token punctuation\">(</span><span class=\"token number\">0.4</span>ms<span class=\"token punctuation\">)</span> <span class=\"token constant\">COMMIT</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Transactions xảy ra mỗi khi chúng ta lưu đối tượng. Nó vẫn sẽ xảy ra hàng triệu lần ngay cả khi chúng ta sử dụng find<em>in</em>batches, cách duy nhất để giảm transactions hiệu quả là nhóm các hoạt động của chúng ta. Ví dụ trước vẫn có thể được optimized hơn nữa:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">User</span><span class=\"token punctuation\">.</span>find_in_batches<span class=\"token punctuation\">(</span>conditions<span class=\"token punctuation\">:</span> <span class=\"token string\">'grade = 2'</span><span class=\"token punctuation\">,</span> batch_size<span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>students<span class=\"token operator\">|</span>\n  <span class=\"token constant\">User</span><span class=\"token punctuation\">.</span>transaction <span class=\"token keyword\">do</span>\n    students<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>student<span class=\"token operator\">|</span>\n      student<span class=\"token punctuation\">.</span>find_or_create_by_class_name<span class=\"token punctuation\">(</span>‘<span class=\"token constant\">PE</span>’<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bằng cách này, thay vì commits sau mỗi record, bây giờ nó commits mỗi 500 record, điều này hiệu quả hơn nhiều</p>\n<ol start=\"6\">\n<li>Đừng quên đánh index</li>\n</ol>\n<p>Biết rồi khổ lắm nói mãi, nhưng vẫn cứ nói cho chắc =)) Cần đánh index, nhưng đánh thế nào thì chắc cần 1 bài viết để nói rõ ràng hơn, các bạn tự tìm hiểu thêm nhé</p>\n<ol start=\"7\">\n<li>Destroy is expensive</li>\n</ol>\n<p>Mặc dù <code class=\"language-text\">destroy</code> và <code class=\"language-text\">delete</code> đều xóa các record, nhưng <code class=\"language-text\">destroy</code> cũng sẽ thực hiện tất cả các <code class=\"language-text\">callback</code>, điều này có thể thực sự tốn thời gian. Tương tự đối với <code class=\"language-text\">“destroy_all”</code> và <code class=\"language-text\">delete_all</code>. Vì vậy, nếu bạn chắc chắn rằng bạn chỉ muốn xóa các bản ghi mà không cần chạm vào bất kỳ thứ gì khác, bạn có thể chỉ cần sử dụng <code class=\"language-text\">delete_all</code>.</p>\n<p>Một trường hợp khác là nếu bạn muốn dọn dẹp toàn model table. Giả sử bạn muốn xóa tất cả users, bạn thực sự có thể sử dụng “TRUNCATE”:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Base</span><span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span>“<span class=\"token constant\">TRUNCATE</span> <span class=\"token constant\">TABLE</span> users”<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nhưng dù sao, xóa trong database vẫn thực sự tốn thời gian. Đây là lý do tại sao đôi khi chúng ta sử dụng phương pháp <code class=\"language-text\">soft delete</code>, không chỉ để có thể sử dụng dữ liệu đã được đánh dấu xoá.</p>\n<ol start=\"8\">\n<li>Không cần chạy mọi thứ ngay lập tức</li>\n</ol>\n<p>Background job is your friend. Sử dụng các công cụ như Resque và Sidekiq sẽ giúp hệ thống của bạn dễ <code class=\"language-text\">thở</code> hơn nhiều</p>\n<p>Nói một cách dễ hiểu, nếu data của bạn lớn, hãy cố gắng hết sức có thể để chạy chúng ở background. Mặc dù cung cấp sự tiện lợi, ActiveRecord làm chậm hệ thống của bạn một chút. Tuy nhiên, thông qua những mẹo thực tế này, bạn vẫn có thể giữ cho các ứng dụng Rails trở nên tuyệt vời trong khi không bị mất quá nhiều performance.</p>\n<ol start=\"9\">\n<li>Chấp nhận hy sinh thứ kém quan trọng hơn</li>\n</ol>\n<p>Cái này thuộc về lựa chọn, tuỳ theo business logic mà bạn gặp trong dự án nữa. Mình lấy ví dụ bài toán đếm view trang web / sản phẩm. Cách đơn giản nhất là mỗi khi có request thì bạn +1 vào biến đếm trong database. Tuy nhiên, cách này sẽ gặp vấn đề là +1 view vào database sẽ làm chậm response của người dùng, thêm nữa là ví dụ có 1000 người requét cùng lúc, sẽ là 1000 câu query update ... Nghĩ thôi cũng mệt rồi ...\nĐể giải quyết vấn đề này thì ta nên sử dụng 1 tầng cache, rồi tạo ra 1 scheduled job lặp đi lặp lại để ghi data từ cache xuống DB. Việc phát sinh query update vào DB chỉ xảy ra trên các scheduled job, do vậy ta đã giảm thiểu số lần update DB thành 1 con số cố định và có thể cân đối được, chưa kể tránh dồn queue nếu dùng worker để update biến đếm. Ví dụ nếu scheduled job chạy 10s 1 lần thì trong 1 phút sẽ chỉ có tối đa 6 query update DB được tạo ra (thay vì cả 1000 query update như trước). Dữ liệu view của sản phẩm sẽ không được update realtime mà sẽ có độ trễ tùy theo tần suất scheduled job. Tuy nhiên độ trễ này thường là chấp nhận được khi so sánh với những lợi ích nó mang lại.</p>\n<p><strong>Tổng kết</strong></p>\n<p>Done, qua bài viết trên mình muốn tổng hợp lại các kĩ thuật cơ bản mà ai cũng có thể sử dụng để tránh những mệt mỏi không đáng có khi triển khai 1 project Rails. Hy vọng bài viết sẽ có ích với mọi người.</p>","id":"4bc08f29-0971-560e-952e-5bd372fb720f","frontmatter":{"title":"Handle Massive Data in Rails","date":"11-09-2020","tags":["rails"]},"fields":{"slug":"/handle-massive-data-in-rails/"}}},{"node":{"excerpt":"I.Giới thiệu về GraphQL API 1. GraphQL là gì? GraphQL là Graph Query Language do Facebook tạo ra từ năm 2012 cung cấp giao thức chung cho phép giao tiếp giữa client và server để cập nhật và lấy dữ…","html":"<h1>I.Giới thiệu về GraphQL API</h1>\n<h2>1. GraphQL là gì?</h2>\n<p>GraphQL là Graph Query Language do Facebook tạo ra từ năm 2012 cung cấp giao thức chung cho phép giao tiếp giữa client và server để cập nhật và lấy dữ liệu.</p>\n<p>Client truy vấn đến máy chủ GraphQL bằng các truy vấn với đặc điểm: format của dữ liệu trả về được mô tả trong câu truy vấn và được định nghĩa ở phía client thay vì ở server. Nói đơn giản hơn, đây là truy vấn hướng client, cấu trúc dữ liệu không khô cứng 1 khuôn mẫu từ server (REST API) mà thay đổi theo từng ngữ cảnh sao cho hiệu quả nhất đối với client mà chỉ cần dùng duy nhất 1 endpoint.\n<img src=\"https://viblo.asia/uploads/7e2761e2-b970-4768-a20e-63e0007cb84c.png\"></p>\n<h2>2. Tổng quan GraphQL</h2>\n<p>Điều quan trọng là GraphQL không phải là một ngôn ngữ truy vấn thực sự, nó chỉ là giao thức giao tiếp giữa client và server, rất cả client (web, mobile) đều có thể giao tiếp với bất kỳ server nào mà sử dụng ngôn ngữ GraphQL.</p>\n<p>Khái niệm chính về GraphQL bao gồm:</p>\n<ul>\n<li>Cấu trúc phân tầng (Hierarchical)</li>\n<li>Hướng sản phẩm (Product0-centric)</li>\n<li>Định kiểu mạnh (Strong-typing)</li>\n<li>Truy vấn hướng client (Client-specified queries)</li>\n<li>Nội quan (Introspective)</li>\n</ul>\n<h2>3.GraphQL giải quyết vấn đề gì ?</h2>\n<p>GraphQL khắc phục điểm yếu của của REST API bởi REST có tính chất dựa trên tài nguyên cố định, ví dụ:</p>\n<p><code class=\"language-text\">GET /articles/1?include=author.name,author.email,likes.user.name</code>\nNhư truy vấn trên thuộc loại liên kết nhiều bảng, REST API cho articles sẽ xử lý khá nhiều và không được linh động. Đối với GraphQL thì sẽ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{\n  articles(id:1) {\n    title,\n    content,\n    author {\n      name,\n      email\n    },\n    likes {\n      user {\n        name\n      }\n    } \n  }\n}\n{\n  articles(id:1) {\n    title,\n    content,\n    author {\n      name,\n      email\n    },\n    likes {\n      user {\n        name\n      }\n    } \n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với GraphQL, chúng ta quy định chỉ trả về title và content cho article, rất linh động và không bị thừa dữ liệu, hơn nữa cấu trúc trên nhìn khá rõ ràng mạch lạc.</p>\n<p>Cũng giống như REST, GraphQL hoàn toàn có thể create, update, delete, nhưng với cấu trúc sáng sủa và cấu trúc phân tầng nên dễ dàng cho lập trình viên phía client.</p>\n<h1>II. Cài đặt thư viện Apollo để sử dụng cho GraphQL</h1>\n<p>Trong mỗi API theo kiểu GraphQL sẽ luôn có 1 file <code class=\"language-text\">schema</code>. Đây là file dùng để server đinh nghĩa ra các câu query, mutation và type.</p>\n<h2>1.Giới thiệu về Apollo</h2>\n<p>Apollo IOS là một thư viện hỗ trợ mạnh và tốt cho việc giao tiếp với GraphQL. Được viết bởi ngôn ngữ Swift</p>\n<p>Nó cho phép bạn thực hiện truy vấn và thay đổi dữ liệu đối với máy chủ GraphQL và trả về kết quả theo kiểu Swift cụ thể. Điều này có nghĩa là bạn không phải đối phó với việc phân tích cú pháp JSON, hoặc truyền đi các tham số và khiến các bạn chuyển đổi kiểu dữ liệu bằng tay. Bạn cũng không phải tự viết các kiểu mô hình, bởi vì chúng được tạo ra từ các định nghĩa GraphQL mà UI của bạn sử dụng.</p>\n<p>Vì các model được tao ra với những kiểu cơ bản, bạn chỉ có thể truy cập dữ liệu mà chúng ta chỉ định muốn lấy về. Nếu bạn không yêu cầu một trường, bạn sẽ không thể truy cập vào thuộc tính tương ứng. Trong thực tế, điều này có nghĩa là bạn có thể dựa vào trình kiểm tra kiểu Swift để đảm bảo lỗi trong quá trình truy cập dữ liệu xuất hiện tại thời điểm biên dịch. Với tích hợp Xcode của Apollo, bạn có thể làm việc thuận tiện với mã UI và các định nghĩa GraphQL tương ứng bên cạnh và thậm chí nó sẽ xác thực các tài liệu truy vấn của bạn và hiển thị lỗi trong dòng.</p>\n<h2>2. Cài đặt Apollo</h2>\n<p>Làm theo cùng với các bước được mô tả chi tiết bên dưới để sử dụng Apollo iOS trong ứng dụng của bạn:</p>\n<ul>\n<li>Cài đặt  <code class=\"language-text\">Apollo</code> framework vào dự án của bạn và liên kết nó với project.</li>\n<li>Cài đặt <code class=\"language-text\">apollo-codegen</code> trên máy thông qua NPM.</li>\n<li>Thêm mã vào Build Phases để sinh các model và các câu query từ file<code class=\"language-text\">schema</code>.</li>\n<li>Thêm file <code class=\"language-text\">schema</code> vào project.</li>\n<li>Chạy thử.</li>\n<li>Thêm tệp API được tạo ra sau khi chạy thử vào project.</li>\n<li>Cài đặt thêm add-on để là highlight mã trong file <code class=\"language-text\">.graphql</code>.</li>\n<li>Tạo các file có định extension <code class=\"language-text\">.graphql</code> với các truy vấn hoặc thay đổi.</li>\n</ul>\n<h3>Cài đặt Apollo framework</h3>\n<p>Chúng ta có thể cài đặt <code class=\"language-text\">Apollo</code> framework bằng những cách sau: Carthage, CocoaPods hoặc kéo thả thư viện vào project bằng tay.</p>\n<h4>Carthage</h4>\n<ol>\n<li>Thêm github \"apollostack / apollo-ios\" vào Cartfile.</li>\n<li>Chạy bản cập nhật carthage.</li>\n<li>Kéo và thả <code class=\"language-text\">Apollo.framework</code> từ thư mục <code class=\"language-text\">Carthage/Build/iOS</code> đến phần “Linked Frameworks and Libraries” trong tab \"General\".</li>\n<li>\n<p>Chuyển qua tab \"Build Phases\", nhấp vào biểu tượng \"+\" và chọn \"New Run Script Phase\". Tạo một script chạy trong đó bạn chỉ định Shell : bin / sh thêm đoạn code bên dưới vào khung script:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/ Usr/local/bin/carthage copy-frameworks</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và thêm đường dẫn của thư viện Apollo vào \"Input Files\" ở bên dưới, ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ (SRCROOT) /Carthage/Build/iOS/Apollo.framework</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ol>\n<h4>Cocopods</h4>\n<ol>\n<li>\n<p>Bởi vì Apollo iOS được viết bới Swift 3.1. Cho nên nó yêu cầu CocoaPods phiên bản 1.1.0. Bạn có thể nó nếu muốn sử dụng:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">gem install cocoapods</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Thêm <code class=\"language-text\">pod &quot;Apollo&quot;</code> và Podfile.</li>\n<li>Chạy <code class=\"language-text\">pod install</code></li>\n<li>Sử dụng <code class=\"language-text\">.xcworkspace</code> được tạo ra bởi CocoaPods để làm việc.</li>\n</ol>\n<h4>Kéo thả thư viện</h4>\n<p>Bạn hãy  download reposity của <a href=\"https://github.com/apollographql/apollo-ios\">apollo-iOS</a>, và kéo <code class=\"language-text\">Apollo.xcodeproj</code> và thả vào trong project hoặc workspace, thêm Apollo.framework vào target</p>\n<h3>Cài đặt apollo-codegen</h3>\n<p> Cài đặt <code class=\"language-text\">apollo-codegen</code> thông npm bằng câu lệnh bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm install -g apollo-codegen</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Cài đặt script để sinh ra mã API</h3>\n<p>Thêm bước tạo mã ở<code class=\"language-text\">buid phases</code></p>\n<p>Để gọi <code class=\"language-text\">apollo-codegen</code> hoạt động trong  Xcode, tạo một bước script chạy trước \"Compile Sources\".</p>\n<p>Trên tab cài đặt \"Build Phases\", nhấp vào biểu tượng \"+\" và chọn \"New Run Script Phase\". Tạo một Run Script, đổi tên thành \"Generate Apollo GraphQL API\" và kéo nó ngay phía trên \"Compile Sources\". Sau đó, thêm các nội dung bên dưới vào khung scrip  :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">APOLLO_FRAMEWORK_PATH=&quot;$(eval find $FRAMEWORK_SEARCH_PATHS -name &quot;Apollo.framework&quot; -maxdepth 1)&quot;\n\nif [ -z &quot;$APOLLO_FRAMEWORK_PATH&quot; ]; then\n  echo &quot;error: Couldn&#39;t find Apollo.framework in FRAMEWORK_SEARCH_PATHS; make sure to add the framework to your project.&quot;\n  exit 1\nfi\n\ncd &quot;${SRCROOT}/${TARGET_NAME}&quot;\n$APOLLO_FRAMEWORK_PATH/check-and-run-apollo-codegen.sh generate $(find . -name &#39;*.graphql&#39;) --schema schema.json --output API.swift</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tập lệnh trên sẽ gọi apollo-codegen thông qua script wrapper check-and-run-apollo-codegen.sh, mà thực sự chứa trong gói <code class=\"language-text\">Apollo.framework</code>. Lý do chính của việc này là để kiểm tra xem phiên bản apollo-codegen đã được cài đặt trên hệ thống của bạn có tương thích với phiên bản khung được cài đặt trong dự án của bạn và để cảnh báo bạn nếu không. Nếu không có kiểm tra này, bạn có thể sẽ chỉ tạo ra mã không tương thích với mã chạy có trong framework.</p>\n<h3>Tải về file schema</h3>\n<p>Apollo IOS bắt buộc người developer phải thêm vào 1 file schema của GraphQL. File schema là một file JSON có chứa các thông tin về cú pháp truy vấn của GraphQL. Thông thường tập tin này được gọi là schema.json, và bạn lưu trữ nó bên cạnh tệp .graphql trong dự án.</p>\n<p>Bạn có thể sử dụng <code class=\"language-text\">apollo-codegen</code> để tải xuống GraphQL schema bằng cách gửi truy vấn phân tích đến máy chủ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">apollo-codegen download-schema http://localhost:8080/graphql --output schema.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nếu cần thiết bạn có thể sử dụng  header trong HTTP header cho request. Nhiều GraphQL API yêu cầu cần phải có token chứng thực mới có thể lấy về, lúc này chỉ cần thêm <code class=\"language-text\">--header &quot;Authorization: Bearer &lt;token&gt;&quot;</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">apollo-codegen download-schema https://api.github.com/graphql --output schema.json --header &quot;Authorization: Bearer &lt;token&gt;&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Chạy thử</h3>\n<p>Tại thời điểm này thì chúng ta có thể build project. Việc này giúp chúng ta xác định <code class=\"language-text\">apollo-codegen</code> có thể tìm thấy file <code class=\"language-text\">schema.json</code> trong dự án. Nếu không thì sẽ xuất hiện lỗi như thế này:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Cannot find GraphQL schema file […]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Thêm tệp API được tạo ra</h3>\n<p>Sau bước trên nếu chúng ta build thành công thì lúc này thư viện Apollo iOS sẽ sinh ra 1 file có tên là <code class=\"language-text\">API.swift</code>. Lúc này ta cần thêm nó vào dự án.</p>\n<h3>Cài đặt Add-on cho Xcode</h3>\n<ol>\n<li>Tải <a href=\"https://github.com/apollographql/xcode-graphql\">repository</a> <code class=\"language-text\">xcode-apollo</code> xuống.</li>\n<li>Đóng toàn bộ màn hình Xcode nếu đang được mở.</li>\n<li>\n<p>Tiếp theo cần tạo 1 thư mục bên trong đường dẫn <code class=\"language-text\">~/Library/Developer/Xcode</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">mkdir ~/Library/Developer/Xcode/Plug-ins ~/Library/Developer/Xcode/Specifications</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Copy file <code class=\"language-text\">GraphQL.ideplugin</code> vào trong <code class=\"language-text\">~/Library/Developer/Xcode/Plug-ins</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cp -R GraphQL.ideplugin ~/Library/Developer/Xcode/Plug-ins</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Copy file <code class=\"language-text\">GraphQL.xclangspec</code> vào trong <code class=\"language-text\">~/Library/Developer/Xcode/Specifications</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cp -R GraphQL.xclangspec ~/Library/Developer/Xcode/Specifications</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>*Có thể sẽ xuất hiện vài cảnh báo sau khi cài đặt add-on vào Xcode.</p>\n</li>\n</ol>\n<h3>Tạo file <code class=\"language-text\">.graphql</code></h3>\n<p>Apollo iOS sẽ tự tạo các câu truy vấn và thay đổi từ file <code class=\"language-text\">.graphql</code> trong dự án .</p>\n<p>Lúc này ta cần 1 quy ước cho việc đặt tên dễ quản lý các việc truy vấn, thay đổi bằng cách tạo file <code class=\"language-text\">&lt;name&gt;.graphql</code> bên cạnh file <code class=\"language-text\">&lt;name&gt;.swift</code>.</p>\n<p>Nếu lúc này, chúng ta cài đặt add-on cho Xcode thì có thể sử dụng chế độ xem đồng thời file <code class=\"language-text\">.graphql</code> và <code class=\"language-text\">.swift</code>.</p>\n<h1>III. Kết thúc</h1>\n<p>Mình đã giới thiệu và hướng dẫn các bạn cài đặt thư viện Apollo cho việc quản lý và giao tiếp với GrapQL API. Sau thời gian sử dụng, mình thấy thư viện này còn nhiều hạn chế về việc quản lý các task, khó cho việc mapper đối với model do chúng ta định nghĩa, khó get được status code khi hoàn thành xong request, và còn nhiều hạn chế khác. Mình nghĩ chắc thư viện này còn mới nên vẫn còn nhiều hạn chế như vậy.Mong tương lại, thư viện Apollo sẽ hỗ trợ chúng ta nhiều hơn. Cảm ơn các bạn đã theo dõi bài viết</p>","id":"89473eb0-119e-50ff-b883-b0aa8cd244c1","frontmatter":{"title":"How to install Apollo iOS library for Graph API","date":"04-09-2020","tags":["ios"]},"fields":{"slug":"/How to install Apollo iOS library for Graph API/"}}},{"node":{"excerpt":"Nhìn thoáng qua, bạn có hiểu được đây là gì không? \nThật ra máy tính cũng không hiểu được đoạn văn bản trên là gì đâu, nó như một miếng thịt sống mà chưa được qua chế biến. Vậy chúng ta sẽ xem làm sao…","html":"<div class=\"gatsby-highlight\" data-language=\"logs\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-logs line-numbers\"><code class=\"language-logs\">01110100 01110101 01101001 00100000 01101100 01100001 \n00100000 01101000 01101111 01100001 01101110 01100111 \n00100000 01101100 01100001 01101110</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nhìn thoáng qua, bạn có hiểu được đây là gì không?\nThật ra máy tính cũng không hiểu được đoạn văn bản trên là gì đâu, nó như một miếng thịt sống mà chưa được qua chế biến. Vậy chúng ta sẽ xem làm sao từ một miếng thịt sống máy tính có thể \"biến\" nó thành món Beefsteak thượng hạng được nhé. 😋</p>\n<hr>\n<h1>1. Bảng mã, encoding, UTF8 là gì?</h1>\n<p>Trước tiên hãy quay về vấn đề cơ bản nhất, khi máy tính tiếp nhận bất cứ dữ liệu gì, nó đều quy đổi về hệ nhị phân dưới hai số <code class=\"language-text\">0</code> và <code class=\"language-text\">1</code>.\nMáy tính thực chất chỉ là các mạch điện tử được lắp ghép lại với nhau. Ở trên mạch điện tử chỉ có 2 trạng thái là <code class=\"language-text\">đóng mạch (bit1)</code> và <code class=\"language-text\">ngắt mạch (bit0)</code>. Vậy thì ta chỉ cần một bảng mã ký tự (char code table) để mapping nó với ngôn ngữ của máy tính thôi.</p>\n<p>Vào đầu những năm 1963, hầu hết người sử dụng máy tính định cư ở Hoa Kỳ, họ đã phát minh và sử dụng bảng mã <code class=\"language-text\">ASCII</code>:</p>\n<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/USASCII_code_chart.png/1024px-USASCII_code_chart.png\" alt=\"image\"></p>\n<p>Ánh xạ như trên bảng mã ký tự <code class=\"language-text\">ASCII</code> ta thấy dấu <code class=\"language-text\">!</code> được quy đổi thành <code class=\"language-text\">010 0001</code> dưới hệ nhị phân.\nLúc đầu, mọi thứ hoạt động rất ổn định cho đến khi máy tính được sử dụng ở các quốc gia khác, và <code class=\"language-text\">ASCII</code> không có ngôn ngữ của họ.\n<code class=\"language-text\">ASCII</code> sử dụng 8bit để mã hóa kí tự với các văn bản hầu hết chỉ sử dụng 1 byte, nhưng vì chỉ sử dụng 8bit nên chỉ mã hóa được <code class=\"language-text\">0 -255 (256)</code> kí tự nên không phù hợp.\n<code class=\"language-text\">Unicode</code> được ra đời vì đó, nó sử dụng 16bit để mã hóa, với bộ gõ này ta có thể mã hóa được <code class=\"language-text\">65536 kí tự</code>, nên được sử dụng làm chuẩn đúng cho đến hiện nay.</p>\n<p>Nhưng vấn đề là, một số nước sử dụng riêng của chính họ. Lấy ví dụ với JP, ta có <code class=\"language-text\">Shift-JIS</code> và <code class=\"language-text\">EUC-JP</code>, có lẽ việc <code class=\"language-text\">Shift-JIS</code> vẫn được phổ biến tại Nhật vì nó chỉ sử dụng 2byte cho việc encoding tiếng nhật thay vì 3~4byte với <code class=\"language-text\">UTF-8</code>.</p>\n<p><code class=\"language-text\">Shift-JIS</code> cho đến hiện nay có khá nhiều version:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">- Windows-932 / Windows-31J\n- MacJapanese\n- Shift_JISx0213 and Shift_JIS-2004</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h1>2.  Bài toán</h1>\n<p>Khách hàng yêu cầu convert dữ liệu từ <code class=\"language-text\">UTF-8</code> sang <code class=\"language-text\">Shift-JIS</code>.\nRất đơn giản phải không nào, ở <code class=\"language-text\">Ruby</code> ta chỉ cần call:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">text.encode(Encoding::SJIS)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Về cơ bản, đang số ký tự đều có thể convert được. Với Windows, khi dữ liệu được lưu thì định dạng default của nó sẽ là <code class=\"language-text\">UTF-8</code>.</p>\n<p>Nhưng ở bảng mã <code class=\"language-text\">Unicode</code>, có những ký tự của <code class=\"language-text\">Shift-jis</code> không có nhưng <code class=\"language-text\">Cp943c</code> lại có và ngược lại.</p>\n<p><img src=\"http://www2d.biglobe.ne.jp/~msyk/cgi-bin/charcode/img/MS932_Cp943C_4.png\" alt=\"image\"></p>\n<p>Với những ký tự đặc biệt ở trên thì khi encode ta sẽ thấy xuất hiện lỗi.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Encoding::UndefinedConversionError</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Vì vậy, trước khi encode sang <code class=\"language-text\">Shift-jis</code>, ta cần convert các ký tự bị thiếu sang ký tự fullwidth của <code class=\"language-text\">Unicode</code> dưới định dạng <code class=\"language-text\">MS932</code>. Ở đây ta sẽ patching vào class <code class=\"language-text\">String</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">class String\n  def sjisable\n    str       = self\n    from_chr  = &quot;\\u{301C 2212 00A2 00A3 00AC 2013 2014 2016 203E 00A0 00F8 203A}&quot;\n    to_chr    = &quot;\\u{FF5E FF0D FFE0 FFE1 FFE2 FF0D 2015 2225 FFE3 0020 03A6 3009}&quot;\n    str.tr!(from_chr, to_chr)\n    str       = str.encode(&quot;Windows-31J&quot;,&quot;UTF-8&quot;,invalid: :replace, undef: :replace).encode(&quot;UTF-8&quot;,&quot;Windows-31J&quot;)\n  end\nend</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">text.sjisable.encode(&#39;Shift_JIS&#39;)  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bài toán đã được giải quyết.</p>\n<hr>\n<p>Vậy là mọi người đã hiểu và nắm được Unicode, UTF-8 hay Shift-JIS, khi gặp vấn đề tương tự thì hãy áp dụng như bài toán ở trên nhé. Hẹn gặp mọi người tại một bài viết khác về Encoding. Xin cảm ơn.</p>\n<h6><em><div style=\"text-align: right\"> - by Lê Hoàng Lân </div></em></h6>","id":"a1edf689-b946-572c-a04b-52e653ce7bd3","frontmatter":{"title":"Mind Blown với Encoding","date":"27-08-2020","tags":["Ruby"]},"fields":{"slug":"/mind-blown-voi-encoding/"}}},{"node":{"excerpt":"Chào mọi người, hôm nay chúng ta hãy cùng nhau chia sẻ kiến thức về Authentication cơ bản trong Framework Laravel nhé! Khái niệm Authentication là gì?\nAuthentication theo Wikipedia:\nlà một hành động…","html":"<p>Chào mọi người, hôm nay chúng ta hãy cùng nhau chia sẻ kiến thức về Authentication cơ bản trong Framework Laravel nhé!</p>\n<h1>Khái niệm</h1>\n<p><strong><em>Authentication là gì?</em></strong>\n<em>Authentication theo Wikipedia:</em>\nlà một hành động nhằm thiết lập hoặc chứng thực một điều gì đó (hoặc một người nào đó) đáng tin cậy, có nghĩa là, những lời khai báo do người đó đưa ra hoặc về vật đó là sự thật. Xác thực một đối tượng còn có nghĩa là công nhận nguồn gốc (<em>provenance</em>) của đối tượng, trong khi, xác thực một người thường bao gồm việc thẩm tra nhận dạng của họ. Việc xác thực thường phụ thuộc vào một hoặc nhiều nhân tố xác thực (<em>authentication factors</em>) để minh chứng cụ thể.</p>\n<p><strong>Authentication Laravel</strong>\nTương tự như khái niệm trên, authentication trong \u001dLaravel cũng được dùng để xác thực một điều gì đó như request của người dùng đến sever.\nĐặc biệt Laravel làm cho việc triển khai xác thực rất đơn giản. Trên thực tế, hầu hết mọi thứ đều được cấu hình sẵn sàng cho chúng ta sử dụng một cách dễ dàng và hiệu quả.</p>\n<h2>Authentication trong Laravel</h2>\n<p>Như đã giới thiệu ở trên, Laravel làm cho việc triển khai xác thực trở nên đơn giản và hiệu quả, vậy cách cấu hình và sử dụng như thế nào?</p>\n<p>Đầu tiên, hãy mở file <code class=\"language-text\">auth.php</code> trong thư mục config trong project Laravel:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    \n    | Authentication Defaults\n    \n    |--------------------------------------------------------------------------\n    | This option controls the default authentication \"guard\" and password\n    | reset options for your application. You may change these defaults\n    | as required, but they're a perfect start for most applications.\n    |\n    */</span>\n    \n    <span class=\"token single-quoted-string string\">'defaults'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'guard'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'web'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token single-quoted-string string\">'passwords'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    \n    | Authentication Guards\n    \n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | Next, you may define every authentication guard for your application.\n    \n    | Of course, a great default configuration has been defined for you\n    \n    | here which uses session storage and the Eloquent user provider.\n    \n    |\n    \n    | All authentication drivers have a user provider. This defines how the\n    \n    | users are actually retrieved out of your database or other storage\n    \n    | mechanisms used by this application to persist your user's data.\n    \n    |\n    \n    | Supported: \"session\", \"token\"\n    \n    |\n    \n    */</span>\n    \n      \n    \n    <span class=\"token single-quoted-string string\">'guards'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'web'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t    <span class=\"token single-quoted-string string\">'driver'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'session'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'provider'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token single-quoted-string string\">'api'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t    <span class=\"token single-quoted-string string\">'driver'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'token'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'provider'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'hash'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n \n    <span class=\"token comment\">/*\n    | User Providers\n    \n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | All authentication drivers have a user provider. This defines how the\n    \n    | users are actually retrieved out of your database or other storage\n    \n    | mechanisms used by this application to persist your user's data.\n    \n    |\n    \n    | If you have multiple user tables or models you may configure multiple\n    \n    | sources which represent each model / table. These sources may then\n    \n    | be assigned to any extra authentication guards you have defined.\n    |\n    | Supported: \"database\", \"eloquent\"\n    |\n    \n    */</span>\n    \n      \n    \n    <span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'driver'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token single-quoted-string string\">'model'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    \n      \n    \n    <span class=\"token comment\">// 'users' => [</span>\n    \n    <span class=\"token comment\">// 'driver' => 'database',</span>\n    \n    <span class=\"token comment\">// 'table' => 'users',</span>\n    \n    <span class=\"token comment\">// ],</span>\n    \n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    \n    | Resetting Passwords\n    \n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | You may specify multiple password reset configurations if you have more\n    \n    | than one user table or model in the application and you want to have\n    \n    | separate password reset settings based on the specific user types.\n    \n    |\n    \n    | The expire time is the number of minutes that the reset token should be\n    \n    | considered valid. This security feature keeps tokens short-lived so\n    \n    | they have less time to be guessed. You may change this as needed.\n    \n    |\n    \n    */</span>\n    \n    <span class=\"token single-quoted-string string\">'passwords'</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t    <span class=\"token single-quoted-string string\">'users'</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t    <span class=\"token single-quoted-string string\">'provider'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'table'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'password_resets'</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'expire'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n\t\t    <span class=\"token single-quoted-string string\">'throttle'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n\t    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token comment\">/*\n    \n    |--------------------------------------------------------------------------\n    | Password Confirmation Timeout\n    |--------------------------------------------------------------------------\n    \n    |\n    \n    | Here you may define the amount of seconds before a password confirmation\n    \n    | times out and the user is prompted to re-enter their password via the\n    \n    | confirmation screen. By default, the timeout lasts for three hours.\n    */</span>\n    <span class=\"token single-quoted-string string\">'password_timeout'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token number\">10800</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta đang tìm hiểu cơ bản về Authentication Laravel nên tại đây chúng ta chỉ quan tâm tới phần cấu hình này </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span> \n\t    <span class=\"token single-quoted-string string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span> \n\t\t    <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span> \n\t\t    <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> \n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>Driver: Đây là thiết lập xác định phương thức lấy thông tin người dùng để xác thực, và như các bạn thấy thì mặc định nó sẽ sử dụng  <em><strong><a href=\"%5Bhttps://laravel.com/docs/7.x/eloquent%5D(https://laravel.com/docs/7.x/eloquent)\">eloquent</a>,</strong></em> tuy nhiên còn một sự lựa chọn khác là <em>database</em> và thậm trí bạn cũng có thể tạo thêm một driver riêng theo nhu cầu sử dụng của bạn (mình sẽ nói ở phần nâng cao).</em></p>\n<p><em>Model: Đây là thiết lập nguồn dữ liệu lấy ra từ đâu. Ở đây mặc định Laravel chọn là moder User (local: App\\User.php). Thông số này bạn có thể chỉnh thành name model của bạn muốn truy xuất để lấy dữ liệu.\nVí dụ: App\\Models\\Account.php, App\\Models\\Admin.php,...</em></p>\n<p>Hệ thống xác thực Authentication của Laravel được xây dựng dựa trên 2 thành phần cốt lõi - guard và provider.</p>\n<h1>Guards</h1>\n<p><code class=\"language-text\">Guard</code>  được hiểu là một cách cung cấp logic được dùng để xác thực người dùng. Trong Laravel, thường hay dùng  <code class=\"language-text\">session guard</code>  hoặc  <code class=\"language-text\">token guard</code>.  </p>\n<ul>\n<li><code class=\"language-text\">Session guard</code>  duy trì trạng thái người dùng trong mỗi lần request bằng cookie. </li>\n<li><code class=\"language-text\">Token guard</code> xác thực người dùng bằng cách kiểm tra token hợp lệ trong mỗi lần request.</li>\n</ul>\n<p>Vì vậy, <strong>guard</strong> xác định logic của việc xác thực, và không cần thiết để luôn xác thực bằng cách lấy các thông tin hợp lệ từ phía back-end. Bạn có thể triển khai một guard mà chỉ cần kiểm tra sự có mặt của một thông tin cụ thể trong headers của request và xác thực người dùng dựa trên điều đó.</p>\n<h1>Providers</h1>\n<p>Nếu  <code class=\"language-text\">Guards</code>  hỗ trợ việc định nghĩa logic để xác thực thì  <code class=\"language-text\">Providers</code>  lấy ra dữ liệu người dùng từ phía back-end. Nếu guard yêu cầu người dùng phải hợp lệ với bộ lưu trữ ở back-end thì việc triển khai truy suất người dùng sẽ được providers thực hiện. Laravel hỗ trợ cho việc người dùng truy xuất sử dụng Eloquent và Query Builder vào database. Tuy nhiên, chúng ta có thể thêm bất kì thay đổi vào. Ví dụ, các bạn đặt model User trong namespace App nữa mà các bạn muốn đặt trong namespace App\\Model thì chúng ta sẽ thay đỏi  <code class=\"language-text\">providers</code>  trong file  <code class=\"language-text\">app/auth.php</code>  như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'eloquent'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App\\<span class=\"token package\">Model<span class=\"token punctuation\">\\</span>User</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Tạo Auth login cơ bản trong Laravel</h2>\n<p>Để tạo Auth trong Laravel thì cũng hết sức đơn giản. Chúng ta dùng lệnh:</p>\n<ul>\n<li>\n<p>version laravel &#x3C;= 5.x</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">\bphp artisan make:auth</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>version laravel >= 6.x </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer require laravel/ui</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php artisan ui vue --auth</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau khi chạy lệnh này lên thì Laravel sẽ thêm cho chúng ta một homeController, 2 route và \u001dcác view mới.</p>\n<ul>\n<li>Ngay lúc này bạn run project lên và sẽ thấy một số thay đổi về giao diện welcome mặc định của Laravel. Có thêm LOGIN &#x26; REGISTER ở bên góc trên bên phải màn hình.</li>\n</ul>\n<p><img src=\"https://s3.ap-northeast-1.amazonaws.com/furublog/media/two-authentication-laravel/Two-Factor-Authentication-Laravel-2.png\" alt=\"enter image description here\"></p>\n<ul>\n<li>Click vào LOGIN sẽ hiển thị giao diện form đăng nhập mặc định như sau</li>\n</ul>\n<p><img src=\"https://blog.haposoft.com/content/images/2020/03/90359819_214514456312271_9219684060106850304_n.png\" alt=\"enter image description here\"></p>\n<ul>\n<li>Click vào REGISTER sẽ hiển thị form đăng ký để khởi tạo 1 tài khoản với authenticate của laravel</li>\n</ul>\n<p><img src=\"https://blog.haposoft.com/content/images/2020/03/90498509_209542350279297_5428125770587308032_n.png\" alt=\"enter image description here\"></p>\n<p>Các bạn hãy thử đăng ký tại form register và đăng nhập tại form login để hiểu hơn về tính năng. Sau đó check table users trong database xem dữ liệu tài khoản vừa tạo nhé.</p>\n<h2>Kết luận</h2>\n<p>Chúng ta đã cùng nhau tìm hiểu về authentication laravel căn để có thể xây dựng được một authentication để sử dụng cơ bản. Ngoài ra Authentication Laravel còn có rất nhiều điều thú vị khác chúng ta sẽ cùng nhau chia sẻ ở bài viết Authentication Laravel nâng cao, các bạn sẽ thấy thêm phần thú vị về Framework Laravel.</p>","id":"32a4c9a9-7ec5-5539-8dae-57bc06a63c31","frontmatter":{"title":"Authentication basic Laravel","date":"26-08-2020","tags":["php","laravel"]},"fields":{"slug":"/authentication-trong-laravel/"}}},{"node":{"excerpt":"I. Giới thiệu MySQL là hệ quản trị cơ sở dữ liệu quan hệ (Relational Database Management System) mã nguồn mở phổ biến nhất, sử dụng để phát triển các ứng dụng, phần mềm. MySQL là RDBMS có tốc độ cao…","html":"<h1>I. Giới thiệu</h1>\n<p>MySQL là hệ quản trị cơ sở dữ liệu quan hệ (Relational Database Management System) mã nguồn mở phổ biến nhất, sử dụng để phát triển các ứng dụng, phần mềm.</p>\n<p>MySQL là RDBMS có tốc độ cao, ổn định, dễ sử dụng, và có lượng người dùng hỗ trợ đông đảo. Do đó, nó là sự lựa chọn hàng đầu trong việc phát triển với cơ sở dữ liệu quan hệ.</p>\n<h2>II. Một số khái niệm trong MYSQL</h2>\n<ul>\n<li><strong>Database:</strong>  Cơ sở dữ liệu là một tập hợp các bảng dữ liệu, các bảng này có quan hệ với nhau.</li>\n<li><strong>Table:</strong>  Bảng là một ma trận dữ liệu. Một bảng trong một cơ sở dữ liệu trông giống như một bảng tính đơn giản.</li>\n<li><strong>Field:</strong>  Trường là một cột trong một bảng được thiết kế để lưu trữ thông tin cụ thể về mỗi bản ghi trong bảng.</li>\n<li><strong>\bColumn:</strong>  Cột chứa cùng một kiểu dữ liệu, ví dụ như tên khách hàng.</li>\n<li><strong>\bRow:</strong>  Hàng (row, entry, record) là một nhóm dữ liệu có liên quan.</li>\n<li><strong>Primary Key:</strong>  Khóa chính là duy nhất. Một giá trị key không thể xuất hiện hai lần trong một bảng.</li>\n<li><strong>Foreign Key:</strong>  Khoá ngoại dùng để liên kết bảng với nhau.</li>\n<li><strong>Unique:</strong>  Đảm bảo rằng tất cả các giá trị trong một cột là khác nhau.</li>\n<li><strong>Index:</strong>  Một chỉ mục trong một cơ sở dữ liệu tương tự như chỉ mục trong một cuốn sách.</li>\n<li><strong>Referential Integrity:</strong>  Đảm bảo rằng một giá trị Foreign Key luôn luôn trỏ tới một hàng đang tồn tại.</li>\n</ul>\n<h2>III. Kiểu dữ liệu cơ bản trong MySQL</h2>\n<p><strong><em>1. Kiểu dữ liệu số</em></strong></p>\n<ul>\n<li><strong>INT</strong> - Một số nguyên với kích cỡ thông thường, có thể là signed hoặc unsigned. Nếu có dấu, thì dãy giá trị có thể là từ -2147483648 tới 2147483647, nếu không dấu thì dãy giá trị là từ 0 tới 4294967295. Bạn có thể xác định một độ rộng lên tới 11 chữ số.</li>\n<li><strong>TINYINT</strong> - Một số nguyên với kích cỡ rất nhỏ, có thể là signed hoặc unsigned. Nếu có dấu, thì dãy giá trị có thể là từ -128 tới 127, nếu không dấu thì dãy giá trị là từ 0 tới 255. Bạn có thể xác định một độ rộng lên tới 4 chữ số.</li>\n<li><strong>SMALLINT</strong> - Một số nguyên với kích cỡ nhỏ, có thể là signed hoặc unsigned. Nếu có dấu, thì dãy giá trị có thể là từ -32768 tới 32767, nếu không dấu thì dãy giá trị là từ 0 tới 65535. Bạn có thể xác định một độ rộng lên tới 5 chữ số.</li>\n<li><strong>MEDIUMINT</strong> - Một số nguyên với kích cỡ trung bình, có thể là signed hoặc unsigned. Nếu có dấu, thì dãy giá trị có thể là từ -8388608 tới 8388607, nếu không dấu thì dãy giá trị là từ 0 tới 16777215. Bạn có thể xác định một độ rộng lên tới 9 chữ số.</li>\n<li><strong>BIGINT</strong> - Một số nguyên với kích cỡ lớn, có thể là signed hoặc unsigned. Nếu có dấu, thì dãy giá trị có thể là từ -9223372036854775808 tới 9223372036854775807, nếu không dấu thì dãy giá trị là từ 0 tới 18446744073709551615. Bạn có thể xác định một độ rộng lên tới 20 chữ số.</li>\n<li><strong>FLOAT(M,D)</strong> - Một số thực dấu chấm động không dấu. Bạn có thể định nghĩa độ dài hiển thị (M) và số vị trí sau dấy phảy (D). Điều này là không bắt buộc và sẽ có mặc định là 10,2: với 2 là số vị trí sau dấu phảy và 10 là số chữ số (bao gồm các phần thập phân). Phần thập phân có thể lên tới 24 vị trí sau dấu phảy đối với một số FLOAT.</li>\n<li><strong>DOUBLE(M,D)</strong> - Một số thực dấu chấm động không dấu. Bạn có thể định nghĩa độ dài hiển thị (M) và số vị trí sau dấy phảy (D). Điều này là không bắt buộc và sẽ có mặc định là 16,4: với 4 là số vị trí sau dấu phảy và 16 là số chữ số (bao gồm các phần thập phân). Phần thập phân có thể lên tới 53 vị trí sau dấu phảy đối với một số DOUBLE. REAL là đồng nghĩa với DOUBLE.</li>\n<li><strong>DECIMAL(M,D)</strong> - Một kiểu khác của dấu chấm động không dấu. Mỗi chữ số thập phân chiếm 1 byte. Việc định nghĩa độ dài hiển thị (M) và số vị trí sau dấy phảy (D) là bắt buộc. NUMERIC là một từ đồng nghĩa cho DECIMAL.</li>\n</ul>\n<p><strong><em>2. Kiểu dữ liệu Date và Time</em></strong></p>\n<ul>\n<li><strong>DATE</strong> - Một date trong định dạng YYYY-MM-DD, giữa 1000-01-01 và 9999-12-31. Ví dụ, ngày 25 tháng 12 năm 2015 sẽ được lưu ở dạng 2015-12-25.</li>\n<li><strong>DATETIME</strong> - Một tổ hợp Date và Time trong định dạng YYYY-MM-DD HH:MM:SS, giữa 1000-01-01 00:00:00 và 9999-12-31 23:59:59. Ví dụ, 3:30 chiều ngày 25 tháng 12, năm 2015 sẽ được lưu ở dạng 2015-12-25 15:30:00.</li>\n<li><strong>TIMESTAMP</strong> - Một Timestamp từ giữa nửa đêm ngày 1/1/1970 và 2037. Trông khá giống với định dạng DATETIME trước, khác biệt ở chỗ không có dấu gạch nối giữa các số. Ví dụ, 3:30 chiều ngày 25 tháng 12, năm 2015 sẽ được lưu dưới dạng 20151225153000 ( YYYYMMDDHHMMSS ).</li>\n<li><strong>TIME</strong> - Lưu time trong định dạng HH:MM:SS.</li>\n</ul>\n<p><strong><em>3. Kiểu dữ liệu chuỗi</em></strong></p>\n<ul>\n<li><strong>CHAR(M)</strong>  - Một chuỗi có độ dài cố định có độ dài từ 1 tới 255 ký tự (ví dụ CHAR(5)). Nếu giá trị thật của một trường kiểu Char không bằng với độ dài khai báo thì phần thiếu bên phải của nó sẽ được thêm bằng các kí tự trắng một cách tự động. Định nghĩa độ dài là không bắt buộc, giá trị mặc định là 1.</li>\n<li><strong>VARCHAR(M)</strong> - Dữ liệu kiểu chuỗi có độ dài thay đổi, có độ dài từ 1 đến 255 kí tự (ví dụ Varchar(24)). Bạn phải định nghĩa độ dài khi tạo một trường VARCHAR.</li>\n<li><strong>BLOB hoặc TEXT</strong> - Trường kiểu này có độ dài tối đa 65535 kí tự. BLOBs là viết tắt của \"Binary Large Objects\", và được sử dụng để lưu trữ một lượng lớn dữ liệu nhị phân như các bức ảnh hoặc các loại tập tin khác. Với TEXT, trường cũng lưu trữ được một lượng lớn dữ liệu. Điểm khác nhau giữa chúng là: khi sắp xếp và so sánh dữ liệu đã lưu trữ thì với BLOBs là phân biệt kiểu chữ, còn với TEXT là không phân biệt kiểu chữ. Bạn không phải xác định độ dài với BLOBs hoặc TEXT.</li>\n<li><strong>TINYBLOB hoặc TINYTEXT</strong> - Một cột BLOB hoặc TEXT với độ dài tối đa là 255 ký tự. Bạn không cần xác định độ dài với TINYBLOB hoặc TINYTEXT.</li>\n<li><strong>MEDIUMBLOB hoặc MEDIUMTEXT</strong> - Một cột BLOB hoặc TEXT với độ dài tối đa là 16777215 ký tự. Bạn không cần xác định độ dài với MEDIUMBLOB hoặc MEDIUMTEXT.</li>\n<li><strong>LONGBLOB hoặc LONGTEXT</strong> - Một cột BLOB hoặc TEXT với độ dài tối đa là 4294967295 ký tự. Bạn không cần xác định độ dài với LONGBLOB hoặc LONGTEXT.</li>\n<li><strong>ENUM</strong> - Khi định nghĩa một trường kiểu này, tức là, ta đã chỉ ra một danh sách các đối tượng mà trường phải nhận (có thể là Null). Ví dụ, nếu ta muốn một trường nào đó chỉ nhận một trong các giá trị \"A\" hoặc \"B\" hoặc \"C\" thì ta phải định nghĩa kiểu ENUM cho nó như sau: ENUM ('A', 'B', 'C'). Và chỉ có các giá trị này (hoặc NULL) có thể xuất hiện trong trường đó</li>\n</ul>\n<h2>IV. Một số câu lệnh cơ bản trong MySQL</h2>\n<p><strong><em>1. Connect database</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">mysql -h<span class=\"token punctuation\">[</span>\u001d<span class=\"token environment constant\">HOSTNAME</span><span class=\"token punctuation\">]</span> -u<span class=\"token punctuation\">[</span>USERNAME<span class=\"token punctuation\">]</span> -p<span class=\"token punctuation\">[</span>PASSWORD<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>DATABASENAME<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Create database</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">create database [DATABASENAME];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Drop database</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">drop database [DATABASENAME];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>4. Create Table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">CREATE TABLE users (  \nid INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,  \nfirstname VARCHAR(30) NOT NULL,  \nlastname VARCHAR(30) NOT NULL,  \nemail VARCHAR(50),  \nreg_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP  \n)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>5. Drop table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">drop table [TABLENAME];</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>6. Truncate table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">TRUNCATE TABLE table_name;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>7. Insert data</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">INSERT INTO table_name (column1, column2, column3,...)  \nVALUES (value1, value2, value3,...)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><strong><em>8. Update data</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">UPDATE table_name  \nSET column1 = value1, column2 = value2, ...  \nWHERE condition;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>9. Select data</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">SELECT * FROM table_name;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>10. Delete data</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">DELETE  FROM table_name WHERE  condition;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>11. Show all database</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">SHOW databases;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>12. Show all table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">SHOW tables;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>13. Show create table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">SHOW CREATE TABLE table_name;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>14. Show all column in table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">DESC table_name;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>14. Show index in table</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-mysql line-numbers\"><code class=\"language-mysql\">SHOW INDEX FORM table_name;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>V. Lời kết</h2>\n<p>Như vậy, chúng ta đã tìm hiểu xong các khái niệm và sử dụng một số câu truy vấn cơ bản trong MYSQL. Hi vọng bài viết sẽ giúp ích cho mọi người khi làm việc với MYSQL.\n<em><div style=\"text-align: right\"> - by Huunv </div></em></p>","id":"e57e2ff4-6885-5227-8bbd-81ea4f1b3148","frontmatter":{"title":"Mysql basic for beginner","date":"25-08-2020","tags":["Mysql"]},"fields":{"slug":"/mysql-basic-for-beginner/"}}},{"node":{"excerpt":"Shell Scripting Tutorial For Beginner Nếu bạn hay làm việc với môi trường linux, sẽ thường xuyên bắt gặp với file có extensions là . Nội dung xem qua thật khó hiểu nhưng không khỏi thán phục vì nó…","html":"<h2>Shell Scripting Tutorial For Beginner</h2>\n<p>Nếu bạn hay làm việc với môi trường linux, sẽ thường xuyên bắt gặp với file có extensions là <code class=\"language-text\">.sh</code>. Nội dung xem qua thật khó hiểu nhưng không khỏi thán phục vì nó giải quyết công việc cho bạn theo một cách thật ảo diệu. </p>\n<p>Bài viết này sẽ giúp bạn làm quen với cách mà <code class=\"language-text\">.sh</code> được thực thi.\nCác ví dụ trong bài viết chạy tốt trên môi trường linux, macos. Trên window thì tôi chưa thử.</p>\n<p>Bài viết được tham khảo và dịch lại, click vào link dưới để xem bài gốc nhé.\n<a href=\"https://dev.to/godcrampy/the-missing-shell-scripting-crash-course-37mk\">https://dev.to/godcrampy/the-missing-shell-scripting-crash-course-37mk</a></p>\n<h1>1. Hello world</h1>\n<p>Chúng ta sẽ bắt đầu từ thứ cơ bản nhất. Hello world!</p>\n<p>Tạo 1 file <code class=\"language-text\">script.sh</code> </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello World\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Mở terminal, <code class=\"language-text\">cd</code> vào thư mục chứa file vừa tạo và chạy lệnh sau.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> +x ./script.sh</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Thực thi file vừa tạo</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">./script.sh</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Trên terminal, bạn sẽ thấy dòng text sau.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Hello World</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>Giải thích</h2>\n<p><code class=\"language-text\">#!/bin/bash</code> cái dòng này là <a href=\"https://en.wikipedia.org/wiki/Shebang_%28Unix%29\">Shebang</a>\nNó có nhiệm vụ khai báo chương trình nào sẽ run những dòng command phía dưới.\nVí dụ như này sẽ dễ hiểu hơn.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/node</span>\n\nconsole.log<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Javascript\"</span><span class=\"token punctuation\">)</span>'</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Tiếp tục với\n<code class=\"language-text\">echo &quot;Hello World&quot;</code></p>\n<p><code class=\"language-text\">echo</code> là command đơn giản, nhận tham số là 1 string và in nó ra màn hình.</p>\n<p>Cho những ai chưa biết\n<code class=\"language-text\">chmod +x ./script.sh</code> liên quan tới quản lý file trên linux, bạn cứ tạm hiểu, câu lệnh này cho phép file <code class=\"language-text\">script.sh</code> có thể được thực thi khi run command. <code class=\"language-text\">./script.sh</code>. </p>\n<p>Không tin thì thử chạy <code class=\"language-text\">./script.sh</code> trước khi <code class=\"language-text\">chmod</code> xem nó sẽ thế nào.</p>\n<h1>2. Variables</h1>\n<p>Về cơ bản, shell script cũng là 1 ngôn ngữ mà bạn có thể lập trình được.\nCơ bản là vậy, nhưng không thể so shell script với 1 ngôn ngữ lập trình đầy đủ như python, ruby, php ... được, đừng liên hệ chúng với nhau.</p>\n<p>Đây là cách bạn khai báo biến và sử dụng nó</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span><span class=\"token string\">\"Bash\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello, <span class=\"token variable\">$name</span>\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nếu không có <code class=\"language-text\">$</code> trước <code class=\"language-text\">name</code> thì nó sẽ in ra màn hình thế này</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ ./script.sh\nHello, name</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Và đừng áp dụng coding convention vào đây, thêm <code class=\"language-text\">space</code> vào trước và sau <code class=\"language-text\">=</code> sẽ ko hoạt động đâu. Assign một biến, đừng thêm <code class=\"language-text\">space</code></p>\n<h1>3. User Input</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token builtin class-name\">read</span> -p <span class=\"token string\">\"What is you name: \"</span> name\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello {<span class=\"token variable\">$name</span>}!\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với file bash nội dung như trên, khi run, bạn sẽ nhập input và in ra text bao gồm nội dung vừa nhập.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ ./script.sh\nWhat is you name: godcrampy\nHello godcrampy!</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">read</code> là lệnh cho phép nhập input từ màn hình sau đó gán vào 1 biến</p>\n<p><strong>*tip</strong> dùng <code class=\"language-text\">{}</code> để trỏ tới biến trong chuỗi string.</p>\n<h1>4. Comments</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># Comments start with hash</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Over!</p>\n<h1>5. Arguments</h1>\n<p>Bạn có thể truyền tham số cho 1 file bash khi run.\n<code class=\"language-text\">$0</code> luôn là tên file bash</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$0</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$1</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$2</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${@}</span>\"</span> <span class=\"token comment\"># Access all the arguments</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi run</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ ./script.sh first second\n./script.sh\nfirst\nsecond\nfirst second</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>6. Expressions (Biểu thức)</h1>\n<p>Bash có 3 kiểu Expressions gặp nhiều</p>\n<ol>\n<li><strong>Return Values</strong></li>\n<li><strong>Arithmetic Evaluation</strong> (Dạng toán tử)</li>\n<li><strong><code class=\"language-text\">Test</code>  Command</strong> (Dùng để check true false)</li>\n</ol>\n<h2>6.1 Return values</h2>\n<p>Điển hình ví dụ như <code class=\"language-text\">grep</code> <code class=\"language-text\">find</code> </p>\n<h2>6.2 Arithmetic Evaluation</h2>\n<p>Toán tử được đặt trong  <code class=\"language-text\">(( ))</code>\nVd:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\"><span class=\"token punctuation\">((</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">))</span></span>\n\n<span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token variable\"><span class=\"token punctuation\">((</span> i<span class=\"token operator\">++</span> <span class=\"token punctuation\">))</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>6.3 Test command</h2>\n<p>Test command được đặt trong <code class=\"language-text\">[]</code> hoặc <code class=\"language-text\">[[ ]]</code> với biểu thức phức tạp.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> -e <span class=\"token string\">\"<span class=\"token variable\">$file</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># True if file exists</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> -d <span class=\"token string\">\"<span class=\"token variable\">$file</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># True if file exists and is a directory</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> -f <span class=\"token string\">\"<span class=\"token variable\">$file</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># True if file exists and is a regular file</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> -z <span class=\"token string\">\"<span class=\"token variable\">$str</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># True if string is of length zero</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> -n <span class=\"token string\">\"<span class=\"token variable\">$str</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># True is string is not of length zero</span>\n\n<span class=\"token comment\"># Compare Strings</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$str1</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$str2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$str1</span>\"</span> <span class=\"token operator\">!=</span> <span class=\"token string\">\"<span class=\"token variable\">$str2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># Integer Comparisions</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$int1</span>\"</span> -eq <span class=\"token string\">\"<span class=\"token variable\">$int2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># $int1 == $int2</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$int1</span>\"</span> -ne <span class=\"token string\">\"<span class=\"token variable\">$int2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># $int1 != $int2</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$int1</span>\"</span> -gt <span class=\"token string\">\"<span class=\"token variable\">$int2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># $int1 > $int2</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$int1</span>\"</span> -lt <span class=\"token string\">\"<span class=\"token variable\">$int2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># $int1 &lt; $int2</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$int1</span>\"</span> -ge <span class=\"token string\">\"<span class=\"token variable\">$int2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># $int1 >= $int2</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$int1</span>\"</span> -le <span class=\"token string\">\"<span class=\"token variable\">$int2</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># $int1 &lt;= $int2</span>\n\n<span class=\"token comment\"># And , Or</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># And</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># Or</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>7. Conditionals (IF..THEN..ELSE)</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># 1. Return values</span>\n\n<span class=\"token comment\"># If notes.md file doesn't exist, create one and </span>\n<span class=\"token comment\"># add the text \"created by bash\"</span>\n<span class=\"token keyword\">if</span> <span class=\"token function\">find</span> notes.md\n<span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"notes.md file already exists\"</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"created by bash\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">cat</span> <span class=\"token operator\">>></span> notes.md\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># 2. Arithmetic Evaluations</span>\n<span class=\"token builtin class-name\">read</span> -p <span class=\"token string\">\"Enter your age: \"</span> age\n\n<span class=\"token keyword\">if</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span> \"$age\" <span class=\"token operator\">></span> <span class=\"token number\">18</span> <span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Adult!\"</span>\n<span class=\"token keyword\">elif</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span> \"$age\" <span class=\"token operator\">></span> <span class=\"token number\">12</span> <span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Teen!\"</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Kid\"</span>\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># 3. Test Expressions</span>\n<span class=\"token comment\"># Check if argument was passed</span>\n<span class=\"token comment\"># \"$1\" corresponds to first argument</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> -n <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Your first argument was <span class=\"token variable\">$1</span>\"</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"No Arguments passed\"</span>\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>8. Looping (For loop)</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># print numbers 1 to 10</span>\n\n<span class=\"token comment\"># c like for loop</span>\n<span class=\"token keyword\">for</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i <span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token comment\"># for in</span>\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">..</span><span class=\"token number\">10</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token comment\"># while</span>\n<span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span> -le <span class=\"token number\">10</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span>\n  <span class=\"token variable\"><span class=\"token punctuation\">((</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token comment\"># until</span>\n<span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token keyword\">until</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span> -eq <span class=\"token number\">11</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"unitl <span class=\"token variable\">$i</span>\"</span>\n  <span class=\"token variable\"><span class=\"token punctuation\">((</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">done</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token assign-left variable\">arr</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>a b c d<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># For in</span>\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span>}</span>\"</span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token comment\"># c like for</span>\n<span class=\"token keyword\">for</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> \"${#arr[@]}\"<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>$i<span class=\"token punctuation\">]</span>}</span>\"</span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token comment\"># while</span>\n<span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$i</span>\"</span> -le <span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token operator\">#</span>arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">do</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>$i<span class=\"token punctuation\">]</span>}</span>\"</span>\n  <span class=\"token variable\"><span class=\"token punctuation\">((</span> i<span class=\"token operator\">++</span> <span class=\"token punctuation\">))</span></span>\n<span class=\"token keyword\">done</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>9. Arrays</h1>\n<p>Khởi tạo array</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token assign-left variable\">arr</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>a b c d<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>1<span class=\"token punctuation\">]</span>}</span>\"</span>     <span class=\"token comment\"># Single element</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>-1<span class=\"token punctuation\">]</span>}</span>\"</span>    <span class=\"token comment\"># Last element</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>1}</span>\"</span>   <span class=\"token comment\"># Elements from 1</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>1<span class=\"token operator\">:</span>3}</span>\"</span> <span class=\"token comment\"># Elements from 1 to 3</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Insert, update</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">arr<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>e                            <span class=\"token comment\"># direct address and insert/update</span>\n<span class=\"token assign-left variable\">arr</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>0<span class=\"token operator\">:</span>1}</span> new <span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>1}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Adding 'new' to array</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Delete </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token assign-left variable\">arr</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>a b c d<span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">unset</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>1<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token comment\"># Outputs nothing</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Delete không tự động update index của các phần tử khác nên để đánh lại index</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token assign-left variable\">arr</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>a b c d<span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">unset</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">arr</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>@<span class=\"token punctuation\">]</span>}</span>\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"<span class=\"token variable\">${arr<span class=\"token punctuation\">[</span>1<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token comment\"># sẽ print c</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>10. Functions</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function-name function\">greet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello, <span class=\"token variable\">$1</span>\"</span>\n<span class=\"token punctuation\">}</span>\n\ngreet Bash <span class=\"token comment\"># Hello, Bash</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function-name function\">greet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello, <span class=\"token variable\">${@}</span>\"</span>\n<span class=\"token punctuation\">}</span>\n\ngreet every single body <span class=\"token comment\"># Hello, every single body</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>Tổng kết</h1>\n<p>OK, nếu bạn đọc đến đây, tôi nghĩ bạn sẽ không còn bỡ ngỡ khi gặp những file bash nữa. Hi vọng bài này sẽ là base để bạn tự mày mò sâu hơn về thế giới của bash.</p>\n<p><em>by Vitvungve - Tomosia Việt Nam</em></p>\n<!--stackedit_data:\neyJoaXN0b3J5IjpbLTE3MzQ5MDM5MDcsLTE2NzI0MDcxMzMsMT\nIxNDY5NzU2OSwyMDEyOTQ0NDIzXX0=\n-->","id":"1016efe2-816c-58c5-8ba8-1da8462cdf9a","frontmatter":{"title":"Shell Scripting Tutorial For Beginner","date":"25-08-2020","tags":["shell","bash","tutorial"]},"fields":{"slug":"/shell-scripting-tutorial-for-beginner/"}}},{"node":{"excerpt":"Đó là những gì tôi và các bạn thường xuyên phải làm. Thậm chí, viết  cũng là cả vấn đề. Với khá nhiều các quy tắc đặt ra, công việc thật khó khăn và nhàm chán. Và tôi xin giới thiệu tới các 👨 👩 một…","html":"<p><code class=\"language-text\">git commit -m &quot;what are you doing&quot;</code></p>\n<p>Đó là những gì tôi và các bạn thường xuyên phải làm.</p>\n<p>Thậm chí, viết <code class=\"language-text\">what are you doing</code> cũng là cả vấn đề. Với khá nhiều các quy tắc đặt ra, công việc thật khó khăn và nhàm chán.</p>\n<p>Và tôi xin giới thiệu tới các 👨 👩 một thứ khiến commit của bạn trở lên tươi mới hơn . Vâng, đó là Emoji 🌞</p>\n<p>Tất nhiên, khi viết commit git, tôi sẽ dùng một quy tắc viết commit nào đó.</p>\n<p>Và <a href=\"https://www.conventionalcommits.org\">https://www.conventionalcommits.org</a> được lựa chọn.</p>\n<p>Như vậy, cấu trúc một commit message của tôi là:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">type: subject\n\nbody\n\nfooter</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong đó, type có thể là:</p>\n<ul>\n<li>feat: một tính năng mới</li>\n<li>fix: fix bug thôi</li>\n<li>docs: thay đổi tài liệu, hay readme.md</li>\n<li>style: formatting, missing semi colons, etc; no code change</li>\n<li>refactor: refactoring code</li>\n<li>test: thêm, sửa test</li>\n</ul>\n<p>Để cho tươi mới, tôi sẽ thay thế các type trên thành các emoji đặc trưng.</p>\n<p>Tôi sẽ có hàng tá lựa chọn trong <a href=\"https://getemoji.com/\">https://getemoji.com/</a> hoặc <a href=\"https://gitmoji.carloscuesta.me/\">https://gitmoji.carloscuesta.me/</a></p>\n<p>Và đây, là sở thích của tôi</p>\n<ul>\n<li>feat: ➕</li>\n<li>Fix: 🔨</li>\n<li>Docs:  📜</li>\n<li>Style: 💄</li>\n<li>refactor: ♻️</li>\n<li>Test: ✅</li>\n</ul>\n<p>Nhằm hỗ trợ cho tôi có thể viết nhanh gọn các icon trên, tôi cài một phần mềm tên <a href=\"https://espanso.org/\"><strong>Espanso</strong></a></p>\n<p>Sau khi cài đặt, tôi cấu hình nhằm viết tắt các icon trên.</p>\n<p>Chạy lệnh:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">espanso edit</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hoặc có thể sửa trực tiếp trong file <code class=\"language-text\">~/Library/Preferences/espanso/default.yml</code> (trên MacOS)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">matches:\n  - trigger: &quot;:feat:&quot;\n    replace: &quot;➕&quot;\n  - trigger: &quot;:fix:&quot;\n    replace: &quot;🔨&quot;\n  - trigger: &quot;:doc:&quot;\n    replace: &quot;📜&quot;\n  - trigger: &quot;:style:&quot;\n    replace: &quot;💄&quot;\n  - trigger: &quot;:refactor:&quot;\n    replace: &quot;♻&quot;\n  - trigger: &quot;:test:&quot;\n    replace: &quot;✅&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi tôi gõ <code class=\"language-text\">:feat:</code> nó sẽ tự động convert thành <code class=\"language-text\">➕</code></p>\n<p>Và một đoạn <code class=\"language-text\">git log</code> nhỏ sau có làm bạn hứng thú</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">2020-08-18 e9c6a252 ➕ Add Git ignore file [cuongTomosia]\n2020-08-18 ece65s49 📜 How to deploy [cuongTomosia]\n2020-08-18 fc6b0qe5 🔨 Use dependent select [cuongTomosia]\n2020-08-18 a0517n69 🔨 Responsive [cuongTomosia]\n2020-08-18 ee40cn51 💄 indent space  [cuongTomosia]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nếu bạn có một commit <code class=\"language-text\">:heavy_plus_sign: Add Git ignore file</code>, khi đẩy lên <a href=\"https://github.com/\">GitHub</a> bạn cũng sẽ có một <code class=\"language-text\">git log</code> đẹp như trên.</p>\n<p>Nhưng, bởi vì, tôi sử dụng trực tiếp các ký tự này mà không thông qua một alias (<code class=\"language-text\">:heavy_plus_sign:</code> là 1 alias của ➕ trong <a href=\"https://github.com/\">GitHub</a>).<br>\nDo đó, <code class=\"language-text\">git log</code> của tôi luôn thống nhất như trên ở mọi nơi (Terminal, Github hay các Git GUI ...)</p>\n<p>Trên đây, là các cấu hình của tôi 👍🏻. Còn bạn, bạn sẽ chọn <code class=\"language-text\">type</code> và <code class=\"language-text\">emoji</code> như thế nào ?!</p>\n<p><em>duccuong2808</em> - <strong>Tomosia</strong></p>","id":"22f51738-c85c-5e4a-89a9-6a8bdaf17b01","frontmatter":{"title":"Sử dụng emoji để viết git commit message","date":"25-08-2020","tags":["git"]},"fields":{"slug":"/su-dung-emoji-de-viet-git-commit-message/"}}},{"node":{"excerpt":"1.Vấn đề Ngày nay, với xu hướng agile/lean dẫn đến việc phát triển tính năng là điều đã đơn giản đi rất nhiều thì điều quan trọng nhất với việc xây dựng ứng dụng là phải nhanh, chính xác với yêu cầu…","html":"<h1>1.Vấn đề</h1>\n<p>Ngày nay, với xu hướng agile/lean dẫn đến việc phát triển tính năng là điều đã đơn giản đi rất nhiều thì điều quan trọng nhất với việc xây dựng ứng dụng là phải nhanh, chính xác với yêu cầu. Nếu một tính năng mà mất 2, 3 tháng mới release thì dẫn đến nhiều hệ lụy như làm không phù hợp nhu cầu khách hàng, hoặc đối thủ đã ra mắt trước đó, mất đi cái lợi thế dẫn đầu. Do đó, việc làm ra một sản phẩm, tính năng đòi hỏi thần tốc là ưu tiên số một hiện nay.</p>\n<p>Bên cạnh đó, để nhanh chóng ra mắt một tính năng, phiên bản mới nếu theo cách cổ điển sẽ mất nhiều thời gian bởi công việc chân tay khá nhiều và mỗi lần release cũng huy động một cơ số người không nhỏ để cập nhật một thay đổi dù là nhỏ nhất. Bởi vậy, xu hướng CI/CD giúp cung cấp các framework, workflow giúp tiết kiệm thời gian, nguồn lực của quá trình release (delivery)</p>\n<h1>2.Giới thiệu</h1>\n<h3>2.1 CI là gì ?</h3>\n<p>CI là Continuous Integration. Nó là phương pháp phát triển phần mềm yêu cầu các thành viên của team tích hợp công việc của họ thường xuyên, mỗi ngày ít nhất một lần. Mỗi tích hợp được \"build\" tự động (bao gồm cả test) nhằm phát hiện lỗi nhanh nhất có thể.</p>\n<p>Hiện nay có rất nhiều hệ thống như  <strong>Travis</strong>,  <strong>Jenkin</strong>,  <strong>Circle</strong>,  <strong>Gitlab</strong>  có thể giúp bạn làm được điều đó. Trong bài viết này, mình sẽ giới thiệu với các bạn tổng quan  <code class=\"language-text\">Gitlab CI</code>  và cách để xây dựng một hệ thống cơ bản.</p>\n<h3>2.2 Tại sao lại là <code class=\"language-text\">Gitlab CI</code> ?</h3>\n<p>Theo mình tìm hiều thì trước khi <code class=\"language-text\">Gitlab CI</code> ra đời thì <code class=\"language-text\">Jenkins</code>  là hệ thống được tích hợp vào làm CI nhiều nhất , nên chúng ta sẽ sánh thử xem giữa <code class=\"language-text\">Gitlab CI</code> và <code class=\"language-text\">Jenkins</code>  có gì khác nhau nhé</p>\n<p>Trước đây mình đã từng nghịch Jenkins để làm thử CI cho 1 project demo của mình thì mình thấy config khá phức tạp như <code class=\"language-text\">liên kết đến repo, phân quyền đủ kiểu để Jenkins có thể lấy source code từ repo</code></p>\n<p>Đến khi mình biết đến <code class=\"language-text\">Gitlab CI</code> , trái ngược với rắc rối của Jenkins là sự tuyệt vời của <code class=\"language-text\">Gitlab CI</code> luôn. Code để ở Gitlab, rồi trong đó có cho cài đặt CI/CD để test và deploy code tự động. Config dễ hiểu, không phải phân quyền giữa hệ thống CI và souce code , dễ cài đặt , quả thực đây chính là CI phù hợp với mình.</p>\n<p><img src=\"https://i.ibb.co/bKzg2gf/d3358d65-f8ad-4d94-b371-9bbcc6afe3f0.png\" alt=\"d3358d65-f8ad-4d94-b371-9bbcc6afe3f0\"></p>\n<h1>3.\tCách hoạt động</h1>\n<h3>3.1 Luồng hoạt động của CI</h3>\n<p>Khi 1 anh (chị em ) developer hoàn thành một task nào đó và push commit lên Gitlab\nChúng ta sẽ đến bước review code (tiết mục ăn hành của đồng đội )\nNhưng trước đó chúng ta ăn hành của CI trước đã nhé !!!</p>\n<p>Khi bạn push code lên  <strong>Gitlab</strong> thì <code class=\"language-text\">Gitlab CI</code>  cũng bắt đầu thực hiện công việc mà nó được giao. Nó sử dụng file  <code class=\"language-text\">.gitlab-ci.yml</code>  nằm trong thư mục gốc của repo để cấu hình project sử dụng các  <code class=\"language-text\">Runner</code>. Một  <code class=\"language-text\">Pipeline</code>  CI sinh ra và report sẽ được hiển thị trên giao diện.</p>\n<p><img src=\"https://i.ibb.co/zX5cPtH/image.png\" alt=\"image\"></p>\n<p>Vậy <code class=\"language-text\">Pipelines</code> là gì nhỉ các bạn ?</p>\n<h3>3.2  Pipelines</h3>\n<h4>Khái niệm trong document của <code class=\"language-text\">Gitlab CI</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-none line-numbers\"><code class=\"language-none\">Pipelines are the top-level component of continuous integration, delivery, and deployment.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Theo mình thấy thì <code class=\"language-text\">Pipelines</code> là thành phần cấp cao nhất của tích hợp, phân phối và triển khai liên tục với mỗi 1 lần có sự thay đổi code</p>\n<p><strong>Pipeline</strong>  bao gồm :</p>\n<ul>\n<li><strong>Jobs</strong>  : Các công việc được giao thực thi. ( Ví dụ : biên dịch mã hoặc chạy test )</li>\n<li><strong>Stage</strong>  : Xác định các thời điểm và cách thực hiện. ( Ví dụ : test chỉ chạy sau khi biên dịch thành công )</li>\n</ul>\n<p><strong>Pipeline</strong>  hoạt động theo nguyên tắc sau :</p>\n<ul>\n<li>Tất cả các công việc trong cùng một  <code class=\"language-text\">stage</code>  được  <code class=\"language-text\">Runner</code>  thực hiện song song, nếu có đủ số lượng  <code class=\"language-text\">Runner</code>  đồng thời.</li>\n<li>Nếu Success, pipeline chuyển sang  <code class=\"language-text\">stage</code>  tiếp theo.</li>\n<li>Nếu Failed, pipeline sẽ dừng lại. Có một ngoại lệ là nếu job được đánh dấu làm thủ công, thì dù bị fail thì pipeline vẫn tiếp tục.</li>\n</ul>\n<p>Bên dưới là ví dụ về đồ thị Pipeline thông thường :</p>\n<p><img src=\"https://i.ibb.co/pb91rdh/af6e91ef-0fd1-41e9-9efb-5127a7b239e9.png\" alt=\"af6e91ef-0fd1-41e9-9efb-5127a7b239e9\"></p>\n<p>Tóm lại, các bước để  <strong>Gitlab CI</strong>  hoạt động như sau :</p>\n<ul>\n<li>Thêm<code class=\"language-text\">.gitlab-ci.yml</code>  vào thư mục gốc của repo.</li>\n<li>\n<p>Cấu hình gitlab  <code class=\"language-text\">Runner</code></p>\n<h1>4. Cài đặt gitlab-ci.yml</h1>\n</li>\n</ul>\n<h4>4.1 Create .gilab-ci.yml</h4>\n<p><code class=\"language-text\">.gitlab-ci.yml</code>  được viết theo định dạng YAML. Bạn có thể tìm hiểu thêm tại  <a href=\"https://yaml.org/\">đây</a>.</p>\n<p>Như đã đề cập ở trên,  <code class=\"language-text\">.gitlab-ci.yml</code>  cho  <code class=\"language-text\">Runner</code>  biết những công việc cần phải làm. Mặc định, nó sẽ chạy một pipeline với 3 stage :</p>\n<ul>\n<li>build</li>\n<li>test</li>\n<li>deploy</li>\n</ul>\n<p>Tuy nhiên, bạn không cần phải sử dụng cả 3 stage, các stage không được giao việc sẽ được bỏ qua.</p>\n<p>Dưới đây là ví dụ cấu hình cho một dự án Ruby on Rails :</p>\n<p>Ở đây mình muốn thực hiện check convention nên mình sử dụng gem <strong>rubocop</strong> để thực hiện công việc này nhé</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ruby:2.5\"</span>\n\n<span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> apt<span class=\"token punctuation\">-</span>get update <span class=\"token punctuation\">-</span>qq <span class=\"token important\">&amp;&amp;</span> apt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y <span class=\"token punctuation\">-</span>qq sqlite3 libsqlite3<span class=\"token punctuation\">-</span>dev nodejs\n  <span class=\"token punctuation\">-</span> gem install bundler <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>document\n  <span class=\"token punctuation\">-</span> bundle install\n\n<span class=\"token key atrule\">rubocop</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> bundle exec rubocop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là cấu hình đơn giản nhất có thể hoạt động với hầu hết các ứng dụng Ruby</p>\n<ol>\n<li>Xác định  job  <code class=\"language-text\">rubocop</code>  với các lệnh thực thi khác nhau.</li>\n<li>Trước mỗi job, các lệnh được xác định bởi  <strong>before_script</strong>  được thực thi.</li>\n</ol>\n<p>Nếu bạn muốn kiểm tra xem file <code class=\"language-text\">.gitlab-ci.yml</code> có hợp lệ hay không, có một công cụ lint trong page  <strong>/-/ci/lint</strong>  trong namespace project. Bạn cũng có thể thấy nút  <code class=\"language-text\">CI Lint</code>  để đến trang này trong mục  <strong>CI/CD</strong>  ->  <strong>Pipelines</strong>  và  <strong>Pipelines</strong>  ->  <strong>Jobs</strong>  trong page Project.</p>\n<p><img src=\"https://i.ibb.co/1KNrCDd/Screen-Shot-2020-08-20-at-12-08-29-AM.png\" alt=\"Screen-Shot-2020-08-20-at-12-08-29-AM\"></p>\n<h4>4.2. Push .gitlab-ci.yml to GitLab</h4>\n<p>Sau khi tạo file  <code class=\"language-text\">.gitlab-ci.yml</code>, thêm nó vào git repos và push nó lên gitlab.</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-none line-numbers\"><code class=\"language-none\"> TomobloDemo git:(master) git add .gitlab-ci.yml\n TomobloDemo git:(master) git commit -m \"Add .gitlab-ci.yml\"\n TomobloDemo git:(master) git push origin master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Trở về  <code class=\"language-text\">Pipeline</code>  page, bạn sẽ thấy pipeline đang ở trạng thái  <code class=\"language-text\">pending</code>. Bạn cũng có thể tới page  <code class=\"language-text\">Commits</code>, để ý icon tạm dừng nhỏ bên cạnh commit SHA.</p>\n<p><img src=\"https://i.ibb.co/99CBvrJ/Screen-Shot-2020-08-20-at-12-13-46-AM.png\" alt=\"Screen-Shot-2020-08-20-at-12-13-46-AM\"></p>\n<h1>5. Gitlab Runner</h1>\n<p>Trong gitlab, các  <code class=\"language-text\">Runner</code>  thực thi các jobs được định nghĩa trong file  <code class=\"language-text\">.gitlab-ci.yml</code>.</p>\n<p>Một  <strong>Runner</strong>  có thể là một  <strong>máy ảo</strong>  (VM), một  <strong>VPS</strong>, một  <strong>bare-metal</strong>, một  <strong>docker container</strong>  hay thậm chí là một  <strong>cluster container</strong>. Gitlab và Runners giao tiếp với nhau thông qua API, vì vậy yêu cầu duy nhất là máy chạy Runner có quyền truy cập Gitlab server.</p>\n<p>Một  <code class=\"language-text\">Runner</code>  có thể xác định cụ thể cho một dự án nhất định hoặc phục vụ cho nhiều dự án trong Gitlab. Nếu nó phục vụ cho tất cả project thì được gọi là  <code class=\"language-text\">Shared Runner</code>.</p>\n<p>Để xác định xem  <strong>Runner</strong>  nào được chỉ định cho project của bạn. Vào  <strong>Settings</strong>  ->  <strong>CI/CD</strong>.</p>\n<p>Phần cài đặt này nó khá dài nên em không trình bày nhé , các bạn cứ vào bên link bên dưới , đầy đủ các loại môi trường , cứ copy xong pate và enter là ok nhé =))</p>\n<p>Để Runner hoạt động được, bạn cần thực hiện 2 bước :</p>\n<ul>\n<li><a href=\"https://docs.gitlab.com/runner/install/\">Cài đặt Runner</a></li>\n<li><a href=\"https://docs.gitlab.com/ee/ci/runners/README.html#registering-a-specific-runner\">Cấu hình Runner</a></li>\n</ul>\n<p>Sau khi cấu hình thành công, bạn có thể thấy trạng thái của commit cuối cùng đã chuyển từ <code class=\"language-text\">pending</code> thành <code class=\"language-text\">running</code> rồi <code class=\"language-text\">success</code> or <code class=\"language-text\">failed</code>...</p>\n<h1>Kết luận</h1>\n<p>Hi vọng bài biết giúp các bạn hiểu được các khái niệm cơ bản về CI cũng như cách xây dựng hệ thống cơ bản với Gilab CI. Chúc các bạn coding vui vẻ ...</p>\n<p>by Hà Tiến Đạt - Tomosia Việt Nam</p>","id":"72e85c1d-1533-5c29-96d4-dc769da891c2","frontmatter":{"title":"Tích hợp CI với Gitlab","date":"25-08-2020","tags":["Gitlab CI"]},"fields":{"slug":"/tich-hop-ci-voi-gitlab/"}}},{"node":{"excerpt":"Trong giới IT luôn có 1 truyền thuyết, rằng \"đến năm 30 tuổi thì không dev được nữa\". Lý do vì sau độ tuổi này, thì khả năng học hỏi những cái mới, tốc độ, sự \"trâu bò\" không thể bằng các bạn trẻ hơn…","html":"<p>Trong giới IT luôn có 1 truyền thuyết, rằng \"đến năm 30 tuổi thì không dev được nữa\". Lý do vì sau độ tuổi này, thì khả năng học hỏi những cái mới, tốc độ, sự \"trâu bò\" không thể bằng các bạn trẻ hơn, vậy nên sẽ bị đào thải khỏi giới công nghệ. Vì thế, trước khi đến độ tuổi này, hoặc là tìm hướng thành manager, hoặc là tìm công việc khác. </p>\n<p>Bài viết này của anh thứ nhất là chứng minh truyền thuyết này là sai. Thứ hai, quan trọng hơn, là giúp mọi người định hình được career path của bản thân, qua đó biết mình phải làm gì, chuẩn bị điều gì. </p>\n<h1>1. 30 tuổi liệu có phải là giới hạn ?</h1>\n<p>Thực ra con số 30 tuổi ở đây mang tính ước chừng nhiều hơn. Có thể là ảnh hưởng bởi câu nói \"tam thập nhi lập\", \"đàn ông 30\", ... nên mọi người thường nghĩ là đến năm 30 tuổi thì nghề developer cần 1 sự thay đổi nào đó. </p>\n<p>Đến năm 30 tuổi, thì hầu hết chúng ta đều đã có gia đình, phải lo lắng nhiều nỗi lo hơn là khi mình độc thân. Rồi 30 tuổi cũng sẽ không cảm thấy tràn đầy sức khoẻ để \"cày dự án\" như trước nữa. Những điều này, anh thấy đều hợp lý cả. Tuy nhiên nó không phải là lý do để khiến ta không dev được nữa. </p>\n<p><strong>Có gia đình</strong></p>\n<blockquote>\n<p>Có gia đình thì không dành nhiều thời gian cho công việc, học tập được như trước. Rồi nỗi lo về cơm áo gạo tiền, phải nghĩ tới những công việc lương cao hơn. </p>\n</blockquote>\n<p>Nếu xét về thu nhập trong trường hợp cùng tuổi, cùng 1 vị trí, thì anh nghĩ IT vẫn là ngành nghề có thu nhập cao trong xã hội. Với lương của 1 developer, vẫn thoải mái chi tiêu, tiết kiệm, và đầu tư cho tương lai. Vấn đề ở đây là cách quản lý chi tiêu, cách sử dụng những đồng tiền ấy như thế nào. </p>\n<p>Còn vấn đề về thời gian thì anh thấy càng sai. Anh chưa bao giờ mong muốn anh em phải làm overtime, phải làm 12, 14 tiếng 1 ngày. Công ty mình hiện tại cũng rất ít OT. Anh tin tưởng vào việc, để cải thiện hiệu quả công việc, thì ta cần đầu tư vào chất lượng, khả năng tập trung, deep work hơn, chứ không phải là kéo dài ngày làm việc ra dài lê thê.\nViệc cân bằng cuộc sống, làm việc tập trung, sau đó nghỉ ngơi hoàn toàn với gia đình sẽ giúp cuộc sống hạnh phúc hơn. </p>\n<p><strong>Sức khoẻ</strong></p>\n<blockquote>\n<p>30 tuổi thì sức khoẻ kém đi, không trâu bò được như trước. </p>\n</blockquote>\n<p>Nếu chúng ta đảm bảo được vấn đều hiệu quả công việc, sự tập trung, thì rõ ràng việc phải OT, làm đêm, làm cả T7 CN sẽ rất ít. </p>\n<p>IT thì ngồi nhiều, nên cũng nhiều bệnh nghề nghiệp, nhưng nếu mình có 1 lối sống lành mạnh, tập luyện thể thao, thì anh nghĩ cũng không có vấn đề gì. </p>\n<p><strong>Khả năng học kém đi</strong></p>\n<blockquote>\n<p>30 rồi thì không thể học nhanh, học nhiều được như giới trẻ. </p>\n</blockquote>\n<p>Anh chưa hề đọc được bất cứ 1 bằng chứng khoa học nào chứng minh cho điều này. Ngược lại, khả năng học của con người sẽ tiến bộ theo thời gian. Chúng ta có nền tảng vững vàng, hiểu được cấu trúc, bản chất của vấn đề, thì khi học cái mới, mình càng dễ nắm bắt hơn. </p>\n<p>Chỉ có 1 lý do, là hết đam mê, không muốn học nữa thôi. Khi ta cứ nghĩ đến năm 30 tuổi ta không code được nữa, thì ta đã vô tình \"tự kỉ ám thị\" bản thân, và điều đó làm mất đi đam mê, nhiệt huyết của mình. </p>\n<p><strong>Bị đào thải vì mức lương cao</strong></p>\n<blockquote>\n<p>Ít người nói đến điều này, nhưng có nhiều công ty, ưu tiên tuyển những bạn trẻ vì mức lương thấp hơn. </p>\n</blockquote>\n<p>Anh thì suy nghĩ, \"hãy giỏi đến mức không ai có thể phớt lờ bạn được\".\nAnh cũng chỉ muốn tuyển những người giỏi, những người có thể độc lập làm việc, tự quản lý thời gian, công việc. Có thể mức lương họ cao hơn, nhưng rõ ràng giá trị họ mang lại cũng cao hơn. </p>\n<p>Vậy nên, nếu mức lương em cao hơn người khác, nhưng giá trị em mang lại gấp đôi người khác, thì anh rất vui vẻ được trả mức lương gấp đôi cho em. </p>\n<h1>2. Career của 1 developer</h1>\n<h2>2.1. Hướng chuyên sâu về công nghệ</h2>\n<p>Sau thời gian tích luỹ kinh nghiệm, kiến thức với vai trò là dev, thì khi xác định đi chuyên sâu về công nghệ, con đường chung sẽ trở thành tech lead (hoặc team lead). Tech lead là leader về mặt kĩ thuật, support cho 1 nhóm dev. Sau đó, tuỳ theo sở thích của mỗi người mà phát triển tiếp theo 2 hướng : chuyên gia và vạn năng. </p>\n<h3>2.1.1. Chuyên gia (Specialist)</h3>\n<p><strong>Công việc phải làm :</strong> </p>\n<ul>\n<li>Yêu cầu của vị trí này là phải có kiến thức và kinh nghiệm về mặt kĩ thuật, từ đó tìm hiểu sâu về 1 lĩnh vực, hướng dẫn, giúp đỡ cho các thành viên khác. Vai trò này phải làm code review, quản lý chất lượng code, training, nâng cao năng lực của team. </li>\n<li>Vai trò này đề cao output tổng thể của team, thế nên thời gian để review code có khi còn nhiều hơn thời gian code. </li>\n</ul>\n<p><strong>Kĩ năng cần thiết :</strong> </p>\n<ul>\n<li>Vị trí này phải đứng mũi chịu sào áp lực nhiều nhất, nên vừa cần năng lực về kĩ thuật, lại vừa cần leadership. </li>\n<li>Đam mê công việc và thích đào sâu, giải quyết tận gốc vấn đề.  </li>\n<li>Để support team hiệu quả thì vị trí này cũng cần kĩ năng quản lý thời gian, công việc tốt. </li>\n</ul>\n<p><strong>Triển vọng :</strong>\nTương lai của vị trí này là thành CTO (dạng kĩ thuật), hoặc VPoE (Vice President of Engineering). </p>\n<h3>2.1.2. Vạn năng (Generalist)</h3>\n<p>Sự khác biệt với vị trí specialist là vị trí vạn năng này phải là người biết nhiều mảng khác nhau. Từ FE đến BE, rồi cả imfra, server cũng phải biết. Hay nói cách khác, vị trí này là fullstack. </p>\n<p><strong>Công việc phải làm :</strong>\nVị trí chuyên gia sẽ đi vào chiều sâu, hiểu rất rõ về 1 mảng công nghệ nào đó. Generalist thì ưu tiên chiều rộng, mảng nào cũng biết. Thế nên vị trí này được gọi là vạn năng.\nCông việc của họ ở trong team là dạng tiên phong, sẵn sàng tìm hiểu những mảng công nghệ hoàn toàn mới, sau đó support cho tất cả các team dưới góc nhìn overview và backup khi dự án cần. </p>\n<p><strong>Kĩ năng cần thiết :</strong> </p>\n<ul>\n<li>Khả năng học hỏi rất nhanh chóng. </li>\n<li>Tư duy cởi mở để sẵn sàng tiếp nhận những luồng tư tưởng mới. </li>\n<li>Output nhanh và chính xác. </li>\n</ul>\n<p><strong>Triển vọng :</strong>\nTương lai của vị trí này là thành CTO (hỗ trợ sales), hoặc VPoE (Vice President of Engineering).</p>\n<h2>2.2 Hướng quản lý</h2>\n<p>Đây là hướng phát triển để trở thành manager, quản lý của dự án hoặc của team.\nTuy nhiên vị trí này hay bị nhầm với specialist. Anh thấy hầu hết cả PM ở các công ty IT hiện tại là dạng specialist thì đúng hơn. </p>\n<p><strong>Công việc phải làm :</strong>\nCông việc chính của PM là trao đổi với khách hàng, nắm bắt yêu cầu, lên kế hoạch và quản lý nhân sự, dự toán của dự án. Với vai trò PM này thì sẽ không làm các công việc khác như code, review code, ...</p>\n<p><strong>Kĩ năng cần thiết :</strong>\nNếu theo hướng này, thì <strong>các kĩ năng mềm được đánh giá cao hơn</strong>. Vị trí này cần kĩ năng giao tiếp, kĩ năng quản lý dự án.  </p>\n<p><strong>Triển vọng :</strong>\nỞ nước ngoài, thì vị trí quản lý này thường có mức lương thấp hơn so với hướng chuyên sâu về công nghệ.\nLý do khá đơn giản, vì nhìn vào danh sách công việc, kĩ năng của PM, thì vị trí này không cần 1 người giỏi kĩ thuật, nên có thể tuyển những người làm ở mảng khác. Trong khi để trở thành 1 người chuyên sâu về kĩ thuật, thì khá hiếm.</p>\n<p>Triển vọng của vị trí này thì tuỳ vào từng công ty, có thể thành PM, DM, COO, ...</p>\n<h2>2.3 Hướng công việc khác liên quan đến IT</h2>\n<p>Ngoài các hướng trên, thì cũng có những người lựa chọn những công việc khác - công việc mà kiến thức về IT là 1 lợi thế.\nVí dụ như consulting, director, R&#x26;D, ...</p>\n<p>Những hướng này thì anh cũng không rành lắm, nên cũng không viết được nhiều. </p>\n<h2>2.4 Freelancer</h2>\n<p>Freelancer là 1 hướng đang được yêu thích gần đây, khi có khá nhiều bạn có kĩ năng vững vàng, có khả năng ngoại ngữ tốt, khả năng giao tiếp đang theo đuổi. </p>\n<p>Freelancer thì xác định là phải làm với nước ngoài rồi, vì nếu chỉ làm trong nước thì anh nghĩ thu nhập không cao và bấp bênh. Vậy nên, khả năng ngôn ngữ và 1 chút may mắn nữa là rất cần thiết. </p>\n<p>Làm freelancer không hề nhàn nhã và thoải mái thời gian như nhiều người nghĩ. Để có thu nhập ổn định, em phải có khách quen. Để có khách quen, em phải làm việc chăm chỉ và có kế hoạch rõ ràng. Vậy nên freelancer chuyên nghiệp là những người có khả năng tự quản lý thời gian, công việc cực kì tốt. Freelancer chỉ thoải mái về địa điểm làm việc thôi. </p>\n<p>Nhược điểm của freelancer là thu nhập không ổn định, các phúc lợi xã hội không có. </p>\n<h1>3. Tổng kết</h1>\n<p>Bài viết này anh đã tổng kết lại những hướng phát triển của developer. Chúng ta có rất nhiều lựa chọn, tuỳ thuộc vào tính cách, sở thích, và sở trường của mỗi người. </p>\n<p>Cái truyền thuyết 30 tuổi không dev được nữa anh thấy rất sai. Nếu em vẫn giữ đam mê, xác định con đường của mình và học hỏi những kĩ năng cần thiết, thì 30 tuổi, 40 tuổi, 50 tuổi em vẫn có thể dev được. </p>\n<p><strong>- From rockkhuya with love</strong></p>","id":"617d46f6-c72e-5e00-84aa-a9af3cb3f1de","frontmatter":{"title":"IT career path - Con đường nào cho developers ?","date":"25-08-2020","tags":["career"]},"fields":{"slug":"/2020-08-25-IT-career-path/"}}},{"node":{"excerpt":"Mình còn nhớ hồi những năm 2011 gì đó, mình join vào làm dev php cho Chodientu.vn như bao anh em dev khác ngày đầu bỡ ngỡ và một trong những thủ tục chào hỏi cơ bản xong bắt đầu vào làm quen với dự án…","html":"<p>Mình còn nhớ hồi những năm 2011 gì đó, mình join vào làm dev php cho Chodientu.vn như bao anh em dev khác ngày đầu bỡ ngỡ và một trong những thủ tục chào hỏi cơ bản xong bắt đầu vào làm quen với dự án,\nnào là checkout code về local và cài cắm môi trường,... Mọi thứ cài cắm ok hết rồi còn duy nhất một ứng dụng cài mãi không được, đó là Mongodb cái tứ *** này bị sao vậy nhỉ! Sau một buổi sáng tìm hiểu thì đã tìm ra nguyên nhân là do ở Window phải cài đúng file .dll version mới chạy được,\nCũng may dự án đó chỉ cài cắm vài thứ cơ bản mà còn vất đến vậy! Dự án đó mà cài thêm mấy cái nữa chắc mất cả tuần mất! Cần có một cái gì đó có thể build và cài sẵn để tối ưu hoá time cho các anh em khác! Hồi đó mình chưa kiếm được một ứng dụng nào có thể đảm nhận yêu cầu này, cho tới 2013 Docker mới ra đời, nó đảm bảo các yêu cầu của anh em dev tìm hiểu và cài cắm nghịch ngợm này nọ!\nBữa nay mình xin giới thiệu đôi chút về Docker, một trong những ứng dụng tuyệt vời của thế kỷ dev :D</p>\n<h1>Problem</h1>\n<p>Đối với các dev, một trong những việc quan trọng đó là build môi trường, một trong những ưu điểm sau làm mình thích thú với nó:\n- Build môi trường cực kỳ đơn giản, hỗ trợ các hệ điều hành như: Window, Macos, Linux,...\n- Rút ngắn thời gian cho team member cài cắm dự án, đặc biệt đối với member cáo cũng như gà vào dự án.\n- Hỗ trợ tốt đối với CI/CD, deploy và test tự động,...</p>\n<h1>Làm quen với Docker</h1>\n<ul>\n<li>\n<p>Khái niệm Docker là gì thì mình sẽ không nói đến ở đây, bạn nào muốn biết có thể hỏi Google nhé, ở đây mình không làm việc đó.</p>\n<h2>Dockerfile là gì ?</h2>\n<ul>\n<li>Dockerfile là file config cho Docker để build ra image. Nó dùng một image cơ bản để xây dựng lớp image ban đầu. Một số image cơ bản: python, unbutu and alpine. Sau đó nếu có các lớp bổ sung thì nó được xếp chồng lên lớp cơ bản. Cuối cùng một lớp mỏng có thể được xếp chồng lên nhau trên các lớp khác trước đó.</li>\n<li>Configs:\nFROM                Chỉ định image gốc: python, unbutu, alpine…\nLABEL               Cung cấp metadata cho image. Có thể sử dụng để add thông tin maintainer. Để xem các label của images, dùng lệnh docker inspect.\nENV                 Thiết lập một biến môi trường.\nRUN                 Có thể tạo một lệnh khi build image. Được sử dụng để cài đặt các package vào container.\nCOPY                Sao chép các file và thư mục vào container.\nADD                 Sao chép các file và thư mục vào container.\nCMD                 Cung cấp một lệnh và đối số cho container thực thi. Các tham số có thể được ghi đè và chỉ có một CMD.\nWORKDIR             Thiết lập thư mục đang làm việc cho các chỉ thị khác như: RUN, CMD, ENTRYPOINT, COPY, ADD,…\nARG                 Định nghĩa giá trị biến được dùng trong lúc build image.\nENTRYPOINT          Cung cấp lệnh và đối số cho một container thực thi.\nEXPOSE              Khai báo port lắng nghe của image.\nVOLUME              Tạo một điểm gắn thư mục để truy cập và lưu trữ data.</li>\n</ul>\n</li>\n</ul>\n<h2>Ví dụ tạo nội dung Dockerfile với nội dung cơ bản sau:</h2>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># The line below states we will base our new image on the Latest Official Ubuntu</span>\n<span class=\"token keyword\">FROM</span> ubuntu<span class=\"token punctuation\">:</span>latest\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Identify the maintainer of an image</span>\n<span class=\"token keyword\">LABEL</span> maintainer=<span class=\"token string\">\"chien.le@tomosia.com\"</span>\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Update the image to the latest packages</span>\n<span class=\"token keyword\">RUN</span> apt<span class=\"token punctuation\">-</span>get update &amp;&amp; apt<span class=\"token punctuation\">-</span>get upgrade <span class=\"token punctuation\">-</span>y\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Install NGINX to test.</span>\n<span class=\"token keyword\">RUN</span> apt<span class=\"token punctuation\">-</span>get install nginx <span class=\"token punctuation\">-</span>y\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Expose port 80</span>\n<span class=\"token keyword\">EXPOSE</span> 80\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Last is the actual command to start up NGINX within our Container</span>\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"nginx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-g\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"daemon off;\"</span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Build thử</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker build <span class=\"token builtin class-name\">.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Kết quả đúng:</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">apples-MBP-6:test apple$ <span class=\"token function\">touch</span> Dockerfile\napples-MBP-6:test apple$ <span class=\"token function\">nano</span> Dockerfile\napples-MBP-6:test apple$ docker build <span class=\"token builtin class-name\">.</span>\nSending build context to Docker daemon  <span class=\"token number\">2</span>.048kB\nStep <span class=\"token number\">1</span>/6 <span class=\"token builtin class-name\">:</span> FROM ubuntu:latest\nlatest: Pulling from library/ubuntu\n54ee1f796a1e: Pull complete\nf7bfea53ad12: Pull complete\n46d371e02073: Pull complete\nb66c17bbf772: Pull complete\nDigest: sha256:31dfb10d52ce76c5ca0aa19d10b3e6424b830729e32a89a7c6eee2cda2be67a5\nStatus: Downloaded newer image <span class=\"token keyword\">for</span> ubuntu:latest\n ---<span class=\"token operator\">></span> 4e2eef94cd6b\nStep <span class=\"token number\">2</span>/6 <span class=\"token builtin class-name\">:</span> LABEL <span class=\"token assign-left variable\">maintainer</span><span class=\"token operator\">=</span><span class=\"token string\">\"chien.le@tomosia.com\"</span>\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> aea83c9d1309\nRemoving intermediate container aea83c9d1309\n ---<span class=\"token operator\">></span> c215e86fc7a8\nStep <span class=\"token number\">3</span>/6 <span class=\"token builtin class-name\">:</span> RUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> upgrade -y\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 89e7f73f46a8\nGet:1 http://security.ubuntu.com/ubuntu focal-security InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">107</span> kB<span class=\"token punctuation\">]</span>\nGet:2 http://archive.ubuntu.com/ubuntu focal InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">265</span> kB<span class=\"token punctuation\">]</span>\nGet:3 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">204</span> kB<span class=\"token punctuation\">]</span>\nGet:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">111</span> kB<span class=\"token punctuation\">]</span>\nGet:5 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">1078</span> B<span class=\"token punctuation\">]</span>\nGet:6 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">65.1</span> kB<span class=\"token punctuation\">]</span>\nGet:7 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">39.1</span> kB<span class=\"token punctuation\">]</span>\nGet:8 http://archive.ubuntu.com/ubuntu focal-backports InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">98.3</span> kB<span class=\"token punctuation\">]</span>\nGet:9 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">11.3</span> MB<span class=\"token punctuation\">]</span>\nGet:10 http://archive.ubuntu.com/ubuntu focal/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">1275</span> kB<span class=\"token punctuation\">]</span>\nGet:11 http://archive.ubuntu.com/ubuntu focal/restricted amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">33.4</span> kB<span class=\"token punctuation\">]</span>\nGet:12 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">177</span> kB<span class=\"token punctuation\">]</span>\nGet:13 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">39.3</span> kB<span class=\"token punctuation\">]</span>\nGet:14 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">423</span> kB<span class=\"token punctuation\">]</span>\nGet:15 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">198</span> kB<span class=\"token punctuation\">]</span>\nGet:16 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">17.3</span> kB<span class=\"token punctuation\">]</span>\nGet:17 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">3216</span> B<span class=\"token punctuation\">]</span>\nFetched <span class=\"token number\">14.4</span> MB <span class=\"token keyword\">in</span> 14s <span class=\"token punctuation\">(</span><span class=\"token number\">999</span> kB/s<span class=\"token punctuation\">)</span>\nReading package lists<span class=\"token punctuation\">..</span>.\nReading package lists<span class=\"token punctuation\">..</span>.\nBuilding dependency tree<span class=\"token punctuation\">..</span>.\nReading state information<span class=\"token punctuation\">..</span>.\nCalculating upgrade<span class=\"token punctuation\">..</span>.\nThe following packages will be upgraded:\n  liblzma5\n<span class=\"token number\">1</span> upgraded, <span class=\"token number\">0</span> newly installed, <span class=\"token number\">0</span> to remove and <span class=\"token number\">0</span> not upgraded.\nNeed to get <span class=\"token number\">91.7</span> kB of archives.\nAfter this operation, <span class=\"token number\">8192</span> B of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 liblzma5 amd64 <span class=\"token number\">5.2</span>.4-1ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">91.7</span> kB<span class=\"token punctuation\">]</span>\ndebconf: delaying package configuration, since apt-utils is not installed\nFetched <span class=\"token number\">91.7</span> kB <span class=\"token keyword\">in</span> 1s <span class=\"token punctuation\">(</span><span class=\"token number\">74.7</span> kB/s<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Reading database <span class=\"token punctuation\">..</span>. <span class=\"token number\">4122</span> files and directories currently installed.<span class=\"token punctuation\">)</span>\nPreparing to unpack <span class=\"token punctuation\">..</span>./liblzma5_5.2.4-1ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking liblzma5:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">5.2</span>.4-1ubuntu1<span class=\"token punctuation\">)</span> over <span class=\"token punctuation\">(</span><span class=\"token number\">5.2</span>.4-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up liblzma5:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">5.2</span>.4-1ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nProcessing triggers <span class=\"token keyword\">for</span> libc-bin <span class=\"token punctuation\">(</span><span class=\"token number\">2.31</span>-0ubuntu9<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nRemoving intermediate container 89e7f73f46a8\n ---<span class=\"token operator\">></span> 34058a73bfd5\nStep <span class=\"token number\">4</span>/6 <span class=\"token builtin class-name\">:</span> RUN <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx -y\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 66e3394dbf6a\nReading package lists<span class=\"token punctuation\">..</span>.\nBuilding dependency tree<span class=\"token punctuation\">..</span>.\nReading state information<span class=\"token punctuation\">..</span>.\nThe following additional packages will be installed:\n  fontconfig-config fonts-dejavu-core iproute2 libatm1 libbsd0 libcap2\n  libcap2-bin libelf1 libexpat1 libfontconfig1 libfreetype6 libgd3 libicu66\n  libjbig0 libjpeg-turbo8 libjpeg8 libmnl0 libnginx-mod-http-image-filter\n  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream\n  libpam-cap libpng16-16 libssl1.1 libtiff5 libwebp6 libx11-6 libx11-data\n  libxau6 libxcb1 libxdmcp6 libxml2 libxpm4 libxslt1.1 libxtables12\n  nginx-common nginx-core tzdata ucf\nSuggested packages:\n  iproute2-doc libgd-tools fcgiwrap nginx-doc ssl-cert\nThe following NEW packages will be installed:\n  fontconfig-config fonts-dejavu-core iproute2 libatm1 libbsd0 libcap2\n  libcap2-bin libelf1 libexpat1 libfontconfig1 libfreetype6 libgd3 libicu66\n  libjbig0 libjpeg-turbo8 libjpeg8 libmnl0 libnginx-mod-http-image-filter\n  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream\n  libpam-cap libpng16-16 libssl1.1 libtiff5 libwebp6 libx11-6 libx11-data\n  libxau6 libxcb1 libxdmcp6 libxml2 libxpm4 libxslt1.1 libxtables12 nginx\n  nginx-common nginx-core tzdata ucf\n<span class=\"token number\">0</span> upgraded, <span class=\"token number\">40</span> newly installed, <span class=\"token number\">0</span> to remove and <span class=\"token number\">0</span> not upgraded.\nNeed to get <span class=\"token number\">15.8</span> MB of archives.\nAfter this operation, <span class=\"token number\">60.8</span> MB of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu focal/main amd64 libbsd0 amd64 <span class=\"token number\">0.10</span>.0-1 <span class=\"token punctuation\">[</span><span class=\"token number\">45.4</span> kB<span class=\"token punctuation\">]</span>\nGet:2 http://archive.ubuntu.com/ubuntu focal/main amd64 libcap2 amd64 <span class=\"token number\">1</span>:2.32-1 <span class=\"token punctuation\">[</span><span class=\"token number\">15.9</span> kB<span class=\"token punctuation\">]</span>\nGet:3 http://archive.ubuntu.com/ubuntu focal/main amd64 libelf1 amd64 <span class=\"token number\">0.176</span>-1.1build1 <span class=\"token punctuation\">[</span><span class=\"token number\">44.0</span> kB<span class=\"token punctuation\">]</span>\nGet:4 http://archive.ubuntu.com/ubuntu focal/main amd64 libmnl0 amd64 <span class=\"token number\">1.0</span>.4-2 <span class=\"token punctuation\">[</span><span class=\"token number\">12.3</span> kB<span class=\"token punctuation\">]</span>\nGet:5 http://archive.ubuntu.com/ubuntu focal/main amd64 libxtables12 amd64 <span class=\"token number\">1.8</span>.4-3ubuntu2 <span class=\"token punctuation\">[</span><span class=\"token number\">28.4</span> kB<span class=\"token punctuation\">]</span>\nGet:6 http://archive.ubuntu.com/ubuntu focal/main amd64 libcap2-bin amd64 <span class=\"token number\">1</span>:2.32-1 <span class=\"token punctuation\">[</span><span class=\"token number\">26.2</span> kB<span class=\"token punctuation\">]</span>\nGet:7 http://archive.ubuntu.com/ubuntu focal/main amd64 iproute2 amd64 <span class=\"token number\">5.5</span>.0-1ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">858</span> kB<span class=\"token punctuation\">]</span>\nGet:8 http://archive.ubuntu.com/ubuntu focal/main amd64 libatm1 amd64 <span class=\"token number\">1</span>:2.5.1-4 <span class=\"token punctuation\">[</span><span class=\"token number\">21.8</span> kB<span class=\"token punctuation\">]</span>\nGet:9 http://archive.ubuntu.com/ubuntu focal/main amd64 libexpat1 amd64 <span class=\"token number\">2.2</span>.9-1build1 <span class=\"token punctuation\">[</span><span class=\"token number\">73.3</span> kB<span class=\"token punctuation\">]</span>\nGet:10 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 tzdata all 2020a-0ubuntu0.20.04 <span class=\"token punctuation\">[</span><span class=\"token number\">293</span> kB<span class=\"token punctuation\">]</span>\nGet:11 http://archive.ubuntu.com/ubuntu focal/main amd64 libicu66 amd64 <span class=\"token number\">66.1</span>-2ubuntu2 <span class=\"token punctuation\">[</span><span class=\"token number\">8520</span> kB<span class=\"token punctuation\">]</span>\nGet:12 http://archive.ubuntu.com/ubuntu focal/main amd64 libpam-cap amd64 <span class=\"token number\">1</span>:2.32-1 <span class=\"token punctuation\">[</span><span class=\"token number\">8352</span> B<span class=\"token punctuation\">]</span>\nGet:13 http://archive.ubuntu.com/ubuntu focal/main amd64 libssl1.1 amd64 <span class=\"token number\">1.1</span>.1f-1ubuntu2 <span class=\"token punctuation\">[</span><span class=\"token number\">1318</span> kB<span class=\"token punctuation\">]</span>\nGet:14 http://archive.ubuntu.com/ubuntu focal/main amd64 libxml2 amd64 <span class=\"token number\">2.9</span>.10+dfsg-5 <span class=\"token punctuation\">[</span><span class=\"token number\">640</span> kB<span class=\"token punctuation\">]</span>\nGet:15 http://archive.ubuntu.com/ubuntu focal/main amd64 ucf all <span class=\"token number\">3.0038</span>+nmu1 <span class=\"token punctuation\">[</span><span class=\"token number\">51.6</span> kB<span class=\"token punctuation\">]</span>\nGet:16 http://archive.ubuntu.com/ubuntu focal/main amd64 libpng16-16 amd64 <span class=\"token number\">1.6</span>.37-2 <span class=\"token punctuation\">[</span><span class=\"token number\">179</span> kB<span class=\"token punctuation\">]</span>\nGet:17 http://archive.ubuntu.com/ubuntu focal/main amd64 libxau6 amd64 <span class=\"token number\">1</span>:1.0.9-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">7488</span> B<span class=\"token punctuation\">]</span>\nGet:18 http://archive.ubuntu.com/ubuntu focal/main amd64 libxdmcp6 amd64 <span class=\"token number\">1</span>:1.1.3-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">10.6</span> kB<span class=\"token punctuation\">]</span>\nGet:19 http://archive.ubuntu.com/ubuntu focal/main amd64 libxcb1 amd64 <span class=\"token number\">1.14</span>-2 <span class=\"token punctuation\">[</span><span class=\"token number\">44.7</span> kB<span class=\"token punctuation\">]</span>\nGet:20 http://archive.ubuntu.com/ubuntu focal/main amd64 libx11-data all <span class=\"token number\">2</span>:1.6.9-2ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">113</span> kB<span class=\"token punctuation\">]</span>\nGet:21 http://archive.ubuntu.com/ubuntu focal/main amd64 libx11-6 amd64 <span class=\"token number\">2</span>:1.6.9-2ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">573</span> kB<span class=\"token punctuation\">]</span>\nGet:22 http://archive.ubuntu.com/ubuntu focal/main amd64 fonts-dejavu-core all <span class=\"token number\">2.37</span>-1 <span class=\"token punctuation\">[</span><span class=\"token number\">1041</span> kB<span class=\"token punctuation\">]</span>\nGet:23 http://archive.ubuntu.com/ubuntu focal/main amd64 fontconfig-config all <span class=\"token number\">2.13</span>.1-2ubuntu3 <span class=\"token punctuation\">[</span><span class=\"token number\">28.8</span> kB<span class=\"token punctuation\">]</span>\nGet:24 http://archive.ubuntu.com/ubuntu focal/main amd64 libfreetype6 amd64 <span class=\"token number\">2.10</span>.1-2 <span class=\"token punctuation\">[</span><span class=\"token number\">341</span> kB<span class=\"token punctuation\">]</span>\nGet:25 http://archive.ubuntu.com/ubuntu focal/main amd64 libfontconfig1 amd64 <span class=\"token number\">2.13</span>.1-2ubuntu3 <span class=\"token punctuation\">[</span><span class=\"token number\">114</span> kB<span class=\"token punctuation\">]</span>\nGet:26 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libjpeg-turbo8 amd64 <span class=\"token number\">2.0</span>.3-0ubuntu1.20.04.1 <span class=\"token punctuation\">[</span><span class=\"token number\">117</span> kB<span class=\"token punctuation\">]</span>\nGet:27 http://archive.ubuntu.com/ubuntu focal/main amd64 libjpeg8 amd64 8c-2ubuntu8 <span class=\"token punctuation\">[</span><span class=\"token number\">2194</span> B<span class=\"token punctuation\">]</span>\nGet:28 http://archive.ubuntu.com/ubuntu focal/main amd64 libjbig0 amd64 <span class=\"token number\">2.1</span>-3.1build1 <span class=\"token punctuation\">[</span><span class=\"token number\">26.7</span> kB<span class=\"token punctuation\">]</span>\nGet:29 http://archive.ubuntu.com/ubuntu focal/main amd64 libwebp6 amd64 <span class=\"token number\">0.6</span>.1-2 <span class=\"token punctuation\">[</span><span class=\"token number\">185</span> kB<span class=\"token punctuation\">]</span>\nGet:30 http://archive.ubuntu.com/ubuntu focal/main amd64 libtiff5 amd64 <span class=\"token number\">4.1</span>.0+git191117-2build1 <span class=\"token punctuation\">[</span><span class=\"token number\">161</span> kB<span class=\"token punctuation\">]</span>\nGet:31 http://archive.ubuntu.com/ubuntu focal/main amd64 libxpm4 amd64 <span class=\"token number\">1</span>:3.5.12-1 <span class=\"token punctuation\">[</span><span class=\"token number\">34.0</span> kB<span class=\"token punctuation\">]</span>\nGet:32 http://archive.ubuntu.com/ubuntu focal/main amd64 libgd3 amd64 <span class=\"token number\">2.2</span>.5-5.2ubuntu2 <span class=\"token punctuation\">[</span><span class=\"token number\">118</span> kB<span class=\"token punctuation\">]</span>\nGet:33 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 nginx-common all <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">37.3</span> kB<span class=\"token punctuation\">]</span>\nGet:34 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-http-image-filter amd64 <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">14.3</span> kB<span class=\"token punctuation\">]</span>\nGet:35 http://archive.ubuntu.com/ubuntu focal/main amd64 libxslt1.1 amd64 <span class=\"token number\">1.1</span>.34-4 <span class=\"token punctuation\">[</span><span class=\"token number\">152</span> kB<span class=\"token punctuation\">]</span>\nGet:36 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-http-xslt-filter amd64 <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">12.6</span> kB<span class=\"token punctuation\">]</span>\nGet:37 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-mail amd64 <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">42.3</span> kB<span class=\"token punctuation\">]</span>\nGet:38 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libnginx-mod-stream amd64 <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">66.9</span> kB<span class=\"token punctuation\">]</span>\nGet:39 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 nginx-core amd64 <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">425</span> kB<span class=\"token punctuation\">]</span>\nGet:40 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 nginx all <span class=\"token number\">1.18</span>.0-0ubuntu1 <span class=\"token punctuation\">[</span><span class=\"token number\">3624</span> B<span class=\"token punctuation\">]</span>\ndebconf: delaying package configuration, since apt-utils is not installed\nFetched <span class=\"token number\">15.8</span> MB <span class=\"token keyword\">in</span> 6s <span class=\"token punctuation\">(</span><span class=\"token number\">2445</span> kB/s<span class=\"token punctuation\">)</span>\nSelecting previously unselected package libbsd0:amd64.\n<span class=\"token punctuation\">(</span>Reading database <span class=\"token punctuation\">..</span>. <span class=\"token number\">4122</span> files and directories currently installed.<span class=\"token punctuation\">)</span>\nPreparing to unpack <span class=\"token punctuation\">..</span>./00-libbsd0_0.10.0-1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libbsd0:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">0.10</span>.0-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libcap2:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./01-libcap2_1%3a2.32-1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libcap2:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.32-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libelf1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./02-libelf1_0.176-1.1build1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libelf1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">0.176</span>-1.1build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libmnl0:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./03-libmnl0_1.0.4-2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libmnl0:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span>.4-2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxtables12:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./04-libxtables12_1.8.4-3ubuntu2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxtables12:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.8</span>.4-3ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libcap2-bin.\nPreparing to unpack <span class=\"token punctuation\">..</span>./05-libcap2-bin_1%3a2.32-1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libcap2-bin <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.32-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package iproute2.\nPreparing to unpack <span class=\"token punctuation\">..</span>./06-iproute2_5.5.0-1ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking iproute2 <span class=\"token punctuation\">(</span><span class=\"token number\">5.5</span>.0-1ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libatm1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./07-libatm1_1%3a2.5.1-4_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libatm1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.5.1-4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libexpat1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./08-libexpat1_2.2.9-1build1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libexpat1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.2</span>.9-1build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package tzdata.\nPreparing to unpack <span class=\"token punctuation\">..</span>./09-tzdata_2020a-0ubuntu0.20.04_all.deb <span class=\"token punctuation\">..</span>.\nUnpacking tzdata <span class=\"token punctuation\">(</span>2020a-0ubuntu0.20.04<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libicu66:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./10-libicu66_66.1-2ubuntu2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libicu66:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">66.1</span>-2ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libpam-cap:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./11-libpam-cap_1%3a2.32-1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libpam-cap:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.32-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libssl1.1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./12-libssl1.1_1.1.1f-1ubuntu2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libssl1.1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span>.1f-1ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxml2:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./13-libxml2_2.9.10+dfsg-5_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxml2:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.9</span>.10+dfsg-5<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package ucf.\nPreparing to unpack <span class=\"token punctuation\">..</span>./14-ucf_3.0038+nmu1_all.deb <span class=\"token punctuation\">..</span>.\nMoving old data out of the way\nUnpacking ucf <span class=\"token punctuation\">(</span><span class=\"token number\">3.0038</span>+nmu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libpng16-16:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./15-libpng16-16_1.6.37-2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libpng16-16:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.6</span>.37-2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxau6:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./16-libxau6_1%3a1.0.9-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxau6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:1.0.9-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxdmcp6:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./17-libxdmcp6_1%3a1.1.3-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxdmcp6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:1.1.3-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxcb1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./18-libxcb1_1.14-2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxcb1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.14</span>-2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libx11-data.\nPreparing to unpack <span class=\"token punctuation\">..</span>./19-libx11-data_2%3a1.6.9-2ubuntu1_all.deb <span class=\"token punctuation\">..</span>.\nUnpacking libx11-data <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>:1.6.9-2ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libx11-6:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./20-libx11-6_2%3a1.6.9-2ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libx11-6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>:1.6.9-2ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package fonts-dejavu-core.\nPreparing to unpack <span class=\"token punctuation\">..</span>./21-fonts-dejavu-core_2.37-1_all.deb <span class=\"token punctuation\">..</span>.\nUnpacking fonts-dejavu-core <span class=\"token punctuation\">(</span><span class=\"token number\">2.37</span>-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package fontconfig-config.\nPreparing to unpack <span class=\"token punctuation\">..</span>./22-fontconfig-config_2.13.1-2ubuntu3_all.deb <span class=\"token punctuation\">..</span>.\nUnpacking fontconfig-config <span class=\"token punctuation\">(</span><span class=\"token number\">2.13</span>.1-2ubuntu3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libfreetype6:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./23-libfreetype6_2.10.1-2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libfreetype6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.10</span>.1-2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libfontconfig1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./24-libfontconfig1_2.13.1-2ubuntu3_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libfontconfig1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.13</span>.1-2ubuntu3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libjpeg-turbo8:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./25-libjpeg-turbo8_2.0.3-0ubuntu1.20.04.1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libjpeg-turbo8:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.0</span>.3-0ubuntu1.20.04.1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libjpeg8:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./26-libjpeg8_8c-2ubuntu8_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libjpeg8:amd64 <span class=\"token punctuation\">(</span>8c-2ubuntu8<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libjbig0:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./27-libjbig0_2.1-3.1build1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libjbig0:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.1</span>-3.1build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libwebp6:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./28-libwebp6_0.6.1-2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libwebp6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">0.6</span>.1-2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libtiff5:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./29-libtiff5_4.1.0+git191117-2build1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libtiff5:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">4.1</span>.0+git191117-2build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxpm4:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./30-libxpm4_1%3a3.5.12-1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxpm4:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:3.5.12-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libgd3:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./31-libgd3_2.2.5-5.2ubuntu2_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libgd3:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.2</span>.5-5.2ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package nginx-common.\nPreparing to unpack <span class=\"token punctuation\">..</span>./32-nginx-common_1.18.0-0ubuntu1_all.deb <span class=\"token punctuation\">..</span>.\nUnpacking nginx-common <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libnginx-mod-http-image-filter.\nPreparing to unpack <span class=\"token punctuation\">..</span>./33-libnginx-mod-http-image-filter_1.18.0-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libnginx-mod-http-image-filter <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libxslt1.1:amd64.\nPreparing to unpack <span class=\"token punctuation\">..</span>./34-libxslt1.1_1.1.34-4_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libxslt1.1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span>.34-4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libnginx-mod-http-xslt-filter.\nPreparing to unpack <span class=\"token punctuation\">..</span>./35-libnginx-mod-http-xslt-filter_1.18.0-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libnginx-mod-http-xslt-filter <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libnginx-mod-mail.\nPreparing to unpack <span class=\"token punctuation\">..</span>./36-libnginx-mod-mail_1.18.0-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libnginx-mod-mail <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package libnginx-mod-stream.\nPreparing to unpack <span class=\"token punctuation\">..</span>./37-libnginx-mod-stream_1.18.0-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking libnginx-mod-stream <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package nginx-core.\nPreparing to unpack <span class=\"token punctuation\">..</span>./38-nginx-core_1.18.0-0ubuntu1_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking nginx-core <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSelecting previously unselected package nginx.\nPreparing to unpack <span class=\"token punctuation\">..</span>./39-nginx_1.18.0-0ubuntu1_all.deb <span class=\"token punctuation\">..</span>.\nUnpacking nginx <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libexpat1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.2</span>.9-1build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libxau6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:1.0.9-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libssl1.1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span>.1f-1ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\ndebconf: unable to initialize frontend: Dialog\ndebconf: <span class=\"token punctuation\">(</span><span class=\"token environment constant\">TERM</span> is not set, so the dialog frontend is not usable.<span class=\"token punctuation\">)</span>\ndebconf: falling back to frontend: Readline\ndebconf: unable to initialize frontend: Readline\ndebconf: <span class=\"token punctuation\">(</span>Can<span class=\"token string\">'t locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.30.0 /usr/local/share/perl/5.30.0 /usr/lib/x86_64-linux-gnu/perl5/5.30 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.30 /usr/share/perl/5.30 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\ndebconf: falling back to frontend: Teletype\nSetting up nginx-common (1.18.0-0ubuntu1) ...\ndebconf: unable to initialize frontend: Dialog\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\ndebconf: falling back to frontend: Readline\ndebconf: unable to initialize frontend: Readline\ndebconf: (Can'</span>t <span class=\"token function\">locate</span> Term/ReadLine.pm <span class=\"token keyword\">in</span> @INC <span class=\"token punctuation\">(</span>you may need to <span class=\"token function\">install</span> the Term::ReadLine module<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.30.0 /usr/local/share/perl/5.30.0 /usr/lib/x86_64-linux-gnu/perl5/5.30 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.30 /usr/share/perl/5.30 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base<span class=\"token punctuation\">)</span> at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line <span class=\"token number\">7</span>.<span class=\"token punctuation\">)</span>\ndebconf: falling back to frontend: Teletype\nSetting up libatm1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.5.1-4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libjbig0:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.1</span>-3.1build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libcap2:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.32-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up tzdata <span class=\"token punctuation\">(</span>2020a-0ubuntu0.20.04<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\ndebconf: unable to initialize frontend: Dialog\ndebconf: <span class=\"token punctuation\">(</span><span class=\"token environment constant\">TERM</span> is not set, so the dialog frontend is not usable.<span class=\"token punctuation\">)</span>\ndebconf: falling back to frontend: Readline\ndebconf: unable to initialize frontend: Readline\ndebconf: <span class=\"token punctuation\">(</span>Can<span class=\"token string\">'t locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.30.0 /usr/local/share/perl/5.30.0 /usr/lib/x86_64-linux-gnu/perl5/5.30 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.30 /usr/share/perl/5.30 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\ndebconf: falling back to frontend: Teletype\nConfiguring tzdata\n------------------\n\nPlease select the geographic area in which you live. Subsequent configuration\nquestions will narrow this down by presenting a list of cities, representing\nthe time zones in which they are located.\n\n  1. Africa      4. Australia  7. Atlantic  10. Pacific  13. Etc\n  2. America     5. Arctic     8. Europe    11. SystemV\n  3. Antarctica  6. Asia       9. Indian    12. US\nGeographic area:\nUse of uninitialized value <span class=\"token variable\">$_</span>[1] in join or string at /usr/share/perl5/Debconf/DbDriver/Stack.pm line 111.\n\nCurrent default time zone: '</span>/UTC<span class=\"token string\">'\nLocal time is now:      Mon Aug 24 15:05:26 UTC 2020.\nUniversal Time is now:  Mon Aug 24 15:05:26 UTC 2020.\nRun '</span>dpkg-reconfigure tzdata<span class=\"token string\">' if you wish to change it.\n\nUse of uninitialized value <span class=\"token variable\">$val</span> in substitution (s///) at /usr/share/perl5/Debconf/Format/822.pm line 83, &lt;GEN6> line 4.\nUse of uninitialized value <span class=\"token variable\">$val</span> in concatenation (.) or string at /usr/share/perl5/Debconf/Format/822.pm line 84, &lt;GEN6> line 4.\nSetting up libcap2-bin (1:2.32-1) ...\nSetting up libx11-data (2:1.6.9-2ubuntu1) ...\nSetting up libpng16-16:amd64 (1.6.37-2) ...\nSetting up libmnl0:amd64 (1.0.4-2) ...\nSetting up libwebp6:amd64 (0.6.1-2) ...\nSetting up fonts-dejavu-core (2.37-1) ...\nSetting up ucf (3.0038+nmu1) ...\ndebconf: unable to initialize frontend: Dialog\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\ndebconf: falling back to frontend: Readline\ndebconf: unable to initialize frontend: Readline\ndebconf: (Can'</span>t <span class=\"token function\">locate</span> Term/ReadLine.pm <span class=\"token keyword\">in</span> @INC <span class=\"token punctuation\">(</span>you may need to <span class=\"token function\">install</span> the Term::ReadLine module<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.30.0 /usr/local/share/perl/5.30.0 /usr/lib/x86_64-linux-gnu/perl5/5.30 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.30 /usr/share/perl/5.30 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base<span class=\"token punctuation\">)</span> at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line <span class=\"token number\">7</span>.<span class=\"token punctuation\">)</span>\ndebconf: falling back to frontend: Teletype\nSetting up libjpeg-turbo8:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.0</span>.3-0ubuntu1.20.04.1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libxtables12:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.8</span>.4-3ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libbsd0:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">0.10</span>.0-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libelf1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">0.176</span>-1.1build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libpam-cap:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:2.32-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\ndebconf: unable to initialize frontend: Dialog\ndebconf: <span class=\"token punctuation\">(</span><span class=\"token environment constant\">TERM</span> is not set, so the dialog frontend is not usable.<span class=\"token punctuation\">)</span>\ndebconf: falling back to frontend: Readline\ndebconf: unable to initialize frontend: Readline\ndebconf: <span class=\"token punctuation\">(</span>Can<span class=\"token string\">'t locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.30.0 /usr/local/share/perl/5.30.0 /usr/lib/x86_64-linux-gnu/perl5/5.30 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.30 /usr/share/perl/5.30 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\ndebconf: falling back to frontend: Teletype\nSetting up libjpeg8:amd64 (8c-2ubuntu8) ...\nSetting up libnginx-mod-mail (1.18.0-0ubuntu1) ...\nSetting up libxdmcp6:amd64 (1:1.1.3-0ubuntu1) ...\nSetting up libxcb1:amd64 (1.14-2) ...\nSetting up fontconfig-config (2.13.1-2ubuntu3) ...\nSetting up iproute2 (5.5.0-1ubuntu1) ...\ndebconf: unable to initialize frontend: Dialog\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\ndebconf: falling back to frontend: Readline\ndebconf: unable to initialize frontend: Readline\ndebconf: (Can'</span>t <span class=\"token function\">locate</span> Term/ReadLine.pm <span class=\"token keyword\">in</span> @INC <span class=\"token punctuation\">(</span>you may need to <span class=\"token function\">install</span> the Term::ReadLine module<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.30.0 /usr/local/share/perl/5.30.0 /usr/lib/x86_64-linux-gnu/perl5/5.30 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.30 /usr/share/perl/5.30 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base<span class=\"token punctuation\">)</span> at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line <span class=\"token number\">7</span>.<span class=\"token punctuation\">)</span>\ndebconf: falling back to frontend: Teletype\nSetting up libicu66:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">66.1</span>-2ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libnginx-mod-stream <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libfreetype6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.10</span>.1-2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libx11-6:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>:1.6.9-2ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libtiff5:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">4.1</span>.0+git191117-2build1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libfontconfig1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.13</span>.1-2ubuntu3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libxml2:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.9</span>.10+dfsg-5<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libxpm4:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:3.5.12-1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libgd3:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">2.2</span>.5-5.2ubuntu2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libxslt1.1:amd64 <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span>.34-4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libnginx-mod-http-image-filter <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up libnginx-mod-http-xslt-filter <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up nginx-core <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\ninvoke-rc.d: could not determine current runlevel\ninvoke-rc.d: policy-rc.d denied execution of start.\nSetting up nginx <span class=\"token punctuation\">(</span><span class=\"token number\">1.18</span>.0-0ubuntu1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nProcessing triggers <span class=\"token keyword\">for</span> libc-bin <span class=\"token punctuation\">(</span><span class=\"token number\">2.31</span>-0ubuntu9<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nRemoving intermediate container 66e3394dbf6a\n ---<span class=\"token operator\">></span> bc7d1680eeda\nStep <span class=\"token number\">5</span>/6 <span class=\"token builtin class-name\">:</span> EXPOSE <span class=\"token number\">80</span>\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 7cf207c904b9\nRemoving intermediate container 7cf207c904b9\n ---<span class=\"token operator\">></span> 91208fb5acd9\nStep <span class=\"token number\">6</span>/6 <span class=\"token builtin class-name\">:</span> CMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"nginx\"</span>, <span class=\"token string\">\"-g\"</span>, <span class=\"token string\">\"daemon off;\"</span><span class=\"token punctuation\">]</span>\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> b96361dcb08d\nRemoving intermediate container b96361dcb08d\n ---<span class=\"token operator\">></span> 76debc75be96\nSuccessfully built 76debc75be96</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Chạy thử</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run 76debc75be96</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>Các lệnh cơ bản trong Docker</h2>\n<ul>\n<li>\n<p>List các container đang chạy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">ps</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>List tất cả các container hiện có:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container <span class=\"token function\">ls</span> -a</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Xoá tất cả các Docker images hiện có:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker system prune -a</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Xem cấu hình docker-compose hiện có:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker-compose config</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Down các container đang chạy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker-compose down</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Build image từ container:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker build -t <span class=\"token operator\">&lt;</span>container name<span class=\"token operator\">></span> <span class=\"token builtin class-name\">.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Pull một image từ hub</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker pull <span class=\"token operator\">&lt;</span>image name<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>tag<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Lời kết</h2>\n<p>Như vậy bạn đã nắm được kha khá kiến thức vè Docker rồi đấy :D, nhưng nhớ là đừng mang đi chém gió nhé bay xác đấy :D\nHy vọng qua các ví dụ và hướng dãn trên bạn đã phần nào nắm và hiểu được về cách build một Docker image, bạn có thể đẩy lên Hub rồi đó, còn cách đẩy lên hub như nào thì vui lòng search thêm hoặc đợi bài viết sau của mình nhé!\nCảm ơn bạn đã dành thời gian đọc bài!</p>","id":"f045d833-8c2d-5815-9542-d5b29044e843","frontmatter":{"title":"[Docker] How to build một Docker image","date":"24-08-2020","tags":["Docker","Docker image"]},"fields":{"slug":"/how-to-build-mot-docker-image/"}}},{"node":{"excerpt":"I. RESTful API là gì? Compare REST (REpresentational State Transfer) hiểu một cách đơn giản thì REST là một loạt hướng dẫn và dạng cấu trúc dùng cho việc chuyển đổi dữ liệu. Nó sử dụng phương thức…","html":"<h2>I. RESTful API là gì?</h2>\n<center>\n<p><img src=\"https://topdev.vn/blog/wp-content/uploads/2019/04/restful-api.jpg\" alt=\"Compare\"></p>\n</center>\n<p>REST (REpresentational State Transfer) hiểu một cách đơn giản thì REST là một loạt hướng dẫn và dạng cấu trúc dùng cho việc chuyển đổi dữ liệu. Nó sử dụng phương thức HTTP đơn giản để tạo giao tiếp giữa các máy. Vì vậy, thay vì sử dụng một URL cho việc xử lý một số thông tin người dùng, REST gửi một yêu cầu HTTP như GET, POST, DELETE, vv... đến một URL để xử lý dữ liệu.</p>\n<p>Bản thân REST không phải là một loại công nghệ. Nó là phương thức tạo API với nguyên lý tổ chức nhất định. Những nguyên lý này nhằm hướng dẫn lập trình viên tạo môi trường xử lý API request được toàn diện.</p>\n<p>Vậy, RESTful API là một tiêu chuẩn dùng trong việc thiết kế các API cho các ứng dụng web để quản lý các resource. RESTful là một trong những kiểu thiết kế API được sử dụng phổ biến ngày nay cho các ứng dụng (web, mobile…) khác nhau giao tiếp với nhau.</p>\n<h2>II. RESTful hoạt động như thế nào?</h2>\n<center>\n<p><img src=\"https://topdev.vn/blog/wp-content/uploads/2019/04/restful-rest-diagram-api.jpg\" alt=\"Compare\"></p>\n</center>\n - Hoạt động chủ yếu của REST chính là việc dựa trên các giao thức của HTTP. Với các hoạt động cơ bản thì sẽ có thể sử dụng được các giao thức HTTP khác nhau, có thể nhắc đến như:\n<ul>\n<li>GET (SELECT): Trả về một tài nguyên hoặc một danh sách tài nguyên.</li>\n<li>POST (CREATE): Tạo mới một tài nguyên.</li>\n<li>PUT (UPDATE): Cập nhật thông tin cho tài nguyên.</li>\n<li>DELETE (DELETE): Xoá một tài nguyên.</li>\n</ul>\n<p>Những phương thức, hoạt động này trong lập trình sẽ thường được gọi với cái tên là CRUD. Cái tên này chính là viết tắt của các từ mà nó bao gồm trong đó, chính là Create, Read, Update và Delete.</p>\n<h2>III. Những điều cần chú ý với RESTful APIs</h2>\n<p>RESTful API không sử dụng session và cookie, nó sử dụng một access_token với mỗi request. Hiện tại có 3 cơ chế Authorize chính:</p>\n<ul>\n<li>HTTP Basic</li>\n<li>JSON Web Token (JWT)</li>\n<li>OAuth2</li>\n</ul>\n<p>Tùy thuộc vào service của bạn, mà hãy chọn loại Authorize có mức độ phù hợp, cố gắng giữ nó càng đơn giản càng tốt.</p>\n<p>Hiện tại đa số lập trình viên viết RESTful API giờ đây đều chọn JSON là format chính thức nhưng cũng có nhiều người chọn XML làm format.</p>\n<p>Dữ liệu json trả về thường có cấu trúc như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"data\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"RESTFul API\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"error\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SUCCESS\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Cấu trúc REST thì khó giải thích sao cho cụ thể. Tuy nhiên, vẫn có một số quy luật bất biến sau:</p>\n<ul>\n<li>Sự nhất quán trong cả API.</li>\n<li>Tồn tại không trang thái (ví dụ, không có server-side session).</li>\n<li>Sử dụng HTTP status code khi cần thiết.</li>\n<li>Sử dụng URL endpoint với logical hierarchy.</li>\n<li>Versioning trong URL chứ không phải trong HTTP header.</li>\n</ul>\n<p>Luôn sử dụng version để khi bạn cần nâng cấp API mà vẫn hỗ trợ các API cũ. Một URL nên bao gồm đường dẫn tiền tố như /v2/ cho phiên bản 2 cập nhật từ API trước đó.</p>\n<p>Return data ở endpoint sẽ thay đổi mạnh mẽ dựa vào phương thức HTTP. Ví dụ, GET trả nội dung, còn POST tạo nội dung mới. Request có thể chỉ đến cùng một endpoint, nhưng kết quả có thể rất khác.</p>\n<p>Một vấn đề quan trọng nữa là return type data. Đa số người dùng web trông chờ nội dung JSON, vậy đây có lẽ là lựa chọn tốt nhất bên cạnh XML. JSON chính là API return type nền tảng cho lập trình web.</p>\n<p>Khi chúng ta request một API nào đó thường thì sẽ có vài status code để nhận biết sau:</p>\n<ul>\n<li>200 OK – Trả về thành công cho những phương thức GET, PUT, PATCH hoặc DELETE.</li>\n<li>201 Created – Trả về khi một Resouce vừa được tạo thành công.</li>\n<li>204 No Content – Trả về khi Resource xoá thành công.</li>\n<li>304 Not Modified – Client có thể sử dụng dữ liệu cache.</li>\n<li>400 Bad Request – Request không hợp lệ</li>\n<li>401 Unauthorized – Request cần có auth.</li>\n<li>403 Forbidden – bị từ chối không cho phép.</li>\n<li>404 Not Found – Không tìm thấy resource từ URI</li>\n<li>405 Method Not Allowed – Phương thức không cho phép với user hiện tại.</li>\n<li>429 Too Many Requests – Request bị từ chối do bị giới hạn</li>\n</ul>\n<h3>[API Document]</h3>\n<p>Mỗi một lập trình viên thì ai cũng biết việc viết API docs là cần thiết, tuy nhiên để có một API docs hoàn chỉnh cũng tiêu tốn khá nhiều thời gian. Nhất là trong lúc dự án gấp rút thì mọi người thường chỉ để API docs ở mức siêu cơ bản. Tham khảo thêm cách viết API Document.</p>\n<p>API document là một phần tương tự như Unit Test vậy – lấy ngắn để nuôi dài.</p>\n<p>Nếu không được chăm sóc kỹ, thì đến lúc maintain hoặc thay đổi spec thì hậu quả sẽ rất thảm khốc, dưới đây là một số lưu ý lúc viết docs:</p>\n<p>Mô tả đầy đủ về params request: gồm những params nào, datatype, require hay optional.</p>\n<p>Nên đưa ra các ví dụ về HTTP requests và responses với data chuẩn.</p>\n<p>Cập nhật Docs thường xuyên, để sát nhất với API có bất cứ thay đổi gì.</p>\n<p>Format, cú pháp cần phải nhất quán, mô tả rõ ràng, chính xác.</p>\n<h2>IV. Lời kết</h2>\n<p>Nhìn chung, RESTful API là những API đi theo cấu trúc REST, hoạt động dựa trên các giao thức của HTTP.</p>\n<p>Luôn sử dụng xác thực cần thiết khi truy xuất tài nguyên thông qua api.</p>\n<p>Tạo và cập nhật API document khi có thay đổi về cấu trúc dữ liệu.</p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"9bdb0e0b-266d-5d5a-8250-79cdb311329e","frontmatter":{"title":"RESTful API những điều cần chú ý","date":"24-08-2020","tags":["php"]},"fields":{"slug":"/restful-api-nhung-dieu-can-chu-y/"}}},{"node":{"excerpt":"1. Giới thiệu Đã bao giờ các bạn thấy khó khăn trong việc kiểm tra dữ liệu nhập vào form của người dùng ? Thì đây chính là một giải pháp giúp bạn dễ dàng làm việc đó chỉ với một vài dòng cơ bản ^^…","html":"<h1>1. Giới thiệu</h1>\n<p>Đã bao giờ các bạn thấy khó khăn trong việc kiểm tra dữ liệu nhập vào form của người dùng ? Thì đây chính là một giải pháp giúp bạn dễ dàng làm việc đó chỉ với một vài dòng cơ bản ^^</p>\n<h1>2. Cài đặt</h1>\n<p>Đầu tiên các bạn phải có thư viện jQuery đã, bạn có thể tải phiên bản mới nhất tại:</p>\n<h3><a href=\"https://jquery.com/\">https://jquery.com/</a></h3>\n<p>Sau đó tất nhiên là jQuery Validation:</p>\n<h3><a href=\"https://jqueryvalidation.org\">https://jqueryvalidation.org</a></h3>\n<h1>3. Sử dụng</h1>\n<p>Để sử dụng jQuery Validation các bạn cần phải biết qua phương thức \" $(‘xxx’).validate() ”\n!!! (xxx ở đây là tên class hoặc id )</p>\n<p>Mình có cấu trúc html đơn giản như sau:</p>\n<p><b>Html</b>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/be4428207beb6e5074b507b9b2fba1ee/9a86a/html.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 42.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABPElEQVQoz4WR626DMAxG+/4v2aGytYWSC+QGJDkzhbV/ps2ShSOcz8dfThyxrAXTtKhrx63vGIaeSSseSmHtRDKW5AKVv+NUq7TUvS26hG1vjE1D99HRfXkwGmdmvMsgA+h7gp54DBmlVhmWMWYVgJVlqYegRM4F/fkgWEcKQcQjc5ypObMKfZbcaimedc71maXsmdfKpnUI1iek1w59uTK1Lb0Qms5RhEoLwTJFBAPUgLOJQe1k45ixx/e9sggWmWbumulhcOLbaCa88ZSYyEsRj6VtniFFcpqJschxz23VlIpsIoQ/ZpYCVgS3h/Hi4fU80F487t5hbwqjItUYIVSsdhTqN6ETf7X4GULhtPk0BzHdBvS5ISlDFQ9HV/FeLjgnfgYWL7T/PfG28ia2yFovL1+/fru9G/9XfgOzzG9hZdSBkwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"html\" title=\"html\" src=\"/static/be4428207beb6e5074b507b9b2fba1ee/8c557/html.png\" srcset=\"/static/be4428207beb6e5074b507b9b2fba1ee/4edbd/html.png 175w,\n/static/be4428207beb6e5074b507b9b2fba1ee/13ae7/html.png 350w,\n/static/be4428207beb6e5074b507b9b2fba1ee/8c557/html.png 700w,\n/static/be4428207beb6e5074b507b9b2fba1ee/9a86a/html.png 792w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></img></p>\n<p><b>jQuery</b>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cee306e63977efa4fe6a71f4276489c1/c0388/js.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 127.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsSAAALEgHS3X78AAACyklEQVQ4y5VV2XLiMBDk/78sb9lUgJAF7BAOX9jGp3xJvS2BiSEmqVWVS8ISre6ZnvEkj3IIz0USJKiqGqqq0AmBjnPTNCiKAnleoCxLSCmhh1LKPGNjYg5xsyJAfDzCW6+xeX1Fsj8YsCDwcTgc4PFSKbsr4KMxMQcGL5qug+N5sD4+EEXRmbWSaFpACGlOG4Zn5G/gE/PisjHcLIoc8/kcr2RrfdgInRxxVONKoAe9Z3gP1K+LPMfLywuenp6wXC2hdjbU0aUEwTiXjxkOf/SbOp5t2+DImB7DEKqpgPIEZCGQ+FBZdJOgXwGdwx6O6zK7dICoUNU1OHHGVXJ/Vo0lZQjYH9Q2mU6n2FsWUiYnSTrEcf2VFHUB/YnhjWxRYmXbgOtBOW6/+8Xsbr61zd2m6zjY03s1pbZtewaSCpew/e7De7m6QuI4MpLXNLrrRnwahGEv+THoaFK6TkJ2LbbbLbIspf9ahNHZ4Grg2aGyfn0jWYNEJgGJsc7YGAMbzrcxZJA8lt18NsXz8zPSJEV3qYhxierbJbcxHKyzLMPi/R0by0bABIljgBPXBS8sXAfZbovcD64VM5plvdFXQJ5neHtf8E8+/D9ky3jGyyXSzQan9QrJ5ydqtrkrGSlvGd7HSJeeTVNvtzuIOEa23xuwnJaq6ICMrAsyFCzNwvfM3NFio1n2WHa6hrUH5YD9Twn6FsMhoKCUmKzeFgvYqxV8sirJ4rS2GD+X8dshpeQqzb5d9rj0KoG/BCvYcUL2RR3DE0OQcU5sCxHj2Vys9StD7cUwjFCwQRh/8o+S8nXgzcyuLttuxEB9x75ze0pjO5RpmaRskdJCNd+VwRHV6WSeMjgnpCP4sOtP1Ej7N1luasxmMwOc0ns6y4XnG8k60wk7UcYPmZTysWSddkF5pf6Myg7/M66l17bSxETw2xtFsZHwky0ePf35fwsmoDoHGIQCAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"js\" title=\"js\" src=\"/static/cee306e63977efa4fe6a71f4276489c1/c0388/js.png\" srcset=\"/static/cee306e63977efa4fe6a71f4276489c1/4edbd/js.png 175w,\n/static/cee306e63977efa4fe6a71f4276489c1/13ae7/js.png 350w,\n/static/cee306e63977efa4fe6a71f4276489c1/c0388/js.png 542w\" sizes=\"(max-width: 542px) 100vw, 542px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></img></p>\n<p><i><b>Chắc đọc đến đây các bạn cũng đã hiểu được cách hoạt động của nó, nhưng mình vẫn cứ giải thích như sau:</b></i></p>\n<p></p>\n<ol>\n<li>Phương thức \"<strong>validate()</strong>\" chấp nhận 1 đối số là <strong>một đối tượng</strong> có <strong>2 thuộc tính</strong> chính là “<strong>rules</strong>” và “<strong>messages</strong>”.</li>\n<li>Trong đó, “<strong>rules</strong>” đại diện cho điều kiện xác thực như “<strong>required</strong>”(Không bỏ trống), “<strong>min</strong>”(Độ lớn tối thiểu)…và “<strong>messages</strong>” đại diện cho các thông báo lỗi mà chúng ta đã thấy ở ví dụ trên.</li>\n<li>Và thuộc tính “<strong>rules</strong>” của chúng ta sẽ lại bao gồm các phần tử con cũng là <strong>một đối tượng</strong> với các thuộc tính bên trong nó chính là thuộc tính “<strong>name</strong>” bên trong các thẻ “<strong>input</strong>” của chúng ta.</li>\n<li>Rất đơn giản phải không nào? “<strong>messages</strong>” cũng sẽ tương tự “<strong>rules</strong>” và nếu bạn tinh ý sẽ nhận ra là kể cả điều kiện bên trong nó như “required”, “<strong>minlength</strong>” cũng sẽ tương đồng với bên “<strong>messages</strong>”. Hai cái chỉ khác nhau về công việc mà thôi.</li>\n<li>Như vậy, chúng ta đã hoàn tất được công việc “<strong>Validate</strong>” rồi đấy.</li>\n</ol>\n<h1>4. Lưu ý</h1>\n<h2>Thông thường cần validate những gì?</h2>\n<p>Mỗi ứng dụng có những loại dữ liệu khác nhau nên việc liệt kê ra hết là điều không thể, chính vì vậy trong bài này mình chỉ đưa ra một số loại dữ liệu mà ta thường validate nhé.</p>\n<ul>\n<li>Kiểm tra dữ liệu không được rỗng</li>\n<li>Kiểm tra có phải đúng định dạng email</li>\n<li>Kiểm tra có phải đúng định dạng URL</li>\n<li>Kiểm tra có phải đúng định dạng hình ảnh</li>\n<li>Kiểm tra có phải đúng định dạng số điện thoại</li>\n<li>... ngoài ra còn nhiều trường hợp và phụ thuôc vào dư án.</li>\n</ul>\n<p>Cách thông thường nhất là chúng ta sử dụng  <strong>RegEx</strong>  để kiểm tra định dạng dữ liệu.</p>\n<h2>Một số điều kiện để kiểm tra các phần tử của form bằng jQuery Validation :</h2>\n<p>required - <em>Không được bỏ trống</em></p>\n<p>remote - <em>Gửi yêu cầu về Web Server để xác thực</em></p>\n<p>minlength - <em>Độ dài tối thiểu</em></p>\n<p>maxlength - <em>Độ dài tối đa</em></p>\n<p>rangelength - <em>Độ dài tối thiểu từ x tới y</em></p>\n<p>min - <em>Số tối thiểu</em></p>\n<p>max - <em>Số tối đa</em></p>\n<p>range - <em>Số tối thiểu từ x tới y</em></p>\n<p>email - <em>Xác thực định dạng Email</em></p>\n<p>url - <em>Xác thực định dạng URL</em></p>\n<p>date - <em>Xác thực định dạng ngày tháng</em></p>\n<p>dateISO - <em>Xác thực định dạng ngày tháng theo chuẩn ISO</em></p>\n<p>number - <em>Phải là số, bao gồm số thập phân</em></p>\n<p>digits - <em>Chỉ chấp nhận số nguyên dương</em></p>\n<p>creditcard - <em>Xác thực số thẻ tín dụng</em></p>\n<p>equalTo - <em>Phải trùng với phần tử nào đó</em></p>\n<h1>5. Như vậy</h1>\n<p>Chúng ta đã hoàn tất được công việc “Validate” rồi đấy.\nCác bạn có thể tìm hiểu thêm tại:</p>\n<h3><a href=\"https://jqueryvalidation.org\">https://jqueryvalidation.org</a></h3>\n<h4>Hẹn gặp các bạn vào các bài viết sắp tới. See ya !!!</h4>","id":"5efc9677-fb81-5c4c-b1b3-031741dd39c7","frontmatter":{"title":"[jQuery] How to use jQuery Validation","date":"24-08-2020","tags":["html","javascript","jquery"]},"fields":{"slug":"/huong-dan-su-dung-jquery-validation/"}}},{"node":{"excerpt":"Lời nói đầu Nếu bạn đàng bắt đầu tìm hiểu hoặc đã từng có thời gian làm việc với javascript thì chắc hẳn những cái tên như Angular, Reactjs, Vuejs đã không còn là những từ khoá mới lạ phải không nào…","html":"<h1>Lời nói đầu</h1>\n<p>Nếu bạn đàng bắt đầu tìm hiểu hoặc đã từng có thời gian làm việc với javascript thì chắc hẳn những cái tên như <strong>Angular</strong>, <strong>Reactjs</strong>, <strong>Vuejs</strong> đã không còn là những từ khoá mới lạ phải không nào? Mình đã từng có thời gian làm việc với <strong>Vuejs</strong>, cũng tìm hiểu qua những framework javascript khác và mình nghĩ ai cũng có thể dễ dàng nhận ra chúng đều là những framework làm <strong>Client Side Render(CSR)</strong>.  Tuy nhiên, trong phần lớn dự án thực tế thì sẽ phải sử dụng <strong>Server Side Render(SSR)</strong> nhiều hơn. Vậy có một cái gì đó tương tự như <strong>Vuejs</strong> hay** Reactjs** nhưng hỗ trợ <strong>SSR</strong> không. Câu trả lời là có. 2 framework mới đã ra đời ngay sau đó là <strong>Nextjs</strong>(Dùng cho <strong>Reactjs</strong>) và <strong>Nuxtjs</strong>(Dành cho <strong>Vuejs</strong>) để đáp ứng được nhu cầu thực tiễn. Trong bài viết này mình sẽ cùng các bạn tìm hiểu cơ bản chút về <strong>Nuxtjs</strong> xem có gì mới không nhé. Có lẽ sẽ có bạn tự hỏi tại sao mình lại chọn <strong>Nuxtjs</strong> mà không phải <strong>Nextjs</strong> sau lời mở đầu. Cơ bản là vì mình hiện đang làm việc với <strong>Vuejs</strong> nên sẽ tìm hiểu <strong>Nuxtjs</strong> trước đã :D.</p>\n<h1>Nội dung</h1>\n<h2>Tìm hiểu về Nuxtjs</h2>\n<h3>1. Tổng quan về Nuxt.js:</h3>\n<ul>\n<li>Khi đánh giá một repository trên github thì điều đầu tiên mình quan tâm chính là số stars, vì nó chính là sự công nhận, đánh giá của cộng đồng, và như các bạn có thể thấy là nuxt đang nhận được > 29.2k stars trên github. Một con số đáng ngưỡng mộ trong thời gian ngắn:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e9e7d0adf4b557edac535c55f8bc820/d56e1/star-github.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.857142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAeElEQVQI1z2MWxKCMBRD2f/aoG90CwjTAgKOUOrx4of5OZkkk8q3d5wN1I1BGYcLNxptqZXG+RZtHdYHjAu//PKNNrJrMdb/MyW8vipEed55dD3T/OQsH2Ka6PqBfBaWZeU4DrbXmyEmdvFReBbp1o00TtJnRuGlL+/lkkhjQ4+FAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"star github\"\n        title=\"star github\"\n        src=\"/static/6e9e7d0adf4b557edac535c55f8bc820/8c557/star-github.png\"\n        srcset=\"/static/6e9e7d0adf4b557edac535c55f8bc820/4edbd/star-github.png 175w,\n/static/6e9e7d0adf4b557edac535c55f8bc820/13ae7/star-github.png 350w,\n/static/6e9e7d0adf4b557edac535c55f8bc820/8c557/star-github.png 700w,\n/static/6e9e7d0adf4b557edac535c55f8bc820/e996b/star-github.png 1050w,\n/static/6e9e7d0adf4b557edac535c55f8bc820/d56e1/star-github.png 1130w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>Tiếp theo là số lượng người dùng và contributors cực kì đông đảo, bạn có thể yên tâm về việc có thể sử dụng lâu dài (vẫn liên tục được phát triển và sửa lỗi) và nhận được nhiều sự hỗ trợ với một cộng đồng người dùng lớn như thế này!\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 606px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2074a772f36f4b86506bf5b221685fe1/4d4a2/using-quantity.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADKElEQVQ4y62Uy28TVxTG84d0UQnURdfsEOuuWqEUZYUE7arqBiREFyggiIgEKhWLqgl0A2yQQqAkgipPYseJa+I8alxcE0KwHdskxA7xY8ae150fd+44iQnOIlKudOa+z3znO989bUIIbMfBkb3jNKxp7O07DRN7mL/n4rU2DrC5rkvb7Nw8I6PjhCMzTAQmyWZz/DMzy9izIInkokLgHRTSXFfIW/68tUmEjuNimg6GUUfXdfWn0maFUqmCaIWiYVvfZnQq5JWVRebnA+gGvHm9TPhJPzW7SnFzlcBgP4XVd9RNk0RlnYqWB/0tCEvyBpYtMGyPQ3cn5N7bv/DjqePMLpr81nWN7p9P8l95gVv3b3Dsqy+YHB1iY3WVu+l/yeVGYCOEWc2xtO4Sy9R4ltR4X7aVQ4+WtmwuTfT5DFrNVmFatoNmV8gXcgwOPqFQLODB2ajXsMxN0F5LGm2F0MusLdztcBXC1unaeyrURf+jHDUlRXHoZdG0rIbuHKVJ32wste40ac0zp6UWtx16Fw5Uh9HZOQLBSUJTYYZHx2Q/LechUqk08ZdJYvGXCqV32Ee7Fabwe4VOfMqhlCL1uqG4smybSrUqyRaUymX0mtkSibuL2+2QI8ERHtztRatWuN3zB2MjwzjSaeZVEiERLb2aJxx6SlXTGHg6QWQh43vQizJDddayKd5LpWwj/PX8D5w9fpRbPb/zzZGvOf39t7yIJ7h5/SbZ1Bu6rl6m60onw4Eo33X8xPkbQcqBHl6cO4yWDPDwz14ifz/ccbiylGAuOETdMBgceEQ0OqNCCYUj6tBUJMb087hUguDeX/+TTGvUszFi97soF9eIL8TIZzI7Dvv6HnCh85IMuUR+egg9nWBiMkBHRzvj4+P7yrDisLu7m/b2E7zLp+m7eIbEUD+PBwY4fOhL7ty7ow55evSz7Nc9L6tC6lT1TRpUCL1kbG4U1MKHtTy2XlXj1PKSOtz8d3fX6/hkbcthzYJ82ZUP3KJY88aC3AeLstkoVY06t3cN3PX0SrpDXjpYkxXj7bpBumiyvG6SLhiqeuz7pXxWCXYLeB/mtY+wUCgWM2ebiwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"using quantity\"\n        title=\"using quantity\"\n        src=\"/static/2074a772f36f4b86506bf5b221685fe1/4d4a2/using-quantity.png\"\n        srcset=\"/static/2074a772f36f4b86506bf5b221685fe1/4edbd/using-quantity.png 175w,\n/static/2074a772f36f4b86506bf5b221685fe1/13ae7/using-quantity.png 350w,\n/static/2074a772f36f4b86506bf5b221685fe1/4d4a2/using-quantity.png 606w\"\n        sizes=\"(max-width: 606px) 100vw, 606px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>\n<p><strong>Nuxt.js</strong> được cài đặt bao gồm một số thư viện sau:</p>\n<ul>\n<li><a href=\"https://vuejs.org\">Vue 2</a></li>\n<li><a href=\"https://router.vuejs.org/\">Vue Router</a></li>\n<li><a href=\"https://vuex.vuejs.org/guide/\">Vuex</a>  (được cài đặt khi sử dụng store)</li>\n<li><a href=\"https://ssr.vuejs.org/\">Vue Server Renderer</a>  (sẽ được loại trừ nếu khi cài đặt bạn lựa chọn  <code class=\"language-text\">mode: &#39;spa&#39;</code>)</li>\n<li><a href=\"https://github.com/nuxt/vue-meta\">Vue Meta</a></li>\n</ul>\n</li>\n</ul>\n<p>Tổng dung lượng sau khi cài đặt tất cả những gói trên chỉ có <strong>60kB</strong>(nếu không có có Vuex thì chỉ còn <strong>57KB</strong>), cực kì nhỏ gọn phải không nào!</p>\n<h3>2. Khởi tạo và cấu trúc thư mục của một project nuxtjs:</h3>\n<ul>\n<li>\n<p>Để khởi tạo một project nuxt, chúng ta sử dụng  <code class=\"language-text\">create-nuxt-app</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># sử dụng npx (npx được cài đặt kèm với NPM từ phiên bản 5.2.0)</span>\n$ npx create-nuxt-app <span class=\"token operator\">&lt;</span>project-name<span class=\"token operator\">></span> \n<span class=\"token comment\"># hoặc sử dụng yarn</span>\n$ <span class=\"token function\">yarn</span> create nuxt-app <span class=\"token operator\">&lt;</span>project-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>Trong quá trình khởi tạo project, bạn sẽ phải khai báo một số thông tin như là tên, UI framework (Ant Design, Bootstrap, Element, ...), ... cho project của bạn.!<img src=\"/create-project.png\"></li>\n<li>Thư mục project sẽ có cấu trúc như sau:<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7fb31dc466f8e09c6eaafa8e025a727a/31198/structure-folder.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 168%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAACXBIWXMAABYlAAAWJQFJUiTwAAADu0lEQVRIx51Wu47rVBTN1yAoKehpEC0SCImOCsEXQIVoQKK7SNDQXP6EAqSrASkzmUliO36/4vcrtmMndrLY52QyJMy9TDxH2jq2dLK8195rr5PRu9++woff/45PXlzhy99EfPFSwOe/TvHVyyne/+EKH/z4Fz775QYf/zTGRy/G+PTnG7z33Su89fUfeOebP/H2f2K0zFq4SY07zcONoOHqeoYx7VmzR1zveCRVh7jc8IhWGwTFBl7evjZGOFnLrICykFAYC9RLA5toiTb2sN82uHSNdvs9tl2HVVlBsH1MJRWuKsPWFJjKAlUao99uQcfAzj4Voz172O1QVmsojgVJXcBQFDi2Bcc06dDhy+zcRRmeHg7XJYLQRSHPkBPt0tHRtw19sL8Y9CFDOg45yCEqOq9hrEnIbB05gW7X9TDAnmoYJhlmkoypIEInqi3V7bgupXsAPPmBmYVQNQGxPEdqKihcE3USPr+GQdXCouwqc4FMl5ATaO4Y6NpmIOWeyabEnW7jZi7Bpk47hobIc6l+FXZUkiPgMVjNj/tpjLi+SBtl3cD1I0hzEcp8Dnk2g2fZ6JoG+373KJM3JUuUawKs6LGBFHgQ1BlqZ4rUmFAd75DaM6zLAF1foetKitX9+TWBsu6fBzVlSZRJxL4IL5giSa+RFjNEyYTe/0ZGz1m2QBAc9jgW0LYGG1QCdGk/D06573suG0lRMR6PYdnOk5L5H8qHGWVLT3xolsxlU4YeVr6D/W53BnxoyptBR3joGpNNA9syURoSIhq/WBU5aNeuh3R5zykz2Uw0BxNJgW/q5DIJtnWFdpXTJG0v1yGnTIAFuY1LbiPP76CIApqa6W/4+J1NSpUaNCFjrCxybFNGQtOyqVaP6vi029zXQvBTTGUNpaVwt8ltjebZGOo24G7jRwlkzcD1ZIIoTl4jk2dQLmnMoqWN3FJRBi4P1pRhgCeycYoSuk4GSxYWiLdISDY5mewz3Ia6vCoxM1zcimT9ccBdZlOXB7fpuwGAOIxeWa9pdkPIooiUTGJLYBuSDmvIMEBG+f5FDulOkVU+KeFiiliZo1haZGHrYYBsZUQ5C/2DU5NLM7mkdFkNATsDTIoKgesiUci6pFsStvJIMsMyjAwktoDCIXMIl9RdlQu7ydNBoA+AUWAh1OekQY2oyjzDRDuM3hBx/0s5r+DqKjLSILMuBspqyMRdk4wu1eIDYJyv4CgSUlVAKNFdYij8X0Ppu6gibzig6GeQLRdrz+JdrsixGdDxCr2U8j/WrDXvMhaa7wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"structure folder\"\n        title=\"structure folder\"\n        src=\"/static/7fb31dc466f8e09c6eaafa8e025a727a/31198/structure-folder.png\"\n        srcset=\"/static/7fb31dc466f8e09c6eaafa8e025a727a/4edbd/structure-folder.png 175w,\n/static/7fb31dc466f8e09c6eaafa8e025a727a/13ae7/structure-folder.png 350w,\n/static/7fb31dc466f8e09c6eaafa8e025a727a/31198/structure-folder.png 694w\"\n        sizes=\"(max-width: 694px) 100vw, 694px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>Sau khi khởi tạo project thành công thì bạn sử dụng câu lệnh  <code class=\"language-text\">npm run dev</code>  để chạy project và bạn có thể truy cập thông qua đường dẫn  <a href=\"http://localhost:3000/\">http://localhost:3000</a></li>\n</ul>\n<h3>3. Một số chức năng cơ bản cần chú ý</h3>\n<ul>\n<li>\n<p><strong>Routing</strong>: như đã nói ở phần 1, Nuxt.js đã bao gồm  <code class=\"language-text\">vue-router</code>  nên nó sẽ tự động sinh ra các router dựa trên cấu trúc thư mục  <code class=\"language-text\">pages</code>  trong project. Tức là bạn sẽ không cần phải khai báo router mà chỉ cần đặt tên file, cấu trúc thư mục theo 1 quy tắc nhất định thì sẽ tự động sinh ra router. Ví dụ như sau:</p>\n<ul>\n<li>\n<p><strong>Basic route</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    pages/\n    --| users/\n    -----| index.vue\n    -----| profile.vue\n    --| index.vue</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>sẽ tự động sinh ra khai báo router như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">router: {\n  routes: [\n    {\n      name: &#39;index&#39;,\n      path: &#39;/&#39;,\n      component: &#39;pages/index.vue&#39;\n    },\n    {\n      name: &#39;users&#39;,\n      path: &#39;/users&#39;,\n      component: &#39;pages/users/index.vue&#39;\n    },\n    {\n      name: &#39;users-profile&#39;,\n      path: &#39;/users/profile&#39;,\n      component: &#39;pages/users/profile.vue&#39;\n    }\n  ]\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Còn đối với  <strong>Dynamic Route</strong>  (tức là có truyền tham số vào router ví dụ như id, slug) thì bạn chỉ cần đặt tên folder hoặc tên file bắt đầu bằng dấu  <code class=\"language-text\">_</code>, ví dụ như là  <code class=\"language-text\">_id.vue</code>  hoặc  <code class=\"language-text\">_slug/</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pages/\n--| users/\n-----| _id.vue\n--| index.vue\n--| _slug\n-----| index.vue\n-----| comments.vue</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>thì sẽ tự động sinh ra khai báo router như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">router: {\n  routes: [\n    {\n      name: &#39;index&#39;,\n      path: &#39;/&#39;,\n      component: &#39;pages/index.vue&#39;\n    },\n    {\n      name: &#39;users-id&#39;,\n      path: &#39;/users/:id?&#39;,\n      component: &#39;pages/users/_id.vue&#39;\n    },\n    {\n      name: &#39;slug&#39;,\n      path: &#39;/:slug&#39;,\n      component: &#39;pages/_slug/index.vue&#39;\n    },\n    {\n      name: &#39;slug-comments&#39;,\n      path: &#39;/:slug/comments&#39;,\n      component: &#39;pages/_slug/comments.vue&#39;\n    },\n  ]\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Và do tham số truyền vào dynamic route này có thể là do người dùng truyền vào nên chúng ta sẽ cần validate nó theo đúng kiểu, format mà chúng ta muốn. (Sau 1 thời gian làm coder thì mình luôn nhớ rõ 1 câu  <strong><code class=\"language-text\">ĐỪNG BAO GIỜ TIN TƯỞNG HOÀN TOÀN NGƯỜI DÙNG</code></strong>).</p>\n<p>Và Nuxt.js cũng cho phép chúng ta có thể viết hàm validate trong component. Các bạn có thể tham khảo thêm về validate trong Nuxt.js ở  <a href=\"https://nuxtjs.org/api/pages-validate\">đây</a>. Còn đây là ví dụ đơn giản validate id truyền vào phải là số.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">validate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> params <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Must be a number</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">/</span><span class=\"token operator\">^</span>\\d<span class=\"token operator\">+</span>$<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Views</strong>:</p>\n<ul>\n<li>\n<p><strong>Layout</strong>: layout là một khung bố cục chung cho các trang gần giống nhau (ví dụ như các trang thuộc phần quản trị của admin sẽ dùng chung 1 layout). Để sử dụng layout cho một page, bạn chỉ cần khai báo</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;script&gt;\n     export default {\n       layout: &#39;LayoutName&#39;\n     }\n&lt;/script&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Còn trong trường hợp bạn không khai báo layout thì Nuxt.js sẽ tự sử dụng layout mặc định tại  <code class=\"language-text\">layouts/default.vue</code>.</p>\n<p>Hãy nhớ sử dụng component  <code class=\"language-text\">&lt;nuxt/&gt;</code>  trong layout để có thể load được nội dung của page nhé!</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nuxt</span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p><strong>Pages</strong>: được đặt trong thư mục  <code class=\"language-text\">pages</code>, Nuxt.js sẽ đọc tất cả các file .vue và dựa theo cấu trúc thư mục này để sinh ra các route tương ứng với các trang của bạn. Và ở trong page, Nuxt.js cung cấp thêm một số attributes và functions đặc biệt để hỗ trợ cho công việc phát triển. Điển hình như:</p>\n<ul>\n<li><a href=\"https://nuxtjs.org/api/pages-head\">head</a>: chỉ định các <meta> tags cho page để hỗ trợ cho việc SEO.</li>\n<li><a href=\"https://nuxtjs.org/guide/async-data\">asyncData</a>: xử lý bất đồng bộ để nhận dữ liệu sử dụng cho page.</li>\n<li><a href=\"https://nuxtjs.org/api/pages-fetch\">fetch</a>: tương tự với asyncData, trừ việc nó sẽ không set component data.</li>\n<li><a href=\"https://nuxtjs.org/api/pages-validate#the-validate-method\">validate</a>: validate tham số được truyền vào trong dynamic route đã nói ở phần trên.</li>\n<li><a href=\"https://nuxtjs.org/guide/routing#middleware\">middleware</a>: khai báo middleware để giới hạn xem user/guest có thể xem được trang. Và nó sẽ được gọi trước khi trang được render ra.</li>\n</ul>\n</li>\n<li><strong>Error Page</strong>: Ngoài các page hiển thị thông thường, Error Page khi có lỗi (404, 500) xảy ra cũng là một phần cần chú ý để tạo ra dấu ấn riêng cho trang web của bạn.</li>\n</ul>\n</li>\n<li><strong>Vuex Store</strong>: Phần này mình hẹn các bạn sẽ viết trong bài sắp tới vì không thể nói hết trong 1,2 dòng được.</li>\n<li>\n<p><strong>Một số câu lệnh thường dùng</strong>:</p>\n<p>Command</p>\n<p>Description</p>\n<p><code class=\"language-text\">nuxt dev</code></p>\n<p>start project kèm theo hot-reloading</p>\n<p><code class=\"language-text\">nuxt build</code></p>\n<p>build project với webpack và minify các file JS, CSS</p>\n<p><code class=\"language-text\">nuxt export</code></p>\n<p>sinh ra file HTML từ các route (sử dụng cho static hosting cho các phiên bản Nuxt >= 2.13)</p>\n<p><code class=\"language-text\">nuxt generate</code></p>\n<p>build project và sinh ra file HTML từ các route (sử dụng cho static hosting phiên bản Nuxt >= 2.13)</p>\n</li>\n</ul>\n<h1>Tổng kết</h1>\n<ul>\n<li>Sau khi đọc xong bài viết này, hi vọng rằng các bạn đã có thể nắm được một số nội dung cơ bản khi bắt đầu tìm hiểu về nuxtjs, nếu muốn tìm hiểu sâu hơn thì các bạn có thể tham khảo thêm tại trang chủ <a href=\"https://nuxtjs.org/\">https://nuxtjs.org/</a>  hoặc đón đọc những bài viết tiếp theo của mình về chủ đề này nhé.</li>\n<li>Cảm ơn các bạn đã dành thời gian đọc bài viết, nếu thấy nội dung bài viết hay và hữu ích, hãy  <strong>share</strong>  bài viết cho bạn bè cùng đọc nhé, còn nếu có vấn đề gì chưa ổn (kiến thức, cách diễn đạt, ...) thì hãy  <strong>comment</strong>  góp ý xuống phía dưới để mình có thể cải thiện và viết được những bài viết chất lượng hơn nhé.</li>\n</ul>\n<h1>Tài liệu tham khảo</h1>\n<ul>\n<li>Homepage:  <a href=\"https://nuxtjs.org/\">https://nuxtjs.org/</a></li>\n<li>Github:  <a href=\"https://github.com/nuxt/nuxt.js\">https://github.com/nuxt/nuxt.js</a></li>\n</ul>","id":"ded34ccd-b6c3-571c-968c-013e4fe1bd9c","frontmatter":{"title":"Tìm hiểu về nuxtjs","date":"24-08-2020","tags":["Vuejs","Nuxtjs","Javascript"]},"fields":{"slug":"/tim-hieu-ve-nuxtjs/"}}},{"node":{"excerpt":"Ngày nay, hầu như mọi tính năng trên website đều có thể dùng javascript để thực hiện \nTuy nhiên có bao giờ bạn tự hỏi liệu HTML có làm được những thứ đó không? :)) \nLet's go ! \nNhững thứ hay ho mà bạn…","html":"<p>Ngày nay, hầu như mọi tính năng trên website đều có thể dùng javascript để thực hiện <br/>\nTuy nhiên có bao giờ bạn tự hỏi liệu HTML có làm được những thứ đó không? :)) <br/>\nLet's go ! <br/>\nNhững thứ hay ho mà bạn có thể thực hiện chỉ với HTML</p>\n<h3>1. Bộ chọn màu đơn giản</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#e0ffee<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>colorPicker<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Kết quả:\n<br/>\n<input type=\"color\" value=\"#e0ffee\" id=\"colorPicker\"></li>\n</ul>\n<h3>2. Menu thả xuống và có thể tìm kiếm bằng văn bản</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/action_page.php<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>get<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>browser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Choose your browser from the list:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">list</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>browsers<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>browser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>browser<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>datalist</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>browsers<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Edge<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Firefox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Chrome<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Opera<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Safari<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>datalist</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:\n<br/></p>\n<form action=\"/action_page.php\" method=\"get\">\n<label for=\"browser\">Choose your browser from the list:</label>\n<input list=\"browsers\" name=\"browser\" id=\"browser\">\n<datalist id=\"browsers\">\n<option value=\"Edge\">\n<option value=\"Firefox\">\n<option value=\"Chrome\">\n<option value=\"Opera\">\n<option value=\"Safari\">\n</datalist>\n<input type=\"submit\">\n</form>\n</li>\n</ul>\n<h3>3. Tạo hộp thoại</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dialog</span> <span class=\"token attr-name\">open</span><span class=\"token punctuation\">></span></span>This is an open dialog window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dialog</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:\n<br/></p>\n<dialog open>This is an open dialog window</dialog>\n<br/>\n<br/>\n</li>\n</ul>\n<h3>4. Thanh progress đơn giản</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>progress</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>69<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">max</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> 69% <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>progress</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Kết quả:\n<br/>\n<progress id=\"file\" value=\"69\" max=\"100\"> 69% </progress></li>\n</ul>\n<h3>5. Widget tương tác mà người dùng có thể mở và đóng</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Epcot Center<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Epcot is a theme park at Walt Disney World Resort featuring exciting attractions, international pavilions, award-winning fireworks and seasonal special events.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:\n<br/></p>\n<details>\n<summary>Epcot Center</summary>\n<p>Epcot is a theme park at Walt Disney World Resort featuring exciting attractions, international pavilions, award-winning fireworks and seasonal special events.</p>\n</details>\n</li>\n</ul>\n<h3>6. Tô sáng đoạn văn bản</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Do not forget to buy <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mark</span><span class=\"token punctuation\">></span></span>milk<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mark</span><span class=\"token punctuation\">></span></span> today.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:</p>\n<p>Do not forget to <mark>buy milk today.</mark></p>\n</li>\n</ul>\n<h3>7. Hiển thị văn bản bị xoá</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>My favorite color is <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>del</span><span class=\"token punctuation\">></span></span>blue<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>del</span><span class=\"token punctuation\">></span></span>!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:</p>\n<p>My favorite color is <del>blue</del>!</p>\n</li>\n</ul>\n<h3>8. Hiển thị văn bản được chèn vào</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>My favorite color is <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>del</span><span class=\"token punctuation\">></span></span>blue<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>del</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ins</span><span class=\"token punctuation\">></span></span>red<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ins</span><span class=\"token punctuation\">></span></span>!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:</p>\n<p>My favorite color is <del>blue</del> <ins>red</ins>!</p>\n</li>\n</ul>\n<h3>9. Tạo liên kết số điện thoại</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>tel:+841234567890<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>+8412345678902<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Kết quả:\n<a href=\"tel:+841234567890\">+8412345678902</a></li>\n</ul>\n<h3>10. Chỉnh sửa nội dung của trang</h3>\n<ul>\n<li>\n<p>Code:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">contenteditable</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>This is a paragraph. It is editable. Try to change this text.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Kết quả:</p>\n<p contenteditable=\"true\">This is a paragraph. It is editable. Try to change this text.</p>\n</li>\n</ul>\n<p>Đây là một số tính năng mà mình thấy khá hữu dụng.\nTuy nhiên, các bạn lưu ý một số trình duyệt version cũ có thể không hỗ trợ.\nCác bạn có thể kiểm tra trình duyệt hỗ trợ trên <a href=\"https://developer.mozilla.org/\" target=\"_blank\">mdn</a> hoặc <a href=\"https://www.w3schools.com/\" target=\"_blank\">w3chool</a> nhé ! <br />\nCảm ơn các bạn đã kiên trì scroll đến đây. Hãy comment cho mình biết bạn là ai nhé :))</p>\n<p><strong>- From ĐMH -</strong></p>","id":"5b062b7c-6c84-588e-9669-20f673c3474f","frontmatter":{"title":"Những thứ hay ho mà bạn có thể thực hiện chỉ với HTML.","date":"23-08-2020","tags":["html"]},"fields":{"slug":"/nhung-thu-hay-ho-ma-ban-co-the-thuc-hien-chi-voi-html/"}}},{"node":{"excerpt":"Graph Facebook API là gì? Ngày nay các  đang đóng một vai trò quan trọng trong việc thu thập thông tin về một cá nhân hoặc một tổ chức hoặc hầu hết mọi thứ. Trong bài viết này mình xin giới thiệu một…","html":"<p><strong><em>Graph Facebook API là gì?</em></strong></p>\n<p>Ngày nay các <code class=\"language-text\">social API</code> đang đóng một vai trò quan trọng trong việc thu thập thông tin về một cá nhân hoặc một tổ chức hoặc hầu hết mọi thứ. Trong bài viết này mình xin giới thiệu một social API để có thể làm được các việc đấy, đó là <code class=\"language-text\">Graph Facebook API</code>.\n<code class=\"language-text\">Graph API</code> ở đây được Facebook coi là như là một \"đồ thị xã hội\"(Social Graph).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3312f428ce1b12d01e4931570775045d/d0cc0/images-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACOUlEQVQozz1STW/TQBD1b+EfcObIHYmKa08cEOf2CkLiT5RDQUhAVQSoiCBBJUTUcKhK2vIR2tLSkoY4CXHi2I6znzO7vI0rrJU8O/tm3sybiThNbfsP9/o0HFPcc6Oxmmpb6jjJznpj771VVuUKhneeDLFl0sTMcESsjJ0Kmgo7k04pk89kIfBw89byjYXFEEIBTcDjIFIRm2DMgy079kYRWUeGXUhv8bC922p8asKQuYSfFcFAvC41QnDMzERqqlCMzKSRBoaVVkyEJ4B9ph0+UMVpcRyPSISkVdk4CIyqO5OrDKADO7uvnXy10UkKCf/Kx3f3Np5pgx5YC61KHcCGI1UqI4yzblIKPe8k9MnOapLkx7la2+ltHnR/J2mV3Tv/X7xIpMIbTgu59HKh9v2NIf8jztKZEdJu1L/sn42b50UmtPMzCD0cF7UPW6OsRLiRNoIGsCD+i70nB/2fo9Kvf+62U/N2+/D2lUurj57itV8c104eZnJwdNpbvnO3ddLx7KejMqrU80HlUIyzhLZxPR8Wj9fWt3Za7YmJU+Hm1bLzSWGsYY1dADN+QT0oLbVjFrnEYEtNDxrd1t+wG/Wj0fPdQZLkWT+p8tJccOgSVQqBHCWAGRpiH1qncZyWYUEspgKV/aul+yuXrxZBcIdOMWTgL4KDesBZQvEHv7qL16+9fl+HG4msDuNt7x+2NhvQR6SzAIZIxBHYLyZMgQdjw442974Nhuk8ZxgbSCoYuoMR9gQ03v8Dg8LX8i07RmoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-1.png\"\n        title=\"images-1.png\"\n        src=\"/static/3312f428ce1b12d01e4931570775045d/8c557/images-1.png\"\n        srcset=\"/static/3312f428ce1b12d01e4931570775045d/4edbd/images-1.png 175w,\n/static/3312f428ce1b12d01e4931570775045d/13ae7/images-1.png 350w,\n/static/3312f428ce1b12d01e4931570775045d/8c557/images-1.png 700w,\n/static/3312f428ce1b12d01e4931570775045d/d0cc0/images-1.png 732w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Facebook coi các mối quan hệ giữa các thực thể như là một \"đồ thị xã hội\"(Social Graph).</p>\n<p>Graph Facebook API là cách chủ yếu để tải dữ liệu vào và lấy dữ liệu ra từ đồ thị xã hội của Facebook. Đó là một HTTP API cấp thấp mà bạn có thể sử dụng để truy vấn dữ liệu, post status, tải lên hình ảnh và một loạt các nhiệm vụ khác.</p>\n<p><strong><em>Hướng dẫn đăng ký Graph Facebook API</em></strong></p>\n<p>Để có thể lấy được dữ liệu người dùng của Facebook hay Instagram, thì điều đầu tiên chúng ta bắt buộc phải đăng ký app của <code class=\"language-text\">Graph Facebook</code>.</p>\n<ol>\n<li>Truy cập trang <a href=\"https://developers.facebook.com/\">Facebook Develop</a>. Giao diện của trang <strong>develop</strong> sẽ trông như hình bên dưới.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/29114/images-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAC30lEQVQoz52P+UvTARjGv9FBWXTYqRalqYkZE9LMdFNb1KZr3y3LmS5XaXO6pV2WM4+sLF1pN1hULPrBDjqJCpTOBUFBf0AGQUUE7tDU5lI/fSWKfu6Bh/d4eJ/3fYXmlhM0ORzU1lSzx2amvCgPqykb6yY9hYYs8sRV6FUKlPJkigxKmu0iRyr0VJjknNq/lu3GDLTJMSjjw0ldEoXw9u0bnj1/Qseje9y/cppr5+q43LSTc/VWjtu3UlWag61gLQXZq3Ee1POx3cK7OxZu1qVyvSaJLQmTMcRPQjZVIHbmeASXy0VHRzsP79/itvMMFxyVNNmLqd+1mb0ludhMOgpz1GwUlTjt6by+rOVxy0oaN4RTkjKDwuTpKBeMY3noaGQhkxBevXqJy/WC9od3edB2nrbzjThqrNi3G9lpNmAxipgkw9rCDBy6cK7uS8amX0yBKo5tmTGIi6egjZqAKmIcZkUYwpnTzbx4/pR7N65wsaWKttYGjtkt7C5ax46tInZzFidtcuo1YeTFBGE1qtBo5KhXL2VNumSqjmSXMoQD4gKqNQsRysosOC+10uY8S2tDBUWqFBLnTcOwIpZDm1dRl59ClS6RvMQIcpfNxb4xgcp10exRzadUMUsymk9x6mxUkRPJjA1G2Fe5m/LyEhpryjhoyUWfsRxRMstPS0C3NJYsWRQmdSpmrYJNikVkRgWhkaiOGEtKyCjkYWNYEjyKuGkC8SFBCAfqq2k4epjSYhOGLAU2qxljjpY0WTT5ajm10vu2MiPrs1ei06axXpfOBlUS2nQZojKRpEVhRIcGEzFnKnHhoQh9fb34/X6+9/by6fMXOjvf86GzE7e7i0DAz0BggO5uH16vF5/vN7t7uun/0SexH4/Xh8fjpcvtwS1FgX8wEAjwc3CQwcEhhof5LwjD0uQfunv68X7/8VuRar+04Jt0zciSEX1oaAhPbw9ffV0M/Az87f2ZH8l/AcpfOHIfxUnBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-2.png\"\n        title=\"images-2.png\"\n        src=\"/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/8c557/images-2.png\"\n        srcset=\"/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/4edbd/images-2.png 175w,\n/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/13ae7/images-2.png 350w,\n/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/8c557/images-2.png 700w,\n/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/e996b/images-2.png 1050w,\n/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/2cefc/images-2.png 1400w,\n/static/0a5cc28a2ddc27c4ae9fecb96dc2baa6/29114/images-2.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>  <strong>Lưu ý</strong>: Các bạn phải tiến hành đăng nhập bằng tài khoản Facebook của mình thì mới có thể tiến hành đăng ký app được.</p>\n<ol start=\"2\">\n<li>Tiến hành nhấn vào <strong>My Apps</strong> -> <strong>Add a new app</strong>.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2bc0b5f3d8de12d1ba221f8e8de29c92/7ebf9/images-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACzUlEQVQoz52Q2U9TURCH7xMGN6oQQCkIlMUFS8piaQmKLShIqEJREGjFAtpy2cqmAloMtIVordGgEFQWExOjD74ZH/xzCJoIipRSyvJ5S9T47CTfOXPmzG8mM4Kt2YLZWIpBX4BWq0WRdgxNwVkKdcVkqfNJz8wkL1dJSmI88ng5iuQkCvNUiA1XsFiaMNWZqNYXYshSUqzOQejvaWW4v5uhW12MulxcNVvI1WhosTaSkpJAXJyMqrMZiIZTHI6O4GBkBEpFLKM9FjyPvLSLbQyKLbSZG6irqUe43dPO9PRrJiZf8OrVHI47ndjNOlxdlQyIlbjtFXj7THhsl8hJjUEm20tkxG706gxMFSUoVdl4nj5n4uUsDx+4Ee7etvPh/Ttmxj1MeIaZ9Q4w5Wii+5oBe8sNHL1tdJmMDNaew2o4TXJCLLL94SRE78OoU2G92czjJ89oE0U0OScROsUmJr0uBhpKsZXlYiwrolhXQENtPeNPp3A6x7hQdIYOadcet4vLhlLkMQeQ7Q0j+0QyxYVajqUryJP2l5+vRWiSutdcMXLieDoalZJKoxF5UjK15mtMvZjhpthBs9XGmOcxw0P3sF03kZWRhmxPGElxUZxSphF7KIbYmChSFUcQ6qou0CqNJt5oRn9azdiom56+O7hdbjqkMcpLdAw7nVJ8jP6+XqorylGrjnNw3y6OJsVhOp9JVmI4ikN7SJRHI1gba3GP3OPN6zlqqsq5P+Tg46fPzL15y8z0LF6HHWd3I/2dVlwjI1yuLJea6FGdTEenUfGor5rBeiWtF9MwlykRVn0+/H4/oXt+fp6FhQWWlpYIBAIENzYIrAfx/ZDe/tWdmE/KC7GysrJDYM3Pmt/H2mrI9yHw27YlQuJ1iZBwY3OT/zFhe3ubENLBt2U/31fW/n4GgkG+/lxmUyoeytna2mLRt8yXH4usbwT5o/2XX1t+LOebRxTCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-3.png\"\n        title=\"images-3.png\"\n        src=\"/static/2bc0b5f3d8de12d1ba221f8e8de29c92/8c557/images-3.png\"\n        srcset=\"/static/2bc0b5f3d8de12d1ba221f8e8de29c92/4edbd/images-3.png 175w,\n/static/2bc0b5f3d8de12d1ba221f8e8de29c92/13ae7/images-3.png 350w,\n/static/2bc0b5f3d8de12d1ba221f8e8de29c92/8c557/images-3.png 700w,\n/static/2bc0b5f3d8de12d1ba221f8e8de29c92/e996b/images-3.png 1050w,\n/static/2bc0b5f3d8de12d1ba221f8e8de29c92/2cefc/images-3.png 1400w,\n/static/2bc0b5f3d8de12d1ba221f8e8de29c92/7ebf9/images-3.png 1919w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ce8324f42712c75a697672b0035553e/85e74/images-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACBklEQVQoz32Sy27TQBSG/UYUAYIIkChqJboCFqjAS7BhBSpIgQVrHoAH4QG4NISkSUmghcRuk/g2N4/H41Si+jmexKQCxOLX+Jw555tzsbd19wFu3d5e6M42GutbWLuyjrXGQucu38D5xk1cvLZB2sSl65u4cHUDjx7v4Nmr13j6/AWazZd4stPEvfsP4bW6Q7T2htjtDvC+3ce79j4+kv2hM8AuqfvlEJ/7B2j3vlHMEJ/2vqI3/I4fwRTH0xjjoxD+JMaIzhbFe0LmEFJDKAMepRDjAGzsQ84icKHRH4zgUzJjHKc/T1HFd3oHmExDTCnGlnMwniFOJTFyeGHMUSuOGY4peTg4RBQx5+tQdUeTGcGVS44STpXvO1vrHPP5CVKufjO8KJGOHiWCZBAmGjN3SXbKoa2Gzg2MLSEz6kIplCcWRVGinM9hCouELfIrjhenYmlkkGJArY3ARE6Qgs6MggW1pNw3p9GkTLkWOdlsqbqgM0BOiRZavoFgbxFGGsZo5MZiFvFl9f9XBXPAlUMgURyZNq4NSy1Wy6paX43kT/3t92pyNYdUcpqTdtCM5sZl5vyrGPXP77PyTFHQgAtqsUBOkNxUFVY+67aY0QOFte5eqczdVXJ+iqntWl5Z0rZIFVRIBUlbNAS1ZKdpiiAI6KGcYAq+PyZQRg9p+sVil1Pn1/oFOIcU+UQAaOUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-4.png\"\n        title=\"images-4.png\"\n        src=\"/static/6ce8324f42712c75a697672b0035553e/8c557/images-4.png\"\n        srcset=\"/static/6ce8324f42712c75a697672b0035553e/4edbd/images-4.png 175w,\n/static/6ce8324f42712c75a697672b0035553e/13ae7/images-4.png 350w,\n/static/6ce8324f42712c75a697672b0035553e/8c557/images-4.png 700w,\n/static/6ce8324f42712c75a697672b0035553e/e996b/images-4.png 1050w,\n/static/6ce8324f42712c75a697672b0035553e/2cefc/images-4.png 1400w,\n/static/6ce8324f42712c75a697672b0035553e/85e74/images-4.png 1436w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"3\">\n<li>Sau đấy ta tiến hành chọn ô <strong>Manage Business Integrations</strong>.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9037a0e8a80136b0e64713d3f64befa5/73a2e/images-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACOklEQVQoz1WR228SURDG+V9s1MYmtr5gYl/q5dUHE69pTHwy8dmUXqxaW3a57J69AAtogq9qUjGx9E/RQEVrd5ddoDSgIAE0n3MONz3Jl28mJ/M7M3MCFxcvI3hpCcHFJfB4biGImdnzOHV2qpnZeZw+tyB0Zu4C+Tyu37iL2w8e4eadZSzfW8Yt8itXryGwsr6J0PpTcH8c2hBaoXx14xnWnjxHiJzfCyetjvKt7TAkOYLtcAQ7UlR4aG0TAU03MZUBVdWQzmTx5eAA5VIJnuPC93xUKxX4JM9x0Dg+xpu377ATlpBKWWCaAYXqOCMQVxjGUlSGsByFGmfwCWaTKuUyqt8d9JpNoNPB73Yb+NVBYXcX0bgCy7KgMn3CIKAm6EOgCTnKkKZXa6UifIK5xSLsz59Q//YVP6jDpuvgD3W4n89D1XUkU0kCjus1BHhXw0SHrr1ALLaFl69y+NlqwaNi9+gIrm3DPjxE6+QEjXodg14Pe4V9yJGoGHPa0ASoQmEpmPp9xGMPkcm8punaaBCgWquh2+2iPxig1+9jQM7Px70C7VCejMthAjjdn0YjMKiahlwuB9/34XkebNuBQx/hui4qNHKdOmzTHt/nPyAsRf7bn9jhmCykMRpBh2GayGSzsNIZpKwM7SktlLLSSCQtIf6z/3Y26dA0ExjKhGGYwnluGAY0TQejhfNY13nMyCke5WZiXDtVIJlMgitBl4wAHMKhImcqZFkePWZAkqQhiHJFUYSP68f6C+9UafgrW9woAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-5.png\"\n        title=\"images-5.png\"\n        src=\"/static/9037a0e8a80136b0e64713d3f64befa5/8c557/images-5.png\"\n        srcset=\"/static/9037a0e8a80136b0e64713d3f64befa5/4edbd/images-5.png 175w,\n/static/9037a0e8a80136b0e64713d3f64befa5/13ae7/images-5.png 350w,\n/static/9037a0e8a80136b0e64713d3f64befa5/8c557/images-5.png 700w,\n/static/9037a0e8a80136b0e64713d3f64befa5/e996b/images-5.png 1050w,\n/static/9037a0e8a80136b0e64713d3f64befa5/2cefc/images-5.png 1400w,\n/static/9037a0e8a80136b0e64713d3f64befa5/73a2e/images-5.png 1439w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"4\">\n<li>Điền vào thông tin như hình bên dưới sau đó nhấn <strong>Create App ID</strong> thôi nào.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ebac87739aa206e1ef927f5f9e455a53/a6ec4/images-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACSklEQVQoz3WSS08TYRSG54eoeI942biBRDZ4Wbhwp4YYEmPcuTIhihK5mFLaubQz7bQ1xi1bSFFD6IUKErfGLYqJeKMEKKUXkLbyeGZgsC78kjfnnMmcJ+93zqe0d1yk7UInbR2dOPm58+0cOXmWluOnOXSslQNHTnHwaKtbOzp84gwt8v3qtet03bnHja5uum91c1PipctXUB729dPbN4ATHzx6wv2eXiz7GWPJl0y8niQ9PUMqkyOV3ZPkmdwsY+NJfMN+hkdUVz5/kN7H/SimFcWTFbEJBDVmZmZp1Guws8P/zuLiIsMCjMcThM0IRsh0GYpuhHGkiUJhk6c+P8mJV6ytrVEoFCiXy1QqFarVqisnr9XrzM/Po+sGiURC+iw8jgBNl667QFusq6RSaYrFdZaXl9nY2KDRaOyrVqu5DhcWFsSRRSwed404/Q5HMULhvcIiYvkIBPrJZN8IsEg+n3cdenIc1sXdLvAzQVUXaGTfUBMwhBGOY0duExi5Szo7R0WaC3LtcqlESVSplNna3GRT5JxPAvTLMpphLtC7u1OEIyaarovDaVZW1/n6/SfffiyxlF9htVCkWKpSrjjA33yUGY4E1H/m587QI3vAoKoy+3ZOWuDXdp3tusyuadlbDXi/BO8+fEGVfw0BNjOUaNRmV1E3mqbF6Ogo2WxWljNFamqKTEbydFZimuRkjp5YjtCLcWLRCH/7d6XEYjEc2bYt78l0N2dKNAxDFhRgaGhInoeOpmkMDA6iayrPoxohLeACvH5PfwAT5ols3QPL8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-6.png\"\n        title=\"images-6.png\"\n        src=\"/static/ebac87739aa206e1ef927f5f9e455a53/8c557/images-6.png\"\n        srcset=\"/static/ebac87739aa206e1ef927f5f9e455a53/4edbd/images-6.png 175w,\n/static/ebac87739aa206e1ef927f5f9e455a53/13ae7/images-6.png 350w,\n/static/ebac87739aa206e1ef927f5f9e455a53/8c557/images-6.png 700w,\n/static/ebac87739aa206e1ef927f5f9e455a53/e996b/images-6.png 1050w,\n/static/ebac87739aa206e1ef927f5f9e455a53/2cefc/images-6.png 1400w,\n/static/ebac87739aa206e1ef927f5f9e455a53/a6ec4/images-6.png 1438w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Với vài bước đơn giản, chúng ta đã đăng ký xong và giao diện <strong>app</strong> sẽ như hình bên dưới.</p>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/db37d2f33c7959befcbd43a92867fa69/29114/images-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABl0lEQVQoz41S22oUQRDdL0yE6IqiLgkRRVC/wZeIEEXwIW/5uriXyfTM9vT0dPfcTk7VuGZJMGbgUH2pOnPqVM8Wbz/i+N1nzF+d4ujlieJw/gYHzwSvNR7OF3r25PkCRy+ONecp8eXsHN8vLvHj5y98/XaO9x8+YRZTC+cDsryEKSvkhYUhiu20ts6jbiJq5mjcWw8jMBIhkoP7vNhiNg4D6rrBapMjuy6mmFmNxhRwzimqqoK1lrk1YoiIMfLM4WqVYbm+VmxYP+v7Ho6Ey3XOA4N1ZvCbSVfLNXKzJUr9s9lDUdoJ7EJIpEaghONIhX5SuLsstxYlC0SBKHKEtZUqln3taUPt4Vl3jxD8XH1LuMmIXEhXCCHRp0FS0LGTvh/QdT1iSvRuRGq7v0T/JJSLggq9txA7pFD8SiSRrwlBO5BzuX8UYcn2YkwkaSGvwDdBByfTlXXDoUis+AIep5D+tW2rre2Uic8yydXGaK7iD8mDhBKluOdzEo9S6jDwwYmifYK7RP8hDKpq8omDIJRwN7gHCG8AK1wojjXdUMYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-7.png\"\n        title=\"images-7.png\"\n        src=\"/static/db37d2f33c7959befcbd43a92867fa69/8c557/images-7.png\"\n        srcset=\"/static/db37d2f33c7959befcbd43a92867fa69/4edbd/images-7.png 175w,\n/static/db37d2f33c7959befcbd43a92867fa69/13ae7/images-7.png 350w,\n/static/db37d2f33c7959befcbd43a92867fa69/8c557/images-7.png 700w,\n/static/db37d2f33c7959befcbd43a92867fa69/e996b/images-7.png 1050w,\n/static/db37d2f33c7959befcbd43a92867fa69/2cefc/images-7.png 1400w,\n/static/db37d2f33c7959befcbd43a92867fa69/29114/images-7.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p><strong><em>Hướng dẫn đăng ký Facebook Page</em></strong></p>\n<p>Sau khi đã đăng ký thành công <strong>Graph Facebook API</strong> app. Chúng ta sẽ tiến hành tạo một trang <strong>App Page</strong> để có thể liên kết với <strong>Instagram account</strong> của các bạn. Khi đã liên kết được rồi thì chúng ta mới có thể có mã truy cập nhờ đó mới có thể thực hiện các câu truy vấn API.</p>\n<p><strong>Lưu ý</strong>: Để truy cập được thì bắt buộc chúng ta phải có vai trò trên trang Page Facebook nhé :D</p>\n<p>Bây giờ chúng ta sẽ bắt đầu đăng ký Page Facebook nào.<br></p>\n<ol>\n<li>Trên giao diện <code class=\"language-text\">Dasboard</code> của Facebook App. Chúng ta tiến hành Chọn <code class=\"language-text\">Settings</code> -> <code class=\"language-text\">Advanced</code>. Sau đó kéo chuột xuống mục <code class=\"language-text\">App Page</code> và chọn <code class=\"language-text\">Create New Page</code>.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b13ede1eb1a3859b930094f7eab7dbae/8963a/images-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABp0lEQVQoz32S2UrDQBSG+4YuuNSNVqsIioLP4IWIUETwwjufx2vfwKVJs2cmmWRm0t9z0pg2uAR+TiaT+fj/c6Y3PL3E6OwK/cEpNvePsXVwgvXdI6xsDbCyPcAqaa0/pDrE+s4hNvZGra5vxrh/esb9wyNu78Y4v7hCrzQWIsvh+iGCKIUXxkhEBpkpREkKmStoW0Gbqq6mka1m4GdGJS80MRR8OtvTn28Q72+YTAO4XgCHapIKFEUBYwzJNtW0a2st7ZeI4gQfEw+fzlyuF6JXxBESP8DEnQMZzD/qsmxgdJjeGcDSS/BcFTWETTi1IQKycUGxJq7fboaOA+FNYUVC0SpUjfjdclxyyOui1C1oAaQNIfMu0PMhwgA6z8mRhdamcbaIz1BFjn8AubFCZh1glIj6W0bOJQ0sy6mf1tbuJH0XQtbA8jeHc2DXYRSnyAjEB5aHYb7dksz/DhdAHkpKDjKKq5SiazFre8j6XnOd9zCEuzyU3xyGUYKYYkvJ0IKmqbqV76YuUVndmfL0LyD3j+8hR1u4m7WVb3MQS7y8OpQo7ET+At43LojF5xxqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-8.png\"\n        title=\"images-8.png\"\n        src=\"/static/b13ede1eb1a3859b930094f7eab7dbae/8c557/images-8.png\"\n        srcset=\"/static/b13ede1eb1a3859b930094f7eab7dbae/4edbd/images-8.png 175w,\n/static/b13ede1eb1a3859b930094f7eab7dbae/13ae7/images-8.png 350w,\n/static/b13ede1eb1a3859b930094f7eab7dbae/8c557/images-8.png 700w,\n/static/b13ede1eb1a3859b930094f7eab7dbae/e996b/images-8.png 1050w,\n/static/b13ede1eb1a3859b930094f7eab7dbae/2cefc/images-8.png 1400w,\n/static/b13ede1eb1a3859b930094f7eab7dbae/8963a/images-8.png 1918w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"2\">\n<li>Sau khi chọn <code class=\"language-text\">Create New Page</code>, chúng ta sẽ được chuyển đến trang để đăng ký <code class=\"language-text\">Page Facebook</code>. Sau đó, chúng ta chọn <code class=\"language-text\">Get Started</code> tại mục <code class=\"language-text\">Business or Brand</code>.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0ac89879a308a2e19cf3f9a32ee95e5/29114/images-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABkElEQVQoz6VRy0rDQBTtL7oRtVKFYhe+FrpwaZGCpVQFXfjAD/APdF9EcKFCwY2KbWmT5p1MJkmTJj3eTK1WpKI4cDjnDvcc7p3JZFf2MLdcxXShTFzBVvEIxfIxdipnKFXPSZ8it1rBbKFEPbuYXiphJl/E1MI2sqsHmN88QW5tH4vr+8hvHCIjaRwpZN0jcLy2JDTbMhjzYDkcuumiJZloSgbaXQedriXqka+jMHRUYtUVdUbRdAioQ3Y5J/h47BqQTQfc5XAYQ+D70GwHDdUSmrmu8KiaQdDfYSDTVQ2MIz2KrqFezuO5dokB1XEUok9ce7jBbf0KQQJEYQhZ+epVNHMYmIrR5YASLKagfX0B6fUe5CVzJILvXhp4kjqip9cLP0JG/m+BKYdRhCAIxLoWrdqnOr0Lez2YpkU9Bnzfo55fBsZxLNaO+7QkjTIgRKmmkyQJ1YnQv57QZpwe3KPftekzhtp2XDDuwbQcAZe0ZbPJgeOhsqILjOv08QWnd+qnHg+aOOFf8OPK/8Uo5w3cJyHmYzATEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-9.png\"\n        title=\"images-9.png\"\n        src=\"/static/d0ac89879a308a2e19cf3f9a32ee95e5/8c557/images-9.png\"\n        srcset=\"/static/d0ac89879a308a2e19cf3f9a32ee95e5/4edbd/images-9.png 175w,\n/static/d0ac89879a308a2e19cf3f9a32ee95e5/13ae7/images-9.png 350w,\n/static/d0ac89879a308a2e19cf3f9a32ee95e5/8c557/images-9.png 700w,\n/static/d0ac89879a308a2e19cf3f9a32ee95e5/e996b/images-9.png 1050w,\n/static/d0ac89879a308a2e19cf3f9a32ee95e5/2cefc/images-9.png 1400w,\n/static/d0ac89879a308a2e19cf3f9a32ee95e5/29114/images-9.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"3\">\n<li>Chúng ta điền thông tin như hình bên dưới sau đó nhấn <code class=\"language-text\">Continue</code> thôi.</li>\n</ol>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/651ccd4872f5e1a1880b5a1b57e943fc/7ebf9/images-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABvUlEQVQoz6WR3WvUQBTF9z9UQdGlWlAq1KIPCr7ZohaW0lLRlyL9U3wVn0TwQfFBbbtt8zEzmdndZJNs9uvnnexuqVpUMHByT+bOPTkzp9G8t8ON1W2urrRorm7xeOMVG609nm3vs7mzz3rrNUtrW1xfec61uy2u3H7KpVtPuLy8TnPtBUuP9rh5f5flB7vcefiSRmj6eERJLuhz1A44OQlxtoe1XZKky3HoaAtO4x6nUYejwBLN50KdEkgN9Oy7oU2Ch/JVafTBd+J2m1QpssSQxhGp0ZRlie70aJuu8II0y1Daz1oWGp43Ym3xiLTDyIb46JA0L1g8k9GIcdZjKPztx3e8//SGwRSqqiJSs9kFlHE0/Ev5BTMTtEFAUQ5gOmU8mVAVBaO0x0QEP3w94FsY+BbloDoT8bhQUKuEvomxztWiuaDMc4ZZykAcOdeRIUshP/H9vwom2vD5S4RyBdPhgEpcjIu8dlgfXxxPvT3+1aEc+fgwwsbiNEkklIRUK7py4Zncq5NQPLK+8G76B8HzorZT11BC8kFFZl7lOmbh2ZpHc4H4l/qTQ7VIq27Occbdb7jQ4fnF/8FC5wdKgiHqddhT0AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-10.png\"\n        title=\"images-10.png\"\n        src=\"/static/651ccd4872f5e1a1880b5a1b57e943fc/8c557/images-10.png\"\n        srcset=\"/static/651ccd4872f5e1a1880b5a1b57e943fc/4edbd/images-10.png 175w,\n/static/651ccd4872f5e1a1880b5a1b57e943fc/13ae7/images-10.png 350w,\n/static/651ccd4872f5e1a1880b5a1b57e943fc/8c557/images-10.png 700w,\n/static/651ccd4872f5e1a1880b5a1b57e943fc/e996b/images-10.png 1050w,\n/static/651ccd4872f5e1a1880b5a1b57e943fc/2cefc/images-10.png 1400w,\n/static/651ccd4872f5e1a1880b5a1b57e943fc/7ebf9/images-10.png 1919w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<ol start=\"4\">\n<li>Sau đấy màn hình cài đặt <code class=\"language-text\">Page</code> hiện ra và chúng ta chỉ việc làm theo hướng dẫn thôi. Ở đây mình sẽ <code class=\"language-text\">Skip</code> nó và cập nhật sau.</li>\n</ol>\n<p>Sau khi hoàn tất các bước trên chúng ta đã tạo thành công một trang Facebook.</p>\n<p>  <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e40924628a4d012c2e09dbe30a3bf2e1/29114/images-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACEElEQVQoz5WR2U8TURSH+1eqsWCULdDiEiGAoBhUbGQRNQYBq6aS4hYJMT74YnzXuGBMEBoMa9tZOu3MlJnpDPTzzpVGauDBk/xyzzk3vy/nnhuJxsc4GRvlWFuCaGyEnqEpriZmuDH6R4M3J2mIJWhoHyYaH+FE2zANrUMcbx4i2jlBY9cDTp0d5/S527RcvEukYPoULB/DCtDNAM/4gWtkSD5+TjL1kmev3zGTWiA5+4ZH6bfMPJlnOvmKF/Pvkd6SJ3wVqbCO5FUNRSiv6Giaivuth9znCZrjl4k2XeBMey/NHaH6aArP2CUaW7vpGxyVPkXVqTHCXAAN0SigaAbZfIHsr48sLX0n1jUszS3xAXH2S7V29tNxfoCWjh6uXBsn9Ia+0F9jRA4WubzKdk5jK6czlZzjzmSK+9OzTD5MizrNrXtpehNzdF9/ytjUgvQcCdR0g9UtnQ+LeVSRl0wbo1iiaFqUdxxc12Vb2+FrxmZpw2Nd3RWAv6BDJ8wqBTLrqtyHXVLxvIqUuy/TNLGtIn7FEX2nbrI64MGGphfFqVM0FPHzDjuOg1O28INddE0jJz7PqwTYZafO98+EtV3sXwioaZXlVI7riWk8wlhd+cnG5rbMwzUcCawtt3ahCmC1WhW2KgWjJKFhLH75xPramswt2/4/oB8E+L4vgeE0YSwvr7CZVdjbq4oXHA78DQv79phxWuF8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-11.png\"\n        title=\"images-11.png\"\n        src=\"/static/e40924628a4d012c2e09dbe30a3bf2e1/8c557/images-11.png\"\n        srcset=\"/static/e40924628a4d012c2e09dbe30a3bf2e1/4edbd/images-11.png 175w,\n/static/e40924628a4d012c2e09dbe30a3bf2e1/13ae7/images-11.png 350w,\n/static/e40924628a4d012c2e09dbe30a3bf2e1/8c557/images-11.png 700w,\n/static/e40924628a4d012c2e09dbe30a3bf2e1/e996b/images-11.png 1050w,\n/static/e40924628a4d012c2e09dbe30a3bf2e1/2cefc/images-11.png 1400w,\n/static/e40924628a4d012c2e09dbe30a3bf2e1/29114/images-11.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br></p>\n<p>Vậy là chúng ta đã hoàn thành việc đăng ký <code class=\"language-text\">Graph Facebook API</code> App và <code class=\"language-text\">Facebook Pages</code> rồi. Như vậy là đủ để chúng ta có thể lấy những thông tin cơ bản thông qua <a href=\"https://developers.facebook.com/tools/explorer\">Facebook Graph API Explorer</a>. Chúng ta chỉ việc <code class=\"language-text\">Generate Access Token</code>, chọn <code class=\"language-text\">Facebook App</code> mà chúng ta sử dụng để lấy dữ liệu là được.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f68a168328a251393941bada52742426/29114/images-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABXklEQVQoz51S20rDQBDN//+DN2zV2lZaUKgKffJNQRqsklawqKFWk5jsLbcmx9n0Yq8+OHA4zOzM2ZmdNQ5OznB42kCp2sRuuYq9ozpxDTulDaD4/jHlVxrkV9Fq36BrPcN8tGA+9VGuncPAquX4t+lSI45jaGR5Di4URl8u/IDDZ9sRcA7P+Ua91UPlcoBme4DK1QAX19Zyh2maQqpwHVLNWRBUFJGwgml9wP6UGLoh3t0YtqNg5NSZhraEBEVR/Cugel0o8w6qcwv1cF/40nUg7Tew4SugfIB7VD0uht4iuNCZ60IObaiXfsHSI58LYg/MGSFiAVLOkCYp1Y//ENTjEYswgogSiJjOonji6/No8u5ZPlmG1siybF1w4/vNsBBXYTivw5S1vyQYJwltmNG2ZdHpHCSgN+/5AQK9acphNPbat9GCs2+jEdKtQspiKWoFOi6EmDLlEC/WzvADNh72Ee+fIPsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-12.png\"\n        title=\"images-12.png\"\n        src=\"/static/f68a168328a251393941bada52742426/8c557/images-12.png\"\n        srcset=\"/static/f68a168328a251393941bada52742426/4edbd/images-12.png 175w,\n/static/f68a168328a251393941bada52742426/13ae7/images-12.png 350w,\n/static/f68a168328a251393941bada52742426/8c557/images-12.png 700w,\n/static/f68a168328a251393941bada52742426/e996b/images-12.png 1050w,\n/static/f68a168328a251393941bada52742426/2cefc/images-12.png 1400w,\n/static/f68a168328a251393941bada52742426/29114/images-12.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 566px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d6287a2c0abbb82350bece9bbca8683/6fe44/images-13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsSAAALEgHS3X78AAADp0lEQVQ4y51VyY5bRRT1j/AD/AMLfgAkViQ9JogFAhqxZcke5QOI3VL/AGLHhg2JIATUjrE78dCT7ec3z/N8uFX1nu3uTiOUko7urern8849797qzt7+Ib764kscHX2Lr4++waPHn+PTB7vYP3iM3b1DPNzZx87uPh483OM5Azs/OPyMnnm0znd2D/DRx5+gM7zW8WIZw7Et9IdjhGGIOI4RRhEhRhCKuI2AnpEVFdJKFlFWoBsm4iRBp3+u4+V1AtVw8XJwDt0OYTgRbK8lFKTBdk5R1QyCDt20oBGZ4/n8+c7F0oLll9B9wI7Bo+LWcKIabNUioKKE5c32xirLCnleIMtzdNIkQp4lGLzqYzJ+jdFwgPPZBLPpBNPpDNPZDMPRCFdX17i4vMSbN2Ocnb3GeDLBYDDAaHRGZPmavOMHAYqyhEJeGCRdklY8tywLuqZRrmAlSdB1fb2XyTuFfFNVlcOjckvi4ITsI7A3MJLlUoIsy+QnEZNHEnnkkS9xUSIhsJhSeQkhphJZntIZ83VNGJDCzWp8W12jnI5Qzs8B6QpYXABLhkuxnw7FXqK9ITOHG79rQVhVFWxqG9d14JPi2nMASwMcE7WtozYU1KYq4FqAKqFczZGpK3iKhuEi2xCykouiwFI2MF/K5KN+Q+/bwFZGiUelWkGKsVryv9SiZF98evNPlMElHD+BaZq8USPyL4oTQhsbMF8pZlkGP0oxUxJe5dpDxhyrvyKyRpA1h7pfoSlQkCQpJ7g9KS3YRBlujOfTGHVL6PtCYXL2DNlqgjAtEDXjx9ohy3L+dta8N1AJVBWVW+fcvxuE6elPyOansIMEjuPA9TyK7rod7ltVVSPNis1HaQmj0z7S+YL6jSmMuEI27Mw/Zgu7EEI69/0AHv2GeSgIK/5R7yjMf/kZxbAPN83o5nFg0NBbls3LtkkxU+u6Hj8zaYrYeUvYjp5Q2DT2s6sKM7NGkYpb5v8sRsAuDWbLlkJBePJ7gD8uUiSBQwqc9UP3oawYGegeoDFMsnbGbo/eXQV1G/nd1cS3XmJbo8c7n4Y9p0HPedyY3MbtnJU5tyo+IROtxIyQ5vWmsZn8haTht+cv8NffA6i6/Z+ECf34wych3v8+wAc/hHjvOx//rG7dNqyB0wZM5TbhNlqFTN3posSrpUCcNQo9auD127d8qvgU3I87V0YtzjtpmuJdFyvSTgTW/wJOTk7Q7XbR6/XeCT8+7eFpt4cu5cfHx/gXSohPiqFYm/4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-13.png\"\n        title=\"images-13.png\"\n        src=\"/static/9d6287a2c0abbb82350bece9bbca8683/6fe44/images-13.png\"\n        srcset=\"/static/9d6287a2c0abbb82350bece9bbca8683/4edbd/images-13.png 175w,\n/static/9d6287a2c0abbb82350bece9bbca8683/13ae7/images-13.png 350w,\n/static/9d6287a2c0abbb82350bece9bbca8683/6fe44/images-13.png 566w\"\n        sizes=\"(max-width: 566px) 100vw, 566px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d31acee4f74e1b2451df197e50ebc42a/29114/images-14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABz0lEQVQoz22RTW/TQBCG/QuhKqIIpKJQCcSlEf+ACyeiigvcOPfGEX4CPSGhtBc+hFKlCUmxd+31ftjetV9mFrsygbUezWpG88743WTyZIqjp89wcPgYdx4cRfZ7+L53b4Jbdw8jtw8eYv/+I2ISef5ihtmbtzh59RovZyeYHk+RlMbBVjWMq1H7AB9aooP3LRrf33sC0yLSdR3Gx1Du7LtDUtc1FVtUdUCaSWRSIFUZMiUgyxyilBDxLiOijxupcXGp8GVl8G2t8XmhMb80SIZJbdtCCInF1QqL7RpSFVBaozAGhbVQPQXlrNM4J7HTM4X3c4cPc4t3nyw+ftVIWKzjj1Zepxua+AOiULDWkQ0VjBCwqyXsZh0ximpkj8xLhKrkVYgQY+er0Ybkz89si2V6BU2baEOwqCpJNIMhK4yU0LQhD8ppaCpy8rO78Z3f4kbQh4Dr6xTb7BeWYkU+FTAkyKKaBAZijoZZ5+AIzw9JBOp3rvpbMG5FlOQbR242HPv8kOPYNB67p/H+j4d8eEIU6NE7Iru1umliHy80LMVDkiHhSZ19UaX+R6zUBhn5xXVG5AUq8mssyDQ0JHG9F4yhX7X0IP+Da2M4N+4d+A0NJDFiwuZCiQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"images-14.png\"\n        title=\"images-14.png\"\n        src=\"/static/d31acee4f74e1b2451df197e50ebc42a/8c557/images-14.png\"\n        srcset=\"/static/d31acee4f74e1b2451df197e50ebc42a/4edbd/images-14.png 175w,\n/static/d31acee4f74e1b2451df197e50ebc42a/13ae7/images-14.png 350w,\n/static/d31acee4f74e1b2451df197e50ebc42a/8c557/images-14.png 700w,\n/static/d31acee4f74e1b2451df197e50ebc42a/e996b/images-14.png 1050w,\n/static/d31acee4f74e1b2451df197e50ebc42a/2cefc/images-14.png 1400w,\n/static/d31acee4f74e1b2451df197e50ebc42a/29114/images-14.png 1920w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Như vậy là chúng ta đã lấy được những dữ liệu cơ bản. Nhưng để có thể lấy được dữ liệu của <strong>Instagramer</strong> chúng ta cần phải tiến hành thêm một số bước nữa.</p>\n<p>Ở phần 2, mình sẽ giới thiệu và hướng dẫn cho các bạn các bước để có thể lấy dữ liệu người của <strong>Instagramer</strong>. Mong các bạn đón xem. :D</p>\n<p>Cảm ơn tất cả các bạn đã theo dõi bài viết của mình, nếu có gì khó hiểu, sai hoặc thiếu mong các bạn có thể góp ý. Hi vọng bài viết này sẽ giúp ích cho các bạn.</p>\n<p>Thanks all!!!</p>\n<h6><em><div style=\"text-align: right\"> - by Thuận Nguyễn </div></em></h6>","id":"9488b338-5145-5081-92d9-569816ef1134","frontmatter":{"title":"[Facebook SDK] Lấy dữ liệu Instagramer thông qua GraphQL - Phần 1","date":"17-08-2020","tags":["facebook","instagram"]},"fields":{"slug":"/facebook-graph-facebook-api-phan-1/"}}},{"node":{"excerpt":"Sau 1 thời gian vận hành Tomoblo, cảm ơn anh em đã đóng góp bài viết, công sức cho blog phong phú hơn. Nhưng sau 1 thời gian, anh cũng thấy có 1 số vấn đề trong các bài viết, vì vậy anh viết guideline…","html":"<p>Sau 1 thời gian vận hành Tomoblo, cảm ơn anh em đã đóng góp bài viết, công sức cho blog phong phú hơn. Nhưng sau 1 thời gian, anh cũng thấy có 1 số vấn đề trong các bài viết, vì vậy anh viết guideline này để : </p>\n<blockquote>\n<p>Mục đích: </p>\n<ol>\n<li>Tạo 1 guideline để việc viết blog trở nên đơn giản và vui vẻ hơn. </li>\n<li>Tạo ra 1 tiêu chuẩn chung, thống nhất cho các bài viết. </li>\n</ol>\n</blockquote>\n<h1>1. Chúng ta viết blog để làm gì ?</h1>\n<p>\"Viết blog vì sếp em bắt viết\", \"Viết blog vì KPI bắt thế\", ...</p>\n<p>Nếu em nghĩ thế, thì việc viết blog chỉ phí thời gian của em và cả của người đọc. </p>\n<p>Chúng ta viết blog để : </p>\n<ol>\n<li>Chia sẻ kiến thức, tạo môi trường cởi mở, học hỏi.</li>\n<li>Tạo động lực để trau dồi kiến thức. </li>\n<li>Rèn luyện kĩ năng tư duy, trình bày, giải thích. </li>\n</ol>\n<p>Vì thế, anh muốn những bài viết trên blog phải thể hiện được sự tâm huyết và niềm vui của người viết. </p>\n<h1>2. Tomoblo là blog công nghệ</h1>\n<p>Blog của công ty là blog công nghệ, thế nên có sự khác biệt : </p>\n<ol>\n<li>Đầu tiên, nó là công nghệ. Nội dung các bài viết nên về các công nghệ, xu hướng công nghệ mới. </li>\n<li>Văn phong của blog công nghệ có những đặc điểm : dễ hiểu, cấu trúc rõ ràng, sử dụng nhiều hình vẽ, công thức. Giọng văn vui vẻ, thoải mái. </li>\n<li>Cách trình bày khoa học, hướng tới người đọc. </li>\n</ol>\n<h1>3. Guideline</h1>\n<h2>3.1 Thông tin bảo mật</h2>\n<p>Cả người viết và người review đều phải kiểm tra lại thật kĩ về code, hình ảnh, các thông tin trong bài viết xem có liên quan tới các dự án của khách hàng hay không. </p>\n<p><strong>Tuyệt đối không copy code từ các dự án.</strong></p>\n<h2>3.2 Title cụ thể, đơn giản, bằng tiếng Anh</h2>\n<p>Title của 1 bài blog còn hiển thị trên homepage của công ty, trên fanpage, … nên ưu tiên sử dụng tiếng Anh để ai cũng có thể đọc và hiểu được. </p>\n<p>Ví dụ :\n<code class=\"language-text\">Ruby note</code> nên là <code class=\"language-text\">[Rails] Upload large files with Rails</code></p>\n<h2>3.3 Đánh số thứ tự</h2>\n<p>Đánh số thứ tự các headline h1 bằng số thường.\nVí dụ : </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">1. Docker là gì ?</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đánh số thứ tự các headline h2 theo format : số thứ tự của h1 + số thứ tự.\nVí dụ : </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">2. Install Docker\n2.1 Ubuntu\n2.2 MacOS</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>3.4 Giải thích môi trường, version</h2>\n<p>Phần đầu của bài viết nên có 1 phần với về các công cụ, phần mềm, framework, ngôn ngữ được sử dụng trong bài viết. </p>\n<p>Các framework, ngôn ngữ lập trình được nâng cấp liên tục, mỗi version lại có thêm các tính năng mới, fix các lỗi cũ, nên việc 1 đoạn code chạy ngon trên version này lại chết trên 1 version khác là chuyện bình thường. </p>\n<p>Ví dụ : </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Ruby 2.2/CentOS 6.5\nDocker 17.1 / MacOS \nXCode 12</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>3.5 Tóm lược</h2>\n<p>Nên có 1 phần tóm lược ngắn gọn ở phần đầu mỗi bài viết. Tại sao ta viết bài này, bài này nói về cái gì, ... để người đọc có thể ngay lập tức hiểu được vấn đề trong bài viết. </p>\n<h2>3.6 Dẫn nguồn và link tham khảo đầy đủ</h2>\n<p>Trong trường hợp anh em tham khảo bài viết của người khác, thì phải dẫn nguồn đầy đủ để bảo vệ quyền tác giả. Ngoài ra việc thêm nguồn vào còn giúp người đọc dễ tham khảo hơn. </p>\n<p>Ví dụ : </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">prng = Random.new\nprng.rand(100)       # =&gt; 42</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>（Bạn có thể tham khảo thêm tại <a href=\"https://apidock.com/ruby/Random/rand\">https://apidock.com/ruby/Random/rand</a>)</p>\n<h2>3.7 Giọng văn</h2>\n<p>1 trong các mục đích khi viết blog của chúng ta là rèn luyện tư duy, kĩ năng trình bày, giải thích, thế nên anh em hãy : </p>\n<ol>\n<li>Sử dụng câu văn có câu trúc đơn giản như \"Vì ..., nên ...\", \"Nếu ..., thì ...\".</li>\n<li>Nên viết có ví dụ kèm theo. </li>\n<li>Khi liệt kê vấn đề, nên gạch đầu dòng, đánh số thứ tự. </li>\n<li>Nói 100 câu không bằng 1 hình ảnh. </li>\n<li>Dùng đại từ nhân xưng : mình-bạn, chúng ta</li>\n</ol>\n<h2>3.8 Thêm tags</h2>\n<p>Anh em nên thêm tags cho bài viết của mình. Nếu được thì nên thêm từ 3, 4 tags cho 1 bài viết. </p>\n<p>Thêm tags như thế sau này dễ theo dõi các bài viết cùng 1 chủ đề hơn. </p>\n<h2>3.9 Thêm tên tác giả</h2>\n<p>Phần cuối bài viết, mọi người nên thêm tên mình vào để còn biết là ai viết. Chứ chỉ đọc văn đoán người thì khó lắm :D. </p>\n<p>Ví dụ : </p>\n<p><strong>- From Thuận Nguyễn with love</strong></p>\n<h1>4. Tips</h1>\n<p>Để bắt đầu viết 1 bài blog đầu tiên, anh nghĩ sẽ khá khó khăn vì không biết phải bắt đầu từ đâu. </p>\n<p>Vậy nên mọi người hãy sử dụng mindmap. Bắt đầu với 1 từ khoá, sau đó tách thành các ý chính h1. Rồi cụ thể hoá các ý chính h1 thành h2. Sau đó viết chi tiết cho từng mục. </p>\n<p>Với cách viết này, em có thể viết 1 bài viết trong 3, 4 ngày mà không bị quên, bị mất hứng viết. </p>\n<p>Hi vọng bài viết này giúp anh em nắm được cách viết 1 bài blog đơn giản, dễ đọc, dễ hiểu. </p>\n<p><strong>- From rockkhuya with love</strong></p>","id":"4cca4f51-f275-5ea2-ad92-c179909a2d82","frontmatter":{"title":"Blog Guideline","date":"13-08-2020","tags":["blog"]},"fields":{"slug":"/2020-08-13-blog-guideline/"}}},{"node":{"excerpt":"I. Giới thiệu Như mọi người đã biết, một ứng dụng luôn phải tương tác với cơ sở dữ liệu. Đối với Laravel thì có 2 kiểu truy vấn phổ biến, đó là Eloquent ORM và Query Builder. Tại sao cùng với mục đích…","html":"<h1>I. Giới thiệu</h1>\n<p>Như mọi người đã biết, một ứng dụng luôn phải tương tác với cơ sở dữ liệu. Đối với Laravel thì có 2 kiểu truy vấn phổ biến, đó là <strong>Eloquent ORM</strong> và <strong>Query Builder</strong>.</p>\n<p>Tại sao cùng với mục đích là truy vấn database lại có những kiểu truy vấn khác nhau, điểm khác nhau giữa chúng là gì. Khi nào thì nên sử dụng Eloquent, ngược lại khi nào dùng Query Builder? Cùng tìm hiểu nhé.</p>\n<h2>II. Định nghĩa</h2>\n<h3>1. Query Builder</h3>\n<p>Trong Laravel, Query Builder cung cấp giao diện để chạy các truy vấn CSDL. Nó có thể được sử dụng để thực hiện tất cả, từ kết nối DB cơ bản, CRUD, aggregates...</p>\n<p>Query Builder sử dụng PDO (PHP Data Object, hệ thống API có sẵn của PHP để kết nối đến các CSDL thông dụng), bản thân API PDO đã bảo vệ chúng ta trước các tấn công SQL Injection, do đó khi xử dụng Query Builder không cần lo lắng xử lý dữ liệu trước khi chèn vào database</p>\n<p>Việc thực hiện truy vấn bằng query builder khá đơn giản, chúng ta sẽ sử dụng facade DB để bắt đầu một query builder, ví dụ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>2. Eloquent ORM</h3>\n<p>Đầu tiên ORM là gì? ORM (Object Relative Mapper)  là 1 kỹ thuật lập trình giúp ánh xạ các bản ghi dữ liệu trong hệ quản trị cơ sở dữ liệu sang dạng đối tượng đang định nghĩa trong các class .</p>\n<p><strong>Eloquent ORM</strong> cho phép chúng ta có thể thao tác với các đối tượng DB và quan hệ tương ứng. Nó tương tự như làm việc với các đối tượng trong PHP. Ở đây, chính là tương tác thông qua \"Model\". Trong model sẽ định nghĩa table được truy vấn.</p>\n<h2>III. Cách sử dụng</h2>\n<p><strong><em>1. Query Builder</em></strong></p>\n<ul>\n<li>Query Builder xây dựng lớp DB để thực hiện các câu truy vấn. Do đó, để bắt đầu 1 Query Builder, ta sử dụng hàm table() trong DB facade.</li>\n<li>Ví dụ:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">  <span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Truy vấn này sẽ trả về 1 mảng kết quả, trong đó mỗi kết quả là 1 object StdClass của PHP. Bạn có thể truy cập vào giá trị mỗi cột như 1 thuộc tính của object.</li>\n</ul>\n<p><strong><em>2. Eloquent ORM</em></strong></p>\n<ul>\n<li>Do trong Eloquent ORM, mỗi bảng của database tương ứng với 1 model nên để bắt đầu sử dụng được nó, ta cần tạo Eloquent model trong thư mục  <code class=\"language-text\">app</code>. Lưu ý là mỗi Eloquent model này đều phải extend  <code class=\"language-text\">Illuminate\\Database\\Eloquent\\Model</code>  class.</li>\n<li>Ví dụ về Eloquent Model:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">namespace</span>  <span class=\"token package\">App</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span>  <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Model</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span>  <span class=\"token class-name\">User</span>  <span class=\"token keyword\">extends</span>  <span class=\"token class-name\">Model</span>\n\n<span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/**\n\n* The table associated with the model.\n\n*\n\n* @var string\n\n*/</span>\n\n<span class=\"token keyword\">protected</span>  <span class=\"token variable\">$table</span>  <span class=\"token operator\">=</span>  <span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Ví dụ về query sử dụng Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả trả về là 1 eloquent collections, trong đó mỗi kết quả là 1 User object.</p>\n<h2>IV. Một số query cơ bản</h2>\n<p>Về cơ bản, các câu lệnh query của Eloquent ORM có 1 chút thay đổi so với Query Builder, khiến câu lệnh trông ngắn gọn và đẹp đẽ hơn:</p>\n<p><strong><em>1. Lấy tất cả các bản ghi</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Lấy bản ghi theo id</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Lấy 1 bản ghi theo 1 trường xác định</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">,</span>  <span class=\"token single-quoted-string string\">'Tomoblog'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">,</span>  <span class=\"token single-quoted-string string\">'Tomoblog'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>4. Aggregates</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$users</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>5. Insert</em></strong></p>\n<ul>\n<li>Query Builder:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Eloquent ORM:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">firstOrCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span>  <span class=\"token operator\">=</span>  User<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">firstOrNew</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'email'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token single-quoted-string string\">'tomoblog@gmail.com'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Trên đây mình chỉ giới thiệu một vài câu query cơ bản và ngắn gọn nhất, để tìm hiểu kĩ hơn thì mọi người có thể vào đây nhé </p>\n<p><a href=\"https://laravel.com/docs/7.x/queries\">https://laravel.com/docs/7.x/queries</a></p>\n<p><a href=\"https://laravel.com/docs/7.x/eloquent\">https://laravel.com/docs/7.x/eloquent</a></p>\n<h2>V. So sánh</h2>\n<p><strong><em>1. Tính dễ sử dụng</em></strong></p>\n<ul>\n<li>Các câu lệnh của Eloquent ORM là ngắn gọn, dễ hiểu và dễ sử dụng hơn so với các câu lệnh khá dài dòng của Query Builder.</li>\n<li>Hơn nữa, sử dụng Eloquent ORM cũng dễ dàng hơn trong việc kết nối giữa các bảng với nhau.</li>\n<li>Tuy nhiên, với 1 số truy vấn phức tạp, không sử dụng được Eloquent ORM thì vẫn cần sử dụng Query Builder để cho kết qủa chính xác nhất.</li>\n</ul>\n<p><strong><em>2. Hiệu suất</em></strong></p>\n<p><strong>QueryBuilder</strong> có hiệu suất truy vấn dữ liệu nhanh hơn <strong>Eloquent</strong>  <strong>ORM</strong> bởi vì Eloquent phải thêm một lớp trong ứng dụng và yêu cầu nhiều truy vấn SQL. Đối với các database mà có ít bản ghi hiệu suất của chúng không có quá là nhiều sự chênh lệch, vậy nên đối với những database này mình khuyên các bạn nên sử dụng Eloquent ORM vì cú pháp đơn giản và ngắn gọn của chúng.</p>\n<ul>\n<li><strong>Ví dụ</strong>: Để chèn 1000 hàng cho một bảng đơn giản Eloquent mất 1,2 giây và trong trường hợp đó QueryBuilder chỉ mất 800 mili giây (ms). Vậy tại sao lại phải sử dụng Eloquent? Có cần thiết không?</li>\n<li>\n<p>Câu trả lời là <strong>có</strong>, bởi vì:</p>\n<ul>\n<li>Tạo ra một mối quan hệ tốt hơn và nhận được kết quả với nhiều cú pháp đơn giản.</li>\n<li>Có lẽ nhiều người bảo rằng các cú pháp của QueryBuilder gần giống với MS SQL, Mysql mà các bạn đã được học ở trường nên dễ gây thiện cảm hơn khi học, nhưng không Eloquent ORM tuy cú pháp có khác nhưng mà nó đơn giản và ngắn gọn hơn rất nhiều theo mình thì nó hợp với những bạn không có nhiều kiến thức về truy vấn SQL như các bạn sinh viên sắp và mới ra trường,...</li>\n<li>Phần quan trọng nhất là nếu chúng ta muốn thay đổi cơ sở dữ liệu khác , thì DB::raw sẽ gây đau đầu cho chúng ta và trong trường hợp đó Laravel Eloquent sẽ giải quyết tất cả các vấn đề một cách đơn giản. Nó có thể xử lý các loại Database khác nhau.</li>\n</ul>\n</li>\n</ul>\n<p><strong><em>3. Tính tương tác</em></strong></p>\n<p>Chúng ta có thể sử dụng tất cả các function của Query Builder trong Eloquent nhưng không thể sử dụng các funcation của Eloquent trong Query Builder.</p>\n<h2>VI. Kết luận</h2>\n<p>Như vậy, trong blog này chúng ta đã tìm hiểu về 2 kiểu truy vấn trong Laravel. Mỗi loại đều có những ưu điểm và nhược điểm riêng. Vì vậy tùy vào mục đính sử dụng để chọn kiểu truy vấn cho phù hợp nhé.</p>","id":"e5ab0fe3-9a03-534b-9852-f837d97b43b6","frontmatter":{"title":"[Laravel] So sánh Eloquent ORM và Query Builder","date":"04-08-2020","tags":["php","laravel"]},"fields":{"slug":"/laravel-so-sanh-eloquent-orm-va-query-builder/"}}},{"node":{"excerpt":"Lần đầu tiên em gửi lời chào đến anh chị em trong công ty chúng ta, và cũng lần đầu tiên em viết bài trên  Tomoblo cảm xúc vẫn còn phê phê.\nBài viết này ngoài đưa ra 1 cách để cài đặt CakePHP trên môi…","html":"<p>Lần đầu tiên em gửi lời chào đến anh chị em trong công ty chúng ta, và cũng lần đầu tiên em viết bài trên  <strong>Tomoblo</strong> cảm xúc vẫn còn phê phê.\nBài viết này ngoài đưa ra 1 cách để cài đặt <strong>CakePHP</strong> trên môi trường Docker thì cũng lưu lại 1 quãng đường gian khổ mày mò của em về sử dụng cái\nframework <strong>CakePHP</strong> rối rắm này (thực sự nó rối rắm lắm  ^^).</p>\n<h2>Phần mở đầu lằng nhằng luyên thuyên</h2>\n<p>Vốn dĩ là một người nhút nhát, e dè em thực sự đã gặp khó khăn khi giải quyết một vấn đề.\nSau đó em có hỏi thẳng luôn ông anh làm cùng, ông đã bày cho giải pháp là ảo hoá với <strong>Vagrant</strong>.\nNhưng không hiểu em xử lý thế nào mà lại cũng vẫn thiếu cái extension khó chịu kia. Và em lại phải đi tìm hiểu 1 chút. Và cũng vỡ ra được vài điều.\nVấn đề em gặp hoá ra nhiều bác trước cũng gặp rồi và các bác ấy cũng đề xuất ra mấy mô hình.\nMô hình mà dùng Vagrant kia là mô hình thế này:</p>\n<p><img src=\"https://images.viblo.asia/3ea4768d-c5f2-40c1-aa44-248d8063fddb.png\" alt=\"enter image description here\"></p>\n<p>Dùng máy ảo em không thấy hiệu quả với em. Mà kể cả hiệu quả thì việc dùng máy ảo tốn RAM em cũng không thích.\n\"Vũ khí tối thượng\" cũ của em toàn là các loại thiếu tài nguyên nên kể cả khi dùng đồ này thì em cũng thực sự rén....\nThế là em lại phải về \"tà đạo\", mở đồ cũ code trên <strong>Github</strong> lấy demo cho nhanh. 😢</p>\n<p>Về lại \"tà đạo\" thuận tiện thật, nhưng lương tâm bứt rứt vô cùng.\nem lại phải cố gắng làm thế nào mà nó lại có thể chạy trên môi trường kiểu Unix kia.\nVà đành vượt qua nỗi sợ + đang dịch covid, em bắt đầu dấn thân tìm hiểu Docker.\nVà sơ sơ em đã hiểu qua được mô hình của nó cũng như thích sự dùng đủ của containerization,\nkhông thích dùng ngốn nhưng ko dùng hết của virtualization.</p>\n<p><img src=\"https://images.viblo.asia/633a002e-7f9b-4947-9aba-58a4a4933eb6.png\" alt=\"enter image description here\"></p>\n<h2>Cố gắng lần 1(<strong>Fail</strong>)</h2>\n<p>Đầu tiên, dựa vào bài dịch của các bác bên trên, em đã chạy các lệnh sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">$ mkdir app\n$ cd app</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Rồi chạy php:7.1.5-apache:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">$ docker run <span class=\"token operator\">-</span>it <span class=\"token operator\">--</span>rm <span class=\"token operator\">-</span>v <span class=\"token variable\">$</span><span class=\"token punctuation\">{</span><span class=\"token constant\">PWD</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>app php<span class=\"token punctuation\">:</span><span class=\"token number\">7.1</span><span class=\"token number\">.5</span><span class=\"token operator\">-</span>apache bash</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó chạy thêm các thư viện cần thiết và cài composer:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">root@f28aed5c29e7<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html<span class=\"token shell-comment comment\"># apt-get update &amp;&amp; apt-get install -y libicu-dev libpq-dev libmcrypt-dev mysql-client git zip unzip</span>\nroot@f28aed5c29e7<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html<span class=\"token shell-comment comment\"># rm -r /var/lib/apt/lists/* &amp;&amp; docker-php-ext-configure pdo_mysql --with-pdo-mysql=mysqlnd</span>\nroot@f28aed5c29e7<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html<span class=\"token shell-comment comment\"># docker-php-ext-install intl mbstring mcrypt pcntl pdo_mysql pdo_pgsql pgsql zip opcache</span>\nroot@f28aed5c29e7<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html<span class=\"token shell-comment comment\"># curl -sS https:</span><span class=\"token comment\">//getcomposer.org/installer | php -- --install-dir=/usr/bin/ --filename=composer</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mọi thứ đều rất ok cho tới khi em tạo Dockerfile và docker-compose.yml.\nĐúng là mọi thứ đã chạy, vâng mọi thứ thực sự đã mỗi tội là không biết\nproject đi đâu mà lần 😢 Làm sao để có thể code project được đây??</p>\n<h2>Cố gắng lần 2: Khá trâu bò nhưng hiệu quả</h2>\n<p>Túng quá đâm em liều. Em tham khảo thêm trên docker hub rồi thêm vào Dockerfile và docker-compose.yml.</p>\n<p>Dockerfile như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token shell-comment comment\"># ROM php:7-fpm</span>\n<span class=\"token shell-comment comment\"># RUN apt-get update \\</span>\n<span class=\"token shell-comment comment\">#  &amp;&amp; apt-get install -y git libcurl4-gnutls-dev zlib1g-dev libicu-dev g++ libxml2-dev libpq-dev unzip vim \\</span>\n<span class=\"token shell-comment comment\">#  &amp;&amp; docker-php-ext-install pdo pdo_mysql intl curl json opcache xml \\</span>\n<span class=\"token shell-comment comment\">#  &amp;&amp; apt-get autoremove &amp;&amp; apt-get autoclean \\</span>\n<span class=\"token shell-comment comment\">#  &amp;&amp; rm -rf /var/lib/apt/lists/*</span>\n<span class=\"token shell-comment comment\"># ENV COMPOSER_ALLOW_SUPERUSER 1</span>\n<span class=\"token shell-comment comment\"># ENV COMPOSER_NO_INTERACTION 1</span>\n<span class=\"token shell-comment comment\"># RUN php -r \"copy('https:</span><span class=\"token comment\">//getcomposer.org/installer', 'composer-setup.php');\" \\</span>\n<span class=\"token shell-comment comment\">#   &amp;&amp; php -r \"if (hash_file('sha384', 'composer-setup.php') === '48e3236262b34d30969dca3c37281b3b4bbe3221bda826ac6a9a62d6444cdb0dcd0615698a5cbe587c3f0fe57a54d8f5') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\</span>\n<span class=\"token shell-comment comment\">#   &amp;&amp; php composer-setup.php \\</span>\n<span class=\"token shell-comment comment\">#   &amp;&amp; php -r \"unlink('composer-setup.php');\" \\</span>\n<span class=\"token shell-comment comment\">#   &amp;&amp; mv composer.phar /usr/local/bin/composer</span>\n<span class=\"token shell-comment comment\"># CMD php-fpm</span>\n\n<span class=\"token constant\">FROM</span> php<span class=\"token punctuation\">:</span><span class=\"token number\">7.4</span><span class=\"token operator\">-</span>fpm\n\n<span class=\"token constant\">RUN</span> apt<span class=\"token operator\">-</span>get update\n\n<span class=\"token constant\">RUN</span> apt<span class=\"token operator\">-</span>get install <span class=\"token operator\">-</span>y git libzip<span class=\"token operator\">-</span>dev zip unzip \\\n    <span class=\"token operator\">&amp;&amp;</span> docker<span class=\"token operator\">-</span>php<span class=\"token operator\">-</span>ext<span class=\"token operator\">-</span>install zip\n\n<span class=\"token constant\">RUN</span> docker<span class=\"token operator\">-</span>php<span class=\"token operator\">-</span>ext<span class=\"token operator\">-</span>install pdo_mysql\n\n<span class=\"token constant\">RUN</span> apt<span class=\"token operator\">-</span>get install <span class=\"token operator\">-</span>y libicu<span class=\"token operator\">-</span>dev \\\n    <span class=\"token operator\">&amp;&amp;</span> docker<span class=\"token operator\">-</span>php<span class=\"token operator\">-</span>ext<span class=\"token operator\">-</span>configure intl \\\n    <span class=\"token operator\">&amp;&amp;</span> docker<span class=\"token operator\">-</span>php<span class=\"token operator\">-</span>ext<span class=\"token operator\">-</span>install intl\n\n<span class=\"token constant\">RUN</span> apt<span class=\"token operator\">-</span>get install <span class=\"token operator\">-</span>y libfreetype6<span class=\"token operator\">-</span>dev libjpeg62<span class=\"token operator\">-</span>turbo<span class=\"token operator\">-</span>dev libpng<span class=\"token operator\">-</span>dev \\\n    <span class=\"token operator\">&amp;&amp;</span> docker<span class=\"token operator\">-</span>php<span class=\"token operator\">-</span>ext<span class=\"token operator\">-</span>configure gd <span class=\"token operator\">--</span>with<span class=\"token operator\">-</span>freetype <span class=\"token operator\">--</span>with<span class=\"token operator\">-</span>jpeg \\\n    <span class=\"token operator\">&amp;&amp;</span> docker<span class=\"token operator\">-</span>php<span class=\"token operator\">-</span>ext<span class=\"token operator\">-</span>install gd\n\n<span class=\"token constant\">ENV</span> <span class=\"token constant\">COMPOSER_ALLOW_SUPERUSER</span> <span class=\"token number\">1</span>\n<span class=\"token constant\">ENV</span> <span class=\"token constant\">COMPOSER_NO_INTERACTION</span> <span class=\"token number\">1</span>\n<span class=\"token constant\">RUN</span> php <span class=\"token operator\">-</span>r <span class=\"token double-quoted-string string\">\"copy('https://getcomposer.org/installer', 'composer-setup.php');\"</span> \\\n  <span class=\"token shell-comment comment\">#&amp;&amp; php -r \"if (hash_file('sha384', 'composer-setup.php') === '48e3236262b34d30969dca3c37281b3b4bbe3221bda826ac6a9a62d6444cdb0dcd0615698a5cbe587c3f0fe57a54d8f5') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" \\</span>\n  <span class=\"token operator\">&amp;&amp;</span> php composer<span class=\"token operator\">-</span>setup<span class=\"token punctuation\">.</span>php \\\n  <span class=\"token operator\">&amp;&amp;</span> php <span class=\"token operator\">-</span>r <span class=\"token double-quoted-string string\">\"unlink('composer-setup.php');\"</span> \\\n  <span class=\"token operator\">&amp;&amp;</span> mv composer<span class=\"token punctuation\">.</span>phar <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>composer\n<span class=\"token constant\">CMD</span> php<span class=\"token operator\">-</span>fpm</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Còn đây là docker-compose.yml</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">docker<span class=\"token operator\">-</span>compose<span class=\"token punctuation\">.</span>yml\nversion<span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'3.4'</span>\n\nvolumes<span class=\"token punctuation\">:</span>\n  cake<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>volume<span class=\"token punctuation\">:</span>\n    name<span class=\"token punctuation\">:</span> cake<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>volume\n\nservices<span class=\"token punctuation\">:</span>\n  nginx<span class=\"token punctuation\">:</span>\n    image<span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span><span class=\"token number\">1.17</span>\n    container_name<span class=\"token punctuation\">:</span> cake_nginx\n    ports<span class=\"token punctuation\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token single-quoted-string string\">'8087:80'</span>\n    volumes<span class=\"token punctuation\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>config<span class=\"token operator\">/</span>nginx<span class=\"token operator\">/</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>nginx<span class=\"token operator\">/</span>conf<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>conf\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>htdocs<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html\n\n  php<span class=\"token punctuation\">:</span>\n    container_name<span class=\"token punctuation\">:</span> cake_php\n    build<span class=\"token punctuation\">:</span> config<span class=\"token operator\">/</span>php\n    volumes<span class=\"token punctuation\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>htdocs<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html\n\n  db<span class=\"token punctuation\">:</span>\n    image<span class=\"token punctuation\">:</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\n    container_name<span class=\"token punctuation\">:</span> cake_db\n    ports<span class=\"token punctuation\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">:</span><span class=\"token number\">3306</span>\n    environment<span class=\"token punctuation\">:</span>\n      <span class=\"token constant\">MYSQL_ROOT_PASSWORD</span><span class=\"token punctuation\">:</span> root\n      <span class=\"token shell-comment comment\"># MYSQL_DATABASE: cake</span>\n      <span class=\"token constant\">MYSQL_USER</span><span class=\"token punctuation\">:</span> myroot\n      <span class=\"token constant\">MYSQL_PASSWORD</span><span class=\"token punctuation\">:</span> mypass\n      <span class=\"token constant\">TZ</span><span class=\"token punctuation\">:</span> <span class=\"token single-quoted-string string\">'Asia/Tokyo'</span>\n    volumes<span class=\"token punctuation\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>config<span class=\"token operator\">/</span>mysql<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>mysql<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>config<span class=\"token operator\">/</span>mysql<span class=\"token operator\">/</span>init<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>entrypoint<span class=\"token operator\">-</span>initdb<span class=\"token punctuation\">.</span>d\n      <span class=\"token operator\">-</span> cake<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>volume<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>mysql</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở app.local.php em chỉnh như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'Datasources'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'default'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'host'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'172.30.0.4'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">/*\n         * CakePHP will use the default DB port based on the driver selected\n         * MySQL on MAMP uses port 8889, MAMP users will want to uncomment\n         * the following line and set the port accordingly\n         */</span>\n        <span class=\"token comment\">//'port' => 'non_standard_port_number',</span>\n        <span class=\"token single-quoted-string string\">'username'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'root'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'root'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'database'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'root_db'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">/**\n         * If not using the default 'public' schema with the PostgreSQL driver\n         * set it here.\n         */</span>\n        <span class=\"token comment\">//'schema' => 'myapp',</span>\n        <span class=\"token comment\">/**\n         * You can use a DSN string to set the entire configuration\n         */</span>\n        <span class=\"token single-quoted-string string\">'url'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'DATABASE_URL'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chạy lần lượt các lệnh:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">docker<span class=\"token operator\">-</span>compose build\ndocker<span class=\"token operator\">-</span>compose up <span class=\"token operator\">-</span>d</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Sau đó nhập  <strong><a href=\"http://localhost:8087\">http://localhost:8087</a></strong>, nó sẽ cho giao diện thế này</p>\n<p><img src=\"https://i.ytimg.com/vi/0SkEU6KP7HM/hqdefault.jpg\" alt=\"enter image description here\"></p>\n<p>Tất cả các thông số đều màu xanh. Chứng tỏ là project này hoàn toàn kết nối tới 1 database và bạn hoàn toàn có thể chiến đấu thoải mái.</p>\n<p>Các bước tiếp theo về migrate, seed,... các bạn sẽ đọc ở blog của cloud66 mình đính kèm link dưới đây.</p>\n<p>Tuy nhiên với bản thân mình thì còn cần tạo cả khung MVC với các bảng nữa nên mình sẽ để 1 terminal chạy docker-compose up ở 1 bên và mở terminal mới chạy lệnh sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">docker exec <span class=\"token operator\">-</span>ti <span class=\"token operator\">&lt;</span>tên của container chứa cakephp<span class=\"token operator\">></span> <span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>bash</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Với terminal này bạn có thể tuỳ ý chạy các command thông thường của CakePHP, ví dụ</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">bin<span class=\"token operator\">/</span>cake bake migration CreateUsers\nbin<span class=\"token operator\">/</span>cake bake all Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>À với cách này bạn phải tự tạo .gitattributes và .gitignore bằng tay nhé.</p>\n<h2>Tổng kết</h2>\n<p>Tưởng như đơn giản mà làm không ra, rồi sai sót mấy lần.</p>\n<p>Cảm ơn các bạn (anh/chị) đã đọc cái bài post lộn xộn này. Nội dung cũng thập cẩm này nọ thật.\nRất mong các bạn (anh/chị) thông cảm nếu thấy lằng nhằng ^^.</p>\n<h2>Tham khảo</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">https<span class=\"token punctuation\">:</span><span class=\"token comment\">//hub.docker.com/r/occitech/cakephp</span>\nhttps<span class=\"token punctuation\">:</span><span class=\"token comment\">//github.com/diepz/cakephp</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>","id":"e3376929-dfcb-5f0f-ab09-42d0f3a3065a","frontmatter":{"title":"[CakePHP] Lần đầu làm chuyện đấy với Cakephp trên môi trường docker","date":"03-08-2020","tags":["php","cakephp"]},"fields":{"slug":"/cakephp-lan-dau-lam-chuyen-day-voi-cakephp-tren-moi-truong-docker/"}}},{"node":{"excerpt":"Chúng ta biết rằng  là nhãn hiệu cho một loại mã vạch ma trận (hoặc mã vạch hai chiều) và thường được sử dụng để lưu trữ URL hoặc thông tin khác được đọc bằng camera trên điện thoại thông minh hay các…","html":"<p>Chúng ta biết rằng <code class=\"language-text\">Mã QR</code> là nhãn hiệu cho một loại mã vạch ma trận (hoặc mã vạch hai chiều) và thường được sử dụng để lưu trữ URL hoặc thông tin khác được đọc bằng camera trên điện thoại thông minh hay các loại máy có chức năng quét mã khác. Mã QR có thể chứa 3248 bit hoặc 406 byte.</p>\n<p>Tìm hiểu thêm <code class=\"language-text\">Mã QR</code> qua bài viết của này để hiểu rõ hơn <a href=\"https://www.qr-code-generator.com/qr-code-marketing/qr-codes-basics/\"> QR Code Generator</a></p>\n<p>Trong hướng dẫn này, chúng ta sẽ tạo <code class=\"language-text\">Mã QR</code> trong <a href=\"https://laravel.com/\">Framework Laravel</a> .</p>\n<h2>Mã QR trong Framework Laravel</h2>\n<p>Trong laravel tôi tìm thấy nhiều package để render mã QR. Tuy nhiên tôi đã tìm thấy một package thực sự tốt đó là  <a href=\"https://github.com/SimpleSoftwareIO/simple-qrcode\">simple-qrcode</a>\nỞ bài viết này tôi xin giới thiệu cho các bạn về version 3 của package này !</p>\n<p>Tài liệu tham khảo : <a href=\"https://www.simplesoftware.io/#/docs/simple-qrcode\">Simple QrCode</a></p>\n<h2>Cài đặt và cách sử dụng QR Code</h2>\n<p>Chúng ta làm theo những bước sau :</p>\n<ol>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-1-c%C3%A0i-%C4%91%E1%BA%B7t-laravel\">Cài đặt Laravel</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-2-c%C3%A0i-%C4%91%E1%BA%B7t-g%C3%B3i-v%C3%A0-c%E1%BA%A5u-h%C3%ACnh\">Cài đặt gói và cấu hình</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-3-c%C3%A1ch-s%E1%BB%AD-d%E1%BB%A5ng-c%C6%A1-b%E1%BA%A3n\">Cách sử dụng cơ bản</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-4-t%E1%BA%A1o-l%E1%BB%99-tr%C3%ACnh--route-\">Tạo lộ trình (Route)</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-5-t%E1%BA%A1o-trong-t%E1%BA%ADp-tin-blade\">Tạo trong tập tin Blade</a></li>\n<li><a href=\"#b%C6%B0%E1%BB%9Bc-6-s%E1%BB%AD-d%E1%BB%A5ng-n%C3%A2ng-cao\">Sử dụng nâng cao</a></li>\n</ol>\n<h3>Bước 1: Cài đặt Laravel</h3>\n<ul>\n<li>\n<p>Chuyển đến thư mục dự án của bạn (đối với xampp, chuyển đến thư mục htdocs) và viết lệnh này trong thiết bị đầu cuối của bạn để tạo dự án.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">composer create-project --prefer-dist laravel/laravel qr-code</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n<h3>Bước 2: Cài đặt gói và cấu hình</h3>\n<p>Đầu tiên, thêm Simple QrCode package vào require trong file <code class=\"language-text\">composer.json</code> của bạn:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&quot;require&quot;: {\n ...\n &quot;simplesoftwareio/simple-qrcode&quot;: &quot;^3.0&quot;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>sau đó, run command</p>\n<p><code class=\"language-text\">composer update</code></p>\n<p>hoặc bạn có thể dùng command sau để thay thế cách trên:</p>\n<p><code class=\"language-text\">composer require simplesoftwareio/simple-qrcode</code></p>\n<p>Đối với phiên bản Laravel &#x3C;= 5.4 ta cấu hình <code class=\"language-text\">Service Provider</code>, trong file <code class=\"language-text\">config/app.php</code> ta đăng kí trong mảng <code class=\"language-text\">providers</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&#39;providers&#39; =&gt; [\n ...\n SimpleSoftwareIO\\QrCode\\ServiceProvider::class\n]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>và thêm Aliases ở trong mảng <code class=\"language-text\">aliases</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&#39;aliases&#39; =&gt; [\n ...\n &#39;QrCode&#39; =&gt; SimpleSoftwareIO\\QrCode\\Facade::class\n]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>run <code class=\"language-text\">composer dump-autoload</code> để reload lại composer auto load cache.</p>\n<h3>Bước 3: Cách sử dụng cơ bản</h3>\n<ul>\n<li>Chúng ta đã cài đặt thành công Mã QR trong ứng dụng Laravel của mình. Chúng ta hãy xem một số cách sử dụng cơ bản. Cú pháp cơ bản là:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::size(100)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><strong>Kích thước</strong> : Chúng ta có thể thay đổi kích thước của hình ảnh mã QR.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::size(300)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><strong>Màu sắc</strong> : Chúng ta cũng có thể thiết lập màu nền.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::size(250)-&gt;backgroundColor(255,255,204)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<center>\n<img src=\"https://cdn.mynotepaper.com/wp-content/uploads/2019/03/22144106/color_qr_code.png\" alt class=\"wp-image-1652\">\n<p>\n<code>M&#xE3; QR &#x111;&#x1EA7;y m&#xE0;u s&#x1EAF;c</code>\n</p>\n</center>\n<center>\n<i>\nNgu&#x1ED3;n t&#x1EEB;:\n<a href=\"https://cdn.mynotepaper.com/\" target=\"_blank\">https://cdn.mynotepaper.com</a>\n</i>\n</center>\n<h3>Bước 4: Tạo lộ trình ( Route )</h3>\n<p>Trong bước này đầu tiên ta tạo route <code class=\"language-text\">qrcode</code> với method <code class=\"language-text\">GET</code>. Sao chép và dán mã này vào trong tệp <code class=\"language-text\">routes/web.php</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;?php\n...\nRoute::get(&#39;qrcode&#39;, function () {\n    return QrCode::size(250)\n        -&gt;backgroundColor(255, 255, 204)\n        -&gt;generate(&#39;Tomosia&#39;);\n});</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ hãy chạy ứng dụng của bạn và truy cập URL để xem Mã QR.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// run application\nphp artisan serve\n\n// visit the route\nhttp://localhost:8000/qrcode</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Bước 5: Tạo trong tập tin Blade</h3>\n<p>Chúng ta có thể dễ dàng tạo Mã QR trong file <code class=\"language-text\">blade</code>. Định dạng là:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{!! QrCode::generate(&#39;Tomosia&#39;); !!}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hãy xem một ví dụ:</p>\n<p>Tạo một route:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Route::get(&#39;qrcode_blade&#39;, function () {\n    return view(&#39;qr_code&#39;);\n});</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ tạo một file <code class=\"language-text\">blade</code> trong thư mục <strong>resources</strong> có tên <code class=\"language-text\">qr_code_blade.php</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;&gt;\n    &lt;title&gt;Laravel QR Code Example&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div class=&quot;text-center&quot; style=&quot;margin-top: 50px;&quot;&gt;\n    &lt;h3&gt;Laravel QR Code Example&lt;/h3&gt;\n\n    {!! QrCode::size(300)-&gt;generate(&#39;Tomosia&#39;); !!}\n\n    &lt;p&gt;Tomosia&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hãy xem kết qủa bằng cách truy cập route từ trình duyệt:</p>\n<center>\n<img src=\"https://images.viblo.asia/0998d669-0b87-405f-83ca-956971bf3476.png\" alt>\n<p>\n<code>M&#xE3; QR hi&#x1EC3;n th&#x1ECB; &#x1EDF; tr&#xEC;nh duy&#x1EC7;t</code>\n</p>\n</center>\n<center>\n<i>\nNgu&#x1ED3;n t&#x1EEB;:\n<a href=\"https://images.viblo.asia\" target=\"_blank\">https://images.viblo.asia</a>\n</i>\n</center>\n<blockquote>\n<p> Lưu ý : Trong quá trình quét mã thì nếu mã QR bạn để background màu đen thì mã QR sẽ có khả năng bị lỗi.</p>\n</blockquote>\n<h3>Bước 6: Sử dụng nâng cao</h3>\n<ul>\n<li><strong>Xem mã QR mà không cần lưu</strong> : Bạn có thể hiển thị hình ảnh PNG mà không lưu tệp bằng cách cung cấp chuỗi thô và mã hóa <code class=\"language-text\">base64_encode</code>.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&lt;img src=&quot;data:image/png;base64, {!! base64_encode(QrCode::format(&#39;png&#39;)-&gt;size(100)-&gt;generate(&#39;Make me into an QrCode!&#39;)) !!} &quot;&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><strong>Định dạng</strong> : Thông thường tạo (); Chức năng trả về hình ảnh svg.</li>\n<li>Có một số định dạng khác :</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::format(&#39;png&#39;); //Returns a PNG image\n\nQrCode::format(&#39;eps&#39;);  //Returns a EPS image\n\nQrCode::format(&#39;svg&#39;);  //Returns a SVG image</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p><strong>Mã hóa</strong> : Chúng ta cũng có thể thiết lập mã hóa ký tự:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::encoding(&#39;UTF-8&#39;)-&gt;generate(&#39;QR code with special symbols ♠♥!!&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p><strong>Margin</strong> : Đặt lề theo cách tùy chỉnh này:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::margin(10)-&gt;generate(&#39;Tomosia&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li><strong>Bitcoin</strong> : Với sự trợ giúp của chức năng trợ giúp này, chúng ta có thể gửi thanh toán khi được quét.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::BTC($address, $amount);\n\n//Sends a 0.334BTC payment to the address\nQrCode::BTC(&#39;bitcoin address&#39;, 0.334);\n\n//Sends a 0.334BTC payment to the address with some optional arguments\nQrCode::size(500)-&gt;BTC(&#39;address&#39;, 0.0034, [\n    &#39;label&#39; =&gt; &#39;my label&#39;,\n    &#39;message&#39; =&gt; &#39;my message&#39;,\n    &#39;returnAddress&#39; =&gt; &#39;https://www.returnaddress.com&#39;\n]);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Tin nhắn văn bản</strong> : Chúng ta có thể viết sms bằng mã QR.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::SMS($phoneNumber, $message);\n\n//Creates a text message with the number filled in.\nQrCode::SMS(&#39;555-555-5555&#39;);\n\n//Creates a text message with the number and message filled in.\nQrCode::SMS(&#39;555-555-5555&#39;, &#39;Body of the message&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Số điện thoại di động</strong> : Quay số điện thoại di động từ mã QR được quét.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::phoneNumber($phoneNumber);\n\nQrCode::phoneNumber(&#39;555-555-5555&#39;);\n\nQrCode::phoneNumber(&#39;1-800-Laravel&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Email</strong> : Chúng ta cũng có thể tự động điền vào <code class=\"language-text\">email</code>, <code class=\"language-text\">subject</code> và <code class=\"language-text\">body</code>khi quét mã QR:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::email($to, $subject, $body);\n\n//Fills in the to address\nQrCode::email(&#39;foo@bar.com&#39;);\n\n//Fills in the to address, subject, and body of an e-mail.\nQrCode::email(&#39;foo@bar.com&#39;, &#39;This is the subject.&#39;, &#39;This is the message body.&#39;);\n\n//Fills in just the subject and body of an e-mail.\nQrCode::email(null, &#39;This is the subject.&#39;, &#39;This is the message body.&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Vị trí địa lý</strong> : Truyền kinh độ và vĩ độ thông qua mã QR:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::geo($latitude, $longitude);\n\nQrCode::geo(37.822214, -122.481769);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Kết nối với WiFi</strong> : Dễ dàng kết nối với WiFi từ mã QR được quét.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">QrCode::wiFi([\n\t&#39;encryption&#39; =&gt; &#39;WPA/WEP&#39;,\n\t&#39;ssid&#39; =&gt; &#39;SSID of the network&#39;,\n\t&#39;password&#39; =&gt; &#39;Password of the network&#39;,\n\t&#39;hidden&#39; =&gt; &#39;Whether the network is a hidden SSID or not.&#39;\n]);\n\n//Connects to an open WiFi network.\nQrCode::wiFi([\n\t&#39;ssid&#39; =&gt; &#39;Network Name&#39;,\n]);\n\n//Connects to an open, hidden WiFi network.\nQrCode::wiFi([\n\t&#39;ssid&#39; =&gt; &#39;Network Name&#39;,\n\t&#39;hidden&#39; =&gt; &#39;true&#39;\n]);\n\n//Connects to an secured, WiFi network.\nQrCode::wiFi([\n\t&#39;ssid&#39; =&gt; &#39;Network Name&#39;,\n\t&#39;encryption&#39; =&gt; &#39;WPA&#39;,\n\t&#39;password&#39; =&gt; &#39;myPassword&#39;\n]);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>Vị trí hình ảnh</strong> : Chúng ta có thể đặt một hình ảnh bên trong mã QR.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$image = QrCode::format(&#39;png&#39;)\n    -&gt;merge(&#39;folder/image.png&#39;, 0.5, true)\n    -&gt;size(500)-&gt;errorCorrection(&#39;H&#39;)\n    -&gt;generate(&#39;MyNotePaper&#39;);\n\nreturn response($image)-&gt;header(&#39;Content-type&#39;,&#39;image/png&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với sự trợ giúp của gói này, việc tạo Mã QR rất dễ dàng. Tôi hy vọng bài viết này sẽ giúp ích cho bạn.</p>","id":"d1bb7a1a-4e1e-54af-89d9-04c0ef9cada6","frontmatter":{"title":"[Laravel] Tạo mã QR trong Framework Laravel","date":"02-08-2020","tags":["php","laravel"]},"fields":{"slug":"/laravel-tao-ma-qr-trong-framework-laravel/"}}},{"node":{"excerpt":"Hourensou là gì? Compare Điều cơ bản nhất trong công việc chính là Hourensou 「報・連・相」. Hourensou là viết tắt của: Houkoku 「報告」:  Báo cáo Renraku「連絡」:  Liên lạc Soudan「相談」: Trao đổi Chẳng hạn bằng việc…","html":"<h2>Hourensou là gì?</h2>\n<center>\n<p><img src=\"http://jinzainews.net/system/item_images/images/000/017/982/medium/e4bd5fa4-117c-4de8-8e36-89ec309d8bc4.png?1524551872\" alt=\"Compare\"></p>\n</center>\n<p>Điều cơ bản nhất trong công việc chính là Hourensou 「報・連・相」.</p>\n<p><strong>Hourensou</strong> là viết tắt của:</p>\n<ul>\n<li><strong>Houkoku</strong> 「報告」:  <strong>Báo cáo</strong></li>\n<li><strong>Renraku</strong>「連絡」:  <strong>Liên lạc</strong></li>\n<li><strong>Soudan</strong>「相談」: <strong>Trao đổi</strong></li>\n</ul>\n<p>Chẳng hạn bằng việc báo cáo, liên lạc và trao đổi với Member, Leader có thể hiểu rõ tình hình tiến độ và đưa ra chỉ thị chính xác. Mặc khác, nếu Member không báo cáo hay liên lạc thì có thể dẫn đến nhiều rắc rối không mong muốn.</p>\n<p>Trong công việc, để đạt được tiến độ như mong muốn, hoạt động ổn định và suôn sẻ, giảm tỉ lệ phát sinh các vấn đề ngoại lệ thì bắc buộc phải sử dụng <strong>Hourenshou</strong>.</p>\n<h2>Sự khác nhau của 「Hou」 「Ren」 「Sou」</h2>\n<h3>Báo cáo  - Houkoku「報告」</h3>\n<p>Báo cáo cho cấp trên về thông tin tiến độ, công việc, sự cố phát sinh,...</p>\n<p>Quan trọng nhất là tình trạng tiến độ và sự cố công việc.</p>\n<h3>Liên lạc  - Renraku「連絡」</h3>\n<p>Liên lạc cho cấp trên / đồng nghiệp về kế hoạch bản thân hay nghỉ phép, quyết định bản thân trong công việc,...</p>\n<p>Điều quan trọng trong Liên lạc là tính nhanh chóng.</p>\n<h3>Trao đổi  - Soudan「相談」</h3>\n<p>Khi gặp vấn đề, sự cố không mong muốn,... mà bản thân không chắc chắn về phương án. Trao đổi với cấp trên / đồng nghiệp là điều cần thiết để tìm ra phương án đúng và thích hợp nhất.</p>\n<h2>Sử dụng đúng cách với Hourensou trong công việc</h2>\n<p>Không truyền đạt đúng cách với Hourensou thì không mang lại nhiều ý nghĩa và tác dụng. Để sử dụng đúng, có 3 yếu tố cần được chú ý:</p>\n<h3>Thời điểm ( タイミング )</h3>\n<ul>\n<li>Trường hợp gặp sự cố hay vấn đề phát sinh, điều quan trọng là việc báo cáo, trao đổi hoặc liên lạc <strong>đúng lúc</strong>, <strong>nhanh chóng</strong>. Càng kéo dài thì vấn đề sẽ tệ dần và khó để kiểm soát.</li>\n<li>Khi phát hiện phương án nào đó, cần nhanh chóng liên lạc hay trao đổi với cấp trên / đồng nghiệp. Có thể họ cũng đang gặp rắc rối với vấn đề đó, việc này sẽ rút gọn nhiều thời gian xử lý công việc / sự cố hơn.</li>\n</ul>\n<h3>Nội dung ( 内容 )</h3>\n<ul>\n<li>Truyền tải kết quả ngắn gọn và chính xác và dễ hiểu nhất về nội dung công việc / vấn đề.</li>\n<li>Kết quả của Hourensou phụ thuộc vào nội dung truyền tải nên tránh truyền đạt các vấn đề không liên quan, dẫn đến khó khăn khi giao tiếp và đem lại các kết quả nhầm lẫn / không mong muốn.</li>\n</ul>\n<h3>Cách truyền đạt ( 伝え方 )</h3>\n<ul>\n<li>Khi gặp vấn đề phát sinh, nên lập tức trao đổi hay báo cáo bằng lời nói.</li>\n<li>Khi báo cáo, nên đính kèm thêm các tập tin liên quan, bổ sung về công việc / vấn đề. Giúp đối phương dễ nắm bắt, nhanh chóng hiểu rõ về vấn đề.</li>\n</ul>\n<hr>\n<p>Vậy là mọi người đã hiểu sơ qua về phong cách Hourensou trong cách làm việc nhóm của người Nhât Bản. Mong mọi người hãy giới thiệu và áp dụng vào nhóm của mình để hiệu quả hơn nhé.</p>\n<h6><em><div style=\"text-align: right\"> - by Lê Hoàng Lân </div></em></h6>","id":"92cce8c7-3f81-5bde-8551-25ab337c8213","frontmatter":{"title":"Hourensou trong công việc","date":"31-07-2020","tags":[null]},"fields":{"slug":"/hourensou-trong-cong-viec/"}}},{"node":{"excerpt":"Crawling dữ liệu không phải là khái niệm quá xa lạ, nhưng để lấy dữ liệu từ một website đôi khi chúng ta cũng hay gặp tình trạng bị chặn IP dẫn đến server không thể tiếp lục dữ liệu. Ý tưởng. Ý tưởng…","html":"<p>Crawling dữ liệu không phải là khái niệm quá xa lạ, nhưng để lấy dữ liệu từ một website đôi khi chúng ta cũng hay gặp tình trạng bị chặn IP dẫn đến server không thể tiếp lục dữ liệu.</p>\n<h4>Ý tưởng.</h4>\n<p>Ý tưởng để giải quyết vấn đề đấy là chúng ta sẽ tiến hành tạo một service IP rotator để renew lại IP khi website hoặc API chúng ta muốn lấy dữ liệu chặn IP.</p>\n<p>Ý tưởng có vẻ hay nhưng vấn đề là làm sao chúng ta có một lượng địa chỉ IP đủ lớn để thay đổi cho server và thời gian thay đổi IP cho server có quá mất thời gian hay khó khăn.</p>\n<p>Rất may là AWS có một dịch vụ với tên gọi là <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html\">Elastic I\u001dP</a> , cho phép tạo ra một IP và đính kèm vào server, tất nhiên server trong trường hợp này chúng ta phải sử dụng EC2 :))).</p>\n<p>Với <code class=\"language-text\">Elastic I\u001dP</code> thì sẽ không bị tính phí phát sinh nếu bạn tạo ra một địa chỉ ip mới được gán vào cho EC2 và phải xoá ip cũ đi.</p>\n<h4>Giải pháp.</h4>\n<p>Thiên Thời Địa Lợi Nhân Hòa đều hội tụ ở đây cả chứ đâu, hay tiến hành thiết kế một sơ đồ để chúng ta có cái nhìn rõ hơn.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1617767003875\" width=\"261.796875\" xmlns=\"http://www.w3.org/2000/svg\" height=\"383\" viewBox=\"0 0 261.796875 383\"><style>#mermaid-1617767003875 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1617767003875 .label text{fill:#333}#mermaid-1617767003875 .node rect,#mermaid-1617767003875 .node circle,#mermaid-1617767003875 .node ellipse,#mermaid-1617767003875 .node polygon,#mermaid-1617767003875 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1617767003875 .node .label{text-align:center}#mermaid-1617767003875 .node.clickable{cursor:pointer}#mermaid-1617767003875 .arrowheadPath{fill:#333}#mermaid-1617767003875 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1617767003875 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1617767003875 .edgeLabel rect{opacity:0.5}#mermaid-1617767003875 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1617767003875 .cluster text{fill:#333}#mermaid-1617767003875 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1617767003875 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1617767003875 text.actor{fill:#000;stroke:none}#mermaid-1617767003875 .actor-line{stroke:grey}#mermaid-1617767003875 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1617767003875 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1617767003875 #arrowhead{fill:#333}#mermaid-1617767003875 .sequenceNumber{fill:#fff}#mermaid-1617767003875 #sequencenumber{fill:#333}#mermaid-1617767003875 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1617767003875 .messageText{fill:#333;stroke:none}#mermaid-1617767003875 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1617767003875 .labelText{fill:#000;stroke:none}#mermaid-1617767003875 .loopText{fill:#000;stroke:none}#mermaid-1617767003875 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#ccf}#mermaid-1617767003875 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1617767003875 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1617767003875 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1617767003875 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1617767003875 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1617767003875 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .section{stroke:none;opacity:0.2}#mermaid-1617767003875 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1617767003875 .section2{fill:#fff400}#mermaid-1617767003875 .section1,#mermaid-1617767003875 .section3{fill:#fff;opacity:0.2}#mermaid-1617767003875 .sectionTitle0{fill:#333}#mermaid-1617767003875 .sectionTitle1{fill:#333}#mermaid-1617767003875 .sectionTitle2{fill:#333}#mermaid-1617767003875 .sectionTitle3{fill:#333}#mermaid-1617767003875 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1617767003875 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .grid path{stroke-width:0}#mermaid-1617767003875 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1617767003875 .task{stroke-width:2}#mermaid-1617767003875 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .taskText:not([font-size]){font-size:11px}#mermaid-1617767003875 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1617767003875 .task.clickable{cursor:pointer}#mermaid-1617767003875 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1617767003875 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1617767003875 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1617767003875 .taskText0,#mermaid-1617767003875 .taskText1,#mermaid-1617767003875 .taskText2,#mermaid-1617767003875 .taskText3{fill:#fff}#mermaid-1617767003875 .task0,#mermaid-1617767003875 .task1,#mermaid-1617767003875 .task2,#mermaid-1617767003875 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1617767003875 .taskTextOutside0,#mermaid-1617767003875 .taskTextOutside2{fill:#000}#mermaid-1617767003875 .taskTextOutside1,#mermaid-1617767003875 .taskTextOutside3{fill:#000}#mermaid-1617767003875 .active0,#mermaid-1617767003875 .active1,#mermaid-1617767003875 .active2,#mermaid-1617767003875 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1617767003875 .activeText0,#mermaid-1617767003875 .activeText1,#mermaid-1617767003875 .activeText2,#mermaid-1617767003875 .activeText3{fill:#000 !important}#mermaid-1617767003875 .done0,#mermaid-1617767003875 .done1,#mermaid-1617767003875 .done2,#mermaid-1617767003875 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1617767003875 .doneText0,#mermaid-1617767003875 .doneText1,#mermaid-1617767003875 .doneText2,#mermaid-1617767003875 .doneText3{fill:#000 !important}#mermaid-1617767003875 .crit0,#mermaid-1617767003875 .crit1,#mermaid-1617767003875 .crit2,#mermaid-1617767003875 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1617767003875 .activeCrit0,#mermaid-1617767003875 .activeCrit1,#mermaid-1617767003875 .activeCrit2,#mermaid-1617767003875 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1617767003875 .doneCrit0,#mermaid-1617767003875 .doneCrit1,#mermaid-1617767003875 .doneCrit2,#mermaid-1617767003875 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1617767003875 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1617767003875 .milestoneText{font-style:italic}#mermaid-1617767003875 .doneCritText0,#mermaid-1617767003875 .doneCritText1,#mermaid-1617767003875 .doneCritText2,#mermaid-1617767003875 .doneCritText3{fill:#000 !important}#mermaid-1617767003875 .activeCritText0,#mermaid-1617767003875 .activeCritText1,#mermaid-1617767003875 .activeCritText2,#mermaid-1617767003875 .activeCritText3{fill:#000 !important}#mermaid-1617767003875 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1617767003875 g.classGroup text .title{font-weight:bolder}#mermaid-1617767003875 g.clickable{cursor:pointer}#mermaid-1617767003875 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1617767003875 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1617767003875 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1617767003875 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1617767003875 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1617767003875 .dashed-line{stroke-dasharray:3}#mermaid-1617767003875 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1617767003875 .commit-id,#mermaid-1617767003875 .commit-msg,#mermaid-1617767003875 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1617767003875 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1617767003875 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1617767003875 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1617767003875 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1617767003875 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1617767003875 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1617767003875 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1617767003875 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1617767003875 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1617767003875 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1617767003875 .node circle.state-start{fill:black;stroke:black}#mermaid-1617767003875 .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-1617767003875 #statediagram-barbEnd{fill:#9370db}#mermaid-1617767003875 .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1617767003875 .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-1617767003875 .statediagram-state .divider{stroke:#9370db}#mermaid-1617767003875 .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-1617767003875 .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-1617767003875 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-1617767003875 .statediagram-cluster .inner{rx:0;ry:0}#mermaid-1617767003875 .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-1617767003875 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-1617767003875 .note-edge{stroke-dasharray:5}#mermaid-1617767003875 .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1617767003875 {\n    color: rgb(0, 0, 0);\n    font: 16px \"trebuchet ms\", verdana, arial;\n  }</style><g transform=\"translate(0, 0)\"><marker id=\"flowchart-pointEnd\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"10\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"flowchart-pointStart\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"0\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 5 L 10 10 L 10 0 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"flowchart-circleEnd\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"11\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"flowchart-circleStart\" class=\"flowchart\" viewBox=\"0 0 10 10\" refX=\"-1\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"flowchart-crossEnd\" class=\"flowchart\" viewBox=\"0 0 11 11\" refX=\"12\" refY=\"5.2\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><path stroke=\"black\" d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"flowchart-crossStart\" class=\"flowchart\" viewBox=\"0 0 11 11\" refX=\"-1\" refY=\"5.2\" markerUnits=\"strokeWidth\" markerWidth=\"7\" markerHeight=\"7\" orient=\"auto\"><path stroke=\"black\" d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><g class=\"root\"><g class=\"clusters\"></g><g class=\"edgePaths\"><path d=\"M133.31677827380952,42L127.18846106150794,46.166666666666664C121.06014384920634,50.333333333333336,108.80350942460318,58.666666666666664,102.67519221230158,67C96.546875,75.33333333333333,96.546875,83.66666666666667,96.546875,87.83333333333333L96.546875,92\" id=\"id1\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M96.546875,125L96.546875,129.16666666666666C96.546875,133.33333333333334,96.546875,141.66666666666666,96.546875,150C96.546875,158.33333333333334,96.546875,166.66666666666666,96.546875,170.83333333333334L96.546875,175\" id=\"id2\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M96.546875,208L96.546875,212.16666666666666C96.546875,216.33333333333334,96.546875,224.66666666666666,96.546875,233C96.546875,241.33333333333334,96.546875,249.66666666666666,96.546875,253.83333333333334L96.546875,258\" id=\"id3\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M96.546875,291L96.546875,295.1666666666667C96.546875,299.3333333333333,96.546875,307.6666666666667,102.67519221230158,316C108.80350942460318,324.3333333333333,121.06014384920634,332.6666666666667,127.18846106150794,336.8333333333333L133.31677827380952,341\" id=\"id4\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path><path d=\"M183.32384672619048,341L189.45216393849205,336.8333333333333C195.58048115079364,332.6666666666667,207.83711557539684,324.3333333333333,213.9654327876984,313.25C220.09375,302.1666666666667,220.09375,288.3333333333333,220.09375,274.5C220.09375,260.6666666666667,220.09375,246.83333333333334,220.09375,233C220.09375,219.16666666666666,220.09375,205.33333333333334,220.09375,191.5C220.09375,177.66666666666666,220.09375,163.83333333333334,220.09375,150C220.09375,136.16666666666666,220.09375,122.33333333333333,220.09375,108.5C220.09375,94.66666666666667,220.09375,80.83333333333333,213.9654327876984,69.75C207.83711557539684,58.666666666666664,195.58048115079364,50.333333333333336,189.45216393849205,46.166666666666664L183.32384672619048,42\" id=\"id5\" class=\"transition\" marker-end=\"url(#flowchart-pointEnd)\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"id1\" transform=\"translate(158.3203125, 25)\"><rect rx=\"17\" ry=\"17\" x=\"-82.34375\" y=\"-17\" width=\"164.6875\" height=\"34\"></rect><g class=\"label\" transform=\"translate(-70.59375, -9.5)\"><foreignObject width=\"141.1875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">1. Detect bị chặn IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id2\" transform=\"translate(96.546875, 108.5)\"><rect rx=\"16.5\" ry=\"16.5\" x=\"-82.328125\" y=\"-16.5\" width=\"164.65625\" height=\"33\"></rect><g class=\"label\" transform=\"translate(-70.703125, -9)\"><foreignObject width=\"141.40625\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">2.Allocate Elastic IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id3\" transform=\"translate(96.546875, 191.5)\"><rect rx=\"16.5\" ry=\"16.5\" x=\"-88.546875\" y=\"-16.5\" width=\"177.09375\" height=\"33\"></rect><g class=\"label\" transform=\"translate(-76.921875, -9)\"><foreignObject width=\"153.84375\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">3.Associate Elastic IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id4\" transform=\"translate(96.546875, 274.5)\"><rect rx=\"16.5\" ry=\"16.5\" x=\"-83.21875\" y=\"-16.5\" width=\"166.4375\" height=\"33\"></rect><g class=\"label\" transform=\"translate(-71.59375, -9)\"><foreignObject width=\"143.1875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">4.Release Elastic IP</span></div></foreignObject></g></g><g class=\"node default\" id=\"id5\" transform=\"translate(158.3203125, 358)\"><rect rx=\"17\" ry=\"17\" x=\"-95.4765625\" y=\"-17\" width=\"190.953125\" height=\"34\"></rect><g class=\"label\" transform=\"translate(-83.7265625, -9.5)\"><foreignObject width=\"167.453125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"nodeLabel\">5.Tiếp tục crawl dữ liệu</span></div></foreignObject></g></g></g></g></g></svg></div>\n<h4>Viết code để triển khai ý tưởng.</h4>\n<p> Tôi tạo một file mới đặt tên <code class=\"language-text\">aws-ip-rotator.sh</code>. Ở đây mình dùng <code class=\"language-text\">shell script</code> và <code class=\"language-text\">aws-cli</code> để viết code, các dịch vụ của aws hầu như đều có thư viện cho hầu hết các ngôn ngữ lập trình hay dùng. Nên chúng ta hoàn toàn có thể triển khai ý tưởng bằng các ngôn ngữ khác như ruby, php, nodejs,...</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n\n<span class=\"token assign-left variable\"><span class=\"token environment constant\">INSTANCE</span></span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s http://169.254.169.254/latest/meta-data/instance-id<span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">OLD_IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s http://169.254.169.254/latest/meta-data/public-ipv4<span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">OLD_ALLOCATION_ID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>aws ec2 describe-addresses --public-ips $OLD_IP --query <span class=\"token string\">\"Addresses[0].AllocationId\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">tr</span> -d <span class=\"token string\">'\"'</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">NEW_IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>aws ec2 allocate-address --query PublicIp <span class=\"token operator\">|</span> <span class=\"token function\">tr</span> -d <span class=\"token string\">'\"'</span><span class=\"token variable\">)</span></span>\naws ec2 associate-address --instance-id <span class=\"token environment constant\">$INSTANCE</span> --public-ip <span class=\"token variable\">$NEW_IP</span>\naws ec2 release-address --allocation-id <span class=\"token variable\">$OLD_ALLOCATION_ID</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>Giải thích chi tiết 6 dòng code.</h4>\n<ul>\n<li>\bDòng 3: Lấy giá trị Instance ID của EC2 hiện tại đang request.</li>\n<li>Dòng 4: Lấy địa chỉ IP hiện tại của EC2.</li>\n<li>Dòng 5: Lấy Allocation ID của IP hiện tại liên kết với EC2.</li>\n<li>Dòng 6: Tạo ra một địa chỉ IP hoàn toàn mới để thay thế cho IP hiện tại.</li>\n<li>Dòng 7: Đính kèm IP mới vào EC2.</li>\n<li>Dòng 8: Xoá IP cũ để tránh \u001dAWS tính thêm phí phát sinh.</li>\n</ul>\n<p> Vậy là chúng ta đã tạo ra một IP rotator chỉ với 6 dòng code, với đoạn code trên nó có thể hoạt động đối với EC2-Classic và cả EC2-VPC. Chúng ta cũng có thể chạy trực tiếp file code ở trên trong  dự án hoặc  cũng có thể setting một con cronjob.</p>","id":"e3ab2296-90b6-553a-be63-c728aa23da72","frontmatter":{"title":"[Aws] Tạo IP rotator cho server với Elastic IP AWS chỉ 6 dòng code","date":"21-07-2020","tags":["aws"]},"fields":{"slug":"/aws-tao-ip-rotator-cho-server-voi-elastic-ip-aws-chi-6-dong-code/"}}},{"node":{"excerpt":"Chào anh em, nếu anh em đã từng xem những video dạy iOS của kênh\nLets Build That App trên Youtube thì có lẽ không xa lạ gì với việc dựng view 100% bằng code. Xem xong mấy anh em bên Android chắc cũng…","html":"<p>Chào anh em, nếu anh em đã từng xem những video dạy iOS của kênh\n<a href=\"https://www.youtube.com/channel/UCuP2vJ6kRutQBfRmdcI92mA\"><strong><em>Lets Build That App</em></strong></a> trên Youtube thì có lẽ không xa lạ gì với việc dựng view 100% bằng code. Xem xong mấy anh em bên Android chắc cũng thắc mắc là không biết bên mình có làm được như vậy không.</p>\n<p>Câu trả lời là có, tuy nhiên do bên Android dựng view bằng XML cũng rất ngon rồi nên chẳng ai quan tâm đến việc dựng view bằng code. Đấy là trong đa số các trường hợp nhưng đôi khi sẽ có những view mặc định Android không hỗ trợ, như một view dạng hình tròn chằng hạn, khi đó chúng ta sẽ phải dùng tới thư viện hoặc tự tạo một class để vẽ view đó.</p>\n<p>Bài hôm nay sẽ hướng dẫn mọi người vẽ một view bằng code. Để bắt đầu cùng đọc qua những thuật ngữ cơ bản, bắt đầu thôi</p>\n<h1>View là gì?</h1>\n<blockquote>\n<p>This class represents the basic building block for user interface components. A View occupies a rectangular area on the screen and is responsible for drawing and event handling.  View is the base class for widgets, which are used to create interactive UI components (buttons, text fields, etc.). The ViewGroup subclass is the base class for layouts, which are invisible containers that hold other  Views (or other ViewGroups) and define their layout properties.</p>\n</blockquote>\n<p>Mình trích dẫn nguyên từ tài liệu của  <a href=\"https://developer.android.com/reference/android/view/View?authuser=1#\">Google</a> vì thấy nó cũng dễ hiểu, dịch ra sẽ làm sai lệch đi nội dung của định nghĩa.</p>\n<ul>\n<li>Đầu tiên chúng ta sẽ tạo một project mới. Chọn Empty Project</li>\n</ul>\n<p><img src=\"https://firebasestorage.googleapis.com/v0/b/tudiendanhngon-ba6bc.appspot.com/o/Image%2FLinhTinh%2FScreenshot%20(23).png?alt=media&#x26;token=bdd473a4-8b33-4856-b403-3751ca11ca3f\" alt=\"alt text\"></p>\n<hr>\n<ul>\n<li>Ngôn ngữ sử dụng là Kotlin, rồi ấn Finish</li>\n</ul>\n<p><img src=\"https://firebasestorage.googleapis.com/v0/b/tudiendanhngon-ba6bc.appspot.com/o/Image%2FLinhTinh%2FScreenshot%20(24).png?alt=media&#x26;token=827a921b-4fbb-4b1d-ac87-8584fde5ef41\" alt=\"alt text\"></p>\n<hr>\n<ul>\n<li>Sau đó tạo class tên là CircleView, class này kế thừa class View</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> <span class=\"token function\">CircleView</span> <span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> Context<span class=\"token punctuation\">,</span> attrs<span class=\"token operator\">:</span> AttributeSet<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token function\">View</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> attrs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> paint<span class=\"token operator\">:</span> Paint <span class=\"token operator\">=</span> <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">var</span> centerOfX <span class=\"token operator\">=</span>  <span class=\"token number\">340F</span>\n  <span class=\"token keyword\">var</span> centerOfY <span class=\"token operator\">=</span>  <span class=\"token number\">340F</span>\n  <span class=\"token keyword\">var</span> radiusOfCircleView <span class=\"token operator\">=</span>  <span class=\"token number\">140F</span>\n\n\n  <span class=\"token keyword\">init</span> <span class=\"token punctuation\">{</span>\n        paint<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> ContextCompat<span class=\"token punctuation\">.</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span>android<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>holo_green_light<span class=\"token punctuation\">)</span>\n        paint<span class=\"token punctuation\">.</span>strokeWidth <span class=\"token operator\">=</span> <span class=\"token number\">40f</span>\n  paint<span class=\"token punctuation\">.</span>style <span class=\"token operator\">=</span> Paint<span class=\"token punctuation\">.</span>Style<span class=\"token punctuation\">.</span>STROKE<span class=\"token comment\">// Constructor Call</span>\n  <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onDraw</span><span class=\"token punctuation\">(</span>canvas<span class=\"token operator\">:</span> Canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">drawCircle</span><span class=\"token punctuation\">(</span>centerOfX<span class=\"token punctuation\">,</span>centerOfY<span class=\"token punctuation\">,</span>radiusOfCircleView<span class=\"token punctuation\">,</span>paint<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onDraw</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<p>Trong Android Canvas là công cụ dùng để vẽ View, Paint là bút vẽ. Tạo class xong rồi, chúng ta sang bên XML khai báo để sử dụng thằng này.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-xml line-numbers\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>app</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res-auto<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>tools</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/tools<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">tools:</span>context</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>.MainActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>com.tomosia.customviewexample.CircleView</span>  <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintBottom_toBottomOf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintLeft_toLeftOf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintRight_toRightOf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">app:</span>layout_constraintTop_toTopOf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<ul>\n<li>Chúng ta sẽ thấy hiện ra một View như thế này</li>\n</ul>\n<p><img src=\"https://firebasestorage.googleapis.com/v0/b/tudiendanhngon-ba6bc.appspot.com/o/Image%2FLinhTinh%2FScreenshot%20(26).png?alt=media&#x26;token=8c3ddfbb-1770-4b33-8330-bd9998bc22e2\" alt=\"alt text\"></p>\n<hr>\n<p>Vậy là chúng ta đã hoàn thành xong bước đầu của phần tạo một custom view trong Android. Phần tiếp theo mình sẽ hướng dẫn để thêm các thuộc tính cho view.</p>","id":"a03c407c-5ee6-5a84-a22d-7d83cde6488b","frontmatter":{"title":"[Kotlin] Hướng dẫn tạo Custom View","date":"20-07-2020","tags":["kotlin","android"]},"fields":{"slug":"/kotlin-huong-dan-tao-custom-view-android/"}}},{"node":{"excerpt":"Problem Chắc hẳn ai từng động đến việc upload video đều phải đối mặt với vấn đề khi dung lượng video quá lớn, rất có thể chúng ta sẽ không thể upload mà nhận về 1 lỗi 413(request entity is too large…","html":"<p><strong>Problem</strong></p>\n<p>Chắc hẳn ai từng động đến việc upload video đều phải đối mặt với vấn đề khi dung lượng video quá lớn, rất có thể chúng ta sẽ không thể upload mà nhận về 1 lỗi 413(request entity is too large) hoặc request time out. Cách phù hợp nhất mình tìm hiểu được để giải quyết vấn đề này là chia nhỏ các file và ghép chúng lại khi quá trình tải hoàn tất. Javascript có <code class=\"language-text\">FileReader API</code> có thể giúp chúng ta đọc và chia nhỏ file. Tuy nhiên nó không hỗ trợ thực sự tốt cho các trình duyệt. Rất may là Jquery có 1 file upload plugin có thể xử lý vấn đề này khá tốt</p>\n<p><strong>Introducing jQuery File Upload Plugin</strong></p>\n<p><a href=\"https://github.com/blueimp/jQuery-File-Upload\">https://github.com/blueimp/jQuery-File-Upload</a></p>\n<p>Plugin trên có đầy đủ các tính năng mà chúng ta có thể cần để làm việc với file upload như tải nhiều file, kéo thả, confirm, ... Trong bài này chúng ta chỉ quan tâm tới việc hỗ trợ tải các file có dung lượng lớn</p>\n<p>Về cơ bản, chúng ta tạo 1 form upload đơn giản để người dùng có thể chọn file tải lên và cũng cấp 1 thanh progress bar để khách hàng có thể theo dõi tiến trình upload.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- uploads/new.html.erb --></span>\n&lt;%= form_tag uploads_url, multipart: true, id: 'fileupload' do %>\n  &lt;%= label_tag 'File:' %>\n  &lt;%= file_field_tag :upload %>\n  &lt;%= submit_tag 'Upload' %>\n&lt;% end %>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>progress-bar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>progress<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trên đây là đoạn code để tạo form upload và progress bar. Sau đó sẽ là code javascript để chia tệp thành nhiều phần nhỏ hơn và sẵn sàng cho việc upload. Lưu ý tùy chọn  <code class=\"language-text\">maxChunkSize</code>, nếu không có nó, tệp sẽ được tải lên 1 cách bình thường. Trong callback chúng ta lặp lại với từng file đã chọn(trong trường hợp việc upload nhiều file được kích hoạt) và tạo 1 post request để tạo ra 1 Upload record mới và trả về <code class=\"language-text\">id</code> cùng với <code class=\"language-text\">uploaded_size</code> như 1 JSON object.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#fileupload'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fileupload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  dataType<span class=\"token operator\">:</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span>\n  url<span class=\"token operator\">:</span> <span class=\"token string\">'/chunk_upload'</span><span class=\"token punctuation\">,</span>\n  maxChunkSize<span class=\"token operator\">:</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">index<span class=\"token punctuation\">,</span> file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        method<span class=\"token operator\">:</span> <span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span>\n        dataType<span class=\"token operator\">:</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token operator\">:</span> <span class=\"token string\">'/uploads'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> filename<span class=\"token operator\">:</span> file<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          data<span class=\"token punctuation\">.</span>formData <span class=\"token operator\">=</span> res<span class=\"token punctuation\">;</span>\n          files<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// more code</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong khi tải lên sẽ có <code class=\"language-text\">progressall</code> callback trả lại. Chúng ta có thể dựa vào đó để tính toán thanh progress bar hiển thị cho user</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#fileupload'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fileupload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// same code as above</span>\n  <span class=\"token function-variable function\">progressall</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> done <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>loaded <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> data<span class=\"token punctuation\">.</span>total\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#progress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> width<span class=\"token operator\">:</span> done <span class=\"token operator\">+</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Cuối cùng là 1 đoạn js để tải file lên khi người dùng nhấn nút upload.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#fileupload'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'submit'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  $<span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">index<span class=\"token punctuation\">,</span> file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    file<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ok, chúng ta đã xong phía client, giờ là xử lý phía server. Chúng ta sẽ làm 2 bước, đầu tiên là tạo 1 upload record trong create action để generate 1 unique uuid, thứ được sử dụng như 1 filename để tạo path column cho upload record. Nếu thành công chúng ta nối thêm nội dung đọc từ file chunk vào file với đường dẫn từ path column của upload record, nếu không thì báo lỗi.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">UploadsController</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ApplicationController</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">create</span></span>\n    filename <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:filename</span><span class=\"token punctuation\">]</span>\n    uuid <span class=\"token operator\">=</span> <span class=\"token constant\">SecureRandom</span><span class=\"token punctuation\">.</span>uuid\n    ext  <span class=\"token operator\">=</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>extname<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    dir  <span class=\"token operator\">=</span> <span class=\"token constant\">Rails</span><span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token string\">'tmp'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'upload'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_s\n    <span class=\"token constant\">FileUtils</span><span class=\"token punctuation\">.</span>mkdir_p<span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span> <span class=\"token keyword\">unless</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>exist<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span>\n\n    <span class=\"token variable\">@upload</span> <span class=\"token operator\">=</span> <span class=\"token constant\">Upload</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>\n      filename<span class=\"token punctuation\">:</span> filename<span class=\"token punctuation\">,</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">,</span> <span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>uuid<span class=\"token delimiter tag\">}</span></span><span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>ext<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>save\n      render json<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> uploaded_size<span class=\"token punctuation\">:</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>uploaded_size <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span>\n      render json<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">:</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>errors <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">chunk_create</span></span>\n    file    <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:upload</span><span class=\"token punctuation\">]</span>\n    <span class=\"token variable\">@upload</span> <span class=\"token operator\">=</span> <span class=\"token constant\">Upload</span><span class=\"token punctuation\">.</span>find_by<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:id</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>uploaded_size <span class=\"token operator\">+</span><span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span>size\n\n    <span class=\"token keyword\">if</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>save\n      <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>open<span class=\"token punctuation\">(</span><span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span> <span class=\"token string\">'ab'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">|</span>f<span class=\"token operator\">|</span> f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n      render json<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> uploaded_size<span class=\"token punctuation\">:</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>uploaded_size <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span>\n      render json<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">:</span> <span class=\"token variable\">@upload</span><span class=\"token punctuation\">.</span>errors <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">:</span> <span class=\"token number\">422</span>\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Vậy là xong, trên đây là hướng dẫn về cách upload file có kích thước lớn với , nếu bài viết có gì khó hiểu hoặc sai mong các bạn góp ý cho mình, cảm ơn tất cả các bạn!</p>\n<p><em>by Ngô Thái Minh - Tomosia Việt Nam</em></p>","id":"427d3b3b-acb3-579c-b2ff-24172ce7ba7b","frontmatter":{"title":"[Rails] Upload large file with rails","date":"20-07-2020","tags":["rails"]},"fields":{"slug":"/rails-upload-large-file-with-rails/"}}},{"node":{"excerpt":"1. Những cải tiến trong iOS 14 Ứng dụng Translate mới: Ứng dụng hỗ trợ dịch thuật mới được Apple công bố hoạt động ít nhiều giống với Google Translate và cũng khá đơn giản về mặt giao diện. Bạn có thể…","html":"<h2>1. Những cải tiến trong iOS 14</h2>\n<ul>\n<li>\n<h3>Ứng dụng Translate mới:</h3>\n<p>Ứng dụng hỗ trợ dịch thuật mới được Apple công bố hoạt động ít nhiều giống với Google Translate và cũng khá đơn giản về mặt giao diện. Bạn có thể gõ hoặc nhập trực tiếp giọng nói. Tất cả các bản dịch được thực hiện ngoại tuyến mà không cần kết nối internet. Ứng dụng này hiện hỗ trợ 11 ngôn ngữ: tiếng Ả Rập, tiếng Trung, tiếng Anh, tiếng Pháp, tiếng Đức, tiếng Ý, tiếng Nhật, tiếng Hàn, tiếng Bồ Đào Nha, tiếng Nga và tiếng Tây Ban Nha. Ứng dụng dịch thuật chính chủ này tham vọng trở thành đối thủ của Google Translate trong tương lai.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29bf4fb6449b0ee68a4a3cd56f49538b/1ef88/image-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFad+BJcD//xAAZEAEBAAMBAAAAAAAAAAAAAAADAgABBBT/2gAIAQEAAQUCZk0/oXOG6QN85VvzDkRJz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAQADAAIDAAAAAAAAAAAAAAEAAhEDITEyM//aAAgBAQAGPwLkC7hPo+JtnXYrTtnoTKGE/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAMZH/2gAIAQEAAT8hPP4BozJQ+0riLPR3lTrp62s3/9oADAMBAAIAAwAAABCjz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAAIDAAIDAAAAAAAAAAAAAAERACExUWFxkaH/2gAIAQEAAT8QPUwggIZlRIitybHBvIAGgNkhLqnmJvO+o9P5B7jxiSHp8z//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-1.jpg\"\n        title=\"image-1.jpg\"\n        src=\"/static/29bf4fb6449b0ee68a4a3cd56f49538b/29d31/image-1.jpg\"\n        srcset=\"/static/29bf4fb6449b0ee68a4a3cd56f49538b/e52aa/image-1.jpg 175w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/70ebb/image-1.jpg 350w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/29d31/image-1.jpg 700w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/9ecec/image-1.jpg 1050w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/1ef88/image-1.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>iMessage được nâng cấp:</h3>\n<p>Bây giờ người dùng có thể trả lời tin nhắn theo các chủ đề, dễ dàng mention người khác, ghim các tin nhắn... Thiết kế trò chuyện nhóm cũng được làm mới. Ở đầu các cuộc trò chuyện nhóm, người tích cực nhất trong nhóm sẽ có biểu tượng lớn hơn.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b5e488fd48adcef289c91a54ec4104d3/1ef88/image-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeqrMqwf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAMhFBQv/aAAgBAQABBQJly5AMWvW0p//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhcv/aAAgBAQAGPwJ4K1eQxcx//8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERITFhgbH/2gAIAQEAAT8hRMRxlTAjRdVM4o0RI2Xfp//aAAwDAQACAAMAAAAQcw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAHRABAQABBAMAAAAAAAAAAAAAAREAITFRsUFhcf/aAAgBAQABPxB2kik0m+zhugcA595MSFg41dM3PzoxsPEd41VdV7M//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-5.jpg\"\n        title=\"image-5.jpg\"\n        src=\"/static/b5e488fd48adcef289c91a54ec4104d3/29d31/image-5.jpg\"\n        srcset=\"/static/b5e488fd48adcef289c91a54ec4104d3/e52aa/image-5.jpg 175w,\n/static/b5e488fd48adcef289c91a54ec4104d3/70ebb/image-5.jpg 350w,\n/static/b5e488fd48adcef289c91a54ec4104d3/29d31/image-5.jpg 700w,\n/static/b5e488fd48adcef289c91a54ec4104d3/9ecec/image-5.jpg 1050w,\n/static/b5e488fd48adcef289c91a54ec4104d3/1ef88/image-5.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Đa tác vụ với nhiều cải tiến:</h3>\n<p>Trình xử lý đa tác vụ dường như được lột xác trong phiên bản iOS này. Bây giờ, khi bạn đang trong cuộc gọi, bạn vẫn có thể thao tác và sử dụng những ứng dụng khác. Chế độ Picture on Picture không còn xa lạ với người dùng android, nhưng đến phiên bản iOS này, Apple mới giới thiệu đến các tín đồ của mình....</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa6b77c793979f2b7d548a6ee0d58123/1ef88/image-9.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAejO2iUJ/8QAGxAAAwACAwAAAAAAAAAAAAAAAQIDBBIRISL/2gAIAQEAAQUCfumSW0xSTJx7qnKyGq//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAdEAACAgEFAAAAAAAAAAAAAAABEQACQRAiIzGB/9oACAEBAAY/AjyGqwJRE+Tc+8xoSrxp/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARITFBUWH/2gAIAQEAAT8hJs0Atq9t2aYm0bxp5YBBZ9S9Pbc//9oADAMBAAIAAwAAABBY3//EABcRAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQMBAT8QORy1u//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBNgy//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMVFBgdH/2gAIAQEAAT8QNawO1VXMXSeQDg6lpAhpWvcUQ0GBZldQVGRLG0fJ0Ao25//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-9.jpg\"\n        title=\"image-9.jpg\"\n        src=\"/static/fa6b77c793979f2b7d548a6ee0d58123/29d31/image-9.jpg\"\n        srcset=\"/static/fa6b77c793979f2b7d548a6ee0d58123/e52aa/image-9.jpg 175w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/70ebb/image-9.jpg 350w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/29d31/image-9.jpg 700w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/9ecec/image-9.jpg 1050w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/1ef88/image-9.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Các widget:</h3>\n<p>iOS 14 sẽ đưa các widget vào màn hình Home. Các widget mang đến thông tin cho người dùng dựa trên lịch trình hàng ngày của họ. Nâng cấp này theo mình không đáng giá, sẽ làm Home trông rất lộn xộn giống như android.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd4d87325bad2d96ec8761ba9c7a4c75/ad53c/image-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAXGYVdipP//EABkQAAIDAQAAAAAAAAAAAAAAAAEQAgMyBP/aAAgBAQABBQLp2JBX6X//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AYF//8QAGhAAAgIDAAAAAAAAAAAAAAAAARAAIUFxof/aAAgBAQAGPwIXiXxDT//EABoQAAICAwAAAAAAAAAAAAAAAAARAWEgITH/2gAIAQEAAT8hpkxLe1IRzBP/2gAMAwEAAgADAAAAEHjP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QGE//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/ELDV/8QAHRAAAQQCAwAAAAAAAAAAAAAAAQARIWEQMXGx8P/aAAgBAQABPxAgJJsJsqDAFRi5kv2tHC9l4Ggv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-3.jpg\"\n        title=\"image-3.jpg\"\n        src=\"/static/bd4d87325bad2d96ec8761ba9c7a4c75/29d31/image-3.jpg\"\n        srcset=\"/static/bd4d87325bad2d96ec8761ba9c7a4c75/e52aa/image-3.jpg 175w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/70ebb/image-3.jpg 350w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/29d31/image-3.jpg 700w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/9ecec/image-3.jpg 1050w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/ad53c/image-3.jpg 1241w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Home screen:</h3>\n<p>Lại một nâng cấp nữa iOS đã lai tạp của android. App Library mang đến một không gian mới nơi mà Apple sẽ tự động sắp xếp tất cả các ứng dụng theo thói quen sử dụng của bạn và theo các category.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/672705c08854413f7957f006188745ba/1ef88/image-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFAEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAABs4tc0qyEf//EABsQAAIBBQAAAAAAAAAAAAAAAAADAgETITM0/9oACAEBAAEFAm4guVbg7WroP//EABURAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAEDAQE/ATP/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFJ/8QAGRABAAIDAAAAAAAAAAAAAAAAAQAQEiFx/9oACAEBAAY/AtQM160wr//EABwQAAICAgMAAAAAAAAAAAAAAAERABAhsTFBwf/aAAgBAQABPyEiUkjicgIpMrS3Midvyv/aAAwDAQACAAMAAAAQb8//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBFx/9oACAEDAQE/EBY4x//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxCBX//EABsQAQEAAgMBAAAAAAAAAAAAAAERACEQMaGx/9oACAEBAAE/EFkUFGO0w3eagJF6nHv+GbmDEs3K4//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-2.jpg\"\n        title=\"image-2.jpg\"\n        src=\"/static/672705c08854413f7957f006188745ba/29d31/image-2.jpg\"\n        srcset=\"/static/672705c08854413f7957f006188745ba/e52aa/image-2.jpg 175w,\n/static/672705c08854413f7957f006188745ba/70ebb/image-2.jpg 350w,\n/static/672705c08854413f7957f006188745ba/29d31/image-2.jpg 700w,\n/static/672705c08854413f7957f006188745ba/9ecec/image-2.jpg 1050w,\n/static/672705c08854413f7957f006188745ba/1ef88/image-2.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>2. Những xu hướng UI UX mobile 2020</h2>\n<ul>\n<li>\n<h3>Neumorphism:</h3>\n<p>Là sự kết hợp của thiết kế phẳng với những thứ thực tế như kết cấu, độ sâu và bóng. Phong cách thể hiện sự ngắn gọn, thanh lịch với rất ít điểm nhấn màu sắc.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 463px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8eb0b87bafe46a80bd378977d1a34ac/ecde2/image-6.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAjABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAMCAQQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB+vK1TLI5WGjoNyD0A//EABsQAAIDAQEBAAAAAAAAAAAAAAECAAMRMjMT/9oACAEBAAEFAjrOqPtZ1R6yrkesr50C36LKuGUMBRWDP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BX//EACAQAAEEAgEFAAAAAAAAAAAAAAEAAhGBECEDEjEyUZH/2gAIAQEABj8CcOoiPS3yvNBbT6xZTqxZTpMdl5D6rUOEqQ3H/8QAIBAAAwAABgMBAAAAAAAAAAAAAAERITFRocHwQWGBkf/aAAgBAQABPyGYwlBDlaNAzFVptX6L+HIRm9sTY8jydz2Oc6UVy5iazYq1Z7kcEEZGoyP/2gAMAwEAAgADAAAAEEjKvIPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxBf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxBf/8QAIBABAAICAQQDAAAAAAAAAAAAAQARITFBUWGRwaGx8P/aAAgBAQABPxCqPxg23nJnRDbC4B5CBHIK20j1KHvf0wAwL5gqjlPnEFrVjB3bzN36zgDZqhg4dYEUa7YylkCeoumPknYw+vMNr7gAAKCf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-6.jpg\"\n        title=\"image-6.jpg\"\n        src=\"/static/e8eb0b87bafe46a80bd378977d1a34ac/ecde2/image-6.jpg\"\n        srcset=\"/static/e8eb0b87bafe46a80bd378977d1a34ac/e52aa/image-6.jpg 175w,\n/static/e8eb0b87bafe46a80bd378977d1a34ac/70ebb/image-6.jpg 350w,\n/static/e8eb0b87bafe46a80bd378977d1a34ac/ecde2/image-6.jpg 463w\"\n        sizes=\"(max-width: 463px) 100vw, 463px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Dark mode:</h3>\n<p>Điều quan trọng nhất mà DarkMode đem đến cho người dùng là gì? Là giảm mỏi mắt và giảm mức tiêu thụ pin cho thiết bị di động.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c960acee94ab55cd406df7b4aeb3f17/6a068/image-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAVgtjNwcP//EAB0QAAIBBAMAAAAAAAAAAAAAAAEDAgAEBRIREzT/2gAIAQEAAQUCcIBhO0cf53k9mtWI4R//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAACAgMBAAAAAAAAAAAAAAAAAgERIjGBUf/aAAgBAQAGPwJmrK5Kk6OuO/DZ0//EABsQAAICAwEAAAAAAAAAAAAAAAERACExQWFR/9oACAEBAAE/IUSWH1w9YUXAAID3NGGvO5j1yU7d5//aAAwDAQACAAMAAAAQPw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EFvI/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EF2f/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFRYcFx8P/aAAgBAQABPxBVORrgqE+So4PYKbZrY8iUEYe3Y3fcGo4PzMS5kXVcHk//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-4.jpg\"\n        title=\"image-4.jpg\"\n        src=\"/static/0c960acee94ab55cd406df7b4aeb3f17/29d31/image-4.jpg\"\n        srcset=\"/static/0c960acee94ab55cd406df7b4aeb3f17/e52aa/image-4.jpg 175w,\n/static/0c960acee94ab55cd406df7b4aeb3f17/70ebb/image-4.jpg 350w,\n/static/0c960acee94ab55cd406df7b4aeb3f17/29d31/image-4.jpg 700w,\n/static/0c960acee94ab55cd406df7b4aeb3f17/6a068/image-4.jpg 960w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Bold colors:</h3>\n<p>Xu hướng “Màu nổi” có cơ hội thể hiện mình khi những chiếc smartphone với màn hình chất lượng hiển thị cao đang dần trở nên phổ biến. Màu nổi và nổi bật được kết hợp thông minh, thẩm mỹ sẽ thu hút sự chú ý và gây ấn tượng với người dùng tốt hơn.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 367px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/fc0c2/image-8.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 149.14285714285717%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAgEABP/aAAwDAQACEAMQAAAB67IsdhIxmTRbWhJw7//EAB0QAAEEAwEBAAAAAAAAAAAAAAIAAQMRBBITIjL/2gAIAQEAAQUCMqckJWn9KSPo0QcwyJNYcVirdfYDabV1/8QAGxEAAgEFAAAAAAAAAAAAAAAAAAECEBESITH/2gAIAQMBAT8BfKN20ZRP/8QAHBEAAgICAwAAAAAAAAAAAAAAAAECEQMTIkFR/9oACAECAQE/AYRqVtja6L4UjVm9P//EABwQAAMAAwADAAAAAAAAAAAAAAABEQIhMRAyYf/aAAgBAQAGPwI7DWVE4dhLRz2ekN5VfH4q0b2cP//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPyGmpyl6gsMqZ3KDgXuDVuOSNy1fSAB7LZROgErIyw8EKPaZVsQDuf/aAAwDAQACAAMAAAAQb9Pz/8QAFxEBAQEBAAAAAAAAAAAAAAAAABEBYf/aAAgBAwEBPxCYjUGnF//EABwRAQACAQUAAAAAAAAAAAAAAAEAEUEhMYGx8P/aAAgBAgEBPxB003UsOESrJG7b7if/xAAeEAEBAAMAAQUAAAAAAAAAAAABEQAhMUFRYXGB8P/aAAgBAQABPxCJEQjanjeI+EUkT7w3Ro0/XCJq47TNqu4SD6zFj7qltcB6idRt9sg+omkTqX5yPBMkK0j2TBcEDTI46KN73n//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-8.jpg\"\n        title=\"image-8.jpg\"\n        src=\"/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/fc0c2/image-8.jpg\"\n        srcset=\"/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/e52aa/image-8.jpg 175w,\n/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/70ebb/image-8.jpg 350w,\n/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/fc0c2/image-8.jpg 367w\"\n        sizes=\"(max-width: 367px) 100vw, 367px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Illustrations:</h3>\n<p>Vẫn đang thống trị trong xu hướng thiết kế mobile trong vài năm trở lại đây. Chúng ta đều nhận thấy sự phát triển cực kỳ mạnh mẽ của việc sử dụng các hình ảnh minh họa trong thiết kế, các hình ảnh thu hút sự chú ý và khiến sản phẩm trở nên đặc biệt hơn.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d4dbd2fa77116b4a3fe29acd8527ce5/1ef88/image-7.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuxug5of/EABwQAAEDBQAAAAAAAAAAAAAAAAEAAjEQERITIf/aAAgBAQABBQIznwRYFa2in//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAEQABExcf/aAAgBAQAGPwIQ9p4v/8QAGRABAAMBAQAAAAAAAAAAAAAAAQAhMRFR/9oACAEBAAE/IWhBTs8i4ci6FqLBSzICQ3syf//aAAwDAQACAAMAAAAQR8//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8QiH//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCn/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFRQXH/2gAIAQEAAT8QWQoiPIOywYm74/IgCyCnJce2uQhQO8nLAABon//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-7.jpg\"\n        title=\"image-7.jpg\"\n        src=\"/static/1d4dbd2fa77116b4a3fe29acd8527ce5/29d31/image-7.jpg\"\n        srcset=\"/static/1d4dbd2fa77116b4a3fe29acd8527ce5/e52aa/image-7.jpg 175w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/70ebb/image-7.jpg 350w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/29d31/image-7.jpg 700w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/9ecec/image-7.jpg 1050w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/1ef88/image-7.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h6><em><div style=\"text-align: right\"> - by Quoc Le </div></em></h6>","id":"2c9337dd-4bda-555e-8a57-9a80f4802e9f","frontmatter":{"title":"[iOS] iOS 14 và xu hướng UI mobile 2020","date":"19-07-2020","tags":["ios"]},"fields":{"slug":"/ios-14-va-xu-huong-ui-mobile-2020/"}}},{"node":{"excerpt":"Tiếp tục chuỗi bài về git, thì ta sẽ nói về gitflow. Ta hiểu đơn giản gitflow là các quy tắc sử dụng và phối hợp git theo nhóm.\nTrong tất cả các dự án thì việc xác định gitflow của dự án đó là điều…","html":"<p>Tiếp tục chuỗi bài về git, thì ta sẽ nói về gitflow. Ta hiểu đơn giản gitflow là các quy tắc sử dụng và phối hợp git theo nhóm.\nTrong tất cả các dự án thì việc xác định gitflow của dự án đó là điều bắt buộc.</p>\n<h2>Tiền đề</h2>\n<ul>\n<li>Dựa trên mô hình của GitHub Flow. Về mô hình GitHub Flow, có thể xem bản hướng dẫn gốc của GitHub <a href=\"https://guides.github.com/introduction/flow/\">ở đây</a>.</li>\n<li>\n<p>Dựa vào yêu cầu của mỗi dự án, skill của các members trong dự án mà mô hình này có thể được sửa lại cho phù hợp với từng dự án.</p>\n<ul>\n<li>Ví dụ các dự án quá cũ, có cách vận hành gitflow khác thì không cần phải chuyển qua mô hình này.</li>\n</ul>\n</li>\n<li>Không có 1 mô hình tuyệt đối chính xác hay đúng đắn. Tất cả chỉ là tương đối.</li>\n</ul>\n<h2>Dự án trong giai đoạn develop</h2>\n<h3>Vai trò của các branch</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">master</code></p>\n<ul>\n<li>Luôn ở trạng thái có thể deploy.</li>\n<li>\n<p>Không bị fail auto test (nếu dự án có yêu cầu dùng auto test)</p>\n<ul>\n<li>nếu có vấn đề gì thì phải ưu tiên fix đầu tiên</li>\n</ul>\n</li>\n<li>Không được commit/push trực tiếp vào branch này. Branch <code class=\"language-text\">master</code> phải được bảo vệ bằng chức năng protected branchs của GitHub.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">feature-XXX</code></p>\n<ul>\n<li>tách ra từ branch <code class=\"language-text\">master</code></li>\n<li><code class=\"language-text\">XXX</code>là id của backlog ( hoặc redmine, github issue, ... tuỳ theo dự án)</li>\n<li>Dù chỉ có 1 commit cũng phải tạo pull request. Các pull request khi tạo phải có tiền tố <code class=\"language-text\">[WIP]</code> ở trước. Sau khi được hoàn thiện và sẵn sàng review thì bỏ tiền tố này đi. Các pull request phải hướng về <code class=\"language-text\">master</code>.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">feature-XXX-YYY</code></p>\n<ul>\n<li>Được tách ra từ branch <code class=\"language-text\">feature-XXX</code></li>\n<li><code class=\"language-text\">YYY</code> là tên người làm.</li>\n<li>Chỉ dùng trong trường hợp có nhiều hơn 1 người cùng dev 1 chức năng.</li>\n<li>Dù chỉ có 1 commit cũng phải tạo pull request. Các pull request khi tạo phải có tiền tố <code class=\"language-text\">[WIP]</code> ở trước. Sau khi được được hoàn thành và sẵn sàng review thì bỏ tiền tố này đi. Các pull request phải hướng về <code class=\"language-text\">feature-XXX</code>.</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2dada75d7753e0b978291fd9a4342785/e3189/GitHubFlow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACXklEQVQ4y4VTbU8TQRC+f+sP8Ef4wcRoE01MSJA3iYlfTExExBoLtgJVELSgUGxpr3fXXq/tve7t3t7j3N4VCiVxk6e3nZmd3WfmGS1NU2SQBCBF35XYbSU47ErU2xK1iwReJJGtaWxaxB50OD7/4dhvCVSbAnstDg23ljEWWKoxvKozbP5ieHsUYRxK3LU2jj2s1sZYqo7w8L2NNwcTaPZwCH/i4NSMUT7x6WJODg+fTjwIzuCFGWK4BK/AdO+TL2IM67tD/OwG6hItDEN1sOPEqJ6NFJWNY5cCQrXnQkIkyS2QTSSQUiJkHNu/R3CCJE94g0MqKYHA/oUH3WFF3YoftZmNzW2TIJ4xpTcTZjF+xHHuCIgU/10el2CxQBYqiwu1IdXQtm1YlqUczPNw9OQxxj0DQUyUyNapbKO5tqz2fhDBJ3bnL1dhfNkpiF2rQNUwCAJkXyWHRMDa24Vjj5BQICfTpN2Gc3wEQYfimCOrVvNrHfbfdpHwWk7aXF2mdCKhig6kt/ypepFOguiHyP+nKLSJeR0qBzUn5gJufN0sTGkRss5eWIyUkDdOXomdEiYkgwyCupvhahrI6V5+A3ctUO0RJyQhFsC/rFOGGIcdhg8NTyURciahaZro9XrQdR2DwUDpbErT/f4CzPhBB6C0F41NTPaeZZVE5SykCRnOsdPukkN3xPG8QuNUjrBYC7C+72JhZ0xJonw8Jxz3X3dwb62NUtnCg3cGGr0wf+HswEuZv6wzZCh9NLBcNbFStbBS66O01cNWY1T4Izwt61jcMbFQMfBos4tTIx+9f7/ZK5sZLG/qAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-flow\"\n        title=\"github-flow\"\n        src=\"/static/2dada75d7753e0b978291fd9a4342785/8c557/GitHubFlow.png\"\n        srcset=\"/static/2dada75d7753e0b978291fd9a4342785/4edbd/GitHubFlow.png 175w,\n/static/2dada75d7753e0b978291fd9a4342785/13ae7/GitHubFlow.png 350w,\n/static/2dada75d7753e0b978291fd9a4342785/8c557/GitHubFlow.png 700w,\n/static/2dada75d7753e0b978291fd9a4342785/e3189/GitHubFlow.png 1035w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Review</h3>\n<ul>\n<li>Khi tạo 1 branch mới và có commit mới thì bắt buộc phải tạo pull request và thêm prefix <code class=\"language-text\">[WIP]</code>.</li>\n<li>\n<p>Tất cả các pull request phải được review.</p>\n<ul>\n<li>Sau khi hoàn thiện xong chức năng và sẵn sàng review thì bỏ <code class=\"language-text\">[WIP]</code>đi và assign lại cho leader.</li>\n</ul>\n</li>\n<li>Sử dụng các công cụ chatwork/slack để yêu cầu được review.</li>\n<li>\n<p>Sau khi review xong thì leader merge vào và xoá branch đó đi.</p>\n<ul>\n<li>Nếu có yêu cầu phải sửa thì comment vào và assign ngược lại cho member.</li>\n<li>Leader sau khi review xong cần phải comment lại để cho members được biết. Ví dụ như LGTM, :+1:, ...</li>\n</ul>\n</li>\n</ul>\n<h3>Deploy</h3>\n<ul>\n<li>\n<p>Nếu có thay đổi trong master thì tự động deploy.</p>\n<ul>\n<li>Quản lý bằng Jenkins / CircleCI</li>\n<li>Bên web/server : sử dụng các tools deploy tự động như capistrano để tiết kiệm thời gian và giảm rủi ro.</li>\n<li>Về app thì sử dụng các tools như deploygate, testflight để deploy.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>Có nhiều dự án sử dụng chức năng tự động deploy của CircleCI rất hiệu quả. Cách làm này tiết kiệm thời gian và cải thiện workflow trong team.</p>\n</blockquote>\n<h2>Deploy lên production</h2>\n<ul>\n<li>Sử dụng branch <code class=\"language-text\">release</code> chuyên để deploy lên production.</li>\n<li>Khi deploy lên prd, tạo pull request từ branch <code class=\"language-text\">master</code> vào branch <code class=\"language-text\">release</code>. Branch <code class=\"language-text\">release</code> phải được bảo vệ bằng chức năng protected branchs của GitHub.</li>\n<li>Xác nhận sự thay đổi, nếu không có vấn đề gì thì merge vào <code class=\"language-text\">release</code>.</li>\n<li>Sau khi merge xong thì deploy lên server prd. Khuyến khích dùng deploy tự động.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4fed7c668c87427d22bb0b7aed15d9f8/33e10/release-branch.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABz0lEQVQoz5VTW08TQRTu3zS+8uaFH8CLMfgflMsDPGBVTBMFgyblosRoQIytDShKm3YVUrLbne1O57I7+3lmtl2gkDSe5MvJzpzbd77ZUpZlGMEMkY3BmvXVI4XyvsLqgcKrmsYL8h9+KXsLG2ZjSvgPqxyEeLLjY+VTgNn1Lh4R3tZZ0dAVFEIgCHowqUbN06h7CplJoZIU+hoScKFQPYzxrh5gILWtdIkJFWSModPxYBKJtW8hnn/uQgiJXl8gjC+BviMu4UcCj7fO0PjD3WTG5IVGNkY5cxMonU4gn7mGOjEF3ZEvOTGMKQ6tKAFNgRvEyWPzOElNw1heL3il7/AiFhqRziaKxAYacizX7dDzPHDORzewhBvzc2hVXiIiVox2yLi6AE3WlwlOzxn2Zx8irH3NU4mpU9n3fVifLznfS3P9DTrb27CvTEgFqRLabQ6paDJSnXOBw6VlsOOfThabeyNla9UmoCdQbvxNcNK/elYa/yMkKbd51MdMpYsNerR7zQF2j2N0o6RoqlODj785Hrw+x+peD19aHO8p5jTUFxOaYcGOLzG13ML0szbuPG3jLuH24gl2frBiiiDWLuZ+uY175Tzm1kITG997+AdxhpLPQ/IfhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"release-branch.png\"\n        title=\"release-branch.png\"\n        src=\"/static/4fed7c668c87427d22bb0b7aed15d9f8/8c557/release-branch.png\"\n        srcset=\"/static/4fed7c668c87427d22bb0b7aed15d9f8/4edbd/release-branch.png 175w,\n/static/4fed7c668c87427d22bb0b7aed15d9f8/13ae7/release-branch.png 350w,\n/static/4fed7c668c87427d22bb0b7aed15d9f8/8c557/release-branch.png 700w,\n/static/4fed7c668c87427d22bb0b7aed15d9f8/33e10/release-branch.png 844w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Fix lỗi khẩn cấp</h2>\n<p>Các lỗi khẩn cấp này không muốn gặp nhưng đôi lúc vẫn xuất hiện. Lý do vì môi trường production thường khác môi trường staging. Prd thường có ELB, S3, biến môi trường khác biệt, ...</p>\n<p>Các lỗi này cần phải fix ngay lập tức, thường thì không có thời gian để trải qua đủ các quy trình deploy.</p>\n<ul>\n<li>\n<p>hotfix-XXX</p>\n<ul>\n<li>Tách ra từ branch <code class=\"language-text\">release</code></li>\n<li><code class=\"language-text\">XXX</code>là ID của backlog hoặc redmine, ...</li>\n<li>Sau khi làm xong thì gửi pull request vào <code class=\"language-text\">release</code>, merge và deploy lên.</li>\n<li>Gửi pull request vào <code class=\"language-text\">master</code> và merge.</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf93fa3a5adf4a0c71a04e0a36f1e08a/f2d92/hotfix-branch.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACHElEQVQ4y6VTTWsTURTNPxZ0qRtBN27cFgRdqGiklIoUQUFprbYaGxtbrGn6kU4mwZmMk8zLfL2vOd73ZiakGnHhhcPMvAfnnnvOnUZRFKihF95/x7K7nVOBN12BD6cSWz2JA1eggf+otXaE5qcI97dD3N4YY6sbozGdRgh8Dz4TeL4/A0vyS5ilHOEsw/oXhsHPDEnGEdF5lHBIwfF9GGO1FSLjwjZpcCGQZylYJvGuO6ELCa0LSKUtlNYQUuHjKcM0EeX41X2aCxy5ETpObMno6s+RjaJ/lWk6iXNSK+ZnSpe+LiUUUlcdC9vVPulbKCBOcwhhiIqlzRqMMQRBAN/3yRNhO9UqS8KSPNt/gLC/h2kOuKHAwVDh6IfCsadwOFI48VWpME3JPyI1kOSVKUaExqO6cglMLtoIPJe8LvDqMMLNFx7uvh5b3NrwsbIZWDFL18aEMDP+VAFM48yec4UqTY2IzswkrIIJyI68bIlrlaZSocGFnHsWG4//EpYdWdNaGNRkNi1DRB3P325iPPLAC/MtLTJy4uLbMcafWyWJXhRChGEYwnVdSk5ebqcVevdWwPpnSInELHEhS9XO+x04Tx5WhHo+lR15kSOIabl7KVrnGVbbCZpfSVGZE6XIsXuWoTPI8Wgvx7ZTlJtcjTonrDffVGeQ4MpTBzfWXYtrzT5OvDKQx7sBrj5z6J8d4fraAHdeDsEX9rWuX07jMrkq4I+oAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hotfix-branch.png\"\n        title=\"hotfix-branch.png\"\n        src=\"/static/bf93fa3a5adf4a0c71a04e0a36f1e08a/8c557/hotfix-branch.png\"\n        srcset=\"/static/bf93fa3a5adf4a0c71a04e0a36f1e08a/4edbd/hotfix-branch.png 175w,\n/static/bf93fa3a5adf4a0c71a04e0a36f1e08a/13ae7/hotfix-branch.png 350w,\n/static/bf93fa3a5adf4a0c71a04e0a36f1e08a/8c557/hotfix-branch.png 700w,\n/static/bf93fa3a5adf4a0c71a04e0a36f1e08a/f2d92/hotfix-branch.png 1027w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Mô hình git cho phase 2nd</h2>\n<p>Phần này mình sẽ giải thích về mô hình git của dự án sau khi đã release phase 1st.\nMỗi dự án thường chia thành nhiều phase. Mỗi phase có những tính năng độc lập với nhau.\nVì sự độc lập này mà mô hình git cũng có ít nhiều thay đổi cho phù hợp.</p>\n<h3>Vai trò của các branch</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">master</code></p>\n<ul>\n<li>Là version mới nhất cho phase 2nd</li>\n<li>Ngoài ra tất cả đều giống như phần trên.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">release</code></p>\n<ul>\n<li>\n<p>Tại thời điểm kết thúc phase 1st thì được tạo branch <code class=\"language-text\">release</code> từ branch <code class=\"language-text\">master</code></p>\n<ul>\n<li>Sau khi kết thúc phase 2nd thì merge vào <code class=\"language-text\">master</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">feature-XXX</code> (branch thực hiện các chức năng của phase 2nd）</p>\n<ul>\n<li>Tách ra từ branch <code class=\"language-text\">master</code></li>\n<li>Ngoài ra tất cả đều giống như phần trên.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">bug-fix-XXX</code> (branch fix bugs cho phase 1st）</p>\n<ul>\n<li>Tách ra từ branch <code class=\"language-text\">release</code></li>\n<li><code class=\"language-text\">XXX</code>là ID của backlog, redmine, ...</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d06a16247bb741f47bae55fac6538de5/1d553/2nd-develop.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACTUlEQVQ4y4VTTW/TQBD1b+XGj+APcEP0BBKoh0ocoEBFEZX6QaESB1BK2iqRiZoocRLHTpzYu2t71/buYz/SKlElGGm03vHsm3lvdzwpFQCFUVLjY1vg843A2xbHRU/YuFIKUrn1zs3emDlzcOXO7F9y/LgV8LC2Oamxc5rg8IripMtwOSzwP0tYg+cnCxy2CY471J7xkuUKLFuiHeiu/FQ3VUHWAnVVgRYCJOc4uiEYJyVKLtYxASEqdCYMX67TrSKe0Ac1AoaLEp0xsZRELVFpbxrtUqI1SEGK2v6rGxdXSuJ2RtHVoMYa6aTwNtELXoGJZquiTZTNA7pZUTmNdcFS1DZmCnpxHGM8HmM0CkAribDVwuD9PpjOYQVHnOZISGGp0rJCuiLwd18jXywsiOnYxO8B0zRFGIaIohlGYYxiHoMO+pCmO52cab2k7sK6oVzVyPwupOBQ626ZBjS5VsNNGow3kBt7oyOvmn/cs4M0mhdiDUgpRZau7Ib3T5D1voLqJ0jzEvHK0C1B23vIkxFIqeytE1balZpvrpCGPeTXbxxgnueghNhaks1Akglq5egaKsanQx9M591pdvfQzVA0OpcXFNGk/5CyMdO4qS60ZkvGNasGIQXO/HI7T6kt4se+k8ZLkkRfSASzQrkxrDXYz/MAi8h1tXMa4dHuCE+PIjw5mKI/5zb+Jyqxcxbj5fc5Hu8F+PB7BW+5XGIwGCAIAnDO76vOJwSicO/rm7/S47XAJ+3vfsWIMuEAZwWeHU/w6mKGF+dTPbYJ/gKvO+BUc7tXkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2nd-develop.png\"\n        title=\"2nd-develop.png\"\n        src=\"/static/d06a16247bb741f47bae55fac6538de5/8c557/2nd-develop.png\"\n        srcset=\"/static/d06a16247bb741f47bae55fac6538de5/4edbd/2nd-develop.png 175w,\n/static/d06a16247bb741f47bae55fac6538de5/13ae7/2nd-develop.png 350w,\n/static/d06a16247bb741f47bae55fac6538de5/8c557/2nd-develop.png 700w,\n/static/d06a16247bb741f47bae55fac6538de5/e996b/2nd-develop.png 1050w,\n/static/d06a16247bb741f47bae55fac6538de5/1d553/2nd-develop.png 1159w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","id":"2df9cd4f-0e86-5d96-8dc9-3a555bcbedef","frontmatter":{"title":"[Git] Gitflow trong thực tế","date":"16-07-2020","tags":["git"]},"fields":{"slug":"/git-gitflow-trong-thuc-te/"}}},{"node":{"excerpt":"Trong công việc thì chúng ta cũng không lạ gì Git, và 1 trong những câu lệnh thường dùng nhất là . Tuy nhiên, không phải ai trong chúng ta cũng viết git commit 1 cách chuyên nghiệp. Thỉnh thoảng xem…","html":"<p>Trong công việc thì chúng ta cũng không lạ gì Git, và 1 trong những câu lệnh thường dùng nhất là <code class=\"language-text\">git commit</code>. Tuy nhiên, không phải ai trong chúng ta cũng viết git commit 1 cách chuyên nghiệp. Thỉnh thoảng xem <code class=\"language-text\">git log</code> mà thấy 1 list các commit chỉ có 1 từ :</p>\n<p><img src=\"https://blog.cpanel.com/wp-content/uploads/2018/06/image2018-3-14_13-49-23.png\" alt=\"alt\"></p>\n<p>Lúc suôn sẻ thì nó là 1 câu chuyện cười, còn lúc cần revert, cần cherry-pick, rebase, ... thì không còn nước mắt để khóc đâu.</p>\n<p>Vậy nên, hãy viết commit 1 cách có tâm :)).</p>\n<h1>Nguyên tắc chung</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Dòng 1 : tóm tắt nội dung thay đổi (title, summary)\nDòng 2 : dòng trống\nDòng 3 : nội dung, lý do thay đổi, thay đổi như thế nào, thay đổi ở đâu, ...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Ngôn ngữ sử dụng để viết commit thì đương nhiên là tiếng Anh rồi :)).</p>\n<h2>Dòng 1</h2>\n<p>Dòng 1 mình viết tóm tắt nội dung thay đổi, và type của commit.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[type] tóm tắt #id</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Type</h3>\n<p>Type thì có rất nhiều, nhưng tóm gọn lại thì cũng chỉ có 1 số loại sau :</p>\n<ul>\n<li><strong>fix</strong>: hay dùng nhất :)), để fix bugs</li>\n<li><strong>hotfix</strong>: để fix những bugs nghiêm trọng, khẩn cấp</li>\n<li><strong>add</strong>: thêm tính năng mới, thêm file mới</li>\n<li><strong>update</strong>: sửa lại tính năng (không phải bugs)</li>\n<li><strong>change</strong>: yêu cầu bị thay đổi</li>\n<li><strong>clean</strong>: tinh chỉnh code（kiểu như refactoring）</li>\n<li><strong>disable</strong>: tắt 1 tính năng nào đó（kiểu như comment out）</li>\n<li><strong>remove</strong>: xoá 1 tính năng, hoặc 1 file</li>\n<li><strong>upgrade</strong>: nâng version</li>\n<li><strong>revert</strong>: xoá 1 thay đổi</li>\n</ul>\n<p>Hoặc đơn giản hơn thì chỉ có 4 kiểu :</p>\n<ul>\n<li><strong>fix</strong></li>\n<li><strong>add</strong></li>\n<li><strong>update</strong></li>\n<li><strong>remove</strong></li>\n</ul>\n<h3>Tóm tắt</h3>\n<p>Phần tóm tắt thì viết đơn giản, ngắn gọn mà vẫn hiểu được nội dung nhé.\nCố gắng chỉ viết trong 1 dòng, và dùng các từ khoá của chức năng đó.</p>\n<h3>ID</h3>\n<p>ID ở đây thường là cách để link tới task của chức năng đó.</p>\n<p>Nếu dùng github thì nó là issue ID. Nếu dùng trello thì cũng là ID của task đó.</p>\n<p>Cách này để mình dễ tìm đọc lại requirement của task.</p>\n<h2>Dòng 3</h2>\n<p>Phần 3 là phần mô tả chi tiết hơn nội dung của commit.</p>\n<p>Dòng 1 là câu trả lời cho câu hỏi \"Cái gì (What)\", thì dòng 3 là câu trả lời cho những câu hỏi \"Tại sao (Why)\", \"Ở đâu(Where)\", \"Như thế nào (How)\". Đây là mô hình 3W1H khá đơn giản.</p>\n<p>Cách viết full thường dùng cho những commit trong branch chính như <code class=\"language-text\">develop</code>, <code class=\"language-text\">staging</code>, <code class=\"language-text\">master</code>.</p>\n<p>Còn trong các commit đơn giản nằm trong branch features, ta có thể dùng bản rút gọn, chỉ còn dòng 1. Tuy nhiên, hãy cố gắng đảm bảo format cho 1 dòng đó.</p>\n<p>Tổng kết lại, chúng ta sẽ có những commit dạng thế này :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[add] new post to &quot;git-commit&quot;\n\nNew post on how to write gitcommit professional.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc thế này :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[fix] some typo on new post.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>Tricks</h1>\n<p>Để đảm bảo commit đẹp, anh em nên cố gắng sử dụng rebase. Trong github, khi merge cũng có 3 options, là merge thông thường, squash merge, rebase merge. Cá nhân anh thấy rebase merge đẹp và dễ thao tác khi gặp vấn đề phức tạp sau này hơn.</p>\n<p>Sau khi dev xong 1 features, thì nên rebase lại các commit. Commit đối với dev cũng giống như \"cái răng cái tóc\", mình ở nhà thế nào cũng được, nhưng ra đường thì phải tử tế, thơm ngon :)). Rebase giống như kiểu chải lại tóc, đánh lại răng ấy :)).</p>\n<p>Anh em nên coi viết code, lập trình giống như làm thơ, mình phải chau chuốt và nghệ sĩ.</p>\n<p>Đến đây anh xin hết :)).</p>","id":"f7473c2c-a24e-5af2-9c01-93a085825510","frontmatter":{"title":"[Git] Cách viết git commit chuyên nghiệp","date":"15-07-2020","tags":["git"]},"fields":{"slug":"/git-cach-viet-git-commit-chuyen-nghiep/"}}},{"node":{"excerpt":"Vấn đề đặt ra Tạo ra một View có animation sóng trong iOS với Swift. Ý tưởng Sử dụng phương trình sóng cơ trong vật lý là: y = (2π( - )) Với: A là biên độ của sóng t là thời gian T là chu kì của sóng…","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Tạo ra một View có animation sóng trong iOS với Swift.</li>\n</ul>\n<h2>Ý tưởng</h2>\n<p>Sử dụng phương trình sóng cơ trong vật lý là:</p>\n<blockquote>\n<p>y = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\cos</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mop\">cos</span></span></span></span>(2π(<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>t</mi><mi>T</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{t}{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.169556em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824556em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> - <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>x</mi><mi>λ</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{x}{λ}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">λ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>))</p>\n</blockquote>\n<p>Với:</p>\n<ul>\n<li>A là biên độ của sóng</li>\n<li>t là thời gian</li>\n<li>T là chu kì của sóng</li>\n<li>x là toạ độ theo trục hoành của hệ toạ độ</li>\n<li>λ là bước sóng</li>\n</ul>\n<p>Ta có công thức tính T theo λ là: T = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>λ</mi><mi>v</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{λ}{v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>. Với v là vận tốc truyền sóng.</p>\n<p>Với công thức trên, ý tưởng để tạo chuyển động sóng là:</p>\n<blockquote>\n<p>Với biên độ A, bước sóng λ, chu kì T cố định, x là giá trị thay đổi trên trục hoành, và ứng với mỗi thời gian t tăng dần ta sẽ tìm được giá trị toạ độ y => ta tạo được một điểm CGPoint dùng để vẽ với UIBezierPath</p>\n</blockquote>\n<h2>Triển khai ý tưởng</h2>\n<ul>\n<li>Đầu tiên ta khởi tạo class <strong>WaveView</strong> với các thuộc tính và phương thức khởi tạo. Việc tạo ra một class riêng giúp ta có thể tái sử dụng ở nhiều ViewController khác nhau.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WaveView</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> waveHeight<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n            A <span class=\"token operator\">=</span> waveHeight\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> waveSpeed<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.5</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n            v <span class=\"token operator\">=</span> waveSpeed\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> A<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> v<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> 𝛌<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> T<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> t<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> pi <span class=\"token operator\">=</span> <span class=\"token builtin\">CGFloat</span><span class=\"token punctuation\">.</span>pi\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>clear\n        A <span class=\"token operator\">=</span> waveHeight\n        v <span class=\"token operator\">=</span> waveSpeed\n        𝛌 <span class=\"token operator\">=</span> frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">1.2</span>\n        T <span class=\"token operator\">=</span> 𝛌 <span class=\"token operator\">/</span> v\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> coder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở trên mình đã khai báo và khởi tạo các thuộc tính như biên độ A, vận tốc v, chu kì T và bước sóng λ.</p>\n<p>Tiếp theo, để vẽ sóng thì ta cần override lại method draw của UIView.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token function\">UIGraphicsGetCurrentContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">drawWave</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">drawWave</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> context<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> path <span class=\"token operator\">=</span> <span class=\"token function\">UIBezierPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> z <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> pi <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">/</span> T <span class=\"token operator\">-</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> 𝛌<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> center<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> A <span class=\"token operator\">*</span> <span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">.</span><span class=\"token function\">setStroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">.</span><span class=\"token function\">setFill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">addPath</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span>cgPath<span class=\"token punctuation\">)</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">drawPath</span><span class=\"token punctuation\">(</span>using<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở trên, vì hàm draw có thể gọi lại nhiều lần nên cần phải dùng UIGraphicsGetCurrentContext clear đi mỗi lần nó vẽ lại. Ở hàm drawWave, mình cho x thay đổi từ 0 đến rect.width từ đó dùng để tính y theo phương trình sóng cơ mình đã đề cập ở phần ý tưởng.</p>\n<p>Nếu chỉ dừng lại ở đây, thì sẽ không có animation cho sóng vì thời gian t đang được fix cứng là 0. Do đó để t có thể tăng dần theo thời gian thì ta phải dùng tới Timer.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> timer<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CADisplayLink</span><span class=\"token operator\">?</span>\n\n<span class=\"token atrule\">@objc</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">reDraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    t <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    <span class=\"token function\">setNeedsDisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">CADisplayLink</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> selector<span class=\"token punctuation\">:</span> #<span class=\"token function\">selector</span><span class=\"token punctuation\">(</span>reDraw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    timer<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token builtin\">RunLoop</span><span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> forMode<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">invalidate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token constant\">nil</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>CADisplayLink cũng giống với Timer, nó hay được dùng cho việc draw trong View vì có cơ chế tự tính thời gian repeat sao cho phù hợp với device.</p>\n<p>Cuối cùng, để sử dụng WaveView ta chỉ cần khởi tạo một instance của nó rồi addSubView vào một View trong ViewController là được. Bạn có thể tham khảo <a href=\"https://github.com/LaptrinhvaCuocsong/WaveView/blob/master/WaveViewDemo/WaveViewDemo/ViewController.swift\">tại đây</a></p>\n<p>Mình có capture video kết quả, bạn có thể download file video <a href=\"https://github.com/LaptrinhvaCuocsong/WaveView/blob/master/Demo/Screen%20Recording%202020-07-05%20at%2016.38.17.mov.zip\">tại đây</a> nhé.</p>\n<p>Như vậy, mình đã trình bày xong cách để tạo ra một chuyển động sóng đơn giản sử dụng phương trình sóng cơ. Nếu bạn có cách nào khác thì hãy chia sẻ hoặc comment phía dưới nhé 😄.</p>\n<p>Happy reading!!!</p>","id":"fa161d71-671a-562b-9a7b-110a61e332b2","frontmatter":{"title":"[Swift] Làm sao để tạo một chuyển động sóng đơn giản trong iOS với Swift","date":"04-07-2020","tags":["swift","ios"]},"fields":{"slug":"/swift-tao-animation-song-trong-ios-voi-swift/"}}},{"node":{"excerpt":"1. Cài đặt blog dưới local 1.1. Contributor Trở thành contributor cho . Fork repository TOMOSIA-VIETNAM về tài khoản github Clone repository sau khi fork Di chuyển sang folder  1.2. Setup project…","html":"<h2>1. Cài đặt blog dưới local</h2>\n<h3>1.1. Contributor</h3>\n<p>Trở thành contributor cho <code class=\"language-text\">TOMOSIA BLOG</code>.</p>\n<p>Fork repository <a href=\"https://github.com/TOMOSIA-VIETNAM/tomoblo\">TOMOSIA-VIETNAM</a> về tài khoản github</p>\n<p>Clone repository sau khi fork</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> clone git@github.com:Nguyenanh/tomoblo.git</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Di chuyển sang folder <code class=\"language-text\">tomoblo</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> tomoblo</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>1.2. Setup project</h3>\n<p>Setup <a href=\"https://www.gatsbyjs.org/\">gatsby.js</a>. Yêu cầu: Node version 12.x</p>\n<p>Cài đặt gatsby CLI package</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> global <span class=\"token function\">add</span> gatsby-cli</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Cài đặt các packages được dùng trong blog</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">install</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Run dự án</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby develop <span class=\"token punctuation\">[</span>-p <span class=\"token operator\">&lt;</span>PORT<span class=\"token operator\">></span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Mở trình duyệt và truy cập với port default là 8000: <a href=\"http://localhost:8000/\">http://localhost:8000/</a></p>\n<h2>2. Viết bài và đăng bài</h2>\n<h3>2.1. Tạo bài post</h3>\n<p>Chạy lệnh bên dưới để tạo bài viết với tiêu đề mong muốn</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> post <span class=\"token string\">\"Tiêu đề bài viết\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau khi chạy xong chúng ta sẽ có một file <code class=\"language-text\">posts/tieu-de-bai-viet.md</code> như thế này:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Tiêu đề bài viết\"</span>\n<span class=\"token key atrule\">date</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2020-06-24\"</span>\n<span class=\"token key atrule\">published</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span>\n<span class=\"token punctuation\">---</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>snippet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">|</span> Mô tả ở đây\n<span class=\"token punctuation\">|</span> Hoặc có thể viết trên nhiều dòng</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>2.2. Viết bài</h3>\n<p>Để viết bài chúng ta sẽ thêm nội dung vào phía dưới <code class=\"language-text\">---</code>, có 2 cách để viết content.</p>\n<ul>\n<li>Sử dụng editor và setup thêm một số package. ví dụ mình đang sử dụng <code class=\"language-text\">atom</code> và cài đặt thêm  <a href=\"https://atom.io/packages/markdown-preview\">markdown-preview</a> package.</li>\n<li>Sử dụng editor online <a href=\"https://stackedit.io/app\">stackedit.io</a>\nđể hỗ trợ viết bài và ta có thể viết biểu thức toán học  <a href=\"https://katex.org/\">katex</a> và <a href=\"https://mermaidjs.github.io/\">UML diagrams</a></li>\n</ul>\n<p>Sau khi viết bài xong truy cập vào <code class=\"language-text\">http://localhost:8000/tieu-de-bai-viet</code> để xem kết quả.</p>\n<h3>2.3. Đăng bài</h3>\n<p>Khi đã hoàn thành viết bài hãy <code class=\"language-text\">\u001dpush</code> bài viết lên repository.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> --all\n$ <span class=\"token function\">git</span> commit -m <span class=\"token string\">'Tiêu đề bài viết'</span>\n$ <span class=\"token function\">git</span> push origin master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Vào repository của <a href=\"https://github.com/TOMOSIA-VIETNAM/tomoblo\">TOMOSIA-VIETNAM</a> để tạo Pull Request</p>\n<p>Sau khi pull request được merge vào <code class=\"language-text\">TOMOSIA-VIETNAM/tomoblo</code> chờ vài phút thì bài viết sẽ được hiển thị lên <a href=\"http://blog.tomosia.com/\">http://blog.tomosia.com/</a>.</p>\n<h2>3. Blockcode</h2>\n<p><strong>Thêm description cho bài viết</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/59222278/91420858-6919a380-e87f-11ea-8fe4-d3cdbc81ad42.png\" alt=\"image\"></p>\n<p><strong>Syntax:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[snippet]]\n| Dòng thứ nhất\n| ...\n| Dòng cuối cùng</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Thêm author vào cuối bài viết</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/59222278/91420710-3f607c80-e87f-11ea-99f0-2cce9740ff31.png\" alt=\"image\"></p>\n<p><strong>Syntax:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[author | Tên tác giả ]]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ví dụ: <code class=\"language-text\">[[author | Minh Tang Q. ]]</code></p>\n<p><strong>Thêm image với caption</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/59222278/91420581-1b9d3680-e87f-11ea-85e1-5fd5613fc8a5.png\" alt=\"image\"></p>\n<p><strong>Syntax:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[image_caption | Nội dung caption ]]\n| markdown_image</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[image_caption | Nguồn từ: https://bitsofco.de/why-and-how-to-use-webp-images-today/ ]]\n| ![Compare](https://user-images.githubusercontent.com/59222278/85985771-616f8700-ba15-11ea-9f7c-0b2161fa86f9.png)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2>4. Tags</h2>\n<p>Một số tags được liệt kê trong blog</p>\n<p>Tech Tags có thể sử dụng trong blog :</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># Fontend</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> javascript\n  <span class=\"token punctuation\">-</span> react\n  <span class=\"token punctuation\">-</span> nodejs\n\n<span class=\"token comment\"># Backend</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ruby\n  <span class=\"token punctuation\">-</span> rails\n  <span class=\"token punctuation\">-</span> php\n  <span class=\"token punctuation\">-</span> laravel\n  <span class=\"token punctuation\">-</span> cakephp\n\n<span class=\"token comment\"># App</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> swift\n  <span class=\"token punctuation\">-</span> ios\n  <span class=\"token punctuation\">-</span> kotlin\n  <span class=\"token punctuation\">-</span> android\n\n<span class=\"token comment\"># Others</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> git\n  <span class=\"token punctuation\">-</span> aws\n  <span class=\"token punctuation\">-</span> instagram\n  <span class=\"token punctuation\">-</span> facebook</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>5. Syncing a fork</h2>\n<p>Bước 1: Add upstream đến repo đã clone (\"origin\")</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">git remote add upstream git@github.com:TOMOSIA-VIETNAM/tomoblo.git\n&gt; remote: Enumerating objects: 49, done.\n&gt; remote: Counting objects: 100% (49/49), done.\n&gt; remote: Compressing objects: 100% (27/27), done.\n&gt; remote: Total 49 (delta 29), reused 37 (delta 21), pack-reused 0\n&gt; Unpacking objects: 100% (49/49), done.\n&gt; From github.com:TOMOSIA-VIETNAM/tomoblo\n&gt;  * branch            master     -&gt; FETCH_HEAD\n&gt;  * [new branch]      master     -&gt; upstream/master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bước 2: Fetch các commit và branch từ upstream</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ git fetch upstream\n&gt; remote: Counting objects: 75, done.\n&gt; remote: Compressing objects: 100% (53/53), done.\n&gt; remote: Total 62 (delta 27), reused 44 (delta 9)\n&gt; Unpacking objects: 100% (62/62), done.\n&gt; From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY\n&gt;  * [new branch]      master     -&gt; upstream/master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bước 3: Checkout về nhánh master trong project đã fork</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ git checkout master\n&gt; Switched to branch &#39;master&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Bước 4: Merge nhánh thay đổi từ <code class=\"language-text\">upstream/master</code> vào nhánh <code class=\"language-text\">master</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ git merge upstream/master\n&gt; Updating a422352..5fdff0f\n&gt; Fast-forward\n&gt;  README                    |    9 -------\n&gt;  README.md                 |    7 ++++++\n&gt;  2 files changed, 7 insertions(+), 9 deletions(-)\n&gt;  delete mode 100644 README\n&gt;  create mode 100644 README.md</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href=\"https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/syncing-a-fork\">Link tham khảo</a></p>","id":"539009a4-eb44-5382-8281-4009020e6083","frontmatter":{"title":"Hướng dẫn tạo bài viết mới","date":"03-07-2020","tags":[null]},"fields":{"slug":"/huong-dan-tao-bai-viet-moi/"}}},{"node":{"excerpt":"Vấn đề đặt ra Thứ nhất: Làm thế nào để hiển thị 100 tấm ảnh/1 trang một cách nhanh nhất? Đảm bảo tối ưu tốc độ load ảnh, nâng cao hiệu quả SEO Google và trải nghiệm người dùng tốt hơn. Thứ hai: Để…","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Thứ nhất: Làm thế nào để hiển thị 100 tấm ảnh/1 trang một cách nhanh nhất? Đảm bảo tối ưu tốc độ load ảnh, nâng cao hiệu quả SEO Google và trải nghiệm người dùng tốt hơn.</li>\n<li>Thứ hai: Để người dùng \u001dupload ảnh lên server với dung lượng trên 500MB. Nếu để web server xử lý quá trình nhận dữ liệu từ user upload lên, sau đó convert đối với file có dung lượng lớn thì không hề ổn chút nào. Vậy để giảm tải cho web server thì ta sẽ sử dụng serverless trong tình huống này. <a href=\"https://aws.amazon.com/vi/serverless/\">(Vì sao sử dụng serverless?)</a></li>\n</ul>\n<h2>Sự trổi dậy của Webp</h2>\n<p><img src=\"https://miro.medium.com/max/1698/1*fRLZo9RWFkC2rkHXJzrdQA.png\" alt=\"Compare\"></p>\n<p>Định dạng WebP đã trở nên ngày càng phổ biến kể từ khi Google giới thiệu nó vào năm 2010. Điểm mạnh lớn nhất của nó nằm ở khả năng tạo kích thước tệp nhỏ hơn nhiều trong khi vẫn duy trì chất lượng hình ảnh tương tự.</p>\n<p>Định dạng Webp sẽ giúp bạn giảm 26%  dung lượng so với PNG. và  25 – 34% so với định dạng JPEG, mà vẫn vẫn giữ được chất lượng hiển thị. Điều này giúp web giảm thời gian tải ảnh, tăng tốc độ trải nghiệm người dùng.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Nguồn từ: <a href=\"https://bitsofco.de/why-and-how-to-use-webp-images-today/\">https://bitsofco.de/why-and-how-to-use-webp-images-today/</a> </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85985771-616f8700-ba15-11ea-9f7c-0b2161fa86f9.png\" alt=\"Compare\"></p></div></div>\n<p>Tuy nhiên với định dạng Webp thì không phải tất cả các trình duyệt đều hỗ trợ. Hiện tại, WebP thực sự được hỗ trợ trong các phiên bản mới nhất của Google Chrome, Firefox, Edge, trình duyệt Opera, Trình duyệt Android và Samsung internet.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">WebP support table: <a href=\"https://bitsofco.de/why-and-how-to-use-webp-images-today/\">https://bitsofco.de/why-and-how-to-use-webp-images-today/</a> </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85986227-19049900-ba16-11ea-8707-5e09c467ba4f.png\" alt=\"Compare\"></p></div></div>\n<h2>Triển khai ý tưởng</h2>\n<p>Ở browser, khi người dùng upload ảnh thì web server sẽ có nhiệm vụ gián tiếp nhận hình ảnh, xác thực và đẩy ảnh lên S3 để lưu trữ. Khi S3 nhận thấy rằng có ảnh mới được đẩy lên sẽ gọi (trigger) đến lambda để tiến hành convert sang dạng webp. Sau khi convert ảnh thì sẽ được lưu tại thư mục mới mà ta chỉ định (dĩ nhiên ta sẽ không override lại ảnh gốc mà user đẩy lên, mà là tạo ra 1 file ảnh thumb với định dạng webp). Trong quá trình  Lambda xử lý ta có thể dùng cloudWatch để debug.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Diagram S3 Lambda </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85989062-30458580-ba1a-11ea-9a22-4dad722102d8.png\" alt=\"Diagram S3 Lambda\"></p></div></div>\n<p>Vậy để chuyển đổi ảnh sang định dạng Webp thì chúng ta có thể dùng <a href=\"https://imagemagick.org/index.php\">imageMagick</a> hoặc <a href=\"https://developers.google.com/speed/webp/docs/cwebp\">cwebp</a>.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-body\"><p><img src=\"https://miro.medium.com/max/500/1*_TeG6-eUitTR_l3SKpJ5Ow.jpeg\" alt=\"LEGENDARY\"></p></div></div>\n<h2>Thực hiện</h2>\n<h3>1. Ở màn hình console Cloud AWS</h3>\n<p>Truy cập IAM, chọn roles và tạo full quyền S3 và CloudWatch để Lambda có thể lấy dữ liệu từ S3 và ghi log vào cloudWatch. Ở đây ta đặt tên là <code class=\"language-text\">full-s3-logs</code></p>\n<p><img src=\"https://i.imgur.com/Rew8ydu.png\"></p>\n<p>Chuẩn bị 1 cặp <code class=\"language-text\">access_key_id</code> và <code class=\"language-text\">secret_key_id</code>. Nếu chưa có hãy click vào <em>Username > My security Credentials > Access keys > Tiến hành tạo key</em> (Nên download file csv về máy, vì key sau khi tạo ra sẽ không thể khôi phục lại nếu mất). Hãy nhớ bảo mật key này, không được public.</p>\n<p>Truy cập vào trang  <a href=\"https://serverlessrepo.aws.amazon.com/applications\">https://serverlessrepo.aws.amazon.com/applications</a> tìm libraries  <a href=\"https://serverlessrepo.aws.amazon.com/applications/arn:aws:serverlessrepo:us-east-1:145266761615:applications~image-magick-lambda-layer\">image-magick-lambda-layer</a>. Và click nút deploy để cài đặt thư viện <em>imagemagick</em> cho serverless.</p>\n<p><img src=\"https://i.imgur.com/9d8kx1C.png\"></p>\n<h3>2. Ở môi trường Local</h3>\n<p>Cài đặt  <a href=\"https://www.serverless.com/\">serverless framework</a>  bằng npm:  <code class=\"language-text\">npm i serverless</code></p>\n<p>Chạy lệnh:  <code class=\"language-text\">serverless create -t aws-ruby -p image-resizer&lt;:Tên Project&gt;</code>  để tạo project serverless viết bằng ngôn ngữ ruby</p>\n<p>Chạy lệnh:  <code class=\"language-text\">bundle init</code>  để tạo ra Gemfile. Ở đây ta dùng 2 gem <code class=\"language-text\">aws-sdk</code> và <code class=\"language-text\">minimagick</code></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># Gemfile</span>\nsource 'https<span class=\"token punctuation\">:</span>//rubygems.org'\n\ngit_source(<span class=\"token punctuation\">:</span>github) <span class=\"token punctuation\">{</span><span class=\"token punctuation\">|</span>repo_name<span class=\"token punctuation\">|</span> \"https<span class=\"token punctuation\">:</span>//github.com/<span class=\"token comment\">#{repo_name}\" }</span>\n\ngem 'aws<span class=\"token punctuation\">-</span>sdk<span class=\"token punctuation\">-</span>s3'<span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 1.30.0'</span>\ngem 'mini_magick'<span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 4.9.0'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hãy check version ruby trước khi thực hiện lệnh bundle. Hãy xác định rằng serverless sử dụng \u001dversion ruby nào thì dưới local lúc bundle phải sử dụng version ruby giống như thế. Ở đây dùng rvm nên ta có lệnh  <code class=\"language-text\">rvm use 2.7.0</code>  để thiết lập phiên bản ruby.</p>\n<p>Chạy lệnh:  <code class=\"language-text\">bundle install --path vendor/bundle</code> để bundle vào thư mục dự án</p>\n<p>Có nhiều cách để cài đặt credential dưới local  <a href=\"https://www.serverless.com/framework/docs/providers/aws/guide/credentials/\" title=\"Hướng dẫn cài đặt credential\">(Tham khảo thêm)</a>. Ở đây ta dùng cách đơn giản nhất là export biến trực tiếp tại 1 session tab terminal (nếu tắt tab đi thì hết hiệu lực). Gõ lệnh  <code class=\"language-text\">export AWS_SECRET_ACCESS_KEY=secret_keys</code>  và  <code class=\"language-text\">export AWS_ACCESS_KEY_ID=access_key</code>.</p>\n<p>Sau các bước chuẩn bị ở trên thì trong project sẽ gồm các file: <em>Gemfile, serverless.yml, handler.rb và thư mục vendor/bundle/ruby/2.7.0</em></p>\n<h3>Code</h3>\n<p><em>handler.rb:</em>  File này sẽ là endpoint để lambda gọi tới. Nó sẽ có 2 params truyền vào là event và context</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">load_path <span class=\"token operator\">=</span> <span class=\"token builtin\">Dir</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/opt/bundle/ruby/2.7.0/gems/**/lib\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token variable\">$LOAD_PATH</span><span class=\"token punctuation\">.</span>unshift<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>load_path<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">require</span> <span class=\"token string\">'converter'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ImageHandler</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span></span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">:</span><span class=\"token punctuation\">)</span>\n    event <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"Records\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>first\n    bucket <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"s3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"bucket\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span>\n    filename <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"s3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"object\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"key\"</span><span class=\"token punctuation\">]</span>\n\n    file <span class=\"token operator\">=</span> <span class=\"token constant\">Converter</span><span class=\"token punctuation\">.</span>from_s3<span class=\"token punctuation\">(</span>bucket<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n    file<span class=\"token punctuation\">.</span>convert2webp\n    file<span class=\"token punctuation\">.</span>upload_file<span class=\"token punctuation\">(</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string\">'BUCKET_DEST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo 1 file <em>converter.rb:</em> File này dùng để \u001dlấy image từ s3, tiến hành convert và upload ngược lại lên s3.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string\">\"aws-sdk-s3\"</span>\n<span class=\"token keyword\">require</span> <span class=\"token string\">\"mini_magick\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Converter</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">from_s3</span></span><span class=\"token punctuation\">(</span>bucket_name<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n    puts <span class=\"token string\">'==###== Downloading image from S3'</span>\n    s3 <span class=\"token operator\">=</span> <span class=\"token constant\">Aws</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">S3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Resource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    object <span class=\"token operator\">=</span> s3<span class=\"token punctuation\">.</span>bucket<span class=\"token punctuation\">(</span>bucket_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n\n    tmp_filename <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>filename<span class=\"token delimiter tag\">}</span></span>\"</span>\n    object<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>response_target<span class=\"token punctuation\">:</span> tmp_filename<span class=\"token punctuation\">)</span>\n\n    puts  <span class=\"token string\">\"==###== Successfully downloaded\"</span>\n\n    <span class=\"token constant\">Converter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while downloading: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    extname <span class=\"token operator\">=</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>extname<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@filename</span> <span class=\"token operator\">=</span> filename\n    <span class=\"token variable\">@basename</span> <span class=\"token operator\">=</span> filename<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>extname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first\n    <span class=\"token variable\">@tmp_file</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>filename<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">convert2webp</span></span>\n    <span class=\"token variable\">@converted_filename</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@basename</span><span class=\"token delimiter tag\">}</span></span>.webp\"</span>\n    <span class=\"token variable\">@converted_tmp_file</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@converted_filename</span><span class=\"token delimiter tag\">}</span></span>\"</span>\n\n    puts <span class=\"token string\">\"==###== Converting the image <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@tmp_file</span><span class=\"token delimiter tag\">}</span></span> to <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@converted_tmp_file</span><span class=\"token delimiter tag\">}</span></span>\"</span>\n\n    <span class=\"token constant\">MiniMagick</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Tool</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Convert</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>convert<span class=\"token operator\">|</span>\n      convert <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span> <span class=\"token variable\">@tmp_file</span>\n      convert <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span> <span class=\"token variable\">@converted_tmp_file</span>\n    <span class=\"token keyword\">end</span>\n    puts  <span class=\"token string\">\"==###== Successfully converted\"</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while converting: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">upload_file</span></span><span class=\"token punctuation\">(</span>dest_bucket<span class=\"token punctuation\">)</span>\n    puts <span class=\"token string\">'==###== Uploading image to S3'</span>\n\n    s3 <span class=\"token operator\">=</span> <span class=\"token constant\">Aws</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">S3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Resource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    object <span class=\"token operator\">=</span> s3<span class=\"token punctuation\">.</span>bucket<span class=\"token punctuation\">(</span>dest_bucket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">(</span><span class=\"token variable\">@converted_filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>upload_file<span class=\"token punctuation\">(</span><span class=\"token variable\">@converted_tmp_file</span><span class=\"token punctuation\">)</span>\n    puts  <span class=\"token string\">\"==###== Successfully uploaded\"</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while uploading: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>serverless.yml:</em> File config cho framework</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp\n\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> your<span class=\"token punctuation\">-</span>images\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> ruby2.7\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>role/full<span class=\"token punctuation\">-</span>s3<span class=\"token punctuation\">-</span>logs\n\n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">handle_convert</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.ImageHandler.process\n    <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> GemsLambdaLayer<span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>lambda<span class=\"token punctuation\">:</span>us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>layer<span class=\"token punctuation\">:</span>image<span class=\"token punctuation\">-</span>magick<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">BUCKET_DEST</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n    <span class=\"token key atrule\">memorySize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> <span class=\"token comment\"># in MB</span>\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">900</span> <span class=\"token comment\"># in seconds</span>\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">s3</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.source<span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>ObjectCreated<span class=\"token punctuation\">:</span>*\n<span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> vendor/<span class=\"token important\">**</span>\n   <span class=\"token punctuation\">-</span> Gemfile\n   <span class=\"token punctuation\">-</span> Gemfile.lock\n\n<span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gems</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> vendor\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Project's vendor\n\n<span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ConvertImage</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>S3<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Bucket\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">BucketName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.dest<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Cuối cùng thì chạy lệnh  <code class=\"language-text\">serverless deploy</code>. Framework sẽ tiến hành tạo cloudformation trên AWS và Cloudformation sẽ tự động build serverless lambda theo những gì ta đã cấu hình trong file serverless.yml</p>\n<h2>Giải thích</h2>\n<p>Trong này chỉ có file serverless.yml là cần để giải thích từng đoạn code, còn file ruby thì chúng ta đọc củng có thể nắm được nội dung rồi.</p>\n<p><strong>Đoạn 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> your<span class=\"token punctuation\">-</span>images\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dùng để tạo biến tham chiếu cho bên dưới sử dụng. Ở đây ta có 2 tham chiếu là source và dest. Cách gọi thì syntax: <code class=\"language-text\">${self.custom.bucket.source}</code> và  <code class=\"language-text\">${self:custom.bucket.dest}</code></p>\n<p><strong>Đoạn 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> ruby2.7\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>role/full<span class=\"token punctuation\">-</span>s3<span class=\"token punctuation\">-</span>logs</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>name:</strong>  Sử dụng dịch vụ AWS</p>\n<p><strong>runtime:</strong>  Chạy phiên bản ruby2.7</p>\n<p><strong>region:</strong>  Region chạy lambda</p>\n<p><strong>role:</strong>  Do trước đó ta đã tạo role rồi, nên ở đây ta chỉ cần link đến là được. Còn không thì ta vẫn có thể tạo ở trong này. Có thể tham khảo thêm tại trang chủ serverless.</p>\n<p><strong>Đoạn 3</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">handle_convert</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.ImageHandler.process\n    <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> GemsLambdaLayer<span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>lambda<span class=\"token punctuation\">:</span>us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>layer<span class=\"token punctuation\">:</span>image<span class=\"token punctuation\">-</span>magick<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">BUCKET_DEST</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n    <span class=\"token key atrule\">memorySize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> <span class=\"token comment\"># in MB</span>\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">900</span> <span class=\"token comment\"># in seconds</span>\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">s3</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.source<span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>ObjectCreated<span class=\"token punctuation\">:</span>*</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>functions:</strong>  Ở đây ta chỉ định nghĩa 1 function là <code class=\"language-text\">handle_convert</code>. Ngoài ra củng có thể define nhiều function hơn</p>\n<p><strong>handler:</strong>  Sẽ define endpoint để lambda trigger  <code class=\"language-text\">handler(tên file).ImageHandler(tên class).process(tên method)</code></p>\n<p><strong>layers:</strong>  Chúng ta sử dụng 2 lớp layer để phục vụ cho việc convert, lớp layer đầu tiên có tên là GemsLambdaLayer (layer này sẽ đề cập ở đoạn 5). Layer này chưa thư mục bundle. Function này muốn tham chiếu đến layer thì sử dụng syntax <code class=\"language-text\">{Ref: TenLayer&lt;Viết theo kiểu CamelCase&gt;}</code></p>\n<p>Layer thứ 2 là 1 đường link arn:aws. Do bước trên ta có sử dụng 1 layer có sẵn của AWS là image-magick-lambda nên ta sẽ pasted đường link layer đó vào đây.</p>\n<p><strong>environment:</strong>  Khai báo tên biến môi trường</p>\n<p><strong>memorySize:</strong>  Khai báo lượng Ram để lambda xử lý</p>\n<p><strong>timeout:</strong>  Thời gian giới hạn xử lý. Nếu ta để Ram quá ít hoặc timeout quá ít thì lambda sẽ không thực hiện được. Nhưng để nhiều quá thì lại tốn phí (bởi vì lambda sẽ dựa vào 2 tiêu chí này để tính tiền), cho nên hãy cân nhắc sao cho phù hợp.</p>\n<p><strong>events:</strong>  Ở đây ta muốn hướng đến là S3 với bucket là  your-images. Sự kiện khi có 1 object được tạo thì sẽ trigger đến lambda.</p>\n<p><strong>Đoạn 4</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> vendor/<span class=\"token important\">**</span>\n   <span class=\"token punctuation\">-</span> Gemfile\n   <span class=\"token punctuation\">-</span> Gemfile.lock</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mục đích là ta không muốn đẩy các file bên dưới lên serverless.</p>\n<p><strong>Đoạn 5</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gems</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> vendor\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Project's vendor</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở dưới local khi ta bundle thì sẽ tạo ra thư mục vendor. Vậy ta sẽ dùng vendor này để làm 1 lớp Layer. Ở đây mình đặt tên layer là  <code class=\"language-text\">gems</code>  Cho nên khi reference thì ta phải viết cho đúng syntax mà framework yêu cầu, tức là viết dạng camelCase với suffix là  <code class=\"language-text\">LambdaLayer</code>. Cho nên dở đoạn 3 ta mới ghi là <code class=\"language-text\">{Ref: GemsLambdaLayer}</code></p>\n<p><strong>Đoạn 6</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ConvertImage</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>S3<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Bucket\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">BucketName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.dest<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dùng để tạo 1 bucket đích. Để sau khi xử lý convert xong thì ta upload vào bucket này</p>\n<h2>Lời kết</h2>\n<p>Trong bài này mình đã hướng dẫn và giải thích chi tiết, hi vọng khi thực hiện sẽ không phát sinh lỗi. Nếu có thì chúng ta có thể xem log trong Cloudwatch để fix dần thôi. Chúc các bạn thành công.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Minh Tang Q. </div><div class=\"custom-block-body\"></div></div>","id":"484d6a95-13ea-5d51-8ff9-1f0a993668ab","frontmatter":{"title":"[Aws] Converting a image to WebP in AWS Lambda using Ruby","date":"29-06-2020","tags":["ruby","aws"]},"fields":{"slug":"/aws-su-dung-serverless-de-chuyen-doi-anh-sang-dinh-dang-webp-bang-ruby/"}}},{"node":{"excerpt":"Vấn đề đặt ra Bạn đang làm việc với API của Facebook, những plugin của Facebook. Nhưng khi deploy code lên staging để kiểm tra thì lại nhận được lỗi là API của Facebook chỉ hỗ trợ localhost và domain…","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Bạn đang làm việc với API của Facebook, những plugin của Facebook. Nhưng khi deploy code lên staging để kiểm tra thì lại nhận được lỗi là API của Facebook chỉ hỗ trợ localhost và domain được cài đặt HTTPS (SSL certificate). </li>\n<li>Có nhiều loại chứng chỉ SSL cung cấp các mức độ bảo mật khác nhau. Chúng ta có thể mua một chứng chỉ SSL tại Namecheap với các mức giá khác nhau. Nhưng trong bài viết này sẽ trình bày một cách để cài đặt HTTPS cho domain một cách miễn phí.</li>\n</ul>\n<h2>Chuẩn bị</h2>\n<ul>\n<li>1 server AWS EC2 Ubuntu 18.04 + Apache2</li>\n<li>\n<p>VPS EC2 đã được mở sẵn port 80 và port 443</p>\n<h2>Cách làm</h2>\n</li>\n</ul>\n<h4>1. Cài đặt Apache:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> apache2 -y\n<span class=\"token function\">sudo</span> a2enmod rewrite\n<span class=\"token function\">sudo</span> a2enmod ssl\n<span class=\"token function\">sudo</span> a2enmod headers\n<span class=\"token function\">sudo</span> systemctl restart apache2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>2. Cài đặt thư viện Certbot:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> software-properties-common\n<span class=\"token function\">sudo</span> apt-apt-repository ppa:certbot/certbot\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> certbot python-certbot-apache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>3. Cho phép HTTPS thông qua tường lửa:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> ufw allow <span class=\"token string\">'Apache Full'</span>\n$ <span class=\"token function\">sudo</span> ufw delete allow <span class=\"token string\">'Apache'</span>\n$ <span class=\"token function\">sudo</span> ufw status</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Bạn sẽ nhận đươc kết quả như bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Output\nStatus: active\nTo                         Action      From\n--                         ------      ----\nOpenSSH                    ALLOW       Anywhere                  \nApache Full                ALLOW       Anywhere                  \nOpenSSH (v6)               ALLOW       Anywhere (v6)             \nApache Full (v6)           ALLOW       Anywhere (v6)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>4. Cài đặt HTTPS cho domain:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot --apache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Bước này sẽ yêu cầu bạn nhập email, email này sẽ được dùng để làm mới chứng chỉ SSL khi hết hạn.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Saving debug log to /var/log/letsencrypt/letsencrypt.log\nPlugins selected: Authenticator apache, Installer apache\nEnter email address <span class=\"token punctuation\">(</span>used <span class=\"token keyword\">for</span> urgent renewal and security notices<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>Enter <span class=\"token string\">'c'</span> to\ncancel<span class=\"token punctuation\">)</span>: you@your_domain</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi nhập Email, bạn cần xác nhận tuân thủ quy định của dịch vụ Let’s Encrypt. Chọn A để tiếp tục.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nPlease <span class=\"token builtin class-name\">read</span> the Terms of Service at\nhttps://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must\nagree <span class=\"token keyword\">in</span> order to register with the ACME server at\nhttps://acme-v02.api.letsencrypt.org/directory\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">)</span>gree/<span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span>ancel: A</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Tiếp theo, bạn sẽ được hỏi liệu bạn có muốn chia sẻ email của mình với Electronic Frontier Foundation để nhận tin tức và thông tin khác hay không. Bỏ qua nếu bạn thấy không cần thiết.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nWould you be willing to share your email address with the Electronic Frontier\nFoundation, a founding partner of the Let<span class=\"token string\">'s Encrypt project and the non-profit\norganization that develops Certbot? We'</span>d like to send you email about our work\nencrypting the web, EFF news, campaigns, and ways to support digital freedom.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">)</span>es/<span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">)</span>o: N</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Bước tiếp theo bạn sẽ được chọn tên miền để cài đặt HTTPS. Nếu muốn cài đặt cho toàn bộ thì để trống và nhấn Enter để tiếp tục.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Which names would you like to activate HTTPS for?\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token number\">1</span>: your_domain\n<span class=\"token number\">2</span>: www.your_domain\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nSelect the appropriate numbers separated by commas and/or spaces, or leave input\nblank to <span class=\"token keyword\">select</span> all options shown <span class=\"token punctuation\">(</span>Enter <span class=\"token string\">'c'</span> to cancel<span class=\"token punctuation\">)</span>:</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Tiếp theo là quá trình kiểm tra điều kiện tên miền của bạn có đáp ứng điều kiện để cài đặt HTTPS không? Nếu hợp lệ sẽ tiến hành cài đặt HTTPS cho tên miền bạn vừa chọn.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Obtaining a new certificate\nPerforming the following challenges:\nhttp-01 challenge <span class=\"token keyword\">for</span> your_domain\nhttp-01 challenge <span class=\"token keyword\">for</span> www.your_domain\nEnabled Apache rewrite module\nWaiting <span class=\"token keyword\">for</span> verification<span class=\"token punctuation\">..</span>.\nCleaning up challenges\nCreated an SSL vhost at /etc/apache2/sites-available/your_domain-le-ssl.conf\nEnabled Apache socache_shmcb module\nEnabled Apache ssl module\nDeploying Certificate to VirtualHost /etc/apache2/sites-available/your_domain-le-ssl.conf\nEnabling available site: /etc/apache2/sites-available/your_domain-le-ssl.conf\nDeploying Certificate to VirtualHost /etc/apache2/sites-available/your_domain-le-ssl.conf</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi cài đặt kết thúc. Bạn sẽ được hỏi là có muốn chuyển hướng trang web sang HTTPS không? Cụ thể là nếu người dùng vào tên miền cửa bạn với kênh HTTP sẽ được tự động chuyển hướng sang HTTPS.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token number\">1</span>: No redirect - Make no further changes to the webserver configuration.\n<span class=\"token number\">2</span>: Redirect - Make all requests redirect to secure HTTPS access. Choose this <span class=\"token keyword\">for</span>\nnew sites, or <span class=\"token keyword\">if</span> you<span class=\"token string\">'re confident your site works on HTTPS. You can undo this\nchange by editing your web server'</span>s configuration.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nSelect the appropriate number <span class=\"token punctuation\">[</span><span class=\"token number\">1</span>-2<span class=\"token punctuation\">]</span> <span class=\"token keyword\">then</span> <span class=\"token punctuation\">[</span>enter<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>press <span class=\"token string\">'c'</span> to cancel<span class=\"token punctuation\">)</span>: <span class=\"token number\">2</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi xác nhận. Quá trình cài đặt HTTPS cho tên miền của bạn đã hoàn tất. Bạn sẽ nhận được thông báo như bên dưới.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nCongratulations<span class=\"token operator\">!</span> You have successfully enabled https://your_domain and https://www.your_domain\nYou should <span class=\"token builtin class-name\">test</span> your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d<span class=\"token operator\">=</span>your_domain\nhttps://www.ssllabs.com/ssltest/analyze.html?d<span class=\"token operator\">=</span>www.your_domain\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nIMPORTANT NOTES:\n-Congratulations<span class=\"token operator\">!</span> Your certificate and chain have been saved at:\n/etc/letsencrypt/live/your_domain/fullchain.pem\nYour key <span class=\"token function\">file</span> has been saved at:\n/etc/letsencrypt/live/your_domain/privkey.pem\nYour cert will expire on <span class=\"token number\">2020</span>-07-27. To obtain a new or tweaked\nversion of this certificate <span class=\"token keyword\">in</span> the future, simply run certbot again\nwith the <span class=\"token string\">\"certonly\"</span> option. To non-interactively renew *all* of\nyour certificates, run <span class=\"token string\">\"certbot renew\"</span>\n-Your account credentials have been saved <span class=\"token keyword\">in</span> your Certbot\nconfiguration directory at /etc/letsencrypt. You should <span class=\"token function\">make</span> a\nsecure backup of this folder now. This configuration directory will\nalso contain certificates and private keys obtained by Certbot so\nmaking regular backups of this folder is ideal.\n-If you like Certbot, please consider supporting our work by:\nDonating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\nDonating to EFF:                    https://eff.org/donate-le</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Tổng kết</h2>\n<p>Vậy là chúng ta cài đặt được HTTPS cho tên miền của mình rồi. Tất nhiên bạn cần phải cài đặt Vitua Host cho domain của mình sau khi cài đặt Apache để Certbot có thể tìm được. Chứng chỉ SSL này có thời hạn 90 ngày. Khi hết hạn chỉ cần vào chạy lại từ đầu bước 4 là có thể đươc. Ngoài ra chúng ta có thể cài đặt cho máy chủ tự làm mới chứng chỉ SSL khi hết hạn. Tôi sẽ hướng dẫn cụ thể ở bài viết tiếp theo. Mong bài viết này sẽ giúp được mọi người.</p>\n<h2>Tham khảo</h2>\n<ul>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04\">https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04</a></li>\n<li><a href=\"https://vicloud.vn/community/cach-cai-dat-bo-linux-apache-mysql-php-lamp-tren-ubuntu-1804-540.html\">https://vicloud.vn/community/cach-cai-dat-bo-linux-apache-mysql-php-lamp-tren-ubuntu-1804-540.html</a></li>\n</ul>\n<p>[[author | Trần Văn Tuấn Anh ]]</p>","id":"8579fdd4-40bd-587f-aebf-a0d0c4a931cf","frontmatter":{"title":"[Aws] How to install HTTPS using Cerbot for Apache2 on AWS EC2","date":"10-01-2020","tags":["aws"]},"fields":{"slug":"/aws-cach-cai-dat-https-bang-cerbot-cho-apache2-tren-aws-ec2/"}}}]}},"pageContext":{}},"staticQueryHashes":["3963689063","63159454","81262063"]}