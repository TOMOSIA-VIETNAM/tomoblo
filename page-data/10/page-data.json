{"componentChunkName":"component---src-templates-post-list-js","path":"/10","result":{"data":{"site":{"siteMetadata":{"title":"TOMOSIA VIETNAM","author":"「共に」「幸せ」「灯す」","labels":[{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"rails","tech":"Ruby on Rails","name":"M20.8848485 15.8107143v1.1635714h1.9818182c.4060606 0 1.1030303-.315 1.1272727-1.19571427v-.45c0-.75214286-.5818182-1.1957143-1.1272727-1.1957143h-.9878788v-.54h1.9575757v-1.17h-1.8787878c-.4848485 0-1.1333334.42428573-1.1333334 1.215v.405c0 .7907143.6424243 1.1957143 1.1333334 1.1957143 1.3636363.00642857-.3272728 0 .9333333 0v.56571428l-2.0060606.0064286zm-10.6181818-.28285716s1.060606-.09642857 1.060606-1.5492857c0-1.45285715-1.2848485-1.58785715-1.2848485-1.58785715H7.72727273v4.5835714H8.8909091v-1.1057143l1.0060606 1.1057142h1.7212121l-1.3515151-1.4464286zm-.44848488-.93857143H8.8909091v-1.0478571h.93333332s.26060608.1028572.26060608.5207143c0 .4178572-.26666668.5271429-.26666668.5271429zM14.2 12.4228572h-1.1818182c-.8424242 0-1.1272727.81-1.1272727 1.1957143v3.35571427h1.1818182v-.8035714h1.1090909v.8035714h1.1454545V13.6185715c0-.97714286-.8363636-1.1957143-1.1272727-1.1957143zm-.0181818 2.44928572h-1.1151515V13.76s0-.2507143.3696969-.2507143h.4060606c.3272728 0 .3333334.2507143.3333334.2507143v1.11214286h.0060606zm1.6848485-2.44928573h1.230303v4.5514285h-1.230303v-4.5514285zm2.9575757 3.375v-3.375H17.6v4.5514285h2.8787879v-1.1764285h-1.6545455zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76969696.16714284-3.93939393 1.87071427-5.2121212 4.12071427C.6 15.0714285.4242424 16.9742857.4242424 16.9742857zM10.4 9.0607143L10.4242424 8.63c-.0545454-.03214286-.2060606-.1092857-.58787876-.225l-.02424243.4242857c.2.0707143.3939394.14785716.5878788.2314286zM9.82424242 10.42357143l-.02424242.405c.2.00642857.4.03214286.6.07714286l.0242424-.3985715c-.2060606-.045-.4060606-.0707143-.59999998-.0835715zm-2.24242424-2.0057143h.06060606l-.12121212-.39214284c-.1878788 0-.38181818.0128571-.58181818.0385714l.1151515.3792857c.1757576-.0192857.35151517-.0257143.52727274-.0257143zm.2909091 2.3657143l.13939393.44357143c.1757576-.09.3515152-.16714286.5272728-.225l-.1333333-.42428572c-.2060606.06428572-.3818182.135-.5333333.2057143zM5.1212121 9.09285713l-.27272727-.44357142c-.15151515.0835715-.3090909.1735715-.47272727.2764286l.27878787.45c.15757576-.1028571.3090909-.1992857.46666667-.2828571zm1.24242424 2.89285716l.2909091.4628571c.1030303-.1607143.22424242-.3085715.35757575-.4564286L6.7393939 11.555c-.13939394.135-.26666667.28285714-.37575758.4307143zm-.87878788 2.07l.4909091.4114285C6 14.2164285 6.04242424 13.9657143 6.1030303 13.715l-.43636363-.36642857c-.07878788.23785714-.13333334.47571428-.1818182.70714286zM2.830303 11.0021428L2.4 10.60357142c-.15757576.1607143-.3090909.32142858-.44848485.48214287L2.41818182 11.51c.12727273-.17357143.26666666-.34714286.4121212-.50785714zM1 13.8757143l-.6969697-.27c-.1151515.27642856-.24242424.59785713-.3030303.77142856l.6969697.27C.77575758 14.42857143.9030303 14.11357143 1 13.8757143zm4.3939394 1.81285713c.0121212.34071428.04242424.61714286.07272727.81L6.1939394 16.775c-.05454546-.2507143-.10909092-.53357143-.14545455-.8357143l-.65454546-.25071427z","size":20,"color":"#CC0000"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"#777BB4"},{"tag":"laravel","tech":"Laravel","name":"M23.644 5.43c.009.032.014.065.014.099v5.15c0 .135-.073.26-.189.326l-4.323 2.49v4.934c0 .135-.072.258-.188.326L9.931 23.95c-.021.012-.043.02-.066.027-.008.002-.016.008-.024.01-.063.018-.13.018-.192 0-.011-.002-.02-.008-.029-.012-.021-.008-.043-.014-.063-.025L.534 18.755c-.117-.068-.189-.191-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.021.014-.032.006-.02.014-.04.023-.058.004-.013.015-.022.023-.033.012-.016.021-.031.033-.045.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034h.001L5.044.05c.115-.067.259-.067.375 0l4.512 2.597h.002c.015.01.027.021.041.033.012.009.025.018.037.027.013.014.021.029.033.045.008.011.02.021.025.033.011.019.017.038.024.058.003.011.011.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.005-.066.014-.098.003-.011.009-.021.013-.032.007-.02.014-.039.024-.059.007-.012.018-.021.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.028.014-.011.026-.023.041-.032h.001l4.513-2.598c.116-.067.259-.067.375 0l4.513 2.598c.016.01.027.021.042.031.012.01.025.018.036.028.013.014.022.029.034.044.008.012.019.021.024.033.011.02.018.039.024.059.006.011.012.022.015.033zm-.74 5.032V6.179l-1.578.908-2.182 1.256v4.283l3.76-2.164zm-4.511 7.75v-4.287l-2.146 1.225-6.127 3.498v4.326l8.273-4.762zM1.095 3.624v14.588l8.273 4.762v-4.326l-4.322-2.445-.002-.003h-.002c-.014-.01-.025-.021-.04-.031-.011-.01-.024-.018-.035-.027l-.001-.002c-.013-.012-.021-.025-.031-.039-.01-.012-.021-.023-.028-.037h-.002c-.008-.014-.013-.031-.02-.047-.006-.016-.014-.027-.018-.043-.004-.018-.006-.037-.008-.057-.002-.014-.006-.027-.006-.041V5.789l-2.18-1.257-1.578-.908zM5.231.81l-3.76 2.164 3.76 2.164 3.758-2.164L5.231.81zm1.956 13.505l2.182-1.256V3.624l-1.58.909-2.182 1.256v9.435l1.58-.909zM18.769 3.364l-3.76 2.164 3.76 2.163 3.759-2.164-3.759-2.163zm-.376 4.979l-2.182-1.256-1.579-.908v4.283l2.182 1.256 1.579.908V8.343zm-8.65 9.654l5.514-3.148 2.756-1.572-3.757-2.163-4.324 2.489-3.941 2.27 3.752 2.124z","size":20,"color":"#FF2D20"},{"tag":"cakephp","tech":"CakePHP","name":"M0 13.875v3.745c0 2.067 5.37 3.743 12 3.743V17.62c-6.63 0-12-1.68-12-3.743v-.002zm21.384 2.333L12 13.875v3.745l9.384 2.333C23.02 19.313 24 18.503 24 17.62v-3.745c0 .882-.98 1.692-2.616 2.333zM12 10.133v3.742c-6.627 0-12-1.677-12-3.744V6.38c0-2.064 5.37-3.743 12-3.743 6.625 0 12 1.68 12 3.744v3.75c0 .883-.98 1.69-2.616 2.334L12 10.13v.003z","size":20,"color":"#D33C43"},{"tag":"swift","tech":"Swift","name":"M21.984 16.348c.056-.112.056-.224.112-.336 1.346-5.272-1.851-11.44-7.347-14.693 2.412 3.253 3.365 7.122 2.524 10.599-.056.28-.168.617-.28.897a5.173 5.173 0 0 1-.45-.28S11.104 9.17 5.273 3.282c-.169-.168 3.14 4.71 6.841 8.58-1.738-1.01-6.673-4.542-9.758-7.403.337.617.842 1.234 1.346 1.851 2.58 3.309 5.945 7.346 9.983 10.43-2.86 1.74-6.842 1.851-10.88 0-1.01-.448-1.85-1.009-2.804-1.682 1.682 2.636 4.318 5.048 7.459 6.337 3.757 1.627 7.57 1.515 10.318 0h.057c.112-.056.224-.112.336-.224 1.346-.673 3.982-1.402 5.44 1.402.392.785 1.121-2.86-1.626-6.225z","size":20,"color":"#FA7343"},{"tag":"ios","tech":"iOS","name":"M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z","size":20,"color":"#403f3f"},{"tag":"kotlin","tech":"Kotlin","name":"M1.3 24l11.3-11.5L24 24zM0 0h12L0 12.5zM13.4 0L0 14v10l12-12L24 0z","size":20,"color":"#0095D5"},{"tag":"android","tech":"Android","name":"M24 19H0a13.6 13.6 0 0 1 2.21-6.07A11.2 11.2 0 0 1 5.87 9.4l.41-.23-2.02-3.41a.51.51 0 0 1 .17-.7.5.5 0 0 1 .69.18l2.08 3.5a12.62 12.62 0 0 1 4.84-.9 12.2 12.2 0 0 1 4.75.9l2.07-3.5a.5.5 0 0 1 .7-.17.51.51 0 0 1 .16.7L17.7 9.19l.5.28a11.38 11.38 0 0 1 3.63 3.62A14.48 14.48 0 0 1 24 19zm-7.5-4.48a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1zm-11 0a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1z","size":20,"color":"#3DDC84"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"#403f3f"},{"tag":"aws","tech":"AWS","name":"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z","size":20,"color":"#232F3E"},{"tag":"instagram","tech":"Instagram","name":"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z","size":20,"color":"#E4405F"},{"tag":"facebook","tech":"Facebook","name":"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z","size":20,"color":"#1877F2"},{"tag":"gitlab ci","tech":"Gitlab CI","name":"M4.844.904a1.007 1.007 0 00-.955.692l-2.53 7.783c0 .007-.005.012-.007.02L.07 13.335a1.437 1.437 0 00.522 1.607l11.072 8.045a.566.566 0 00.67-.004l11.074-8.04a1.436 1.436 0 00.522-1.61l-1.26-3.867a.547.547 0 00-.031-.104l-2.526-7.775a1.004 1.004 0 00-.957-.684.987.987 0 00-.949.69l-2.406 7.408H8.203l-2.41-7.408a.987.987 0 00-.943-.69h-.006zm-.006 1.42l2.174 6.678H2.674l2.164-6.678zm14.328 0l2.168 6.678h-4.342l2.174-6.678zm-10.594 7.81h6.862l-2.15 6.618L12 20.693 8.572 10.135zm-5.515.005h4.322l3.086 9.5-7.408-9.5zm13.568 0h4.326l-6.703 8.588-.709.914 2.959-9.108.127-.394zM2.1 10.762l6.978 8.947-7.818-5.682a.305.305 0 01-.112-.341l.952-2.924zm19.8 0l.952 2.922a.305.305 0 01-.11.341v.002l-7.82 5.68.025-.035 6.953-8.91Z","size":20,"color":"#FCA121"}]}},"allMarkdownRemark":{"totalCount":94,"edges":[{"node":{"excerpt":"Vấn đề đặt ra Tạo ra một View có animation sóng trong iOS với Swift. Ý tưởng Sử dụng phương trình sóng cơ trong vật lý là: y = (2π( - )) Với: A là biên độ của sóng t là thời gian T là chu kì của sóng…","snippet":"<html><head></head><body><h3>V&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EB7;t ra</h3> <ul> <li>T&#x1EA1;o ra m&#x1ED9;t View c&#xF3; animation s&#xF3;ng trong iOS v&#x1EDB;i Swift.</li> </ul> <h3>&#xDD; t&#x1B0;&#x1EDF;ng</h3> <p>S&#x1EED; d&#x1EE5;ng ph&#x1B0;&#x1A1;ng tr&#xEC;nh s&#xF3;ng c&#x1A1; trong v&#x1EAD;t l&#xFD; l&#xE0;:</p> <blockquote> <p>y = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>cos</mi><mo>&#x2061;</mo></mrow><annotation encoding=\"application/x-tex\">\\cos</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mop\">cos</span></span></span></span>(2&#x3C0;(<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>t</mi><mi>T</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{t}{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.169556em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824556em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">&#x200B;</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> - <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>x</mi><mi>&#x3BB;</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{x}{&#x3BB;}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">&#x3BB;</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">&#x200B;&#x2026;</span></span></span></span></span></span></span></span></p></blockquote></body></html>","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Tạo ra một View có animation sóng trong iOS với Swift.</li>\n</ul>\n<h2>Ý tưởng</h2>\n<p>Sử dụng phương trình sóng cơ trong vật lý là:</p>\n<blockquote>\n<p>y = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\cos</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mop\">cos</span></span></span></span>(2π(<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>t</mi><mi>T</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{t}{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.169556em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824556em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> - <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>x</mi><mi>λ</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{x}{λ}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">λ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>))</p>\n</blockquote>\n<p>Với:</p>\n<ul>\n<li>A là biên độ của sóng</li>\n<li>t là thời gian</li>\n<li>T là chu kì của sóng</li>\n<li>x là toạ độ theo trục hoành của hệ toạ độ</li>\n<li>λ là bước sóng</li>\n</ul>\n<p>Ta có công thức tính T theo λ là: T = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>λ</mi><mi>v</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{λ}{v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>. Với v là vận tốc truyền sóng.</p>\n<p>Với công thức trên, ý tưởng để tạo chuyển động sóng là:</p>\n<blockquote>\n<p>Với biên độ A, bước sóng λ, chu kì T cố định, x là giá trị thay đổi trên trục hoành, và ứng với mỗi thời gian t tăng dần ta sẽ tìm được giá trị toạ độ y => ta tạo được một điểm CGPoint dùng để vẽ với UIBezierPath</p>\n</blockquote>\n<h2>Triển khai ý tưởng</h2>\n<ul>\n<li>Đầu tiên ta khởi tạo class <strong>WaveView</strong> với các thuộc tính và phương thức khởi tạo. Việc tạo ra một class riêng giúp ta có thể tái sử dụng ở nhiều ViewController khác nhau.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WaveView</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> waveHeight<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n            A <span class=\"token operator\">=</span> waveHeight\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> waveSpeed<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.5</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n            v <span class=\"token operator\">=</span> waveSpeed\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> A<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> v<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> 𝛌<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> T<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> t<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> pi <span class=\"token operator\">=</span> <span class=\"token builtin\">CGFloat</span><span class=\"token punctuation\">.</span>pi\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>clear\n        A <span class=\"token operator\">=</span> waveHeight\n        v <span class=\"token operator\">=</span> waveSpeed\n        𝛌 <span class=\"token operator\">=</span> frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">1.2</span>\n        T <span class=\"token operator\">=</span> 𝛌 <span class=\"token operator\">/</span> v\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> coder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở trên mình đã khai báo và khởi tạo các thuộc tính như biên độ A, vận tốc v, chu kì T và bước sóng λ.</p>\n<p>Tiếp theo, để vẽ sóng thì ta cần override lại method draw của UIView.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token function\">UIGraphicsGetCurrentContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">drawWave</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">drawWave</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> context<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> path <span class=\"token operator\">=</span> <span class=\"token function\">UIBezierPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> z <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> pi <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">/</span> T <span class=\"token operator\">-</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> 𝛌<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> center<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> A <span class=\"token operator\">*</span> <span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">.</span><span class=\"token function\">setStroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">.</span><span class=\"token function\">setFill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">addPath</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span>cgPath<span class=\"token punctuation\">)</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">drawPath</span><span class=\"token punctuation\">(</span>using<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở trên, vì hàm draw có thể gọi lại nhiều lần nên cần phải dùng UIGraphicsGetCurrentContext clear đi mỗi lần nó vẽ lại. Ở hàm drawWave, mình cho x thay đổi từ 0 đến rect.width từ đó dùng để tính y theo phương trình sóng cơ mình đã đề cập ở phần ý tưởng.</p>\n<p>Nếu chỉ dừng lại ở đây, thì sẽ không có animation cho sóng vì thời gian t đang được fix cứng là 0. Do đó để t có thể tăng dần theo thời gian thì ta phải dùng tới Timer.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> timer<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CADisplayLink</span><span class=\"token operator\">?</span>\n\n<span class=\"token atrule\">@objc</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">reDraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    t <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    <span class=\"token function\">setNeedsDisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">CADisplayLink</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> selector<span class=\"token punctuation\">:</span> #<span class=\"token function\">selector</span><span class=\"token punctuation\">(</span>reDraw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    timer<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token builtin\">RunLoop</span><span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> forMode<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">invalidate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token constant\">nil</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>CADisplayLink cũng giống với Timer, nó hay được dùng cho việc draw trong View vì có cơ chế tự tính thời gian repeat sao cho phù hợp với device.</p>\n<p>Cuối cùng, để sử dụng WaveView ta chỉ cần khởi tạo một instance của nó rồi addSubView vào một View trong ViewController là được. Bạn có thể tham khảo <a href=\"https://github.com/LaptrinhvaCuocsong/WaveView/blob/master/WaveViewDemo/WaveViewDemo/ViewController.swift\">tại đây</a></p>\n<p>Mình có capture video kết quả, bạn có thể download file video <a href=\"https://github.com/LaptrinhvaCuocsong/WaveView/blob/master/Demo/Screen%20Recording%202020-07-05%20at%2016.38.17.mov.zip\">tại đây</a> nhé.</p>\n<p>Như vậy, mình đã trình bày xong cách để tạo ra một chuyển động sóng đơn giản sử dụng phương trình sóng cơ. Nếu bạn có cách nào khác thì hãy chia sẻ hoặc comment phía dưới nhé 😄.</p>\n<p>Happy reading!!!</p>","id":"fa161d71-671a-562b-9a7b-110a61e332b2","frontmatter":{"title":"[Swift] Làm sao để tạo một chuyển động sóng đơn giản trong iOS với Swift","date":"04-07-2020","tags":["swift","ios"]},"fields":{"slug":"/swift-tao-animation-song-trong-ios-voi-swift/","readingTime":{"text":"4 min read"}}}},{"node":{"excerpt":"1. Cài đặt blog dưới local 1.1. Contributor Trở thành contributor cho . Fork repository TOMOSIA-VIETNAM về tài khoản github Clone repository sau khi fork Di chuyển sang folder  1.2. Setup project…","snippet":"<html><head></head><body><h3>1. C&#xE0;i &#x111;&#x1EB7;t blog d&#x1B0;&#x1EDB;i local</h3> <h4>1.1. Contributor</h4> <p>Tr&#x1EDF; th&#xE0;nh contributor cho <code class=\"language-text\">TOMOSIA BLOG</code>.</p> <p>Fork repository TOMOSIA-VIETNAM v&#x1EC1; t&#xE0;i kho&#x1EA3;n github</p> <p>Clone repository sau khi fork</p> <p>Di chuy&#x1EC3;n sang folder <code class=\"language-text\">tomoblo</code></p> <h4>1.2. Setup project</h4> <p>Setup gatsby.js. Y&#xEA;u c&#x1EA7;u: Node version 12.x</p> <p>C&#xE0;i &#x111;&#x1EB7;t gatsby CLI package</p> <p>C&#xE0;i &#x111;&#x1EB7;t c&#xE1;c&#x2026;</p></body></html>","html":"<h2>1. Cài đặt blog dưới local</h2>\n<h3>1.1. Contributor</h3>\n<p>Trở thành contributor cho <code class=\"language-text\">TOMOSIA BLOG</code>.</p>\n<p>Fork repository <a href=\"https://github.com/TOMOSIA-VIETNAM/tomoblo\">TOMOSIA-VIETNAM</a> về tài khoản github</p>\n<p>Clone repository sau khi fork</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> clone git@github.com:Nguyenanh/tomoblo.git</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Di chuyển sang folder <code class=\"language-text\">tomoblo</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> tomoblo</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>1.2. Setup project</h3>\n<p>Setup <a href=\"https://www.gatsbyjs.org/\">gatsby.js</a>. Yêu cầu: Node version 12.x</p>\n<p>Cài đặt gatsby CLI package</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> global <span class=\"token function\">add</span> gatsby-cli</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Cài đặt các packages được dùng trong blog</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">install</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Run dự án</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby develop <span class=\"token punctuation\">[</span>-p <span class=\"token operator\">&lt;</span>PORT<span class=\"token operator\">></span><span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Mở trình duyệt và truy cập với port default là 8000: <a href=\"http://localhost:8000/\">http://localhost:8000/</a></p>\n<h2>2. Viết bài và đăng bài</h2>\n<h3>2.1. Tạo bài post</h3>\n<p>Chạy lệnh bên dưới để tạo bài viết với tiêu đề mong muốn</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> post <span class=\"token string\">\"Tiêu đề bài viết\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau khi chạy xong chúng ta sẽ có một file <code class=\"language-text\">posts/tieu-de-bai-viet.md</code> như thế này:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Tiêu đề bài viết\"</span>\n<span class=\"token key atrule\">date</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2020-06-24\"</span>\n<span class=\"token key atrule\">published</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span>\n<span class=\"token punctuation\">---</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>snippet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">|</span> Mô tả ở đây\n<span class=\"token punctuation\">|</span> Hoặc có thể viết trên nhiều dòng</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>2.2. Viết bài</h3>\n<p>Để viết bài chúng ta sẽ thêm nội dung vào phía dưới <code class=\"language-text\">---</code>, có 2 cách để viết content.</p>\n<ul>\n<li>Sử dụng editor và setup thêm một số package. ví dụ mình đang sử dụng <code class=\"language-text\">atom</code> và cài đặt thêm  <a href=\"https://atom.io/packages/markdown-preview\">markdown-preview</a> package.</li>\n<li>Sử dụng editor online <a href=\"https://stackedit.io/app\">stackedit.io</a>\nđể hỗ trợ viết bài và ta có thể viết biểu thức toán học  <a href=\"https://katex.org/\">katex</a> và <a href=\"https://mermaidjs.github.io/\">UML diagrams</a></li>\n</ul>\n<p>Sau khi viết bài xong truy cập vào <code class=\"language-text\">http://localhost:8000/tieu-de-bai-viet</code> để xem kết quả.</p>\n<h3>2.3. Đăng bài</h3>\n<p>Khi đã hoàn thành viết bài hãy <code class=\"language-text\">\u001dpush</code> bài viết lên repository.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> --all\n$ <span class=\"token function\">git</span> commit -m <span class=\"token string\">'Tiêu đề bài viết'</span>\n$ <span class=\"token function\">git</span> push origin master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Vào repository của <a href=\"https://github.com/TOMOSIA-VIETNAM/tomoblo\">TOMOSIA-VIETNAM</a> để tạo Pull Request</p>\n<p>Sau khi pull request được merge vào <code class=\"language-text\">TOMOSIA-VIETNAM/tomoblo</code> chờ vài phút thì bài viết sẽ được hiển thị lên <a href=\"http://blog.tomosia.com/\">http://blog.tomosia.com/</a>.</p>\n<h2>3. Blockcode</h2>\n<p><strong>Thêm description cho bài viết</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/59222278/91420858-6919a380-e87f-11ea-8fe4-d3cdbc81ad42.png\" alt=\"image\"></p>\n<p><strong>Syntax:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[snippet]]\n| Dòng thứ nhất\n| ...\n| Dòng cuối cùng</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Thêm author vào cuối bài viết</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/59222278/91420710-3f607c80-e87f-11ea-99f0-2cce9740ff31.png\" alt=\"image\"></p>\n<p><strong>Syntax:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[author | Tên tác giả ]]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Ví dụ: <code class=\"language-text\">[[author | Minh Tang Q. ]]</code></p>\n<p><strong>Thêm image với caption</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/59222278/91420581-1b9d3680-e87f-11ea-85e1-5fd5613fc8a5.png\" alt=\"image\"></p>\n<p><strong>Syntax:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[image_caption | Nội dung caption ]]\n| markdown_image</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">[[image_caption | Nguồn từ: https://bitsofco.de/why-and-how-to-use-webp-images-today/ ]]\n| ![Compare](https://user-images.githubusercontent.com/59222278/85985771-616f8700-ba15-11ea-9f7c-0b2161fa86f9.png)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2>4. Tags</h2>\n<p>Một số tags được liệt kê trong blog</p>\n<p>Tech Tags có thể sử dụng trong blog :</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># Fontend</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> javascript\n  <span class=\"token punctuation\">-</span> react\n  <span class=\"token punctuation\">-</span> nodejs\n\n<span class=\"token comment\"># Backend</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ruby\n  <span class=\"token punctuation\">-</span> rails\n  <span class=\"token punctuation\">-</span> php\n  <span class=\"token punctuation\">-</span> laravel\n  <span class=\"token punctuation\">-</span> cakephp\n\n<span class=\"token comment\"># App</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> swift\n  <span class=\"token punctuation\">-</span> ios\n  <span class=\"token punctuation\">-</span> kotlin\n  <span class=\"token punctuation\">-</span> android\n\n<span class=\"token comment\"># Others</span>\n<span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> git\n  <span class=\"token punctuation\">-</span> aws\n  <span class=\"token punctuation\">-</span> instagram\n  <span class=\"token punctuation\">-</span> facebook</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>5. Syncing a fork</h2>\n<p>Bước 1: Add upstream đến repo đã clone (\"origin\")</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">git remote add upstream git@github.com:TOMOSIA-VIETNAM/tomoblo.git\n&gt; remote: Enumerating objects: 49, done.\n&gt; remote: Counting objects: 100% (49/49), done.\n&gt; remote: Compressing objects: 100% (27/27), done.\n&gt; remote: Total 49 (delta 29), reused 37 (delta 21), pack-reused 0\n&gt; Unpacking objects: 100% (49/49), done.\n&gt; From github.com:TOMOSIA-VIETNAM/tomoblo\n&gt;  * branch            master     -&gt; FETCH_HEAD\n&gt;  * [new branch]      master     -&gt; upstream/master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bước 2: Fetch các commit và branch từ upstream</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ git fetch upstream\n&gt; remote: Counting objects: 75, done.\n&gt; remote: Compressing objects: 100% (53/53), done.\n&gt; remote: Total 62 (delta 27), reused 44 (delta 9)\n&gt; Unpacking objects: 100% (62/62), done.\n&gt; From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY\n&gt;  * [new branch]      master     -&gt; upstream/master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bước 3: Checkout về nhánh master trong project đã fork</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ git checkout master\n&gt; Switched to branch &#39;master&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Bước 4: Merge nhánh thay đổi từ <code class=\"language-text\">upstream/master</code> vào nhánh <code class=\"language-text\">master</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ git merge upstream/master\n&gt; Updating a422352..5fdff0f\n&gt; Fast-forward\n&gt;  README                    |    9 -------\n&gt;  README.md                 |    7 ++++++\n&gt;  2 files changed, 7 insertions(+), 9 deletions(-)\n&gt;  delete mode 100644 README\n&gt;  create mode 100644 README.md</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href=\"https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/syncing-a-fork\">Link tham khảo</a></p>","id":"539009a4-eb44-5382-8281-4009020e6083","frontmatter":{"title":"Hướng dẫn tạo bài viết mới","date":"03-07-2020","tags":[null]},"fields":{"slug":"/huong-dan-tao-bai-viet-moi/","readingTime":{"text":"4 min read"}}}},{"node":{"excerpt":"Vấn đề đặt ra Thứ nhất: Làm thế nào để hiển thị 100 tấm ảnh/1 trang một cách nhanh nhất? Đảm bảo tối ưu tốc độ load ảnh, nâng cao hiệu quả SEO Google và trải nghiệm người dùng tốt hơn. Thứ hai: Để…","snippet":"<html><head></head><body><h3>V&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EB7;t ra</h3> <ul> <li>Th&#x1EE9; nh&#x1EA5;t: L&#xE0;m th&#x1EBF; n&#xE0;o &#x111;&#x1EC3; hi&#x1EC3;n th&#x1ECB; 100 t&#x1EA5;m &#x1EA3;nh/1 trang m&#x1ED9;t c&#xE1;ch nhanh nh&#x1EA5;t? &#x110;&#x1EA3;m b&#x1EA3;o t&#x1ED1;i &#x1B0;u t&#x1ED1;c &#x111;&#x1ED9; load &#x1EA3;nh, n&#xE2;ng cao hi&#x1EC7;u qu&#x1EA3; SEO Google v&#xE0; tr&#x1EA3;i nghi&#x1EC7;m ng&#x1B0;&#x1EDD;i d&#xF9;ng t&#x1ED1;t h&#x1A1;n.</li> <li>Th&#x1EE9; hai: &#x110;&#x1EC3; ng&#x1B0;&#x1EDD;i d&#xF9;ng \u001dupload &#x1EA3;nh l&#xEA;n server&#x2026;</li></ul></body></html>","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Thứ nhất: Làm thế nào để hiển thị 100 tấm ảnh/1 trang một cách nhanh nhất? Đảm bảo tối ưu tốc độ load ảnh, nâng cao hiệu quả SEO Google và trải nghiệm người dùng tốt hơn.</li>\n<li>Thứ hai: Để người dùng \u001dupload ảnh lên server với dung lượng trên 500MB. Nếu để web server xử lý quá trình nhận dữ liệu từ user upload lên, sau đó convert đối với file có dung lượng lớn thì không hề ổn chút nào. Vậy để giảm tải cho web server thì ta sẽ sử dụng serverless trong tình huống này. <a href=\"https://aws.amazon.com/vi/serverless/\">(Vì sao sử dụng serverless?)</a></li>\n</ul>\n<h2>Sự trổi dậy của Webp</h2>\n<p><img src=\"https://miro.medium.com/max/1698/1*fRLZo9RWFkC2rkHXJzrdQA.png\" alt=\"Compare\"></p>\n<p>Định dạng WebP đã trở nên ngày càng phổ biến kể từ khi Google giới thiệu nó vào năm 2010. Điểm mạnh lớn nhất của nó nằm ở khả năng tạo kích thước tệp nhỏ hơn nhiều trong khi vẫn duy trì chất lượng hình ảnh tương tự.</p>\n<p>Định dạng Webp sẽ giúp bạn giảm 26%  dung lượng so với PNG. và  25 – 34% so với định dạng JPEG, mà vẫn vẫn giữ được chất lượng hiển thị. Điều này giúp web giảm thời gian tải ảnh, tăng tốc độ trải nghiệm người dùng.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Nguồn từ: <a href=\"https://bitsofco.de/why-and-how-to-use-webp-images-today/\">https://bitsofco.de/why-and-how-to-use-webp-images-today/</a> </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85985771-616f8700-ba15-11ea-9f7c-0b2161fa86f9.png\" alt=\"Compare\"></p></div></div>\n<p>Tuy nhiên với định dạng Webp thì không phải tất cả các trình duyệt đều hỗ trợ. Hiện tại, WebP thực sự được hỗ trợ trong các phiên bản mới nhất của Google Chrome, Firefox, Edge, trình duyệt Opera, Trình duyệt Android và Samsung internet.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">WebP support table: <a href=\"https://bitsofco.de/why-and-how-to-use-webp-images-today/\">https://bitsofco.de/why-and-how-to-use-webp-images-today/</a> </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85986227-19049900-ba16-11ea-8707-5e09c467ba4f.png\" alt=\"Compare\"></p></div></div>\n<h2>Triển khai ý tưởng</h2>\n<p>Ở browser, khi người dùng upload ảnh thì web server sẽ có nhiệm vụ gián tiếp nhận hình ảnh, xác thực và đẩy ảnh lên S3 để lưu trữ. Khi S3 nhận thấy rằng có ảnh mới được đẩy lên sẽ gọi (trigger) đến lambda để tiến hành convert sang dạng webp. Sau khi convert ảnh thì sẽ được lưu tại thư mục mới mà ta chỉ định (dĩ nhiên ta sẽ không override lại ảnh gốc mà user đẩy lên, mà là tạo ra 1 file ảnh thumb với định dạng webp). Trong quá trình  Lambda xử lý ta có thể dùng cloudWatch để debug.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-heading\">Diagram S3 Lambda </div><div class=\"custom-block-body\"><p><img src=\"https://user-images.githubusercontent.com/59222278/85989062-30458580-ba1a-11ea-9a22-4dad722102d8.png\" alt=\"Diagram S3 Lambda\"></p></div></div>\n<p>Vậy để chuyển đổi ảnh sang định dạng Webp thì chúng ta có thể dùng <a href=\"https://imagemagick.org/index.php\">imageMagick</a> hoặc <a href=\"https://developers.google.com/speed/webp/docs/cwebp\">cwebp</a>.</p>\n<div class=\"custom-block image-caption\"><div class=\"custom-block-body\"><p><img src=\"https://miro.medium.com/max/500/1*_TeG6-eUitTR_l3SKpJ5Ow.jpeg\" alt=\"LEGENDARY\"></p></div></div>\n<h2>Thực hiện</h2>\n<h3>1. Ở màn hình console Cloud AWS</h3>\n<p>Truy cập IAM, chọn roles và tạo full quyền S3 và CloudWatch để Lambda có thể lấy dữ liệu từ S3 và ghi log vào cloudWatch. Ở đây ta đặt tên là <code class=\"language-text\">full-s3-logs</code></p>\n<p><img src=\"https://i.imgur.com/Rew8ydu.png\"></p>\n<p>Chuẩn bị 1 cặp <code class=\"language-text\">access_key_id</code> và <code class=\"language-text\">secret_key_id</code>. Nếu chưa có hãy click vào <em>Username > My security Credentials > Access keys > Tiến hành tạo key</em> (Nên download file csv về máy, vì key sau khi tạo ra sẽ không thể khôi phục lại nếu mất). Hãy nhớ bảo mật key này, không được public.</p>\n<p>Truy cập vào trang  <a href=\"https://serverlessrepo.aws.amazon.com/applications\">https://serverlessrepo.aws.amazon.com/applications</a> tìm libraries  <a href=\"https://serverlessrepo.aws.amazon.com/applications/arn:aws:serverlessrepo:us-east-1:145266761615:applications~image-magick-lambda-layer\">image-magick-lambda-layer</a>. Và click nút deploy để cài đặt thư viện <em>imagemagick</em> cho serverless.</p>\n<p><img src=\"https://i.imgur.com/9d8kx1C.png\"></p>\n<h3>2. Ở môi trường Local</h3>\n<p>Cài đặt  <a href=\"https://www.serverless.com/\">serverless framework</a>  bằng npm:  <code class=\"language-text\">npm i serverless</code></p>\n<p>Chạy lệnh:  <code class=\"language-text\">serverless create -t aws-ruby -p image-resizer&lt;:Tên Project&gt;</code>  để tạo project serverless viết bằng ngôn ngữ ruby</p>\n<p>Chạy lệnh:  <code class=\"language-text\">bundle init</code>  để tạo ra Gemfile. Ở đây ta dùng 2 gem <code class=\"language-text\">aws-sdk</code> và <code class=\"language-text\">minimagick</code></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token comment\"># Gemfile</span>\nsource 'https<span class=\"token punctuation\">:</span>//rubygems.org'\n\ngit_source(<span class=\"token punctuation\">:</span>github) <span class=\"token punctuation\">{</span><span class=\"token punctuation\">|</span>repo_name<span class=\"token punctuation\">|</span> \"https<span class=\"token punctuation\">:</span>//github.com/<span class=\"token comment\">#{repo_name}\" }</span>\n\ngem 'aws<span class=\"token punctuation\">-</span>sdk<span class=\"token punctuation\">-</span>s3'<span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 1.30.0'</span>\ngem 'mini_magick'<span class=\"token punctuation\">,</span> <span class=\"token string\">'~> 4.9.0'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hãy check version ruby trước khi thực hiện lệnh bundle. Hãy xác định rằng serverless sử dụng \u001dversion ruby nào thì dưới local lúc bundle phải sử dụng version ruby giống như thế. Ở đây dùng rvm nên ta có lệnh  <code class=\"language-text\">rvm use 2.7.0</code>  để thiết lập phiên bản ruby.</p>\n<p>Chạy lệnh:  <code class=\"language-text\">bundle install --path vendor/bundle</code> để bundle vào thư mục dự án</p>\n<p>Có nhiều cách để cài đặt credential dưới local  <a href=\"https://www.serverless.com/framework/docs/providers/aws/guide/credentials/\" title=\"Hướng dẫn cài đặt credential\">(Tham khảo thêm)</a>. Ở đây ta dùng cách đơn giản nhất là export biến trực tiếp tại 1 session tab terminal (nếu tắt tab đi thì hết hiệu lực). Gõ lệnh  <code class=\"language-text\">export AWS_SECRET_ACCESS_KEY=secret_keys</code>  và  <code class=\"language-text\">export AWS_ACCESS_KEY_ID=access_key</code>.</p>\n<p>Sau các bước chuẩn bị ở trên thì trong project sẽ gồm các file: <em>Gemfile, serverless.yml, handler.rb và thư mục vendor/bundle/ruby/2.7.0</em></p>\n<h3>Code</h3>\n<p><em>handler.rb:</em>  File này sẽ là endpoint để lambda gọi tới. Nó sẽ có 2 params truyền vào là event và context</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">load_path <span class=\"token operator\">=</span> <span class=\"token builtin\">Dir</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/opt/bundle/ruby/2.7.0/gems/**/lib\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token variable\">$LOAD_PATH</span><span class=\"token punctuation\">.</span>unshift<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>load_path<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">require</span> <span class=\"token string\">'converter'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ImageHandler</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">process</span></span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">:</span><span class=\"token punctuation\">)</span>\n    event <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"Records\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>first\n    bucket <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"s3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"bucket\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span>\n    filename <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">\"s3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"object\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"key\"</span><span class=\"token punctuation\">]</span>\n\n    file <span class=\"token operator\">=</span> <span class=\"token constant\">Converter</span><span class=\"token punctuation\">.</span>from_s3<span class=\"token punctuation\">(</span>bucket<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n    file<span class=\"token punctuation\">.</span>convert2webp\n    file<span class=\"token punctuation\">.</span>upload_file<span class=\"token punctuation\">(</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string\">'BUCKET_DEST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo 1 file <em>converter.rb:</em> File này dùng để \u001dlấy image từ s3, tiến hành convert và upload ngược lại lên s3.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string\">\"aws-sdk-s3\"</span>\n<span class=\"token keyword\">require</span> <span class=\"token string\">\"mini_magick\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Converter</span>\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">from_s3</span></span><span class=\"token punctuation\">(</span>bucket_name<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n    puts <span class=\"token string\">'==###== Downloading image from S3'</span>\n    s3 <span class=\"token operator\">=</span> <span class=\"token constant\">Aws</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">S3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Resource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    object <span class=\"token operator\">=</span> s3<span class=\"token punctuation\">.</span>bucket<span class=\"token punctuation\">(</span>bucket_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n\n    tmp_filename <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>filename<span class=\"token delimiter tag\">}</span></span>\"</span>\n    object<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>response_target<span class=\"token punctuation\">:</span> tmp_filename<span class=\"token punctuation\">)</span>\n\n    puts  <span class=\"token string\">\"==###== Successfully downloaded\"</span>\n\n    <span class=\"token constant\">Converter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while downloading: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    extname <span class=\"token operator\">=</span> <span class=\"token builtin\">File</span><span class=\"token punctuation\">.</span>extname<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@filename</span> <span class=\"token operator\">=</span> filename\n    <span class=\"token variable\">@basename</span> <span class=\"token operator\">=</span> filename<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>extname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first\n    <span class=\"token variable\">@tmp_file</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>filename<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">convert2webp</span></span>\n    <span class=\"token variable\">@converted_filename</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@basename</span><span class=\"token delimiter tag\">}</span></span>.webp\"</span>\n    <span class=\"token variable\">@converted_tmp_file</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@converted_filename</span><span class=\"token delimiter tag\">}</span></span>\"</span>\n\n    puts <span class=\"token string\">\"==###== Converting the image <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@tmp_file</span><span class=\"token delimiter tag\">}</span></span> to <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@converted_tmp_file</span><span class=\"token delimiter tag\">}</span></span>\"</span>\n\n    <span class=\"token constant\">MiniMagick</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Tool</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Convert</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>convert<span class=\"token operator\">|</span>\n      convert <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span> <span class=\"token variable\">@tmp_file</span>\n      convert <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span> <span class=\"token variable\">@converted_tmp_file</span>\n    <span class=\"token keyword\">end</span>\n    puts  <span class=\"token string\">\"==###== Successfully converted\"</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while converting: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">upload_file</span></span><span class=\"token punctuation\">(</span>dest_bucket<span class=\"token punctuation\">)</span>\n    puts <span class=\"token string\">'==###== Uploading image to S3'</span>\n\n    s3 <span class=\"token operator\">=</span> <span class=\"token constant\">Aws</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">S3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Resource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    object <span class=\"token operator\">=</span> s3<span class=\"token punctuation\">.</span>bucket<span class=\"token punctuation\">(</span>dest_bucket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">(</span><span class=\"token variable\">@converted_filename</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>upload_file<span class=\"token punctuation\">(</span><span class=\"token variable\">@converted_tmp_file</span><span class=\"token punctuation\">)</span>\n    puts  <span class=\"token string\">\"==###== Successfully uploaded\"</span>\n  <span class=\"token keyword\">rescue</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> e\n    puts <span class=\"token string\">\"==!!!== Error while uploading: <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>e<span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>serverless.yml:</em> File config cho framework</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp\n\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> your<span class=\"token punctuation\">-</span>images\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> ruby2.7\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>role/full<span class=\"token punctuation\">-</span>s3<span class=\"token punctuation\">-</span>logs\n\n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">handle_convert</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.ImageHandler.process\n    <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> GemsLambdaLayer<span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>lambda<span class=\"token punctuation\">:</span>us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>layer<span class=\"token punctuation\">:</span>image<span class=\"token punctuation\">-</span>magick<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">BUCKET_DEST</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n    <span class=\"token key atrule\">memorySize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> <span class=\"token comment\"># in MB</span>\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">900</span> <span class=\"token comment\"># in seconds</span>\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">s3</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.source<span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>ObjectCreated<span class=\"token punctuation\">:</span>*\n<span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> vendor/<span class=\"token important\">**</span>\n   <span class=\"token punctuation\">-</span> Gemfile\n   <span class=\"token punctuation\">-</span> Gemfile.lock\n\n<span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gems</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> vendor\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Project's vendor\n\n<span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ConvertImage</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>S3<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Bucket\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">BucketName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.dest<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Cuối cùng thì chạy lệnh  <code class=\"language-text\">serverless deploy</code>. Framework sẽ tiến hành tạo cloudformation trên AWS và Cloudformation sẽ tự động build serverless lambda theo những gì ta đã cấu hình trong file serverless.yml</p>\n<h2>Giải thích</h2>\n<p>Trong này chỉ có file serverless.yml là cần để giải thích từng đoạn code, còn file ruby thì chúng ta đọc củng có thể nắm được nội dung rồi.</p>\n<p><strong>Đoạn 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> your<span class=\"token punctuation\">-</span>images\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dùng để tạo biến tham chiếu cho bên dưới sử dụng. Ở đây ta có 2 tham chiếu là source và dest. Cách gọi thì syntax: <code class=\"language-text\">${self.custom.bucket.source}</code> và  <code class=\"language-text\">${self:custom.bucket.dest}</code></p>\n<p><strong>Đoạn 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> ruby2.7\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>role/full<span class=\"token punctuation\">-</span>s3<span class=\"token punctuation\">-</span>logs</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>name:</strong>  Sử dụng dịch vụ AWS</p>\n<p><strong>runtime:</strong>  Chạy phiên bản ruby2.7</p>\n<p><strong>region:</strong>  Region chạy lambda</p>\n<p><strong>role:</strong>  Do trước đó ta đã tạo role rồi, nên ở đây ta chỉ cần link đến là được. Còn không thì ta vẫn có thể tạo ở trong này. Có thể tham khảo thêm tại trang chủ serverless.</p>\n<p><strong>Đoạn 3</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">handle_convert</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.ImageHandler.process\n    <span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> GemsLambdaLayer<span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>lambda<span class=\"token punctuation\">:</span>us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">:</span>440937316816<span class=\"token punctuation\">:</span>layer<span class=\"token punctuation\">:</span>image<span class=\"token punctuation\">-</span>magick<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">BUCKET_DEST</span><span class=\"token punctuation\">:</span> convert<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">-</span>to<span class=\"token punctuation\">-</span>webp<span class=\"token punctuation\">-</span><span class=\"token number\">2705</span>\n    <span class=\"token key atrule\">memorySize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">512</span> <span class=\"token comment\"># in MB</span>\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">900</span> <span class=\"token comment\"># in seconds</span>\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">s3</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.source<span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>ObjectCreated<span class=\"token punctuation\">:</span>*</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>functions:</strong>  Ở đây ta chỉ định nghĩa 1 function là <code class=\"language-text\">handle_convert</code>. Ngoài ra củng có thể define nhiều function hơn</p>\n<p><strong>handler:</strong>  Sẽ define endpoint để lambda trigger  <code class=\"language-text\">handler(tên file).ImageHandler(tên class).process(tên method)</code></p>\n<p><strong>layers:</strong>  Chúng ta sử dụng 2 lớp layer để phục vụ cho việc convert, lớp layer đầu tiên có tên là GemsLambdaLayer (layer này sẽ đề cập ở đoạn 5). Layer này chưa thư mục bundle. Function này muốn tham chiếu đến layer thì sử dụng syntax <code class=\"language-text\">{Ref: TenLayer&lt;Viết theo kiểu CamelCase&gt;}</code></p>\n<p>Layer thứ 2 là 1 đường link arn:aws. Do bước trên ta có sử dụng 1 layer có sẵn của AWS là image-magick-lambda nên ta sẽ pasted đường link layer đó vào đây.</p>\n<p><strong>environment:</strong>  Khai báo tên biến môi trường</p>\n<p><strong>memorySize:</strong>  Khai báo lượng Ram để lambda xử lý</p>\n<p><strong>timeout:</strong>  Thời gian giới hạn xử lý. Nếu ta để Ram quá ít hoặc timeout quá ít thì lambda sẽ không thực hiện được. Nhưng để nhiều quá thì lại tốn phí (bởi vì lambda sẽ dựa vào 2 tiêu chí này để tính tiền), cho nên hãy cân nhắc sao cho phù hợp.</p>\n<p><strong>events:</strong>  Ở đây ta muốn hướng đến là S3 với bucket là  your-images. Sự kiện khi có 1 object được tạo thì sẽ trigger đến lambda.</p>\n<p><strong>Đoạn 4</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> vendor/<span class=\"token important\">**</span>\n   <span class=\"token punctuation\">-</span> Gemfile\n   <span class=\"token punctuation\">-</span> Gemfile.lock</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mục đích là ta không muốn đẩy các file bên dưới lên serverless.</p>\n<p><strong>Đoạn 5</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">layers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">gems</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> vendor\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> Project's vendor</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở dưới local khi ta bundle thì sẽ tạo ra thư mục vendor. Vậy ta sẽ dùng vendor này để làm 1 lớp Layer. Ở đây mình đặt tên layer là  <code class=\"language-text\">gems</code>  Cho nên khi reference thì ta phải viết cho đúng syntax mà framework yêu cầu, tức là viết dạng camelCase với suffix là  <code class=\"language-text\">LambdaLayer</code>. Cho nên dở đoạn 3 ta mới ghi là <code class=\"language-text\">{Ref: GemsLambdaLayer}</code></p>\n<p><strong>Đoạn 6</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">ConvertImage</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>S3<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Bucket\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">BucketName</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">:</span>custom.bucket.dest<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dùng để tạo 1 bucket đích. Để sau khi xử lý convert xong thì ta upload vào bucket này</p>\n<h2>Lời kết</h2>\n<p>Trong bài này mình đã hướng dẫn và giải thích chi tiết, hi vọng khi thực hiện sẽ không phát sinh lỗi. Nếu có thì chúng ta có thể xem log trong Cloudwatch để fix dần thôi. Chúc các bạn thành công.</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Minh Tang Q. </div><div class=\"custom-block-body\"></div></div>","id":"484d6a95-13ea-5d51-8ff9-1f0a993668ab","frontmatter":{"title":"[Aws] Converting a image to WebP in AWS Lambda using Ruby","date":"29-06-2020","tags":["ruby","aws"]},"fields":{"slug":"/aws-su-dung-serverless-de-chuyen-doi-anh-sang-dinh-dang-webp-bang-ruby/","readingTime":{"text":"9 min read"}}}},{"node":{"excerpt":"Vấn đề đặt ra Bạn đang làm việc với API của Facebook, những plugin của Facebook. Nhưng khi deploy code lên staging để kiểm tra thì lại nhận được lỗi là API của Facebook chỉ hỗ trợ localhost và domain…","snippet":"<html><head></head><body><h3>V&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EB7;t ra</h3> <ul> <li>B&#x1EA1;n &#x111;ang l&#xE0;m vi&#x1EC7;c v&#x1EDB;i API c&#x1EE7;a Facebook, nh&#x1EEF;ng plugin c&#x1EE7;a Facebook. Nh&#x1B0;ng khi deploy code l&#xEA;n staging &#x111;&#x1EC3; ki&#x1EC3;m tra th&#xEC; l&#x1EA1;i nh&#x1EAD;n &#x111;&#x1B0;&#x1EE3;c l&#x1ED7;i l&#xE0; API c&#x1EE7;a Facebook ch&#x1EC9; h&#x1ED7; tr&#x1EE3; localhost v&#xE0; domain &#x111;&#x1B0;&#x1EE3;c c&#xE0;i &#x111;&#x1EB7;t HTTPS (SSL certificate). </li> <li>C&#xF3; nhi&#x1EC1;u lo&#x1EA1;i ch&#x1EE9;ng&#x2026;</li></ul></body></html>","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Bạn đang làm việc với API của Facebook, những plugin của Facebook. Nhưng khi deploy code lên staging để kiểm tra thì lại nhận được lỗi là API của Facebook chỉ hỗ trợ localhost và domain được cài đặt HTTPS (SSL certificate). </li>\n<li>Có nhiều loại chứng chỉ SSL cung cấp các mức độ bảo mật khác nhau. Chúng ta có thể mua một chứng chỉ SSL tại Namecheap với các mức giá khác nhau. Nhưng trong bài viết này sẽ trình bày một cách để cài đặt HTTPS cho domain một cách miễn phí.</li>\n</ul>\n<h2>Chuẩn bị</h2>\n<ul>\n<li>1 server AWS EC2 Ubuntu 18.04 + Apache2</li>\n<li>\n<p>VPS EC2 đã được mở sẵn port 80 và port 443</p>\n<h2>Cách làm</h2>\n</li>\n</ul>\n<h4>1. Cài đặt Apache:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> apache2 -y\n<span class=\"token function\">sudo</span> a2enmod rewrite\n<span class=\"token function\">sudo</span> a2enmod ssl\n<span class=\"token function\">sudo</span> a2enmod headers\n<span class=\"token function\">sudo</span> systemctl restart apache2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>2. Cài đặt thư viện Certbot:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> software-properties-common\n<span class=\"token function\">sudo</span> apt-apt-repository ppa:certbot/certbot\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> certbot python-certbot-apache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>3. Cho phép HTTPS thông qua tường lửa:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> ufw allow <span class=\"token string\">'Apache Full'</span>\n$ <span class=\"token function\">sudo</span> ufw delete allow <span class=\"token string\">'Apache'</span>\n$ <span class=\"token function\">sudo</span> ufw status</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Bạn sẽ nhận đươc kết quả như bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Output\nStatus: active\nTo                         Action      From\n--                         ------      ----\nOpenSSH                    ALLOW       Anywhere                  \nApache Full                ALLOW       Anywhere                  \nOpenSSH (v6)               ALLOW       Anywhere (v6)             \nApache Full (v6)           ALLOW       Anywhere (v6)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>4. Cài đặt HTTPS cho domain:</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot --apache</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Bước này sẽ yêu cầu bạn nhập email, email này sẽ được dùng để làm mới chứng chỉ SSL khi hết hạn.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Saving debug log to /var/log/letsencrypt/letsencrypt.log\nPlugins selected: Authenticator apache, Installer apache\nEnter email address <span class=\"token punctuation\">(</span>used <span class=\"token keyword\">for</span> urgent renewal and security notices<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>Enter <span class=\"token string\">'c'</span> to\ncancel<span class=\"token punctuation\">)</span>: you@your_domain</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi nhập Email, bạn cần xác nhận tuân thủ quy định của dịch vụ Let’s Encrypt. Chọn A để tiếp tục.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nPlease <span class=\"token builtin class-name\">read</span> the Terms of Service at\nhttps://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must\nagree <span class=\"token keyword\">in</span> order to register with the ACME server at\nhttps://acme-v02.api.letsencrypt.org/directory\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">)</span>gree/<span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span>ancel: A</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Tiếp theo, bạn sẽ được hỏi liệu bạn có muốn chia sẻ email của mình với Electronic Frontier Foundation để nhận tin tức và thông tin khác hay không. Bỏ qua nếu bạn thấy không cần thiết.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nWould you be willing to share your email address with the Electronic Frontier\nFoundation, a founding partner of the Let<span class=\"token string\">'s Encrypt project and the non-profit\norganization that develops Certbot? We'</span>d like to send you email about our work\nencrypting the web, EFF news, campaigns, and ways to support digital freedom.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">)</span>es/<span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">)</span>o: N</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Bước tiếp theo bạn sẽ được chọn tên miền để cài đặt HTTPS. Nếu muốn cài đặt cho toàn bộ thì để trống và nhấn Enter để tiếp tục.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Which names would you like to activate HTTPS for?\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token number\">1</span>: your_domain\n<span class=\"token number\">2</span>: www.your_domain\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nSelect the appropriate numbers separated by commas and/or spaces, or leave input\nblank to <span class=\"token keyword\">select</span> all options shown <span class=\"token punctuation\">(</span>Enter <span class=\"token string\">'c'</span> to cancel<span class=\"token punctuation\">)</span>:</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Tiếp theo là quá trình kiểm tra điều kiện tên miền của bạn có đáp ứng điều kiện để cài đặt HTTPS không? Nếu hợp lệ sẽ tiến hành cài đặt HTTPS cho tên miền bạn vừa chọn.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Obtaining a new certificate\nPerforming the following challenges:\nhttp-01 challenge <span class=\"token keyword\">for</span> your_domain\nhttp-01 challenge <span class=\"token keyword\">for</span> www.your_domain\nEnabled Apache rewrite module\nWaiting <span class=\"token keyword\">for</span> verification<span class=\"token punctuation\">..</span>.\nCleaning up challenges\nCreated an SSL vhost at /etc/apache2/sites-available/your_domain-le-ssl.conf\nEnabled Apache socache_shmcb module\nEnabled Apache ssl module\nDeploying Certificate to VirtualHost /etc/apache2/sites-available/your_domain-le-ssl.conf\nEnabling available site: /etc/apache2/sites-available/your_domain-le-ssl.conf\nDeploying Certificate to VirtualHost /etc/apache2/sites-available/your_domain-le-ssl.conf</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi cài đặt kết thúc. Bạn sẽ được hỏi là có muốn chuyển hướng trang web sang HTTPS không? Cụ thể là nếu người dùng vào tên miền cửa bạn với kênh HTTP sẽ được tự động chuyển hướng sang HTTPS.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\n<span class=\"token number\">1</span>: No redirect - Make no further changes to the webserver configuration.\n<span class=\"token number\">2</span>: Redirect - Make all requests redirect to secure HTTPS access. Choose this <span class=\"token keyword\">for</span>\nnew sites, or <span class=\"token keyword\">if</span> you<span class=\"token string\">'re confident your site works on HTTPS. You can undo this\nchange by editing your web server'</span>s configuration.\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nSelect the appropriate number <span class=\"token punctuation\">[</span><span class=\"token number\">1</span>-2<span class=\"token punctuation\">]</span> <span class=\"token keyword\">then</span> <span class=\"token punctuation\">[</span>enter<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>press <span class=\"token string\">'c'</span> to cancel<span class=\"token punctuation\">)</span>: <span class=\"token number\">2</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau khi xác nhận. Quá trình cài đặt HTTPS cho tên miền của bạn đã hoàn tất. Bạn sẽ nhận được thông báo như bên dưới.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nCongratulations<span class=\"token operator\">!</span> You have successfully enabled https://your_domain and https://www.your_domain\nYou should <span class=\"token builtin class-name\">test</span> your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d<span class=\"token operator\">=</span>your_domain\nhttps://www.ssllabs.com/ssltest/analyze.html?d<span class=\"token operator\">=</span>www.your_domain\n<span class=\"token comment\">#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>\nIMPORTANT NOTES:\n-Congratulations<span class=\"token operator\">!</span> Your certificate and chain have been saved at:\n/etc/letsencrypt/live/your_domain/fullchain.pem\nYour key <span class=\"token function\">file</span> has been saved at:\n/etc/letsencrypt/live/your_domain/privkey.pem\nYour cert will expire on <span class=\"token number\">2020</span>-07-27. To obtain a new or tweaked\nversion of this certificate <span class=\"token keyword\">in</span> the future, simply run certbot again\nwith the <span class=\"token string\">\"certonly\"</span> option. To non-interactively renew *all* of\nyour certificates, run <span class=\"token string\">\"certbot renew\"</span>\n-Your account credentials have been saved <span class=\"token keyword\">in</span> your Certbot\nconfiguration directory at /etc/letsencrypt. You should <span class=\"token function\">make</span> a\nsecure backup of this folder now. This configuration directory will\nalso contain certificates and private keys obtained by Certbot so\nmaking regular backups of this folder is ideal.\n-If you like Certbot, please consider supporting our work by:\nDonating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\nDonating to EFF:                    https://eff.org/donate-le</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h2>Tổng kết</h2>\n<p>Vậy là chúng ta cài đặt được HTTPS cho tên miền của mình rồi. Tất nhiên bạn cần phải cài đặt Vitua Host cho domain của mình sau khi cài đặt Apache để Certbot có thể tìm được. Chứng chỉ SSL này có thời hạn 90 ngày. Khi hết hạn chỉ cần vào chạy lại từ đầu bước 4 là có thể đươc. Ngoài ra chúng ta có thể cài đặt cho máy chủ tự làm mới chứng chỉ SSL khi hết hạn. Tôi sẽ hướng dẫn cụ thể ở bài viết tiếp theo. Mong bài viết này sẽ giúp được mọi người.</p>\n<h2>Tham khảo</h2>\n<ul>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04\">https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04</a></li>\n<li><a href=\"https://vicloud.vn/community/cach-cai-dat-bo-linux-apache-mysql-php-lamp-tren-ubuntu-1804-540.html\">https://vicloud.vn/community/cach-cai-dat-bo-linux-apache-mysql-php-lamp-tren-ubuntu-1804-540.html</a></li>\n</ul>\n<p>[[author | Trần Văn Tuấn Anh ]]</p>","id":"8579fdd4-40bd-587f-aebf-a0d0c4a931cf","frontmatter":{"title":"[Aws] How to install HTTPS using Cerbot for Apache2 on AWS EC2","date":"10-01-2020","tags":["aws"]},"fields":{"slug":"/aws-cach-cai-dat-https-bang-cerbot-cho-apache2-tren-aws-ec2/","readingTime":{"text":"8 min read"}}}}]}},"pageContext":{"limit":10,"skip":90,"numPages":10,"currentPage":10}},"staticQueryHashes":["3963689063","63159454","81262063"]}