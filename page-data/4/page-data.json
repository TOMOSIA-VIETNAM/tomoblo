{"componentChunkName":"component---src-templates-post-list-js","path":"/4","result":{"data":{"site":{"siteMetadata":{"title":"TOMOSIA VIETNAM","author":"「共に」「幸せ」「灯す」","labels":[{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"rails","tech":"Ruby on Rails","name":"M20.8848485 15.8107143v1.1635714h1.9818182c.4060606 0 1.1030303-.315 1.1272727-1.19571427v-.45c0-.75214286-.5818182-1.1957143-1.1272727-1.1957143h-.9878788v-.54h1.9575757v-1.17h-1.8787878c-.4848485 0-1.1333334.42428573-1.1333334 1.215v.405c0 .7907143.6424243 1.1957143 1.1333334 1.1957143 1.3636363.00642857-.3272728 0 .9333333 0v.56571428l-2.0060606.0064286zm-10.6181818-.28285716s1.060606-.09642857 1.060606-1.5492857c0-1.45285715-1.2848485-1.58785715-1.2848485-1.58785715H7.72727273v4.5835714H8.8909091v-1.1057143l1.0060606 1.1057142h1.7212121l-1.3515151-1.4464286zm-.44848488-.93857143H8.8909091v-1.0478571h.93333332s.26060608.1028572.26060608.5207143c0 .4178572-.26666668.5271429-.26666668.5271429zM14.2 12.4228572h-1.1818182c-.8424242 0-1.1272727.81-1.1272727 1.1957143v3.35571427h1.1818182v-.8035714h1.1090909v.8035714h1.1454545V13.6185715c0-.97714286-.8363636-1.1957143-1.1272727-1.1957143zm-.0181818 2.44928572h-1.1151515V13.76s0-.2507143.3696969-.2507143h.4060606c.3272728 0 .3333334.2507143.3333334.2507143v1.11214286h.0060606zm1.6848485-2.44928573h1.230303v4.5514285h-1.230303v-4.5514285zm2.9575757 3.375v-3.375H17.6v4.5514285h2.8787879v-1.1764285h-1.6545455zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76969696.16714284-3.93939393 1.87071427-5.2121212 4.12071427C.6 15.0714285.4242424 16.9742857.4242424 16.9742857zM10.4 9.0607143L10.4242424 8.63c-.0545454-.03214286-.2060606-.1092857-.58787876-.225l-.02424243.4242857c.2.0707143.3939394.14785716.5878788.2314286zM9.82424242 10.42357143l-.02424242.405c.2.00642857.4.03214286.6.07714286l.0242424-.3985715c-.2060606-.045-.4060606-.0707143-.59999998-.0835715zm-2.24242424-2.0057143h.06060606l-.12121212-.39214284c-.1878788 0-.38181818.0128571-.58181818.0385714l.1151515.3792857c.1757576-.0192857.35151517-.0257143.52727274-.0257143zm.2909091 2.3657143l.13939393.44357143c.1757576-.09.3515152-.16714286.5272728-.225l-.1333333-.42428572c-.2060606.06428572-.3818182.135-.5333333.2057143zM5.1212121 9.09285713l-.27272727-.44357142c-.15151515.0835715-.3090909.1735715-.47272727.2764286l.27878787.45c.15757576-.1028571.3090909-.1992857.46666667-.2828571zm1.24242424 2.89285716l.2909091.4628571c.1030303-.1607143.22424242-.3085715.35757575-.4564286L6.7393939 11.555c-.13939394.135-.26666667.28285714-.37575758.4307143zm-.87878788 2.07l.4909091.4114285C6 14.2164285 6.04242424 13.9657143 6.1030303 13.715l-.43636363-.36642857c-.07878788.23785714-.13333334.47571428-.1818182.70714286zM2.830303 11.0021428L2.4 10.60357142c-.15757576.1607143-.3090909.32142858-.44848485.48214287L2.41818182 11.51c.12727273-.17357143.26666666-.34714286.4121212-.50785714zM1 13.8757143l-.6969697-.27c-.1151515.27642856-.24242424.59785713-.3030303.77142856l.6969697.27C.77575758 14.42857143.9030303 14.11357143 1 13.8757143zm4.3939394 1.81285713c.0121212.34071428.04242424.61714286.07272727.81L6.1939394 16.775c-.05454546-.2507143-.10909092-.53357143-.14545455-.8357143l-.65454546-.25071427z","size":20,"color":"#CC0000"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"#777BB4"},{"tag":"laravel","tech":"Laravel","name":"M23.644 5.43c.009.032.014.065.014.099v5.15c0 .135-.073.26-.189.326l-4.323 2.49v4.934c0 .135-.072.258-.188.326L9.931 23.95c-.021.012-.043.02-.066.027-.008.002-.016.008-.024.01-.063.018-.13.018-.192 0-.011-.002-.02-.008-.029-.012-.021-.008-.043-.014-.063-.025L.534 18.755c-.117-.068-.189-.191-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.021.014-.032.006-.02.014-.04.023-.058.004-.013.015-.022.023-.033.012-.016.021-.031.033-.045.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034h.001L5.044.05c.115-.067.259-.067.375 0l4.512 2.597h.002c.015.01.027.021.041.033.012.009.025.018.037.027.013.014.021.029.033.045.008.011.02.021.025.033.011.019.017.038.024.058.003.011.011.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.005-.066.014-.098.003-.011.009-.021.013-.032.007-.02.014-.039.024-.059.007-.012.018-.021.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.028.014-.011.026-.023.041-.032h.001l4.513-2.598c.116-.067.259-.067.375 0l4.513 2.598c.016.01.027.021.042.031.012.01.025.018.036.028.013.014.022.029.034.044.008.012.019.021.024.033.011.02.018.039.024.059.006.011.012.022.015.033zm-.74 5.032V6.179l-1.578.908-2.182 1.256v4.283l3.76-2.164zm-4.511 7.75v-4.287l-2.146 1.225-6.127 3.498v4.326l8.273-4.762zM1.095 3.624v14.588l8.273 4.762v-4.326l-4.322-2.445-.002-.003h-.002c-.014-.01-.025-.021-.04-.031-.011-.01-.024-.018-.035-.027l-.001-.002c-.013-.012-.021-.025-.031-.039-.01-.012-.021-.023-.028-.037h-.002c-.008-.014-.013-.031-.02-.047-.006-.016-.014-.027-.018-.043-.004-.018-.006-.037-.008-.057-.002-.014-.006-.027-.006-.041V5.789l-2.18-1.257-1.578-.908zM5.231.81l-3.76 2.164 3.76 2.164 3.758-2.164L5.231.81zm1.956 13.505l2.182-1.256V3.624l-1.58.909-2.182 1.256v9.435l1.58-.909zM18.769 3.364l-3.76 2.164 3.76 2.163 3.759-2.164-3.759-2.163zm-.376 4.979l-2.182-1.256-1.579-.908v4.283l2.182 1.256 1.579.908V8.343zm-8.65 9.654l5.514-3.148 2.756-1.572-3.757-2.163-4.324 2.489-3.941 2.27 3.752 2.124z","size":20,"color":"#FF2D20"},{"tag":"cakephp","tech":"CakePHP","name":"M0 13.875v3.745c0 2.067 5.37 3.743 12 3.743V17.62c-6.63 0-12-1.68-12-3.743v-.002zm21.384 2.333L12 13.875v3.745l9.384 2.333C23.02 19.313 24 18.503 24 17.62v-3.745c0 .882-.98 1.692-2.616 2.333zM12 10.133v3.742c-6.627 0-12-1.677-12-3.744V6.38c0-2.064 5.37-3.743 12-3.743 6.625 0 12 1.68 12 3.744v3.75c0 .883-.98 1.69-2.616 2.334L12 10.13v.003z","size":20,"color":"#D33C43"},{"tag":"swift","tech":"Swift","name":"M21.984 16.348c.056-.112.056-.224.112-.336 1.346-5.272-1.851-11.44-7.347-14.693 2.412 3.253 3.365 7.122 2.524 10.599-.056.28-.168.617-.28.897a5.173 5.173 0 0 1-.45-.28S11.104 9.17 5.273 3.282c-.169-.168 3.14 4.71 6.841 8.58-1.738-1.01-6.673-4.542-9.758-7.403.337.617.842 1.234 1.346 1.851 2.58 3.309 5.945 7.346 9.983 10.43-2.86 1.74-6.842 1.851-10.88 0-1.01-.448-1.85-1.009-2.804-1.682 1.682 2.636 4.318 5.048 7.459 6.337 3.757 1.627 7.57 1.515 10.318 0h.057c.112-.056.224-.112.336-.224 1.346-.673 3.982-1.402 5.44 1.402.392.785 1.121-2.86-1.626-6.225z","size":20,"color":"#FA7343"},{"tag":"ios","tech":"iOS","name":"M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z","size":20,"color":"#403f3f"},{"tag":"kotlin","tech":"Kotlin","name":"M1.3 24l11.3-11.5L24 24zM0 0h12L0 12.5zM13.4 0L0 14v10l12-12L24 0z","size":20,"color":"#0095D5"},{"tag":"android","tech":"Android","name":"M24 19H0a13.6 13.6 0 0 1 2.21-6.07A11.2 11.2 0 0 1 5.87 9.4l.41-.23-2.02-3.41a.51.51 0 0 1 .17-.7.5.5 0 0 1 .69.18l2.08 3.5a12.62 12.62 0 0 1 4.84-.9 12.2 12.2 0 0 1 4.75.9l2.07-3.5a.5.5 0 0 1 .7-.17.51.51 0 0 1 .16.7L17.7 9.19l.5.28a11.38 11.38 0 0 1 3.63 3.62A14.48 14.48 0 0 1 24 19zm-7.5-4.48a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1zm-11 0a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1z","size":20,"color":"#3DDC84"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"#403f3f"},{"tag":"aws","tech":"AWS","name":"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z","size":20,"color":"#232F3E"},{"tag":"instagram","tech":"Instagram","name":"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z","size":20,"color":"#E4405F"},{"tag":"facebook","tech":"Facebook","name":"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z","size":20,"color":"#1877F2"},{"tag":"gitlab ci","tech":"Gitlab CI","name":"M4.844.904a1.007 1.007 0 00-.955.692l-2.53 7.783c0 .007-.005.012-.007.02L.07 13.335a1.437 1.437 0 00.522 1.607l11.072 8.045a.566.566 0 00.67-.004l11.074-8.04a1.436 1.436 0 00.522-1.61l-1.26-3.867a.547.547 0 00-.031-.104l-2.526-7.775a1.004 1.004 0 00-.957-.684.987.987 0 00-.949.69l-2.406 7.408H8.203l-2.41-7.408a.987.987 0 00-.943-.69h-.006zm-.006 1.42l2.174 6.678H2.674l2.164-6.678zm14.328 0l2.168 6.678h-4.342l2.174-6.678zm-10.594 7.81h6.862l-2.15 6.618L12 20.693 8.572 10.135zm-5.515.005h4.322l3.086 9.5-7.408-9.5zm13.568 0h4.326l-6.703 8.588-.709.914 2.959-9.108.127-.394zM2.1 10.762l6.978 8.947-7.818-5.682a.305.305 0 01-.112-.341l.952-2.924zm19.8 0l.952 2.922a.305.305 0 01-.11.341v.002l-7.82 5.68.025-.035 6.953-8.91Z","size":20,"color":"#FCA121"}]}},"allMarkdownRemark":{"totalCount":77,"edges":[{"node":{"excerpt":"Khi mới bắt đầu làm việc với Laravel, mình tin là nhiều người không biết hoặc không có thói quen \"khai thác\" hết những tính năng của Model. Vì vậy, trong bài viết này mình sẽ giới thiệu đến các bạn…","snippet":"<html><head></head><body><p>Khi m&#x1EDB;i b&#x1EAF;t &#x111;&#x1EA7;u l&#xE0;m vi&#x1EC7;c v&#x1EDB;i Laravel, m&#xEC;nh tin l&#xE0; nhi&#x1EC1;u ng&#x1B0;&#x1EDD;i kh&#xF4;ng bi&#x1EBF;t ho&#x1EB7;c kh&#xF4;ng c&#xF3; th&#xF3;i quen &quot;khai th&#xE1;c&quot; h&#x1EBF;t nh&#x1EEF;ng t&#xED;nh n&#x103;ng c&#x1EE7;a Model.</p> <p>V&#xEC; v&#x1EAD;y, trong b&#xE0;i vi&#x1EBF;t n&#xE0;y m&#xEC;nh s&#x1EBD; gi&#x1EDB;i thi&#x1EC7;u &#x111;&#x1EBF;n c&#xE1;c b&#x1EA1;n 7 &#x111;i&#x1EC1;u c&#x1EA7;n bi&#x1EBF;t &#x111;&#x1EC3; t&#x1EAD;n d&#x1EE5;ng t&#x1ED1;i &#x111;a&#x2026;</p></body></html>","html":"<p>Khi mới bắt đầu làm việc với Laravel, mình tin là nhiều người không biết hoặc không có thói quen \"khai thác\" hết những tính năng của Model.</p>\n<p>Vì vậy, trong bài viết này mình sẽ giới thiệu đến các bạn 7 điều cần biết để tận dụng tối đa Model, giúp mọi thứ sẽ đơn giản hơn rất nhiều.</p>\n<h2>Tạo Model</h2>\n<p>Đầu tiên chúng ta hãy tạo 1 model có tên <strong>Blog</strong> cho dễ thực hành nhé: </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"> php artisan make<span class=\"token punctuation\">:</span>model Blog </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Giờ chúng ta đã có Model rồi, bắt đầu vào tìm hiểu sức mạnh đầu tiên nào.</p>\n<h2>1. Casting attributes</h2>\n<p>Casting attributes - tức là bạn có thể chuyển đổi thuộc tính thành 1 kiểu dữ liệu nhất định, ví dụ như sau: </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$casts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>  \n    <span class=\"token single-quoted-string string\">'is_published'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'boolean'</span>  \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi khai báo như vậy, bất kể khi nào truy cập tới <em>is_published</em> thì nó cũng sẽ ở dạng boolean kể cả khi trong database bạn lưu ở dạng interger. </p>\n<p>Ngoài ra còn có rất nhiều kiểu chuyển đổi khác như là <em>date</em>, <em>datetime</em>.</p>\n<p>Khi mới bắt đầu, mình có thói quen viết thế này ở blade  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">{{ $blog->created_at->format ('Y-m-d') }}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và tất nhiên, nếu ở 1 blade khác cần dùng truy cập với <em>created_at</em> thì mình sẽ phải viết đi viết lại rất nhiều lần. Giờ đây điều này có thể thay thế bằng cách sử dụng thuộc tính $casts : </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$casts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'created_at'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'datetime:Y-m-d'</span><span class=\"token punctuation\">,</span> \n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Thuộc tính <em>created_at</em> sẽ luôn trả về theo định dạng <em>Y-m-d</em> và chúng ta không cần phải thực hiện bất kỳ công việc format nào nữa.</p>\n<h2>2. Accessors</h2>\n<p>Đôi khi bạn muốn kết hợp nhiều thuộc tính thành một hoặc bạn chỉ muốn định dạng một thuộc tính. Điều này có thể được thực hiện với <strong>Accessors</strong> trong Laravel.</p>\n<p>Mình sẽ lấy 1 ví dụ. Trong bảng <em>users</em>, có 2 trường là \"<em>first_name</em>\" và \"<em>last_name</em>\".  Nếu muốn hiển thị tên đầy đủ của người đó, có thể viết như sau </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">first_name</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' '</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">last_name</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Đó là một cách tiếp cận rất ngây thơ. Cách Laravel để giải quyết vấn đề này là sử dụng một Accessors. Đây là một phương thức được định nghĩa trong một Model với cú pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">get[NameOfAttribute]Attribute</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Với bài toán mình vừa đưa ra ở trên, nếu muốn lấy <em>full_name</em> , bạn cần viết như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> getFullNameAttribute <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">return</span>  <span class=\"token double-quoted-string string\">\"<span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span> first_name<span class=\"token punctuation\">}</span></span> <span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span> last_name<span class=\"token punctuation\">}</span></span>\"</span> <span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó, muốn truy cập đến <em>full_name</em> chỉ cần gọi </p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">full_name</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>3.  Mutators</h2>\n<p>Ngược với  <strong>Accessor</strong>,  <strong>Mutators</strong>  cho phép chúng ta định dạng lại giá trị thuộc tính trước khi lưu vào Database. Có cú pháp giống như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setLastNameAttribute</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'last_name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">ucfirst</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Ví dụ trên sẽ apply hàm  <em>ucfirst()</em>  cho  <em>last</em>name_  và lưu kết quả vào trong  <em>$attributes</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">last_name</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'jones'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kết quả sẽ là 'Jones'.</p>\n<h2>4. Visibility</h2>\n<p>Có một vài thuộc tính không nên được chứa trong dữ liệu được lấy ra, ví dụ như thuộc tính <em>password</em>. Và đây là trường hợp mà <strong>Visibility</strong> phát huy tác dụng, chúng ta có thể sử dụng thuộc tính <strong>$hidden</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$hidden</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'password'</span> \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nói đơn giản nhất, hidden tức là không hiển thị. Thuộc tính <strong>$hidden</strong> giống như một blacklist cho thuộc tính. </p>\n<p>Và ngoài ra, chúng ta cũng có thể sử dụng thuộc tính <strong>$visible</strong> được coi là whitelist cho thuộc tính.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$visible</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'first_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'last_name'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi sử dụng thuộc tính  <strong>$visible</strong>  trong model, thì các thuộc tính không được thiết lập sẽ tự động ẩn.</p>\n<h2>5. Appending values</h2>\n<p>Khi một Model có  <em>accessors</em>  và  <em>relations</em>, theo mặc định chúng sẽ không được thêm vào array và JSON của Model. Để làm điều này, chúng ta phải thêm  <em>accessors</em>  và  <em>relations</em>  vào thuộc tính  <em><strong>$appends</strong></em>  của model. Ví dụ với thuộc tính  <em>full</em>name_:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><em>Chú ý: Accessors được thêm vào thuộc tính $append sử dụng snack case chứ không phải camel case.</em></p>\n<p>Giả sử model User có quan hệ 1 - n với model Blog:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">blogs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span>App\\<span class=\"token package\">Blog</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để thêm blog vào model chỉ cần thêm vào thuộc tính  <em>$appends</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'blogs'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể chỉ định thuộc tính thêm vào. Ví dụ, chúng ta muốn thêm thuộc tính blog id và title vào model:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'full_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'blogs:id,title'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>6. Touches</h3>\n<p>Khi một model có mối quan hệ  <em>BelongsTo</em>  hoặc  <em>BelongsToMany</em>  với model khác, như trong trường hợp này: Comment model thuộc về một Blog, khi bạn sửa một comment và bạn muốn blog liên quan đến comment này cũng sẽ cập nhật lại thời gian, điều này có thể được thực hiện bằng cách thêm mối quan hệ vào thuộc tính  <em>$touches</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Comment</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$touches</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'blog'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">blog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span>App\\<span class=\"token package\">Blog</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Khi Comment model được update, thì thuộc tính  <em>updated</em>at_  của Blog model liên quan với comment này sẽ được cập nhật tự động.</p>\n<h2>Kết luận</h2>\n<p>Trên đây làm 6 điều quan trọng cần biết để có thể tận dụng tối đa Model, nếu như chưa có thói quen sử dụng thì mình khuyên các bạn nên thay đổi, ngay sau khi đọc được bài viết này :D </p>\n<p>Cảm ơn và hẹn gặp lại trong những bài viết mới nhé ! See yaaaa</p>\n<p> <em>From Vnus with love ....</em></p>","id":"1fae4a51-206d-5548-b2fb-6e76106c17a6","frontmatter":{"title":"6 things you need to know to get the most out of your Laravel Model","date":"19-10-2020","tags":["php","laravel"]},"fields":{"slug":"/6-things-you-need-to-know-to-get-the-most-out-of-your-laravel-model/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Đối với developer, việc đặt tên là việc thường xuyên phải làm. Đôi khi, thật dễ dàng để đặt tên cho một đối tượng hay một hành động nào đó. Nhưng, khi một project quá lớn, số đối tượng ngày càng phình…","snippet":"<html><head></head><body><p>&#x110;&#x1ED1;i v&#x1EDB;i developer, vi&#x1EC7;c &#x111;&#x1EB7;t t&#xEA;n l&#xE0; vi&#x1EC7;c th&#x1B0;&#x1EDD;ng xuy&#xEA;n ph&#x1EA3;i l&#xE0;m.</p> <p>&#x110;&#xF4;i khi, th&#x1EAD;t d&#x1EC5; d&#xE0;ng &#x111;&#x1EC3; &#x111;&#x1EB7;t t&#xEA;n cho m&#x1ED9;t &#x111;&#x1ED1;i t&#x1B0;&#x1EE3;ng hay m&#x1ED9;t h&#xE0;nh &#x111;&#x1ED9;ng n&#xE0;o &#x111;&#xF3;.</p> <p>Nh&#x1B0;ng, khi m&#x1ED9;t project qu&#xE1; l&#x1EDB;n, s&#x1ED1; &#x111;&#x1ED1;i t&#x1B0;&#x1EE3;ng ng&#xE0;y c&#xE0;ng ph&#xEC;nh to, vi&#x1EC7;c &#x111;&#x1EB7;t t&#xEA;n c&#x1EE7;a t&#xF4;i ng&#xE0;y c&#xE0;ng&#x2026;</p></body></html>","html":"<p>Đối với developer, việc đặt tên là việc thường xuyên phải làm.</p>\n<p>Đôi khi, thật dễ dàng để đặt tên cho một đối tượng hay một hành động nào đó.</p>\n<p>Nhưng, khi một project quá lớn, số đối tượng ngày càng phình to, việc đặt tên của tôi ngày càng khó khăn.</p>\n<h4>Problem</h4>\n<p>Thậm chí, tôi còn lăn tăn, liệu tôi có thể đặt tên trùng với một thành viên nào đó trong team không.</p>\n<p>Có một số vấn đề tôi thường gặp phải khi đặt tên:</p>\n<ul>\n<li>Conflict name: đây là vấn đề thường gặp nhất, khi project của tôi có nhiều thành viên.</li>\n<li>\n<p>Obscure (Dark): Tối nghĩa, cái tên chẳng nêu lên được ý nghĩa của hành động được thực hiện.</p>\n<p>Việc này thường xảy ra với những bạn chưa hiểu rõ được spec, hoặc đôi khi, bạn chẳng nghĩ ra được cái tên gì nó thực tế, nên đặt cho có lệ</p>\n</li>\n<li>Complex: tên quá dài, trong khi đó, tôi có thể đặt ngắn gọn hơn nhưng vẫn giữ được ý nghĩa đầy đủ.</li>\n</ul>\n<h4>Goal</h4>\n<p>Rõ ràng, việc đặt tên chuẩn, giúp tôi có lướt nhanh project mà không cần thiết phải đọc từng dòng code một.</p>\n<p>Với một chút ít kinh nghiệm coding của tôi, hiện tại, tôi có thể:</p>\n<ul>\n<li>Dễ dàng đặt tên biến hoặc tên function.</li>\n<li>Sử dụng ít thời gian đọc lại code nhất có thể</li>\n<li>Bất kỳ ai cũng có thể đọc hiểu code</li>\n</ul>\n<h4>The first requirement</h4>\n<p>Mỗi người đều có một tính cách và hành động riêng. Nhưng, hiển nhiên, tôi sống trong một xã hội, và tôi phải tuân thủ theo những quy tắc, luật lệ được đặt ra.</p>\n<p>Tương tự, việc naming, tôi cũng không thể bừa bãi được.</p>\n<h5>Reserved Word</h5>\n<p>Theo wikipedia</p>\n<blockquote>\n<p>Trong ngôn ngữ máy tính, một từ dành riêng, còn được gọi là định danh dành riêng là một từ không thể được sử dụng làm định danh, chẳng hạn như tên của một biến, hàm hoặc nhãn - đó là \"dành riêng cho việc sử dụng\"</p>\n</blockquote>\n<p>Như vậy, ngay ở cách định nghĩa, nó đã yêu cầu tôi tránh xa <code class=\"language-text\">Reserved Word</code>.</p>\n<p><code class=\"language-text\">Reserved Word</code> tuỳ thuộc vào từng programing language hay framework bạn sử dụng.</p>\n<p>Ví dụ:</p>\n<p>Đối với Ruby, reserved word là: alias, and, class, def ,else, ...</p>\n<p>Đối với Ruby on Rails, là: ActionController, ActionView, Binding</p>\n<p>Đối với javascript, là: function, char, var, ...</p>\n<p>Tôi có thể dùng từ khoá: <code class=\"language-text\">Reserved Word + Programing language</code> để có thể tìm hiểu thêm về các language khác.</p>\n<h5>Convention</h5>\n<p>Việc tuân theo convention, giúp tôi có thể naming một cách thống nhất, thoải mái, hạn chế tối đa sai sót có thể xảy ra.</p>\n<ul>\n<li>\n<p>Project convention</p>\n<p>Khi bạn tham gia vào một dự án, việc tuân thủ quy tắc của dự án là việc bắt buộc. Có thể quy tắc này khá lạ lẫm và nghịch lý với bạn và với ngôn ngữ bạn sử dụng. Nhưng, hãy nhớ tuân theo, mọi người trong dự án đang sử dụng, bạn đừng phá vỡ nó, mọi người sẽ khá khó chịu khi đọc code của bạn đó.</p>\n</li>\n<li>\n<p>Programing convention (Style guide)</p>\n<p>Nhưng <code class=\"language-text\">Style guide</code> này quy định, cách comment, lùi dòng, hay có thể giúp tôi optimize code luôn.</p>\n<p>Và đặc biệt là tên biến được đặt theo quy tắc nào. Việc này, giúp tôi không đặt tên biến loạn xì ngậu lên.</p>\n<p>Mỗi một ngôn ngữ đều có một hoặc rất nhiều bộ quy tắc. Ví dụ Javascript có rất nhiều style guide: <a href=\"https://google.github.io/styleguide/jsguide.html\">Google JavaScript Style Guide</a>, <a href=\"https://github.com/airbnb/javascript\">Airbnb JavaScript Style Guide</a> . Hãy lựa chọn một bộ quy tắc. Đừng tham, nếu bạn không hiểu rõ từng quy tắc một trong từng bộ quy tắc.</p>\n</li>\n<li>\n<p>Personal</p>\n<p>Ngoài những quy tắc chung kể trên, hãy tự tạo cho mình một số quy tắc, đừng phá vỡ quy tắc chung.</p>\n</li>\n</ul>\n<h4>Structure &#x26; Namespace</h4>\n<p>Tôi có thể cho bạn một ví dụ sau</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// application.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">saveresume</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">previewsaveresume</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>dset<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> dset<span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là một ví dụ nhỏ, tôi có thể dễ dàng đọc hiểu được.</p>\n<p>Nếu tôi code lại, chúng như thế này, liệu có thể dễ hiểu hơn ?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// resume.js</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Resume</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value<span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">preview</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">destination<span class=\"token punctuation\">,</span> dset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> destination<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span>dset<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> dset<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>member_resume<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tôi đã <code class=\"language-text\">Structure</code> lại (chuyển chúng ra file resume.js) và <code class=\"language-text\">Namespace</code> (sử dụng object <code class=\"language-text\">Resume</code>).</p>\n<p>Việc <code class=\"language-text\">chia nhỏ</code> như trên, giúp tôi không bị conflict với bất kỳ một tác vụ nào có thể phát sinh. Biết đâu, trong quá trình coding, tôi có thể phát sinh thêm nhiều <code class=\"language-text\">save</code> và <code class=\"language-text\">preview</code> với một đối tượng nào đó. Nó có thể khiến tôi nhầm lẫn. Do đó, tôi <code class=\"language-text\">chia để trị</code></p>\n<h4>Case style</h4>\n<p>Khi code javascript, tôi hay gặp trường hợp, cùng một developer, lúc thì bạn đó viết: <code class=\"language-text\">save_file</code>, lúc thì bạn viết <code class=\"language-text\">saveFile</code>.</p>\n<p>Thật may mắn, khi bạn sử dụng <code class=\"language-text\">Programing convention (Style guide)</code> mà tôi đã nhắc ở trên, nó hạn chế việc bạn đặt tên lung tung như vậy.</p>\n<p>Vậy có bao nhiêu loạ <code class=\"language-text\">case style</code></p>\n<ul>\n<li>camelCase: sử dụng để khai báo biến</li>\n<li>PascalCase: sử dụng để khai báo class</li>\n<li>\n<p>snake_case</p>\n<ul>\n<li>snake_case: tên trường hoặc bảng trong database, hay là <code class=\"language-text\">instance variable</code></li>\n<li>SNAKE_CASE: sử dụng như một hằng số</li>\n</ul>\n</li>\n<li>keybab-case: sử dụng trong url</li>\n</ul>\n<p>Dài quá, tôi sẽ tiếp tục ở phần 2</p>","id":"9499eed3-19b5-504c-8007-65201bfc4445","frontmatter":{"title":"Naming convention - part 1","date":"19-10-2020","tags":["convention"]},"fields":{"slug":"/naming-convention-1/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Amazon Elastic Container Registry (ECR) là dịch vụ lưu trữ bộ chứa Docker được quản lý đầy đủ giúp các nhà phát triển dễ dàng lưu trữ, quản lý và triển khai hình ảnh bộ chứa Docker. Amazon ECR được…","snippet":"<html><head></head><body><p>Amazon Elastic Container Registry (<strong>ECR</strong>) l&#xE0; d&#x1ECB;ch v&#x1EE5; l&#x1B0;u tr&#x1EEF; b&#x1ED9; ch&#x1EE9;a Docker &#x111;&#x1B0;&#x1EE3;c qu&#x1EA3;n l&#xFD; &#x111;&#x1EA7;y &#x111;&#x1EE7; gi&#xFA;p c&#xE1;c nh&#xE0; ph&#xE1;t tri&#x1EC3;n d&#x1EC5; d&#xE0;ng l&#x1B0;u tr&#x1EEF;, qu&#x1EA3;n l&#xFD; v&#xE0; tri&#x1EC3;n khai h&#xEC;nh &#x1EA3;nh b&#x1ED9; ch&#x1EE9;a Docker. Amazon <strong>ECR</strong> &#x111;&#x1B0;&#x1EE3;c t&#xED;ch h&#x1EE3;p v&#x1EDB;i Amazon Elastic Container Service (ECS),&#x2026;</p></body></html>","html":"<p>Amazon Elastic Container Registry (<strong>ECR</strong>) là dịch vụ lưu trữ bộ chứa <a href=\"https://aws.amazon.com/vi/docker/\">Docker</a> được quản lý đầy đủ giúp các nhà phát triển dễ dàng lưu trữ, quản lý và triển khai hình ảnh bộ chứa Docker. Amazon <strong>ECR</strong> được tích hợp với <a href=\"https://aws.amazon.com/vi/ecs/\">Amazon Elastic Container Service (ECS)</a>, giúp đơn giản hóa quy trình công việc từ khi khâu phát triển đến khâu sản xuất. Amazon ECR giúp bạn không phải vận hành các kho bộ chứa riêng hay thay đổi quy mô cơ sở hạ tầng ngầm. Amazon ECR sẽ trở thành máy chủ lưu trữ hình ảnh của bạn trong kiến trúc có độ sẵn sàng cao và quy mô linh hoạt, cho phép bạn triển khai các bộ chứa cho ứng dụng của mình một cách ổn định. Khả năng tích hợp với AWS Identity and Access Management (<strong>IAM</strong>) đem đến cho bạn khả năng kiểm soát từng kho ở cấp tài nguyên. Với Amazon <strong>ECR</strong>, bạn sẽ không phải trả tiền trước hay có cam kết gì. Bạn chỉ phải chi trả chi phí cho lượng dữ liệu bạn lưu trong các kho cũng như dữ liệu được truyền lên Internet.\n<img src=\"https://d1.awsstatic.com/diagrams/product-page-diagrams/Product-Page-Diagram_Amazon-ECR.bf2e7a03447ed3aba97a70e5f4aead46a5e04547.png\" alt=\"enter image description here\"></p>\n<h1>Lợi ích</h1>\n<ul>\n<li>Đây là dịch vụ lưu trữ Docker image cho các dự án và nhiều môi trường sử dụng nền tảng đám mây <strong>AWS</strong>, ECR cho phép bạn tạo phân vùng theo <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html\">region</a> định sẵn.</li>\n<li>Sự kết hợp tuyệt vời với <strong>AWS \u001dBeanstalk</strong>, đối với các dự án tích hợp deploy bằng CI/CD khi \u001c sử dụng đến <em>Beanstalk</em> thì Docker ECR là một trong những sự lựa tối ưu và đa dụng \u001dnhất trong hệ sinh thái đám mây AWS.</li>\n<li><strong>Docker ECR</strong> được mã hoá file và sử dụng AWS Identity nên chỉ có thể truy cập và sử dụng nếu có Identity, bạn không thể copy nguyên link của Docker image này rồi truy cập ở một nơi khác khi không có Identity được. Bạn có thể build image từ local, CI/CD và pust lên Docker ECR kèm theo <strong>Identity</strong> đã cho.</li>\n<li>\n<p>Dựa vào region đã định sẵn nên tốc độ build/deploy dự án sẽ nhanh hơn là dùng Docker hub, bạn có thể sử dụng một repo chứa nhiều môi trường(test, develop, staging).</p>\n<h2>Được quản lý toàn phần</h2>\n</li>\n</ul>\n<p>Amazon Elastic Container Registry giúp bạn không phải vận hành và thay đổi quy mô cơ sở hạ tầng để làm nền tảng hoạt động cho sổ đăng ký bộ chứa của mình. Bạn sẽ không cần phải cài đặt và quản lý phần mềm hay thay đổi quy mô cơ sở hạ tầng. Chỉ cần đẩy hình ảnh trong bộ chứa của bạn lên Amazon ECR và lấy hình ảnh ra bằng bất kỳ công cụ quản lý bộ chứa nào khi bạn cần triển khai.</p>\n<h2>Độ sẵn sàng cao</h2>\n<p>Amazon Elastic Container Registry có kiến trúc bền bỉ, dư thừa và có quy mô cực kỳ linh hoạt. Các hình ảnh trong bộ chứa của bạn rất dễ sử dụng và truy cập, nên bạn có thể triển khai ổn định các bộ chứa mới cho ứng dụng của mình.</p>\n<h2>Bảo mật</h2>\n<p>Amazon Elastic Container Registry truyền hình ảnh của bạn qua kết nối HTTPS và tự động mã hóa hình ảnh được lưu trữ của bạn. Bạn có thể cấu hình các chính sách để quản lý quyền và kiểm soát truy cập vào hình ảnh của bạn bằng cách sử dụng người dùng và vai trò của AWS Identity and Access Management (IAM) mà không phải trực tiếp quản lý thông tin xác thực trên phiên bản EC2.</p>\n<h2>Quy trình công việc đơn giản hoá nhất có thể</h2>\n<p>Amazon Elastic Container Registry được tích hợp với Amazon ECS và CLI Docker, đem đến cho bạn khả năng đơn giản hóa quy trình công việc phát triển và sản xuất. Bạn có thể dễ dàng đẩy hình ảnh trong bộ chứa của bạn lên Amazon ECR bằng cách sử dụng CLI Docker từ bộ máy phát triển của bạn rồi Amazon ECS sẽ có thể lấy trực tiếp từ đó để phục vụ quá trình triển khai sản xuất.</p>\n<h1>Kết hợp với CI/CD</h1>\n<h2>Ưu điểm:</h2>\n<ul>\n<li>Từ các ứng dụng CI/CD hot nhất hiện nay như: Circleci, Github Action, Gitlab Action,... có thể sử dụng để build các Docker image <strong>ECR</strong> và thực hiện testing trong các Docker container đó rất tiện dụng và giảm thiểu khả năng rủi do cho môi trường production.</li>\n<li>Chúng ta có thể linh động để build các job theo quy trình để kiểm thử code, docker hoạt động có chơn chu hay không trước khi tiến đến bước deploy dự án,...</li>\n<li>Sử dụng Docker ECR trong CI bạn sẽ không cần phải mất nhiều thời gian để đi chỉ cho các thanh niên develop khác rằng đoạn code này có thể lỗi hay không và lỗi đó ở đâu, cách fix như thế nào, các thanh niên đó sẽ tự biết cách fix và tìm hiểu,... Bạn có thể dành time làm các công việc khác trong một mớ công việc được giao :D.</li>\n<li>\n<p>Bạn có thể kết nối đến các <strong>RDS</strong> từ bên trong mỗi container.</p>\n<h2>Nhược điểm:</h2>\n</li>\n<li>Docker ECR chỉ dành cho khách hàng chịu chơi, bạn sẽ phải tốn thêm chi phí cho mỗi lần build và deploy dự án.</li>\n<li>Chỉ dành cho người về Docker mới có thể build và sử dụng.</li>\n<li>Chỉ dành cho các dự án có sử dụng đến nền tảng đám mây AWS.</li>\n<li>Tài liệu về Docker ECR còn ít đòi hỏi khả năng research của bạn phải đạt mức thượng thừa :D.</li>\n<li>Bạn phải am hiểu về AWS mới có thể cấu hình cho dự án hoạt động đúng yêu cầu.</li>\n</ul>\n<h1>Kết luận</h1>\n<p>Từ bài viết này bạn đã phần nào hình dung về <strong>AWS Docker ECR</strong> rồi đúng không nào, đừng ngại ngần hãy đề xuất và áp dụng vào dự án nhé, nó sẽ rất linh hoạt cho dự án của bạn đó.\nBạn sẽ cần tốn chút time tìm hiểu xem cơ chế hoạt động của nó thế nào,.. :D  đừng lo lắng, nó đơn giản lắm:</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Lê Văn Chiến </div><div class=\"custom-block-body\"></div></div>","id":"c4f936a4-80ba-5a9e-9798-d18167228a62","frontmatter":{"title":"About Amazon Elastic Container Registry (ECR)","date":"18-10-2020","tags":["docker","aws","erc","ci","git"]},"fields":{"slug":"/about-amazon-elastic-container-registry-ecr/","readingTime":{"text":"6 min read"}}}},{"node":{"excerpt":"CakePHP 3: Bake by example Bài viết này hướng đến những người mới làm quen với khuôn khổ CakePHP 3. I. Trước khi bạn sử dụng bake command Tạo một số bảng, tuân theo quy ước CakePHP.\nKiểm tra xem bạn…","snippet":"<html><head></head><body><h1>CakePHP 3: Bake by example</h1> <p>B&#xE0;i vi&#x1EBF;t n&#xE0;y h&#x1B0;&#x1EDB;ng &#x111;&#x1EBF;n nh&#x1EEF;ng ng&#x1B0;&#x1EDD;i m&#x1EDB;i l&#xE0;m quen v&#x1EDB;i khu&#xF4;n kh&#x1ED5; CakePHP 3.</p> <h5><em>I. Tr&#x1B0;&#x1EDB;c khi b&#x1EA1;n s&#x1EED; d&#x1EE5;ng bake command</em></h5> <p>T&#x1EA1;o m&#x1ED9;t s&#x1ED1; b&#x1EA3;ng, tu&#xE2;n theo quy &#x1B0;&#x1EDB;c CakePHP. Ki&#x1EC3;m tra xem b&#x1EA1;n c&#xF3; &#x111;ang &#x1EDF; th&#x1B0; m&#x1EE5;c g&#x1ED1;c c&#x1EE7;a d&#x1EF1; &#xE1;n&#x2026;</p></body></html>","html":"<h1>CakePHP 3: Bake by example</h1>\n<p>Bài viết này hướng đến những người mới làm quen với khuôn khổ CakePHP 3.</p>\n<h4><em>I. Trước khi bạn sử dụng bake command</em></h4>\n<p>Tạo một số bảng, tuân theo <a href=\"https://book.cakephp.org/3/en/intro/conventions.html#database-conventions\">quy ước</a> CakePHP.\nKiểm tra xem bạn có đang ở thư mục gốc của dự án không, nếu bạn liệt kê danh sách thư mục, bạn sẽ thấy các thư mục \"bin\", \"config\", \"src\", \"webroot\".</p>\n<h4>II. Tạo controller cho một bảng được gọi là <code class=\"language-text\">users</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake controller Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Controller/UsersController.php</p>\n</blockquote>\n<h4>III. Tạo model (and entity cho một bảng được gọi là <code class=\"language-text\">users</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Model/Table/UsersTable.php<br>\ncreates src/Model/Entities/User.php</p>\n</blockquote>\n<h4>IV. Tạo template mẫu mặc định cho bảng (add/edit/view/index)</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Template/Users/index.ctp add.ctp edit.ctp view.ctp</p>\n</blockquote>\n<h4>V. Gộp tất cả những điều trên trong 1 lệnh</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake all Users</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>VI. Chỉ định template users thư mục index</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users index</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Template/Users/index.ctp</p>\n</blockquote>\n<h4>VII. Command bake cho các thư mục tiền tố (ví dụ: )</h4>\n<p>Nếu bạn đang làm cho một phần quản trị của trang web của mình, bạn sẽ sử dụng các template và controller riêng biệt.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake controller Users --prefix admin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates src/Controller/Admin/UsersController.php  </p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users --prefix admin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>VIII. Bake from a different database</h3>\n<p>Các ví dụ trước đều sử dụng kết nối db được định nghĩa trong app.php là  <code class=\"language-text\">app.php</code>  as  <code class=\"language-text\">&#39;default&#39;</code>.\nNếu bạn có cơ sở dữ liệu kế thừa để xử lý hồ sơ khách hàng, ví dụ:.  <code class=\"language-text\">db_records</code>, tệp  <a href=\"https://book.cakephp.org/3.0/en/orm/database-basics.html#configuration\">config file</a> trông như thế này.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// in config/app.php\n&#39;Datasources&#39; =&gt; [\n        &#39;default&#39; =&gt; [\n            &#39;host&#39; =&gt; &#39;localhost&#39;,\n            &#39;username&#39; =&gt; &#39;db_user&#39;,\n            &#39;password&#39; =&gt; &#39;pass123&#39;,\n            &#39;database&#39; =&gt; &#39;db_application&#39;,\n        ],\n        &#39;records&#39; =&gt; [\n            &#39;host&#39; =&gt; &#39;localhost&#39;,\n            &#39;username&#39; =&gt; &#39;db_records_user&#39;,\n            &#39;password&#39; =&gt; &#39;pass123&#39;,\n            &#39;database&#39; =&gt; &#39;db_records&#39;,\n        ],\n]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>IX. Tạo mô hình cho một bảng được gọi là  <code class=\"language-text\">user_records</code>  trong cơ sở dữ liệu bản ghi</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>creates /src/Model/Table/UserRecordsTable.php</p>\n</blockquote>\n<blockquote>\n<p>creates src/Template/Admin/Users/index.ctp edit.ctp add.ctp view.ctp</p>\n</blockquote>\n<p>Điều này sẽ bao gồm trong  <code class=\"language-text\">UserRecordsTable.php</code> tệp của bạn. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">public static function defaultConnectionName()\n{\n    return &#39;records&#39;;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tạo một mô hình từ cơ sở dữ liệu này cho một bảng không tuân theo quy ước\nở trên, ví dụ: tbl<em>records</em>user. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records --table tbl_records_user</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<blockquote>\n<p>create /src/Model/Table/UserRecordsTable.php<br>\ntạo /src/Model/Entities/UserRecord.php</p>\n</blockquote>\n<p>Điều này sẽ thêm <code class=\"language-text\">defaultConnectionName()</code>và cũng đặt.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$this-&gt;setTable(&#39;tbl_records_user&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn có thể đặt các tùy chọn khác ở đây, nhưng một số tùy chọn dễ đặt hơn bằng cách chỉnh sửa tệp sau đó. Nhưng ví dụ: bạn cũng có thể đặt trường <a href=\"https://book.cakephp.org/3.0/en/orm/retrieving-data-and-resultsets.html#finding-key-value-pairs\">hiển thị</a> thành một thứ gì đó khác với trường mặc định, ví dụ: email  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records --table tbl_records_user --display-field email</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Điều này sẽ sửa đổi trường hiển thị  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$this-&gt;setDisplayField(&#39;email&#39;);</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<hr>\n<h4>X. Các quy tắc của hiệp hội</h4>\n<p>Theo mặc định, <code class=\"language-text\">bake</code> lệnh sẽ tìm kiếm các liên kết. Nếu bạn đang sử dụng bảng kế thừa hoặc một nguồn dữ liệu khác, bất kỳ tiêu đề trường nào kết thúc bằng <code class=\"language-text\">_id</code> có thể gây ra lỗi 'không tìm thấy bảng cơ sở hoặc chế độ xem'.</p>\n<p>Để tránh điều này, bạn có thể sử dụng điều  mà không cần liên kết  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model UserRecords -c records --table tbl_records_user --no-associations</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>XI. Sử dụng bằng một plugin</h3>\n<p>Giả sử bạn đã cài đặt một plugin như <a href=\"https://github.com/FriendsOfCake/bootstrap-ui\">friendsofcake / BootstrapUI</a> để các tệp mẫu của bạn đang sử dụng kiểu Bootstrap theo mặc định,<br>\nBây giờ bạn có thể thêm <code class=\"language-text\">-t BootstrapUI</code>vào bất kỳ lệnh nào ở trên</p>\n<h4>XII. Tạo tệp mẫu bằng plugin</h4>\n<blockquote>\n<p>tạo /src/Template/Users/index.ctp add.ctp edit.ctp view.ctp  </p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake template Users -t BootstrapUI</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4>XIII. Tạo toàn bộ khung MVC (bộ điều khiển, bảng, thực thể, mẫu) bằng cách sử dụng cơ sở dữ liệu kế thừa</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake all UserRecords -c records --table tbl_records_user -t BootstrapUI</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<hr>\n<h3>XIV .Các tính năng hữu ích</h3>\n<p>Bake dựa vào kết nối cơ sở dữ liệu, do đó, để giúp bạn tải lên và ghi nhớ tất cả các bảng trong hệ thống, bạn có thể gọi một lệnh mà không cần chỉ định tên bảng để xem danh sách các bảng có sẵn. Giả sử cơ sở dữ liệu của bạn có 3 bảng:<br>\n<code class=\"language-text\">users</code><br>\n<code class=\"language-text\">articles</code><br>\n<code class=\"language-text\">activity_logs</code></p>\n<p>Sử dụng lệnh <code class=\"language-text\">bin/cake bake model</code>sẽ tạo ra một danh sách các bảng có sẵn  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake model\nChoose a model to bake from the following:\nUsers\nArticles\nActivityLogs</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tương tự đối với:  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">bin/cake bake controller\nbin/cake bake template</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<hr>\n<p>Hy vọng rằng nếu bạn đang sử dụng CakePHP lần đầu tiên, đây là tài liệu tham khảo hữu ích cho bảng điều khiển nướng.</p>","id":"3918e1d4-43ea-57a2-8cf3-af844426d0c8","frontmatter":{"title":"CakePHP 3: For Beginner","date":"14-10-2020","tags":["php","cakephp"]},"fields":{"slug":"/cakephp-3-bake-by-example/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Từ năm 2016, PHP7 đã được nâng cấp hằng năm. Mỗi năm nó đều có tính năng mới, và có tính năng giúp viết code gọn hơn, khiến cho ngôn ngữ lập trình thân thiện với người quản lý website hơn. Hãy cùng…","snippet":"<html><head></head><body><p>T&#x1EEB; n&#x103;m 2016, PHP7 &#x111;&#xE3; &#x111;&#x1B0;&#x1EE3;c n&#xE2;ng c&#x1EA5;p h&#x1EB1;ng n&#x103;m. M&#x1ED7;i n&#x103;m n&#xF3; &#x111;&#x1EC1;u c&#xF3; t&#xED;nh n&#x103;ng m&#x1EDB;i, v&#xE0; c&#xF3; t&#xED;nh n&#x103;ng gi&#xFA;p vi&#x1EBF;t code g&#x1ECD;n h&#x1A1;n, khi&#x1EBF;n cho ng&#xF4;n ng&#x1EEF; l&#x1EAD;p tr&#xEC;nh th&#xE2;n thi&#x1EC7;n v&#x1EDB;i ng&#x1B0;&#x1EDD;i qu&#x1EA3;n l&#xFD; website h&#x1A1;n.</p> <p>H&#xE3;y c&#xF9;ng t&#xEC;m hi&#x1EC3;u phi&#xEA;n b&#x1EA3;n PHP 7.4 n&#xE0;y&#x2026;</p></body></html>","html":"<p>Từ năm 2016, PHP7 đã được nâng cấp hằng năm. Mỗi năm nó đều có tính năng mới, và có tính năng giúp viết code gọn hơn, khiến cho ngôn ngữ lập trình thân thiện với người quản lý website hơn.</p>\n<p>Hãy cùng tìm hiểu phiên bản PHP 7.4 này có gì mới. Toàn bộ danh sách thay đổi đầy đủ bạn có thể đọc thêm  <a href=\"https://www.php.net/manual/en/migration74.php\">tại đây</a>.</p>\n<h3>Preloading</h3>\n<p>Hãy nói về code trước. Khi sử dụng framework hoặc libaries, files được tải lên và link trên mỗi request. Preloading là khi bạn tải framework và libraries vào trong OPCache. Nó giúp server tải file PHP trước và lưu trên bộ nhớ khi khởi động để có sẵn cho bất kỳ request nào tương lai!</p>\n<p>Preloading được chạy bằng  <strong>php.ini</strong>  với chỉ dẫn:  <strong>opache.preload</strong>. Nó bắt PHP script chạy khi server khởi động. Nó cũng có thể được dùng để tải lên nhiều file khác hoặc chọn để inlcude hay compile chúng.</p>\n<p>Rất tuyệt phải không, có điều, nếu nguồn bị thay đổi, server phải khởi động lại. Preloaded files cũng bị nằm trong bộ nhớ OPCache mãi mãi.</p>\n<p>Những preload files này cũng sẵn sàng dùng cho request tương lai nếu cần sử dụng.</p>\n<h3>Spread Operator trong Array Expressions</h3>\n<p>Quay về khi PHP 5.6 phát hành, PHP bắt đầu hỗ trợ argument unpacking (spread operator). Còn bây giờ với 7.4, chúng ta có thể dùng tính năng này với array expression. <strong>Argument unpacking</strong> là một <em>syntax</em> để <em>unpack array</em> và <em>travesables</em> thành arguments list. Để làm vậy, nó chỉ cần dùng … (3 chấm) là được.</p>\n<p>Hãy xem qua ví dụ bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$animals</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'dog'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'cat'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$animalkingdom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'lion'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'elephant'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$animals</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'giraffe'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ['lion', 'elephant', 'dog', 'cat', 'giraffe'];</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Giờ chúng ta có thể mở rộng array từ mọi nơi trong một array khác, chỉ bằng cú pháp Spread Operator.</p>\n<p>Ví dụ dài hơn:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$num1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$num2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3]</span>\n<span class=\"token variable\">$num3</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [0, 1, 2, 3]</span>\n<span class=\"token variable\">$num4</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">111</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 1, 2, 3, 111]</span>\n<span class=\"token variable\">$num5</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$num1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 1, 2, 3]</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Có vậy thôi, nhưng bạn cũng có thể dùng nó trong một hàm. Ví dụ như:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num6</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">getNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['a', 'b', 'c']</span>\n<span class=\"token variable\">$num7</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NumIterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['a', 'b', 'c']</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">arrGen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">15</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span><span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">yield</span> <span class=\"token variable\">$i</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num8</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">arrGen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [11, 12, 13, 14]</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Hơn nữa, bạn giờ có thể unpack array và generators được trả về từ hàm trực tiếp vào trong array mới.</p>\n<p>Ví dụ về code như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAnimals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'dog'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'cat'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'elephant'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAnimals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'lion'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tiger'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'giraffe'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với PHP 7.4, nó sẽ in ra:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"dog\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"cat\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"elephant\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"lion\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"tiger\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"giraffe\"</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với array expression này, spread operatos có hiệu năng tốt hơn so với bản 7.3  <strong>array_merge</strong>. Đó là vì spread operator là ngôn ngữ cấu trúc trong khi đó  <strong>array_merge</strong>  là một hàm. Cũng vì spread operator hỗ trợ  <strong>objects</strong>  triển khai ngang còn  <strong>array_merge</strong>  chỉ hỗ trợ arrays.</p>\n<p>Một vài điều cần lưu ý, bạn chỉ có thể dùng indexed arrays vì string keys không được hỗ trợ. Nếu sử dụng, lỗi recoverable sẽ xuất ra màn hình, vì phát hiện thấy string key.</p>\n<p>Một ưu điểm nổi trội khá của 7.4 là việc loại bỏ array_merge.</p>\n<p>Ví dụ, hãy xem một array merge bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'banana'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'orange'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$array</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'orange'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$array</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'apple'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//shifting</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// prints</span>\n<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"banana\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"apple\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token operator\">></span>\n<span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token double-quoted-string string\">\"orange\"</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Một ưu điểm của 7.4 sử dụng function generator.  <a href=\"https://www.php.net/manual/en/language.generators.syntax.php\">Generator function</a>  cũng giống như một hàm thông thường, ngoại trừ việc thay vì trả về một giá trị, generator function có thể trả về nhiều giá trị.</p>\n<p>Hãy xem thử ví dụ bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">generator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span><span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">yield</span> <span class=\"token variable\">$i</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$num1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token function\">generator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Weak References</h3>\n<p>PHP 7.4 bây giờ đã có class WeakReference, không nên lầm lẫn với class  <strong>WeakRed</strong>  và  <strong>Weakref</strong>  extension.</p>\n<p><strong>WeakReferences</strong>  giúp programmer gọi tham chiếu tới một object. Nó hữu dụng vì nó không ngăn object bị hủy. Hó hỗ trợ triển khai cache có cấu trúc.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\nWeakReference <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* Methods */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>void<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>object <span class=\"token variable\">$referent</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> WeakReference\n    <span class=\"token keyword\">public</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>void<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span>object\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Contravariant Parameters và Covariant Returns</h3>\n<p>Hiện tại, PHP sử dụng hầu như invariant parameter types và return types. Có nghĩa là, nếu một phương thức có parameter hay return type của X thì subtype parameter hoặc return type cũng phải là loại  <strong>X</strong>.</p>\n<p>Bây giờ với PHP 7.4, nó cho phép  <strong>covariant</strong>  (được sắp từ chi tiết đến tổng quan) và  <strong>contravariant</strong>  (ngược lại) trên parameter và return types.</p>\n<p>Đây là ví dụ của cả hai:</p>\n<p>Ví dụ return type của covariant:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> object<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UserFactory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ví dụ loại contravariant parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Concatable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>Iterator <span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Collection</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Concatable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// accepts all iterables, not just Iterator</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>iterable <span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* ... */</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Typed Properties 2.0</h3>\n<p>Từ PHP 5, type hints đã được hỗ trợ, cho phép một loại biến nhất định được chuyển tới hàm hoặc class. Khi nâng cấp lên PHP 7.2, data type  <strong>object</strong>  xuất hiện, và các loại khác có thể cũng được chờ đón hơn trong tương lai. Tương lai giờ đã ở đây rồi</p>\n<p>Trong phiên bản 7.4 mới, PHP có thể hỗ trợ những loại sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\nbool<span class=\"token punctuation\">,</span> int<span class=\"token punctuation\">,</span> float<span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">,</span> iterable<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">,</span> <span class=\"token keyword\">parent</span>\nany <span class=\"token keyword\">class</span> <span class=\"token class-name\">or</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">name</span>\n<span class=\"token operator\">?</span>type <span class=\"token comment\">// where \"type\" may be any of the above</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Lưu ý loại  <strong>parent</strong>  có thể được dùng trong classes, và không cần có tính đồng nhất của parent với parameter và return type</p>\n<p>Cũng vậy, lưu ý là  <strong>void</strong>  và  <strong>callable</strong>  không được hỗ trợ.  <strong>Void</strong>  bị xóa vì nó không hữu dụng và tính chất không rõ ràng;  <strong>Callable</strong>, vì hành vi của nó phụ thuộc bối cảnh.</p>\n<p>Hãy xem một vài ví dụ sau.</p>\n<p>Đây là một class, được viết cho PHP 7.3:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** @var int $id */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/** @var string $name */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> int <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>PHP 7.4, không hy sinh sự an toàn của bất kỳ type nào, một class có thể được viết đơn giản như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> int <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>int <span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> string <span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là một vài ví dụ khác của các type mà 7.4 hỗ trợ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> int <span class=\"token variable\">$scalarType</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">protected</span> ClassName <span class=\"token variable\">$classType</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token operator\">?</span>ClassName <span class=\"token variable\">$nullableClassType</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Types are also legal on static properties</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> iterable <span class=\"token variable\">$staticProp</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Types can also be used with the \"var\" notation</span>\n    <span class=\"token keyword\">var</span> bool <span class=\"token variable\">$flag</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Typed properties may have default values (more below)</span>\n    <span class=\"token keyword\">public</span> string <span class=\"token variable\">$str</span> <span class=\"token operator\">=</span> <span class=\"token double-quoted-string string\">\"foo\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span>string <span class=\"token variable\">$nullableStr</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// The type applies to all properties in one declaration</span>\n    <span class=\"token keyword\">public</span> float <span class=\"token variable\">$x</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// equivalent to:</span>\n    <span class=\"token keyword\">public</span> float <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> float <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Arrow Functions 2.0</h3>\n<p>Anonymous functions trong PHP dường như rất dài dòng, kể cả khi chỉ thực hiện một tác vụ đơn giản. Một phần là lượng lớn của syntactic boilerplate, một phần là cận nhập biến một cách thủ công.</p>\n<p>Nó làm cho code khó đọc và càng khó hiểu.</p>\n<p>Hãy xem code sau nó dùng PHP 7.3:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">array_values_from_keys</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arr</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">array_map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Còn đây là cú pháp chính xác của PHP 7.4:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">array_values_from_keys</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$arr</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">array_map</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$keys</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Arrow function giờ có dạng đơn giản hơn nhiều:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>parameter_list<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> expr</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bên dưới bạn có thể thấy ví dụ của 2 hàm  <strong>$fn1 (7.3)</strong>  và  <strong>$fn2 (7.4)</strong>  cạnh nhau. Chúng có cùng kết quả nhưng cú pháp khác nhau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$y</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$fn1</span> <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$fn2</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">use</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$y</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nó cũng hoạt động được nếu arrow function kết hợp lại:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$z</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$fn</span> <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span> <span class=\"token operator\">*</span> <span class=\"token variable\">$y</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$z</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tại đây, function bên ngoài bắt lấy biến  <strong>$z</strong>. Sau đó, function ở trong cũng bắt $z từ bên ngoài. Phiên bản 7.4 hỗ trợ việc này, còn 7.3 thì không thể: outer scope có thể được dùng trong inner function</p>\n<p>Cú pháp arrow function syntax cho phép sử dụng đa dạng các function như là, variadics, default values, parameter và return types, cũng như by-reference passing và returning. Nhưng cũng có thể giữ cho code được sạch và dễ đọc. Bên dưới là arrow function hợp lệ có thể dùng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> int <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span> <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\nfn<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token variable\">$rest</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$rest</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Một điều cần lưu ý là arrow functions có quyền ưu tiên thấp nhất. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span>\n<span class=\"token comment\">// is</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// not</span>\n<span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$y</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Nguồn tham khảo</h2>\n<ul>\n<li><a href=\"https://www.php.net/releases/7_4_0.php\">https://www.php.net/releases/7<em>4</em>0.php</a></li>\n<li><a href=\"https://www.hostinger.com/\">https://www.hostinger.com/</a></li>\n</ul>","id":"1cd02f26-e660-5708-aa0b-12e94fa717fe","frontmatter":{"title":"What's new in PHP 7.4?","date":"14-10-2020","tags":["php","php7.4"]},"fields":{"slug":"/co-gi-moi-o-php74/","readingTime":{"text":"9 min read"}}}},{"node":{"excerpt":"Như các bạn đã biết, phân quyền trong một ứng dụng là một phần không thể thiếu trong việc phát triển phần mềm. Vậy nên, hôm nay mình sẽ giới thiệu một package có thể giúp các bạn phân quyền nhanh và…","snippet":"<html><head></head><body><p>Nh&#x1B0; c&#xE1;c b&#x1EA1;n &#x111;&#xE3; bi&#x1EBF;t, ph&#xE2;n quy&#x1EC1;n trong m&#x1ED9;t &#x1EE9;ng d&#x1EE5;ng l&#xE0; m&#x1ED9;t ph&#x1EA7;n kh&#xF4;ng th&#x1EC3; thi&#x1EBF;u trong vi&#x1EC7;c ph&#xE1;t tri&#x1EC3;n ph&#x1EA7;n m&#x1EC1;m. V&#x1EAD;y n&#xEA;n, h&#xF4;m nay m&#xEC;nh s&#x1EBD; gi&#x1EDB;i thi&#x1EC7;u m&#x1ED9;t package c&#xF3; th&#x1EC3; gi&#xFA;p c&#xE1;c b&#x1EA1;n ph&#xE2;n quy&#x1EC1;n nhanh v&#xE0; &#x111;&#x1A1;n gi&#x1EA3;n trong m&#x1ED9;t website &#x111;&#x1B0;&#x1EE3;c vi&#x1EBF;t b&#x1EB1;ng&#x2026;</p></body></html>","html":"<p>Như các bạn đã biết, phân quyền trong một ứng dụng là một phần không thể thiếu trong việc phát triển phần mềm. Vậy nên, hôm nay mình sẽ giới thiệu một package có thể giúp các bạn phân quyền nhanh và đơn giản trong một website được viết bằng PHP với framework là Laravel. Đó là package laravel-permission. Chúng ta cùng tìm hiểu nhé!</p>\n<h1>I. Cài đặt Laravel permission</h1>\n<p>Laravel permission cho phép chúng ta có thể dễ dàng phân chia các vai trò (roles) và quyền (permissions) dùng để quản lý quyền hạn truy cập trong một trang web. Để cài đặt package này, chúng ta cần:</p>\n<ul>\n<li>Laravel phiên bản cao hơn 5.8</li>\n<li>Nếu bạn đang có sẵn file <code class=\"language-text\">config/permission.php</code> bạn phải đổi tên hoặc xóa, bởi vì khi setup thì package sẽ được publishes vào <code class=\"language-text\">config/permission.php</code>\nChúng ta chạy câu lệnh dưới để cài đặt package nhé:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">composer <span class=\"token keyword\">require</span> spatie<span class=\"token operator\">/</span>laravel<span class=\"token operator\">-</span>permission</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Sau đó, trong config/app.php chúng ta add service provide cho package như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    Spatie\\<span class=\"token package\">Permission<span class=\"token punctuation\">\\</span>PermissionServiceProvider</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó, publish migration thông qua lệnh:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">php artisan vendor<span class=\"token punctuation\">:</span>publish <span class=\"token operator\">--</span>provider<span class=\"token operator\">=</span><span class=\"token double-quoted-string string\">\"Spatie\\Permission\\PermissionServiceProvider\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Chạy lệnh <code class=\"language-text\">php artisan migrate</code> và chúng ta sẽ có các bảng như roles, permissions, role<em>has</em>permissions, model<em>has</em>roles và model<em>has</em>permission</p>\n<h2>II. Tạo Role và Permission</h2>\n<p>Đầu tiên add trait của <code class=\"language-text\">Spatie\\Permission\\Traits\\HasRoles</code> vào model mà bạn muốn phần quyền ở đây thì mình sẽ add vào model <code class=\"language-text\">Admin</code> nhé:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Traits<span class=\"token punctuation\">\\</span>HasRoles</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Admin</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Authenticatable</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">HasRoles</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó chúng ta thêm các vai trò (roles) và quyền (permissions), một role có thể có nhiều permission. Chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Role</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Permission</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$role</span> <span class=\"token operator\">=</span> Role<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span> <span class=\"token operator\">=</span> Permission<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Như trên các bạn đã thấy, mình vừa tạo ra một Role có tên là <code class=\"language-text\">subAdmin</code> và một Permission là <code class=\"language-text\">managementUser</code></p>\n<p>Một quyền có thể được chỉ định cho một vài cho bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permission</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//or...</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nhiều quyền có thể được đồng bộ hóa với một vai trò bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncPermissions</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permissions</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncRoles</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$roles</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Có thể xóa quyền khỏi vai trò bằng một trong các phương pháp sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$role</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">revokePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$permission</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$permission</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeRole</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Để lấy thông tin tất cả các <code class=\"language-text\">users</code> có role là <code class=\"language-text\">subAdmin</code> chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> Admin<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">role</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc trả về các user có quyền truy cập <code class=\"language-text\">managementUser</code></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> Admin<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">permission</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>III. Cách sử dụng</h2>\n<p><strong><em>1. Trao quyền trực tiếp cho 1 user</em></strong></p>\n<p>Bạn có thể giao một quyền cho một <code class=\"language-text\">user</code> như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span>managementUser'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>bạn cũng có thể giao nhiều quyền user trong một lần hoặc có thể sử dụng mảng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//or</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">givePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Để xóa một quyền khỏi một <code class=\"language-text\">user</code> nào đó, chúng ta làm như sau :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">revokePermissionTo</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc xóa và thêm mới một quyền khác thì chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncPermissions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'managementContact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và còn một số option khác, các bạn có thể tham khảo thêm <a href=\"https://spatie.be\">https://spatie.be</a></p>\n<p><strong><em>2. Trao quyền thông qua Role</em></strong></p>\n<p>Một roles có thể được trao cho bất cứ <code class=\"language-text\">users</code> nào bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'edit'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cũng có thể giao nhiều roles cho user trong một lần hoặc có thể sử dụng mảng:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assignRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể xóa và thêm vai trò mới thông qua</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">syncRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Hoặc để xóa một role khỏi một user, chúng ta chỉ cần làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">removeRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bạn cũng có thể check xem liệu <code class=\"language-text\">user</code> có phải là <code class=\"language-text\">role</code> đang cần tìm bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">hasRole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Sử dụng với middleware</em></strong></p>\n<p>Bạn có thể sử dụng <code class=\"language-text\">can</code> như một mặc định để giới hạn quyền truy cập cho trang web bằng cách :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'can:managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc nếu bạn không muốn sử dụng mặc định, Laravel permission mang đến cho chúng ta các middleware <code class=\"language-text\">RoleMiddleware</code>, <code class=\"language-text\">PermissionMiddleware</code> and <code class=\"language-text\">RoleOrPermissionMiddleware</code>. Để sử dụng, bạn cần thêm vào app/Http/Kernel.php file như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$routeMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token single-quoted-string string\">'role'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Middlewares<span class=\"token punctuation\">\\</span>RoleMiddleware</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'permission'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">Spatie<span class=\"token punctuation\">\\</span>Permission<span class=\"token punctuation\">\\</span>Middlewares<span class=\"token punctuation\">\\</span>PermissionMiddleware</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó sử dụng chúng để kiểm tra các route :</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'role:super-admin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nRoute<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">group</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'middleware'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'permission:managementUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>4. Sử dụng trực tiếp trên Blade</em></strong></p>\n<p>Đối với phần view, để hiển thị view tương ứng cho các vai trò, chúng ta có thể sử dụng <code class=\"language-text\">@can</code>, <code class=\"language-text\">@cannot</code>, <code class=\"language-text\">@canany</code>, and <code class=\"language-text\">@guest</code> để kiểm tra việc xem thông tin hiển thị trên một trang web. Chúng ta làm như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">can</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'managementUser'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">//</span>\n@endcan</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Bạn cũng có thể dùng <code class=\"language-text\">role</code> để check việc này:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">role</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//</span>\n@endrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Hoặc là:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">hasrole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//</span>\n@endhasrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Chúng ta có thể linh hoạt trong việc check nhiều <code class=\"language-text\">roles</code> hơn như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">@<span class=\"token function\">hasanyrole</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'subAdmin|admin'</span><span class=\"token punctuation\">)</span>\n   <span class=\"token comment\">//</span>\n@<span class=\"token keyword\">else</span>\n  <span class=\"token comment\">//</span>\n@endhasanyrole</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>IV. Kết luận</h2>\n<p>Bài viết trên mình cũng đã giới thiệu và hướng dẫn sử dụng một số tính năng cơ bản trong package laravel permission để phân quyền trong ứng dụng chạy bằng framework Laravel. Cảm ơn các bạn đã đọc bài viết của mình ^-^</p>\n<h6><em><div style=\"text-align: right\"> - by Phan Trung </div></em></h6>","id":"d67db112-1e9b-5cad-bbb0-8fddcb9110a7","frontmatter":{"title":"[Laravel] Simple authorization with the Laravel permission package","date":"14-10-2020","tags":["php","laravel"]},"fields":{"slug":"/phan-quyen-voi-package-Laravel-permission/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"CakePHP cung cấp khá nhiều các chức năng hữu ích cho lập trình viên trong đó có việc tích hợp sẵn PHPUnit. Ngoài các tính năng do PHPUnit cung cấp, CakePHP cũng cung cấp một số tính năng bổ sung giúp…","snippet":"<html><head></head><body><p>CakePHP cung c&#x1EA5;p kh&#xE1; nhi&#x1EC1;u c&#xE1;c ch&#x1EE9;c n&#x103;ng h&#x1EEF;u &#xED;ch cho l&#x1EAD;p tr&#xEC;nh vi&#xEA;n trong &#x111;&#xF3; c&#xF3; vi&#x1EC7;c t&#xED;ch h&#x1EE3;p s&#x1EB5;n PHPUnit. Ngo&#xE0;i c&#xE1;c t&#xED;nh n&#x103;ng do PHPUnit cung c&#x1EA5;p, CakePHP c&#x169;ng cung c&#x1EA5;p m&#x1ED9;t s&#x1ED1; t&#xED;nh n&#x103;ng b&#x1ED5; sung gi&#xFA;p vi&#x1EC7;c ki&#x1EC3;m th&#x1EED; d&#x1EC5; d&#xE0;ng h&#x1A1;n. B&#xE0;i vi&#x1EBF;t n&#xE0;y&#x2026;</p></body></html>","html":"<p>CakePHP cung cấp khá nhiều các chức năng hữu ích cho lập trình viên trong đó có việc tích hợp sẵn PHPUnit. Ngoài các tính năng do PHPUnit cung cấp, CakePHP cũng cung cấp một số tính năng bổ sung giúp việc kiểm thử dễ dàng hơn. Bài viết này bao gồm việc hướng dẫn cài đặt PHPUnit và thực hiện một vài kiểm thử đơn giản. </p>\n<h1>I. Cài đặt PHPUnit.</h1>\n<p><strong><em>1. Cài đặt</em></strong></p>\n<p>PHPUnit có thể được cài đặt thông qua <em>PHAR package</em> hoặc <em>Composer</em>.</p>\n<ul>\n<li>\n<p>Cài đặt PHPUnit bằng Composer.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer require --dev phpunit/phpunit:<span class=\"token string\">\"^8.5\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Cài đặt PHPUnit bằng PHAR package.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">php phpunit.phar</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Thiết lập cơ sỡ dử liệu</em></strong></p>\n</li>\n</ul>\n<p>Hãy chắc chắn rằng bạn đã bật <em>debug</em> trong tệp config/app.php trước khi chạy bất kì thử nghiệm nào. Bạn cũng cần cấu hình và tạo một cơ sở dữ liệu mới cho việc kiểm thử để tránh mất dữ liệu trong dự án. Đây là cấu hình cơ bản mà CakePHP hỗ trợ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'Datasources'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'test'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'datasource'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Cake\\Database\\Driver\\Mysql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'persistent'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'host'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dbhost'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'username'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dbname'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dbpass'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'database'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'test_database'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong><em>3. Chạy PHPUnit</em></strong></p>\n<p>Bây giờ bạn có thể chạy PHPUnit bằng cách:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">vendor/bin/phpunit</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>hoặc</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer <span class=\"token builtin class-name\">test</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Để chạy PHPUnit cho một thử nghiệm cụ thể, bạn có thể cung cấp đường đẫn đến thử nghiệm theo dạng tham số. Ví dụ: nếu bạn có một thử nghiệm cho lớp <strong>ArticlesTableTest</strong>, bạn có thể chạy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">composer <span class=\"token builtin class-name\">test</span> tests/TestCase/Model/Table/ArticlesTableTest</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nếu bạn thấy thông báo màu xanh với trạng thái là <strong>OK</strong> cùng một số thông tin về quá trình thử nghiệm thì việc kiểm thử của bạn đã thành công. Ngược lại, nếu thấy thông báo màu đỏ và trạng thái là <strong>FAILURES</strong> cùng các thông tin về lỗi thì việc kiểm thử đã thất bại, bạn cần kiểm tra lại code của mình. Lưu ý, nếu bạn đang sử dụng Window thì thông báo sẽ không hiện thị màu nên hãy nhận biết bằng trạng thái để biết việc kiểm thử có thành công hay không.</p>\n<h1>II. Quy ước và tạo kiểm thử.</h1>\n<p><strong><em>1. Quy ước về kiểm thử</em></strong></p>\n<p>Giống như hầu hết mọi thứ trong CakePHP, việc tạo và chạy các kiểm thử cũng có một số quy ước:</p>\n<ol>\n<li>Các tệp PHP chứa các thử nghiệm phải nằm trong thư mục <em>tests/TestCase/[Type]</em>.</li>\n<li>Tên các tệp phải kết thúc bằng <strong>Test.php</strong> thay vì <strong>.php</strong> như các tệp thông thường.</li>\n<li>Các lớp chứa các thử nghiệm nên được kế thừa từ các lớp: Cake\\TestSuite\\TestCase, Cake\\TestSuite\\IntegrationTestCase hoặc \\PHPUnit\\Framework\\TestCase.</li>\n<li>Tên lớp cần phải khớp với tên tệp. VD: class RouterTest extends TestCase.</li>\n<li>Tên của bất kì phương thức nào trong tệp mà có chứa các khẳng định (assertion) phải bắt đầu bằng test, ví dụ: testPublished. </li>\n</ol>\n<p><strong><em>2. Tạo kiểm thử đầu tiên</em></strong></p>\n<p>Trong ví dụ sau, chúng ta sẽ tạo phương thức <em>bar()</em> trong một <em>Helper</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProgressHelper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Helper</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$width</span> <span class=\"token operator\">=</span> <span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span>\n            <span class=\"token single-quoted-string string\">'&lt;div class=\"progress-container\">\n                &lt;div class=\"progress-bar\" style=\"width: %s%%\">&lt;/div>\n            &lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$width</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đây là một ví dụ đơn giản, nhưng sẽ rất hữu ích để bắt đầu một thử nghiệm. Sau khi tạo <em>Helper</em> chúng ta sẽ tạo tệp <strong>tests/TestCase/View/Helper/ProgressHelperTest.php</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Test<span class=\"token punctuation\">\\</span>TestCase<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Helper<span class=\"token punctuation\">\\</span>ProgressHelper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>TestSuite<span class=\"token punctuation\">\\</span>TestCase</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Cake<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>View</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProgressHelperTest</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">TestCase</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">testBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong lớp thử nghiệm hãy luôn có phương thức <em>setUp()</em>. Phương thức này sẽ được gọi đầu tiên và giúp tạo các đối tượng cần thiết cùng thực hiện bất kì cấu hình nào của bạn.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$view</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Progress</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProgressHelper</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$view</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi tạo phương thức <em>setUp()</em>, chúng ta sẽ tiếp tục làm việc với phần quan trọng nhất đó là phương thức thử nghiệm <em>testBar()</em>. Hãy tạo một số khẳng định để đảm bảo rằng <em>Helper</em> hoạt động và tạo ra kết quả mong đợi.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">testBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Progress</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assertStringContainsString</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'width: 90%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assertStringContainsString</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'progress-bar'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">Progress</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.3333333</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">assertStringContainsString</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'width: 33%'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Phương thức <em>assertStringContainsString()</em> để đảm bảo rằng chuỗi trả về chứa nội dung mà chúng ta mong đợi. Nếu kết quả không chứa nội dung mong đợi quá trình kiểm tra sẽ không thành công và code đang chưa được chính xác. Đây là ví dụ khi quá trình kiểm tra diễn ra thành công.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.                                                   <span class=\"token number\">1</span> / <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">100</span>%<span class=\"token punctuation\">)</span>\n\nTime: <span class=\"token number\">0.21</span> minutes, Memory: <span class=\"token number\">2.00</span> MB\n\nOK <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> tests, <span class=\"token number\">3</span> assertions<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>III. Kết luận.</h1>\n<p>Bằng việc sử dụng các thử nghiệm, chúng ta có thể mô tả mối quan hệ giữa các đầu vào đã biết và đầu ra mong đợi của chúng. Điều này giúp chúng ta tự tin hơn về code đang viết vì có thể đảm bảo rằng code đã đáp ứng được các kì vọng và khẳng định mà các thử nghiệm đưa ra.</p>\n<p>Hi vọng bài viết này sẽ giúp các bạn hiểu hơn về cách tạo và chạy một thử nghiệm trong CakePHP và hãy luôn sử dụng các thử nghiệm cho dự án của mình nhé! </p>\n<h6><em><div style=\"text-align: right\"> - by Phu Thai </div></em></h6>","id":"eb3ec820-3f13-5ff8-9973-c303eda41b2a","frontmatter":{"title":"Integration PhpUnit test into Cakephp for beginner","date":"14-10-2020","tags":["php","cakephp"]},"fields":{"slug":"/testing-cakephp-for-beginner/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"Có rất nhiều docker command được giới thiệu trong document của docker. Chúng ta chắc hẳn không sử dụng hết tất cả chúng. Vậy với những người mới bắt đầu sử dụng docker, chúng ta cần chú ý đến những…","snippet":"<html><head></head><body><p>C&#xF3; r&#x1EA5;t nhi&#x1EC1;u docker command &#x111;&#x1B0;&#x1EE3;c gi&#x1EDB;i thi&#x1EC7;u trong document c&#x1EE7;a docker. Ch&#xFA;ng ta ch&#x1EAF;c h&#x1EB3;n kh&#xF4;ng s&#x1EED; d&#x1EE5;ng h&#x1EBF;t t&#x1EA5;t c&#x1EA3; ch&#xFA;ng. V&#x1EAD;y v&#x1EDB;i nh&#x1EEF;ng ng&#x1B0;&#x1EDD;i m&#x1EDB;i b&#x1EAF;t &#x111;&#x1EA7;u s&#x1EED; d&#x1EE5;ng docker, ch&#xFA;ng ta c&#x1EA7;n ch&#xFA; &#xFD; &#x111;&#x1EBF;n nh&#x1EEF;ng command n&#xE0;o. Trong b&#xE0;i vi&#x1EBF;t n&#xE0;y, m&#xEC;nh s&#x1EBD; gi&#x1EDB;i thi&#x1EC7;u&#x2026;</p></body></html>","html":"<p>Có rất nhiều docker command được giới thiệu trong document của docker. Chúng ta chắc hẳn không sử dụng hết tất cả chúng. Vậy với những người mới bắt đầu sử dụng docker, chúng ta cần chú ý đến những command nào. Trong bài viết này, mình sẽ giới thiệu cho các bạn các lệnh docker hay sử dụng nhất.</p>\n<p><strong><em>1. Kiểm tra phiên bản</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker -v</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>2. Liệt kê các image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker images -a</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>3. Xóa một image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker image <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>imageId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>4. Tải về một image từ hub.docker.com</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker pull <span class=\"token operator\">&lt;</span>imageName<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>version<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>5. Kiểm tra thông tin chi tiết của 1 image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker inspect <span class=\"token operator\">&lt;</span>imageId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>6. Liệt kê các container đang chạy</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">ps</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>7. Liệt kê tất cả các container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">ps</span> -a</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>8. Xóa container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>9. Tạo mới một container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run -it <span class=\"token operator\">&lt;</span>imageId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>10. Vào terminal container đang chạy</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container attach <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>11. Chạy container đang dừng</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker container start -i <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>12. Chạy một lệnh trên container đang chạy</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>13. Kiểm tra thông tin chi tiết của 1 container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker inspect <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>14. Dừng 1 container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker stop <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>15. Chia sẻ dữ liệu</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run -it -v <span class=\"token operator\">&lt;</span>pathInHost<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>pathInContainer<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>imageName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>16. Liệt kê network trong docker</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker network <span class=\"token function\">ls</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>17. Tạo một network</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker network create --driver <span class=\"token operator\">&lt;</span>networkType<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>networkName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>18. Kết nối vào 1 network</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker network connect <span class=\"token operator\">&lt;</span>networkName<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>containerName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>19. Kiểm tra các thông tin của network</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker inspect <span class=\"token operator\">&lt;</span>networkName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>20. Mapping post</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker run -p <span class=\"token operator\">&lt;</span>hostPost<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>containerPost<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>21. Xem lịch sử container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">history</span> <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>22. Check logs container</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker logs <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>23. Hướng dẫn sử dụng lệnh</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker --help</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>24. Xoá tất cả container, image, network, và build cache không sử dụng</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker system prune</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>25. Kiểm tra các thay đổi của container từ khi nó được tạo</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker <span class=\"token function\">diff</span> <span class=\"token operator\">&lt;</span>containerName<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>26. Lưu container thành image</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker commit <span class=\"token operator\">&lt;</span>containerId<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>imageName<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>version<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong><em>27. Tạo image từ dockerfile</em></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">docker buid</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>II. Lời kết</h1>\n<p>Trên dây là những lệnh docker cơ bản hay dùng. Hi vọng bài viết sẽ giúp ích cho mọi người khi làm việc với Docker.\n<em><div style=\"text-align: right\"> - by Huunv </div></em></p>","id":"c7c74d7b-f18d-5157-a522-92ab6e2cf806","frontmatter":{"title":"Docker Commands For Beginner","date":"13-10-2020","tags":["Docker"]},"fields":{"slug":"/docker-commands-for-beginner/","readingTime":{"text":"3 min read"}}}},{"node":{"excerpt":"1. Định nghĩa Dependency Injection(DI) là mô hình lập trình, cách tổ chức code sao cho các đoạn code khác nhau, các module khác nhau, các lớp khác nhau không phụ thuộc nhau một cách cứng nhắc, mà cần…","snippet":"<html><head></head><body><h4>1. &#x110;&#x1ECB;nh ngh&#x129;a</h4> <p>Dependency Injection(DI) l&#xE0; m&#xF4; h&#xEC;nh l&#x1EAD;p tr&#xEC;nh, c&#xE1;ch t&#x1ED5; ch&#x1EE9;c code sao cho c&#xE1;c &#x111;o&#x1EA1;n code kh&#xE1;c nhau, c&#xE1;c module kh&#xE1;c nhau, c&#xE1;c l&#x1EDB;p kh&#xE1;c nhau kh&#xF4;ng ph&#x1EE5; thu&#x1ED9;c nhau m&#x1ED9;t c&#xE1;ch c&#x1EE9;ng nh&#x1EAF;c, m&#xE0; c&#x1EA7;n c&#xF3; m&#x1ED9;t c&#x1A1; ch&#x1EBF; thay &#x111;&#x1ED5;i c&#xE1;c th&#xE0;nh ph&#x1EA7;n ph&#x1EE5; thu&#x1ED9;c&#x2026;</p></body></html>","html":"<h3>1. Định nghĩa</h3>\n<p>Dependency Injection(DI) là mô hình lập trình, cách tổ chức code sao cho các đoạn code khác nhau, các module khác nhau, các lớp khác nhau không phụ thuộc nhau một cách cứng nhắc, mà cần có một cơ chế thay đổi các thành phần phụ thuộc cả ở thời điểm chạy và thời điểm biên dịch.</p>\n<h3>2. Lợi ích</h3>\n<p>Làm giảm sự phụ thuộc giữa các đối tượng.</p>\n<p>Giúp viết Unit test dễ dàng hơn.</p>\n<p>Giảm thiểu được boilerplate code vì việc khởi tạo dependency được làm bởi một component khác.</p>\n<p>Mở rộng dự án dễ dàng hơn.</p>\n<p>Giúp ích trong việc liên kết lỏng (loose coupling) giữa các thành phần trong dự án.</p>\n<p>Dễ bảo trì, module hóa ứng dụng và mở rộng.</p>\n<h3>3. Nhược điểm</h3>\n<p>Dependency Injection ẩn các dependency nên một số lỗi chỉ xảy ra khi chạy chương trình thay vì có thể phát hiện khi biên dịch chương trình.</p>\n<p>Nó khá là phức tạp để học, và nếu dùng quá đà thì có thể dẫn tới một số vấn đề khác.</p>\n<p>Có thể làm ảnh hưởng tới chức năng auto-complete hay Find references của một số IDE.</p>\n<p>Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$username</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">username</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$username</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">password</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">username</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> string\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">password</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C1. Không sử dụng DI</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$username</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$password</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C2. Sử dụng DI</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C3. Sử dụng DI trong setter</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Database</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">config</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$config</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'tmpuser'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'tmppass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$database</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>C4. Sử dụng DI thông qua Interface</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">DatabaseInterface</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setConfig</span><span class=\"token punctuation\">(</span>Config <span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Trong cách 1 ở trên ta không sử dụng DI sẽ có một số vấn đề là ta phải khởi tạo Config ngay trong class Database, về logic thì không có gì để nói, nhưng về mở rộng và bảo trì code thì sẽ khó bởi:</p>\n<p>Database và Config class đang bị gắn vào nhau, nếu Config có sự thay đổi(về tham số khởi tạo chẳng hạn) thì sẽ kéo theo sự thay đổi của Database và những class liên quan tới Config.</p>\n<p>Database biết nhiều thứ của Config quá, mà cái gì quá cũng không tốt.</p>\n<p>Với cách thứ 2 thì Database không phụ thuộc vào Config nữa, mà được truyền thẳng đối tượng Config thông qua hàm khởi tạo, như vậy sẽ giải quyết được vấn đề ở cách 1 thực hiện.</p>\n<h3>4. Các kiểu Dependency Injection</h3>\n<h3>4.1. Constructor Injection</h3>\n<p>Ở cách thứ 2 chính là sử dụng kiểu Constructor Injection, với cách này có một số đặc điểm là giảm sự phụ thuộc, giảm sự phức tạp từ Config và linh hoạt trong việc mở rộng và thay đổi từ Config.</p>\n<h3>4.2. Setter Injection</h3>\n<p>Ở cách thứ 3 là sử dụng kiểu Setter Injection. Như vậy ta cũng không cần làm thay đổi logic trong code mà chỉ đơn giản khai báo trong setter, đôi khi chúng ta cũng cần một giá trị mặc định gì đó cho Config thì có thể triển khai trong setter này.</p>\n<h3>4.3. Interface Injection</h3>\n<p>Sử dụng như trong cách thứ 4. Khi Database cần triển khai thì cần implements DatabaseInterface và cần cung cấp đối tượng Config thông qua setConfig.</p>\n<h2>5. Dependency Injection Container</h2>\n<p><code>Khi đối tượng phụ thuộc quá lớn thì sao?</code></p>\n<p>Lúc này giải pháp đưa ra là cần tạo một thùng chứa chuyên quản lý tất cả các đối tượng độc lập, từ autoload, khởi tạo, thiết lập và cài cắm vào đối tượng khác. Dependency Injection Container được ra đời.\nTrong Laravel có một công cụ rất mạnh đó là Service Container, nó quản lý các dependencies và thực hiện xử lý dependency injection. Các bạn có thể tham khảo thêm trong <a href=\"https://laravel.com/docs/8.x/container\">tài liệu của Laravel.</a></p>\n<h2>6. Tạm kết</h2>\n<p>Vậy trách nhiệm của dependency injection là:</p>\n<ul>\n<li>Tạo ra các object.</li>\n<li>Biết được class nào cần những object đấy.</li>\n<li>Cung cấp cho những class đó những object chúng cần.</li>\n</ul>\n<p>Bằng cách này, nếu trong tương lai object đó có sự thay đổi thì dependency injection có nhiệm vụ cấp lại những object cần thiết cho class.</p>\n<p>--- Cảm ơn mọi người đã đọc bài viết của mình. Chúc một ngày vui vẻ!!! ---</p>\n<h6><em><div style=\"text-align: right\"> - by Anh Lee </div></em></h6>","id":"5809e949-9f5e-51e1-91a3-91888adf5371","frontmatter":{"title":"Dependency injection and dependency injection container in Laravel","date":"12-10-2020","tags":["php","laravel"]},"fields":{"slug":"/dependency-injection-and-dependency-injection-container-in-laravel/","readingTime":{"text":"5 min read"}}}},{"node":{"excerpt":"1.Giới thiệu Chào cả nhà, sau bài làm sao để tạo animation sóng trong iOS thì nay em trở lại với một chủ đề nhỏ nữa muốn chia sẻ với mọi người đặc biệt là những anh em iOS. Đó là làm sao để tạo…","snippet":"<html><head></head><body><h1>1.Gi&#x1EDB;i thi&#x1EC7;u</h1> <p>Ch&#xE0;o c&#x1EA3; nh&#xE0;, sau b&#xE0;i l&#xE0;m sao &#x111;&#x1EC3; t&#x1EA1;o animation s&#xF3;ng trong iOS th&#xEC; nay em tr&#x1EDF; l&#x1EA1;i v&#x1EDB;i m&#x1ED9;t ch&#x1EE7; &#x111;&#x1EC1; nh&#x1ECF; n&#x1EEF;a mu&#x1ED1;n chia s&#x1EBB; v&#x1EDB;i m&#x1ECD;i ng&#x1B0;&#x1EDD;i &#x111;&#x1EB7;c bi&#x1EC7;t l&#xE0; nh&#x1EEF;ng anh em iOS. &#x110;&#xF3; l&#xE0; l&#xE0;m sao &#x111;&#x1EC3; t&#x1EA1;o carousel trong iOS v&#x1EDB;i swift.&#x2026;</p></body></html>","html":"<h1>1.Giới thiệu</h1>\n<p>Chào cả nhà, sau bài <a href=\"https://blog.tomosia.com/swift-tao-animation-song-trong-ios-voi-swift/\">làm sao để tạo animation sóng trong iOS</a> thì nay em trở lại với một chủ đề nhỏ nữa muốn chia sẻ với mọi người đặc biệt là những anh em iOS. Đó là làm sao để tạo carousel trong iOS với swift.</p>\n<p>Với carousel thì đây là một kiểu UI UX rất là phổ biến. Nó có mặt ở hầu hết các website, mobile app, desktop app, ... Đối với mảng web và android thì được support khá là nhiều để có thể implement nó một cách rất là dễ dàng cho nên cũng không cần quá phải lo lắng 😄, tuy nhiên đối với iOS thì không được Apple support nhiều đến như vậy 🤧, cho nên là việc biết cách implement carousel trở nên rất là quan trọng. Do đó, em mong rằng sau khi đọc xong bài viết này thì mọi người có thể hiểu và áp dụng được vào cho dự án của mình.</p>\n<h1>2. Đặt vấn đề</h1>\n<p>Như mọi người cũng đã biết thì với UICollectionView và UICollectionViewFlowLayout hoặc từ iOS 13 trở lên có UICollectionViewCompositionalLayout thì đã có thể implement được hầu hết các chức năng của một Carousel, đó là horizontal scroll, custom UICollectionViewCell, set contentOffset, ... Tuy nhiên có một chức năng mà nếu chỉ sử dụng UICollectionViewFlowLayout hay UICollectionViewCompositionalLayout thì sẽ rất khó để có thể làm được đó là infinite scroll. Do đó, để có thể tạo ra một Carousel hoàn hảo thì em nghĩ ta phải custom lại UICollectionViewLayout.</p>\n<p>Việc custom lại UICollectionViewLayout nghĩa là sẽ phải tự sắp xếp vị trí của các UICollectionViewCell, và việc tính toán vị trí của Cell sẽ phải giải quyết các vấn đề sau đây:</p>\n<ol>\n<li>Tính toán vị trí của Cell sao cho phù hợp với design</li>\n<li>Tính toán vị trí của Cell mỗi lần UICollectionView change offset</li>\n<li>Tính toán vị trí của Cell sao cho có infinite scroll</li>\n<li>Tính toán vị trí offset phù hợp để mỗi lần scroll thì các Cell hiển thị đúng với design</li>\n</ol>\n<h1>3. Ý tưởng</h1>\n<p>Về cơ bản chúng ra có 4 vấn đề như đã đề cập ở trên, tuy nhiên design là khác nhau đối với mỗi app, hay với mỗi màn hình cho nên là ở bài này em sẽ chỉ nói đến việc làm sao để có infinite scroll. Ý tưởng của em dựa trên một ý nghĩ rất là đơn giản đó là, đối với mỗi Cell mà đang được focus, thì ta sẽ phải tính được vị trí của tất cả các Cell nằm ở bên trái và tất cả các Cell nằm ở bên phải. Mỗi khi UICollectionView change offset thì sẽ phải tính toán lại tất cả mọi thứ 😄</p>\n<h1>4. Triển khai ý tưởng</h1>\n<p>Đầu tiên ta sẽ tạo ra class CollectionViewLayout kế thừa lại UICollectionViewLayout</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CollectionViewLayout</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionViewLayout</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForElements</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">nil</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> collectionViewContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">CGSize</span><span class=\"token punctuation\">.</span>zero\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">shouldInvalidateLayout</span><span class=\"token punctuation\">(</span>forBoundsChange newBounds<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mỗi khi UICollectionView reload data hay invalidate layout thì hàm prepare sẽ được gọi nên là chúng ta sẽ tính toán vị trí của các Cell ở hàm này.</p>\n<p>Chúng ta sẽ tạo ra các biến sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> itemSpacing<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">8</span> <span class=\"token comment\">// khoảng cách giữa các Cell</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> currentCellIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// IndexPath.item của cell sẽ được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> offsetX<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// vị trí offset của UICollectionView khi tính toán lại vị trí của các Cell</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> leftArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// mảng chứa IndexPath.item của các Cell nằm bên trái Cell đang được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> rightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// mảng chứa IndexPath.item của các Cell nằm bên phải Cell đang được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> contentWidth<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> numberOfItem<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> collectionView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">numberOfItems</span><span class=\"token punctuation\">(</span>inSection<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> sizeCell<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> width <span class=\"token operator\">=</span> collectionView<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">-</span> itemSpacing <span class=\"token operator\">*</span> <span class=\"token number\">4</span>\n  <span class=\"token keyword\">let</span> height <span class=\"token operator\">=</span> collectionView<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>height\n  <span class=\"token keyword\">return</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> height<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Implement hàm prepare:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> collectionView <span class=\"token operator\">=</span> collectionView <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Tại lần đầu prepare cần set offsetX của collectionView = 10000</span>\n  <span class=\"token keyword\">if</span> isFirstTimePrepare <span class=\"token punctuation\">{</span>\n      offsetX <span class=\"token operator\">=</span> cycleStart\n      collectionView<span class=\"token punctuation\">.</span>contentOffset<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> cycleStart\n      isFirstTimePrepare <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Trường hợp collectionView.reloadData</span>\n  <span class=\"token keyword\">if</span> attributes<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">!=</span> numberOfItem <span class=\"token punctuation\">{</span>\n      attributes<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      leftArray<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      rightArray<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Tính số cell ở bên trái và bên phải cell đang được focus</span>\n  <span class=\"token keyword\">let</span> numberOfLeftItem <span class=\"token operator\">=</span> numberOfItem <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">:</span> numberOfItem <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">let</span> numberOfRightItem <span class=\"token operator\">=</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> numberOfLeftItem\n\n  <span class=\"token comment\">// Lấy IndexPath.item của các cell ở bên trái và bên phải cell đang được focus</span>\n  <span class=\"token keyword\">var</span> leadingRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> trailingRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> currentCellIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> currentCellIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">while</span> leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">&lt;</span> numberOfLeftItem <span class=\"token punctuation\">{</span>\n      leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n      i <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> j <span class=\"token operator\">=</span> currentCellIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">>=</span> numberOfItem <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> currentCellIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">while</span> trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">&lt;</span> numberOfRightItem <span class=\"token punctuation\">{</span>\n      trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span>\n      j <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> numberOfItem <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/*\n    + Nếu item nào chưa tồn tại trong leftArray ở lần change offset này thì cần được add vào additionalLeftArray để có thể thay đổi vị trí của cell đó\n    **/</span>\n  <span class=\"token keyword\">var</span> additionalLeftArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> leadingRightArray <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>leftArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          additionalLeftArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  leftArray <span class=\"token operator\">=</span> leadingRightArray\n\n  <span class=\"token comment\">/*\n  + Nếu item nào chưa tồn tại trong rightArray ở lần change offset này thì cần được add vào additionalRightArray để có thể thay đổi vị trí của cell đó\n  **/</span>\n  <span class=\"token keyword\">var</span> additionalRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> trailingRightArray <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>rightArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          additionalRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  rightArray <span class=\"token operator\">=</span> trailingRightArray\n\n  <span class=\"token keyword\">let</span> centerX <span class=\"token operator\">=</span> offsetX <span class=\"token operator\">+</span> collectionView<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n\n  <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> numberOfItem <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> indexPath <span class=\"token operator\">=</span> <span class=\"token function\">IndexPath</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">,</span> section<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> attr <span class=\"token operator\">=</span> <span class=\"token function\">CollectionViewLayoutAttributes</span><span class=\"token punctuation\">(</span>forCellWith<span class=\"token punctuation\">:</span> indexPath<span class=\"token punctuation\">)</span>\n      attr<span class=\"token punctuation\">.</span>isCenter <span class=\"token operator\">=</span> i <span class=\"token operator\">==</span> currentCellIndex\n\n      <span class=\"token keyword\">if</span> additionalLeftArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính khoảng cách từ minX của cell đến vị trí trung tâm, cách tính này sẽ dựa vào design</span>\n              <span class=\"token keyword\">var</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n              <span class=\"token keyword\">for</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> index <span class=\"token punctuation\">{</span>\n                  <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">+</span> itemSpacing\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> additionalRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính khoảng cách từ minX của cell đến vị trí trung tâm, cách tính này sẽ dựa vào design</span>\n              <span class=\"token keyword\">var</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n              <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> index <span class=\"token punctuation\">{</span>\n                  <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> index <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> itemSpacing\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">+</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> attributes<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>indexPath<span class=\"token punctuation\">.</span>item <span class=\"token operator\">==</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">first</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>frame <span class=\"token punctuation\">{</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> frame\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính vị trí của cell đang được focus</span>\n              <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> frame\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> attributes<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">where</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>indexPath<span class=\"token punctuation\">.</span>item <span class=\"token operator\">==</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          attributes<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>at<span class=\"token punctuation\">:</span> index<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      attributes<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>attr<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  contentWidth <span class=\"token operator\">=</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>numberOfItem <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> itemSpacing <span class=\"token operator\">+</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>numberOfItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> sizeCell<span class=\"token punctuation\">.</span>width\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nhìn vào hàm kia chắc hẳn mọi người cũng đã hiểu được một phần rồi nhỉ 😄, em sẽ giải thích một chút về những điểm đặc biệt sau:</p>\n<ol>\n<li>Tại sao lần đầu tiên prepare lại cần set offset của UICollectionView lên là 10000? Như mọi người cũng biết thì offset đầu tiên mặc định của UICollectionView là 0, cho nên nếu Cell thứ 0 là đang được focus thì các Cell ở bên trái nó sẽ có vị trí x &#x3C; 0, mà với UICollectionView thì các Cell ở vị trí x &#x3C; 0 sẽ không thể hiển thị lên được trên màn hình, vì lý do này nên phải set offset của UICollectionView lên là 10000</li>\n<li>Tại sao phải cần đến additionalLeftArray và additionalRightArray? Tại sao có những Cell được set lại frame mà nó đã có trong mảng attributes? Chắc hẳn mọi người nghĩ là mỗi khi change offset của UICollectionView thì sẽ chỉ cần tính toán lại vị trí của các Cell theo offset x mới của UICollectionView thôi, tuy nhiên nếu làm như vậy thì sẽ bị mất đi animation, vì lý do đó nên cách làm của em đó là mình chỉ tính lại vị trí của những Cell mà nó chưa có trong leftArray hoặc là rightArray mà thôi.</li>\n</ol>\n<p>OK, sau đó chúng ta chỉ cần trả về những kết quả đã tính toán được ở hàm prepare mà thôi.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForElements</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> attributes\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> attributes<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> collectionViewContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> contentWidth <span class=\"token operator\">*</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> collectionView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>height <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Về cơ bản là ta đã implement xong CollectionViewLayout cho việc tạo ra Carousel rồi, chỉ còn việc xử lý tích hợp nó vào UICollectionView thôi! Mà trong bài này em sẽ không nói chi tiết về những phần đấy. Cho nên là em sẽ để source code <a href=\"https://github.com/LaptrinhvaCuocsong/CarouselDemo\">tại đây</a> để mọi người có thể tham khảo.</p>\n<p>Em có capture video kết quả, mọi người có thể download file video <a href=\"https://github.com/LaptrinhvaCuocsong/CarouselDemo/tree/master/Video\">tại đây</a> nhé.</p>\n<p>Như vậy, em đã trình bày xong cách để tạo Carousel trong iOS với Swift. Nếu mọi người có cách nào khác thì hãy chia sẻ hoặc comment phía dưới nhé 😄.</p>\n<p>Happy reading!!!</p>\n<p>by Nguyen Manh Hung - Tomosia Viet Nam</p>","id":"d6b580a0-4611-58fa-b97c-bf059c218e18","frontmatter":{"title":"Build Carousel in iOS with Swift","date":"11-10-2020","tags":["swift","ios"]},"fields":{"slug":"/tao-carousel-trong-ios-voi-swift/","readingTime":{"text":"9 min read"}}}}]}},"pageContext":{"limit":10,"skip":30,"numPages":8,"currentPage":4}},"staticQueryHashes":["3963689063","63159454","81262063"]}